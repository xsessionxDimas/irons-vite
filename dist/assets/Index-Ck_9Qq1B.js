import{u as Ge}from"./vuex-BbOKrtVp.js";import{P as we}from"./Pagination-BiobnanQ.js";import{a as _e,c as z,J as Ke,I as ke,K as Ve,j as ge,A as We,y as Xe}from"./index-BuVmIl8K.js";import{I as Se,L as Je,a as Ye,b as Qe,c as Ze,d as Te,e as et,B as tt,U as at,f as st}from"./urls-Cljsxeb-.js";import{d as Ne}from"./pinia-BjOS2_Ao.js";import{L as ot}from"./urls-Cw3VyzI8.js";import{a as Oe,m as $e}from"./mapOption-CeGMwmH0.js";import{b as lt,c as rt}from"./urls-DI_NR_TT.js";import{e as nt}from"./lodash-DrHMlsdo.js";import{d as it}from"./table-sort-Bpdq_Uwn.js";import{F as ze}from"./file-saver-CwTBvle_.js";import{a as dt}from"./breadcrumb-BYmEOf4C.js";import{A as ut}from"./MetronicAlert-CahvwpSR.js";import{P as ct}from"./Pagination-D-xfdYmn.js";import{_ as Fe}from"./Icon.vue_vue_type_script_setup_true_lang-DE-yo5DI.js";import{k as ce,p,aa as L,s as t,B as te,c as y,r as A,q as O,x as a,R as I,aB as l,$ as T,F as B,bd as Ie,bb as Le,u as S,y as be,Y as xe,C as ee,bL as pt,A as oe,a0 as Ue,T as Re,b4 as mt,a7 as vt,L as ht,d as ft}from"./@vue-BypzYtbH.js";import{_ as pe}from"./nw-img-vue-CR837WER.js";import{_ as W,b as je}from"./element-plus-BeWdvTRa.js";import{c as Be,a as Q}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as Me}from"./ErrorAlert-CMKGfwAi.js";import{_ as qe}from"./SelectInput.vue_vue_type_script_setup_true_lang-CILKiK7F.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./vue-router-iNp9kJ0K.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";const gt=_e(),ve=gt.user,fe=Ne({id:"employeeList",state:()=>({stateFilterData:{employeeId:"",company:"",name:"",email:"",positionId:null,siteId:ve.isHO===1?"":ve.SiteId,vendorId:null,supervisorId:"",isActive:"",ver:"v1",page:1,pageSize:20},stateLastUsedFilterData:{employeeId:"",company:"",name:"",email:"",positionId:null,siteId:ve.isHO===1?"":ve.SiteId,vendorId:null,supervisorId:"",isActive:"",ver:"v1",page:1,pageSize:20},stateExportFilter:{company:"",name:"",email:"",positionId:null,siteId:ve.isHO===1?"":ve.SiteId,vendorId:null,supervisorId:"",status:!0},statePageName:"employee",stateDraftData:[],stateDisplayData:[],statePagination:new we,stateLoading:!1,statePaginationLoading:!1,stateCompanyOption:[],stateNameOption:[],stateAdAccountOption:[],stateEmailOption:[],statePhoneOption:[],stateGenderOption:[],statePositionOption:[],stateEmployeeCodeOption:[],stateLocationOption:[],stateDirectSupervisor:[],stateVendorOption:[],stateVendorOptionFilter:[],stateSearchValue:"",stateSelectedSites:[]}),getters:{pageName:e=>e.statePageName,pagination:e=>e.statePagination,displayData:e=>e.stateSearchValue?e.stateDisplayData.filter(i=>{var r,o,n,d,c,x,U;return((r=i.name)==null?void 0:r.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((o=i.company)==null?void 0:o.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((n=i.position)==null?void 0:n.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((d=i.email)==null?void 0:d.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((c=i.siteName)==null?void 0:c.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((x=i.vendor)==null?void 0:x.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))||((U=i.superiorName)==null?void 0:U.toLowerCase().includes(e.stateSearchValue.toLocaleLowerCase()))}):e.stateDisplayData,draftData:e=>e.stateDraftData,filteredSupervisors:e=>e.stateDirectSupervisor,filterData:e=>e.stateFilterData,lastUsedFilterData:e=>e.stateLastUsedFilterData,loading:e=>e.stateLoading,paginationLoading:e=>e.statePaginationLoading,employeeCodeOption:e=>e.stateEmployeeCodeOption,companyOption:e=>e.stateCompanyOption,nameOption:e=>e.stateNameOption,adAccountOption:e=>e.stateAdAccountOption,emailOption:e=>e.stateEmailOption,phoneOption:e=>e.statePhoneOption,genderOption:e=>e.stateGenderOption,positionOption:e=>e.statePositionOption,locationOption:e=>e.stateLocationOption},actions:{async getData(e=!0){this.stateLastUsedFilterData={...this.stateFilterData};const i={name:this.stateFilterData.name,company:this.stateFilterData.company,vendorId:this.stateFilterData.vendorId,siteId:this.stateFilterData.siteId,supervisorId:this.stateFilterData.supervisorId,positionId:this.stateFilterData.positionId,email:this.stateFilterData.email,status:this.stateFilterData.isActive===""?null:this.stateFilterData.isActive==="true",page:this.stateFilterData.page,pageSize:this.stateFilterData.pageSize},r=`ver=${this.stateFilterData.ver}`;try{e&&(this.stateLoading=!0),e||(this.stateDisplayData=[]);const o=await z.post(`${Se}?${new URLSearchParams(r).toString()}`,i);this.stateDisplayData=o.data.result.content.employeeList,this.stateDraftData=o.data.result.content.employeeDraftList,this.setTotalPage(o.data.result.content.totalData||0)}catch(o){console.error(o)}this.stateLoading=!1},async getLookup(){const e={ver:this.stateFilterData.ver};try{const i=await z.get(Je,"",new URLSearchParams(e).toString());this.stateEmployeeCodeOption=Oe(i.data.result.content,"emmployeeId","employeeName"),this.stateAdAccountOption=$e(i.data.result.content.adAccount),this.stateEmailOption=$e(i.data.result.content.email),this.statePhoneOption=$e(i.data.result.content.phone)}catch(i){console.log(i)}},async getLookupCompany(){const e={ver:this.stateFilterData.ver};try{const i=await z.get(ot,"",new URLSearchParams(e).toString());this.stateCompanyOption=Oe(i.data.result.content,"company","companyDescription")}catch(i){console.log(i)}},async getLookupLocation(){this.stateLocationOption=[];const e={ver:this.stateFilterData.ver};try{const r=(await z.get(lt,"",new URLSearchParams(e).toString())).data.result.content;this.stateLocationOption=[],r.forEach((o,n)=>{const d={value:o.siteId,label:o.siteDescription};this.stateLocationOption.push(d)})}catch(i){console.log(i)}},async getLookupGender(){const e={ver:this.stateFilterData.ver};try{const i=await z.get(Ye,"",new URLSearchParams(e).toString());this.stateGenderOption=Oe(i.data.result.content,"gender","genderDescription")}catch(i){console.log(i)}},async getLookupPosition(){try{const e={ver:this.stateFilterData.ver,company:""},r=(await z.get(`${rt}`,"",new URLSearchParams(e).toString())).data.result.content;this.statePositionOption=[],r.forEach(o=>{const n={value:o.positionId,label:o.position};this.statePositionOption.push(n)})}catch(e){console.log(e)}},async getLookupDirectSupervisor(e){this.stateDirectSupervisor=[];const i={siteId:e||""};try{const o=(await z.post(`${Qe}`,i)).data.result.content;this.stateDirectSupervisor=[],o.forEach(n=>{const d={value:n.employeeId,label:n.directSupervisorName};this.stateDirectSupervisor.push(d)})}catch(r){console.log(r)}},async getLookupVendor(){this.stateVendorOption=[],this.stateVendorOptionFilter=[];try{(await z.get(`${Ze}`)).data.result.content.forEach(r=>{const o={value:r.vendorId,label:r.vendorDescription};this.stateVendorOption.push(o),this.stateVendorOptionFilter.push(o)}),this.stateVendorOption.push({value:"other",label:"Add Another Vendor"})}catch(e){console.log(e)}},async export(){const e={ver:"v1"};this.stateExportFilter.company=this.stateFilterData.company,this.stateExportFilter.vendorId=this.stateFilterData.vendorId,this.stateExportFilter.positionId=this.stateFilterData.positionId,this.stateExportFilter.name=this.stateFilterData.name,this.stateExportFilter.email=this.stateFilterData.email,this.stateExportFilter.siteId=this.stateFilterData.siteId,this.stateExportFilter.supervisorId=this.stateFilterData.supervisorId,this.stateExportFilter.status=this.stateFilterData.isActive===""?null:this.stateFilterData.isActive==="true";try{return(await z.postBlob(`${Te}/false?${new URLSearchParams(e).toString()}`,this.stateExportFilter)).data}catch(i){console.log(i)}},async template(){const e={ver:"v1"};try{return(await z.postBlob(`${Te}/true?${new URLSearchParams(e).toString()}`,this.stateExportFilter)).data}catch(i){console.log(i)}},async setPage(e){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(e),this.statePagination.totalPageSize=this.stateFilterData.pageSize,this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!0),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setPageSize(e){this.statePaginationLoading=!0,this.stateFilterData.pageSize=e,this.statePagination.totalPageSize=this.stateFilterData.pageSize,this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!0),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setFilterData(e){this.stateLoading=!0,this.stateFilterData=e,await this.getData(!1)},setLastActiveFilter(e){this.stateFilterData=e},setTotalPage(e){this.pagination.totalPage=e,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},setEmployeeId(e){this.stateFilterData.employeeId=e},setCompany(e){this.stateFilterData.company=e},setName(e){this.stateFilterData.name=e},setEmail(e){this.stateFilterData.email=e},setRole(e){this.stateFilterData.positionId=e},setSiteName(e){this.stateFilterData.siteId=e},setSearchValue(e){this.stateSearchValue=e},setSelectedSites(e){this.stateSelectedSites=e},async resetFilter(){this.stateFilterData.employeeId="",this.stateFilterData.company="",this.stateFilterData.name="",this.stateFilterData.email="",this.stateFilterData.positionId=null,this.stateFilterData.supervisorId="",this.stateFilterData.siteId="";const e=this.stateLastUsedFilterData.employeeId!=="",i=this.stateLastUsedFilterData.company!=="",r=this.stateLastUsedFilterData.name!=="",o=this.stateLastUsedFilterData.email!=="",n=this.stateLastUsedFilterData.positionId!==null,d=this.stateLastUsedFilterData.supervisorId!=="",c=this.stateLastUsedFilterData.siteId!=="";(e||i||r||o||n||c||d)&&await this.getData()},async softResetFilter(){this.stateFilterData.employeeId="",this.stateFilterData.company="",this.stateFilterData.name="",this.stateFilterData.email="",this.stateFilterData.positionId=null,this.stateFilterData.siteId="",this.stateFilterData.supervisorId=""},resetState(){this.stateFilterData={employeeId:"",company:"",name:"",email:"",positionId:NaN,siteId:ve.isHO===1?"":ve.SiteId,vendorId:NaN,supervisorId:"",isActive:"",ver:"v1",page:1,pageSize:20},this.stateDisplayData=[],this.stateDirectSupervisor=[],this.statePagination=new we,this.stateLoading=!1,this.statePaginationLoading=!1,this.stateLocationOption=[]}}}),Ce=Ne({id:"employeeBulk",state:()=>({stateBulkPayload:{},stateBulkErrors:{totalItem:0,employeeList:[]},stateAlert:{show:!1,variant:"",desc:""},stateBulkPerformed:!1,statePagination:new we,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!0,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:e=>e.stateValidatedData,displayData:e=>e.stateDisplayData,pagination:e=>e.statePagination,bulkData:e=>e.stateBulkData,error:e=>e.stateError,isError:e=>e.stateIsError,alertVariant:e=>e.stateAlert.variant,alertDesc:e=>e.stateAlert.desc,loading:e=>e.stateLoading,uploadLoading:e=>e.stateUploadLoading,isUploaded:e=>e.stateIsUploaded,bulkErrors:e=>e.stateBulkErrors,testLoading:e=>e.stateUploadLoading},actions:{async bulkUpload(){this.stateLoading=!0;const e=new FormData;e.append("fileUpload",this.stateBulkPayload.fileUpload);try{const i=await z.post(`${et}`,e);if(i.data.statusCode==200)if(i.data.result.isError)this.stateIsError=!0,this.stateError=i.data.result.message;else{const r=i.data.result.content,o=r.totalData,d=r.employeeList.filter(x=>x.isValid===!1).length,c=o>1?"records":"record";d===0&&o===0?this.stateAlert={show:!0,variant:"info",desc:"No record has been submitted, please check your file"}:d===0&&o>0?this.stateAlert={show:!0,variant:"success",desc:`${o} of ${o} ${c} submitted successfully`}:d>0&&o>0&&(this.stateAlert={show:!0,variant:"warning",desc:`${d} of ${o} ${c} failed to submit`})}else this.stateAlert={show:!0,variant:"warning",desc:i.data.result.message},this.stateIsError=i.data.result.isError,this.stateError=i.data.result.message;this.stateLoading=!1}catch(i){console.log(i),this.stateLoading=!1,this.stateError=i,this.stateIsError=!0}},async bulkInsert(e){const i={userAccount:e,ver:"v1"};try{this.stateLoading=!0;const r=await z.post(`${tt}?${new URLSearchParams(i).toString()}`,this.stateBulkData);this.stateError=r.data.result.isError?r.data.result.message:"",this.stateIsError=r.data.result.isError}catch(r){console.log(r),this.stateError=r&&r.response.data.result.message,this.stateIsError=!0}this.stateLoading=!1},async upload({userAccount:e,excelFile:i}){const r={userAccount:e,ver:"v1"},o=`${at}?${new URLSearchParams(r).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const n=await z.postImages(o,i);n.data.statusCode==200?n.data.result.content?(this.setIsUploadedState(!0),this.stateValidatedData=n.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=nt.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=!0,this.stateError=n.data.result.message):(this.stateIsError=n.data.result.isError,this.stateError=n.data.result.message)}catch(n){this.stateIsError=!0,this.stateError=n&&n.response.data.result.message}this.stateUploadLoading=!1},setTotalPage(e){this.pagination.totalPage=e},setDisplayData(){let e=[...this.stateValidatedData];this.stateIsSort&&(e=e.sort(it(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=e.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(e){this.statePagination.handleCurrentPageChange(e),this.setDisplayData()},setSort(e){this.stateIsSort=e.prop!==null,this.stateSortBy=e.prop,this.stateSortOrder=e.order,this.setPage(1)},setBulkData(e){this.stateBulkData=e},setIsUploadedState(e){this.stateIsUploaded=e},resetState(){this.stateBulkPayload={},this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new we,this.stateBulkPerformed=!1,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),ye=Ne({id:"employeeForm",state:()=>({stateFormData:{employeeId:"",company:"BUMA AU",profileUrl:"",isActive:!0},stateFormDraftData:{employeeCode:"",profileUrl:"",isActive:!0},stateImageData:{request:new File([],"")},stateUploadedImageData:{},stateSelectedSites:[],stateDraftSelectedSites:[],stateUploadedUrl:"",stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateLoadingMessage:""}),getters:{formData:e=>e.stateFormData,formDraftData:e=>e.stateFormDraftData,formImageData:e=>e.stateImageData,error:e=>e.stateError,errors:e=>e.stateErrors,isError:e=>e.stateIsError,loading:e=>e.stateLoading,selectedSites:e=>e.stateSelectedSites},actions:{async insertData(e){var i,r;try{this.stateLoading=!0,this.stateFormData.profileUrl=e;const o={ver:"v1"},n=[this.stateFormData],d=await z.post(`${Se}/upsert?${new URLSearchParams(o).toString()}`,n);d.data.title!=="Error"?d.data.result.isError?(this.stateErrors.push((r=(i=d.data.result.content)==null?void 0:i.employeeList[0])==null?void 0:r.validationReason),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1):(this.stateErrors.push(d.data.result.message),this.stateIsError=!0)}catch(o){this.stateError=o.response.data.result.message,this.stateErrors.push(o&&o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateDraft(e){var i,r;try{this.stateLoading=!0,this.stateFormDraftData.profileUrl=e;const o=[this.stateFormDraftData],n=await z.post(`${Se}/upsert?ver=v1`,o);n.data.title!=="Error"?n.data.result.isError?(this.stateErrors.push((r=(i=n.data.result.content)==null?void 0:i.employeeList[0])==null?void 0:r.validationReason),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1):(this.stateErrors.push(n.data.result.message),this.stateIsError=!0)}catch(o){this.stateErrors.push(o&&o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async deleteDraft(e){try{this.stateLoading=!0;const i=[{employeeDraftId:e}],r=await z.post(`${Se}/delete_draft?ver=v1`,i);r.data.title!=="Error"?r.data.result.isError?(this.stateErrors.push("Failed to delete draft"),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1):(this.stateErrors.push(r.data.result.message),this.stateIsError=!0)}catch(i){this.stateErrors.push(i&&i.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async deleteBulkDraft(e){const i=new URLSearchParams({ver:"v1"}).toString();this.stateLoading=!0,this.stateLoadingMessage="Removing Data";try{return(await z.post(`${Se}/delete_draft?${i}`,e)).data}catch(r){console.log(r)}finally{this.stateLoading=!1,this.stateLoadingMessage=""}},async uploadImage(){this.stateLoading;const e=new FormData;e.append("request",this.stateImageData.request);try{const i=await z.post(`${st}?ver=v1&type=jpeg`,e);i.data.title==="Error"?(this.stateErrors.push(i.data.result.message),this.stateIsError=!0):(this.stateUploadedImageData=i.data.result.content,this.stateError="",this.stateIsError=!1)}catch(i){this.stateErrors.push(i&&i.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(e){this.stateErrors=e,this.stateIsError=this.stateErrors.length>0},setFormData(e){this.stateFormData.employeeId=e.employeeId||"",this.stateFormData.name=e.name||"",this.stateFormData.position=e.position||"",this.stateFormData.vendor=e.vendor||"",this.stateFormData.supervisor=e.supervisor||"",this.stateFormData.company=e.company||"",this.stateFormData.email=e.email||"",this.stateFormData.isActive=e.isActive||!1,this.stateFormData.siteName=e.siteName,this.stateFormData.employeeCode=e.employeeCode},setFormDraft(e){this.stateFormDraftData.employeeCode=e.employeeId,this.stateFormDraftData.name=e.name,this.stateFormDraftData.company=e.company,this.stateFormDraftData.email=e.email,this.stateFormDraftData.position=e.position,this.stateFormDraftData.siteName=e.siteName,this.stateFormDraftData.employeeDraftId=e.employeeDraftId,this.stateFormDraftData.supervisor=e.superiorName,this.stateFormDraftData.profileUrl=e.profileUrl},resetState(){this.stateFormData={company:"BUMA AU",employeeId:"",isActive:!0},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),bt=ce({__name:"DownloadButton",emits:["handleDownload"],setup(e,{emit:i}){const r=i,o=()=>{r("handleDownload")};return(n,d)=>(p(),L("button",{class:"d-flex gap-2 align-items-center btn btn-btech-outline px-4 py-2",onClick:o},[t(Fe,{name:"download",size:"24"}),te(" Export ")]))}}),_t=pe(bt,[["__scopeId","data-v-2f38ec6a"]]),He=e=>(Ie("data-v-b943fc1e"),e=e(),Le(),e),yt={class:"p-2 d-flex flex-column gap-8"},Dt=He(()=>l("section",null,[l("p",{class:"m-0 popover-title"},"Filters")],-1)),St={class:"d-flex flex-column gap-8"},It=He(()=>l("span",null,"Name",-1)),Lt=He(()=>l("span",null,"Email",-1)),Et=ce({__name:"FilterButton",emits:["applyFilter"],setup(e,{expose:i,emit:r}){const o=fe(),n=_e(),d=y(()=>n.user),c=A({employeeId:"",company:"",name:"",email:"",positionId:null,siteId:d.value.isHO===1?"":d.value.Location,vendorId:null,supervisorId:"",isActive:"",ver:"v1",page:1,pageSize:20});i({data:c});const x=A([{value:"BUMA AU",label:"BUMA AU"},{value:"EXTERNAL",label:"EXTERNAL"}]),U=A([{value:"",label:"All"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]),P=A([{value:"Serviceman",label:"Serviceman"}]),_=y(()=>c.value.company.toLocaleLowerCase()==="external"?P.value:o.statePositionOption),$=y(()=>{if(d.value.isHO===1)return o.stateLocationOption;{const K=[];return K.push({label:d.value.Location,value:d.value.SiteId}),K}}),N=y(()=>o.stateVendorOptionFilter),s=y(()=>o.stateDirectSupervisor),b=A(!1),g=K=>{c.value.supervisorId="",o.getLookupDirectSupervisor(K),c.value.siteId=K},w=()=>{o.getLookupLocation(),c.value.siteId=d.value.isHO===0?d.value.SiteId:o.stateLastUsedFilterData.siteId,c.value.company=o.stateLastUsedFilterData.company,c.value.vendorId=o.stateLastUsedFilterData.vendorId,c.value.positionId=o.stateLastUsedFilterData.positionId,c.value.supervisorId=o.stateLastUsedFilterData.supervisorId,c.value.email=o.stateLastUsedFilterData.email,c.value.name=o.stateLastUsedFilterData.name,c.value.isActive=o.stateLastUsedFilterData.isActive,b.value=!b.value},ae=()=>{c.value.siteId=d.value.isHO===0?d.value.SiteId:o.stateLastUsedFilterData.siteId,c.value.company=o.stateLastUsedFilterData.company,c.value.vendorId=o.stateLastUsedFilterData.vendorId,c.value.positionId=o.stateLastUsedFilterData.positionId,c.value.supervisorId=o.stateLastUsedFilterData.supervisorId,c.value.email=o.stateLastUsedFilterData.email,c.value.name=o.stateLastUsedFilterData.name,c.value.isActive=o.stateLastUsedFilterData.isActive,b.value=!b.value},M=r,Y=()=>{M("applyFilter",c)},q=()=>{o.getLookupDirectSupervisor(d.value.isHO===0?d.value.Location:""),c.value.company="",c.value.vendorId=null,c.value.positionId=null,c.value.supervisorId="",c.value.siteId=d.value.isHO===0?d.value.SiteId:"",c.value.email="",c.value.name="",c.value.isActive=""};return(K,V)=>{const H=I("el-input"),X=I("el-form-item"),j=I("el-option"),G=I("el-select"),se=I("el-form"),le=I("el-popover");return p(),O(le,{placement:"bottom",width:360,trigger:"click",visible:b.value},{reference:a(()=>[l("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md m-0",onClick:w},[t(Fe,{name:"filter",size:"24"}),te(" Filter ")])]),default:a(()=>[l("div",yt,[Dt,l("section",St,[t(se,{"label-position":"top",class:"ironlake-form d-flex flex-column gap-6"},{default:a(()=>[t(X,null,{label:a(()=>[It]),default:a(()=>[t(H,{modelValue:c.value.name,"onUpdate:modelValue":V[0]||(V[0]=h=>c.value.name=h),placeholder:"Name",onInput:V[1]||(V[1]=h=>c.value.name=h)},null,8,["modelValue"])]),_:1}),t(X,{label:"Position"},{default:a(()=>[t(G,{modelValue:c.value.positionId,"onUpdate:modelValue":V[2]||(V[2]=h=>c.value.positionId=h),placeholder:"Select Position",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(_.value,h=>(p(),O(j,{key:h.value,label:h.label!==""?h.label:" ",value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(X,{label:"Company"},{default:a(()=>[t(G,{modelValue:c.value.company,"onUpdate:modelValue":V[3]||(V[3]=h=>c.value.company=h),placeholder:"Select Company",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(x.value,h=>(p(),O(j,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(X,{label:"Site"},{default:a(()=>[t(G,{modelValue:c.value.siteId,"onUpdate:modelValue":V[4]||(V[4]=h=>c.value.siteId=h),placeholder:"Select Site",clearable:"",filterable:"",disabled:d.value.isHO===0,onChange:g},{default:a(()=>[(p(!0),L(B,null,T($.value,h=>(p(),O(j,{key:h.value,label:h.label!==""?h.label:" ",value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),t(X,{label:"Vendor"},{default:a(()=>[t(G,{modelValue:c.value.vendorId,"onUpdate:modelValue":V[5]||(V[5]=h=>c.value.vendorId=h),placeholder:"Select Vendor",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(N.value,h=>(p(),O(j,{key:h.value,label:h.label!==""?h.label:" ",value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(X,{label:"Supervisor"},{default:a(()=>[t(G,{modelValue:c.value.supervisorId,"onUpdate:modelValue":V[6]||(V[6]=h=>c.value.supervisorId=h),placeholder:"Select Supervisor",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(s.value,h=>(p(),O(j,{key:h.value,label:h.label!==""?h.label:" ",value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(X,null,{label:a(()=>[Lt]),default:a(()=>[t(H,{modelValue:c.value.email,"onUpdate:modelValue":V[7]||(V[7]=h=>c.value.email=h),placeholder:"Email",onInput:V[8]||(V[8]=h=>c.value.email=h)},null,8,["modelValue"])]),_:1}),t(X,{label:"Status"},{default:a(()=>[t(G,{modelValue:c.value.isActive,"onUpdate:modelValue":V[9]||(V[9]=h=>c.value.isActive=h),placeholder:"Select Status",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(U.value,h=>(p(),O(j,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),l("section",{class:"d-flex justify-content-end gap-3"},[l("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md me-auto",onClick:q}," Reset "),l("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md",onClick:ae}," Close "),l("button",{class:"btn btn-btech-secondary btech-md",onClick:Y}," Apply ")])])]),_:1},8,["visible"])}}}),wt=pe(Et,[["__scopeId","data-v-b943fc1e"]]),Vt={key:0,style:{height:"100px"}},Ft={class:"row"},kt={class:"text-name"},Ut={class:"text-black"},Ct={class:"text-email"},At={key:0,class:"d-flex justify-content-center"},Pt={class:"badge badge-circle badge-success mx-auto rounded-badge-success"},Ot={key:1,class:"d-flex justify-content-center"},$t={class:"badge badge-circle badge-success mx-auto rounded-badge-error"},Nt={class:"row justify-content-center"},xt=["onClick"],Rt=ce({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(e,{emit:i}){const r=e,o=fe(),n=ye(),d=i,c=A({}),x=_=>{c.value=_.order},U=(_,$)=>{const N=_.toLowerCase(),s=$.toLowerCase();return N===null?1:s===null?-1:N===null&&s===null?0:N.localeCompare(s)},P=_=>{const $={employeeId:_.employeeId,company:_.company,name:_.name,profileUrl:_.profileUrl,email:_.email,position:_.position,siteName:_.siteName,vendor:_.vendor,supervisor:_.superiorName,isActive:_.isActive,employeeCode:_.employeeCode};o.getLookupPosition(),n.setFormData($),d("show-dialog",null)};return(_,$)=>{const N=I("inline-svg"),s=I("el-tooltip"),b=xe("loading");return S(o).loading?be((p(),L("div",Vt,null,512)),[[b,S(o).loading]]):be((p(),O(S(je),{key:1,data:r.listData,"table-layout":"fixed",onSortChange:x,style:{width:"100%"},"header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell","empty-text":"No Data"},{default:a(()=>[t(S(W),{"min-width":"250",prop:"name",label:"Full Name",align:"left",sortable:"","sort-orders":["ascending","descending"],"sort-method":_.sortName},{default:a(g=>[l("div",Ft,[l("div",null,[l("div",kt,ee(g.row.name),1),l("div",Ut,ee(g.row.position),1)])])]),_:1},8,["sort-method"]),t(S(W),{prop:"company",label:"Company",width:"178",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.company,w.company)},null,8,["sort-method"]),t(S(W),{prop:"siteName",label:"Site Name",width:"178",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.siteName,w.siteName)},null,8,["sort-method"]),t(S(W),{prop:"vendor",label:"Vendor",width:"178",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.vendor,w.vendor)},null,8,["sort-method"]),t(S(W),{prop:"superiorName",label:"Supervisor",width:"178",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.superiorName,w.superiorName)},null,8,["sort-method"]),t(S(W),{prop:"email",label:"Email","min-width":"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.email,w.email)},{default:a(g=>[l("div",Ct,ee(g.row.email),1)]),_:1},8,["sort-method"]),t(S(W),{prop:"isActive",label:"Status",width:"100",align:"center",sortable:"","sort-orders":["ascending","descending"],"sort-method":(g,w)=>U(g.isActive.toString(),w.isActive.toString())},{default:a(g=>[g.row.isActive?(p(),L("div",At,[l("div",Pt,[t(N,{src:"/media/svg/tables/rows/check-light.svg"})])])):(p(),L("div",Ot,[l("div",$t,[t(N,{src:"/media/svg/tables/rows/valid-false-light.svg"})])]))]),_:1},8,["sort-method"]),t(S(W),{label:"Action",width:"80",align:"center",fixed:"right"},{default:a(g=>[l("div",Nt,[l("div",null,[t(s,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:a(()=>[l("span",{onClick:w=>P(g.row),class:"svg-icon svg-icon-btech-secondary-500 d-inline-block m-0 cursor-pointer"},[t(N,{src:"/media/svg/tables/rows/mode-edit-round.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,xt)]),_:2},1024)])])]),_:1})]),_:1},8,["data"])),[[b,S(o).loading]])}}}),Bt=pe(Rt,[["__scopeId","data-v-7cea2f89"]]),Mt={key:0,class:"d-flex justify-content-end"},qt={class:"svg-icon svg-icon-btech-danger-500 d-inline-block mr-2"},Ht={key:1,style:{height:"100px"}},Tt={class:"row"},zt={class:"d-flex gap-4 align-items-center"},Kt=["onClick"],jt={class:"text-name"},Gt={class:"text-email"},Wt={class:"text-email"},Xt={class:"d-flex justify-content-end align-items-center gap-6"},Jt=["onClick"],Yt=["onClick"],Qt=ce({__name:"DraftGrid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","show-errors","delete-draft"],setup(e,{emit:i}){const r=e,o=fe(),n=ye(),d=i;pt(()=>(r.page-1)*20+1);const c=A(""),x=b=>{c.value=b.order;const g={prop:b.prop,order:b.order};o.setSort(g)},U=b=>{n.setFormDraft(b),d("show-dialog",null)},P=b=>{const g={name:b.name,errors:b.validationReason};d("show-errors",g)},_=b=>{d("delete-draft",b)},$=A([]),N=b=>{$.value=b.map(g=>({employeeDraftId:g.employeeDraftId}))},s=()=>{Ke("Remove all selected records from Need Review?","Remove").then(async b=>{b.isConfirmed&&await n.deleteBulkDraft($.value).then(()=>{o.setPage(1),ke("Records have been successfully deleted!","Ok"),$.value=[]})})};return(b,g)=>{const w=I("inline-svg"),ae=I("el-button"),M=I("el-tooltip"),Y=xe("loading");return p(),L(B,null,[$.value.length>0?(p(),L("section",Mt,[t(ae,{class:"btn btn-outline btn-outline-btech-danger btn-active-light-btech-danger btech-md mb-4",onClick:s},{default:a(()=>[l("span",qt,[t(w,{src:"/media/icons/bumaau/delete.svg",style:{width:"1.25rem",height:"1.25rem"}})]),te(" Delete ("+ee($.value.length)+") ",1)]),_:1})])):oe("",!0),S(o).loading?be((p(),L("div",Ht,null,512)),[[Y,S(o).loading]]):be((p(),O(S(je),{key:2,data:r.listData,style:{width:"100%"},"max-height":400,"table-layout":"fixed",onSortChange:x,"header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell","empty-text":"No Data",onSelect:N,onSelectAll:N},{default:a(()=>[t(S(W),{label:"Full Name",align:"left",prop:"name","min-width":"250"},{default:a(q=>[l("div",Tt,[l("div",zt,[l("div",null,[t(M,{class:"box-item",effect:"dark",content:"Click to see errors.",placement:"top"},{default:a(()=>[l("span",{class:"svg-icon svg-icon-btech-danger-500 me-1",style:{cursor:"pointer"},onClick:K=>P(q.row)},[t(w,{src:"/media/icons/bumaau/info.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,Kt)]),_:2},1024)]),l("div",jt,ee(q.row.name),1)])])]),_:1}),t(S(W),{width:"178",prop:"company",label:"Company"}),t(S(W),{width:"178",prop:"position",label:"Position"}),t(S(W),{width:"178",prop:"siteName",label:"Site Name"},{default:a(q=>[l("div",Gt,ee(q.row.siteName),1)]),_:1}),t(S(W),{width:"178",prop:"vendor",label:"Vendor"}),t(S(W),{prop:"superiorName",label:"Supervisor",width:"178"}),t(S(W),{"min-width":"200",label:"Email"},{default:a(q=>[l("div",Wt,ee(q.row.email),1)]),_:1}),t(S(W),{label:"Action",width:"80",align:"center",fixed:"right"},{default:a(q=>[l("div",Xt,[t(M,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:a(()=>[l("span",{onClick:K=>U(q.row),class:"svg-icon svg-icon-btech-secondary-500 d-inline-block m-0 cursor-pointer"},[t(w,{src:"/media/svg/tables/rows/mode-edit-round.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,Jt)]),_:2},1024),t(M,{class:"box-item",effect:"dark",content:"Delete",placement:"top"},{default:a(()=>[l("span",{onClick:K=>_(q.row),class:"svg-icon svg-icon-btech-danger-500 d-inline-block m-0 cursor-pointer"},[t(w,{src:"/media/icons/bumaau/delete.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,Yt)]),_:2},1024)])]),_:1}),t(S(W),{type:"selection",fixed:"right",width:"40",align:"center","header-align":"center"})]),_:1},8,["data"])),[[Y,S(o).loading]])],64)}}}),Zt=pe(Qt,[["__scopeId","data-v-9f8c97b1"]]),Ee=e=>(Ie("data-v-c00829b9"),e=e(),Le(),e),ea={class:"col-12 fv-row fv-plugins-icon-container"},ta=Ee(()=>l("span",{class:"required"},"Full Name",-1)),aa={class:"col-12 fv-row fv-plugins-icon-container"},sa=Ee(()=>l("span",{class:"required"},"Position",-1)),oa={class:"col-12 fv-row fv-plugins-icon-container"},la={key:0,class:"col-12 fv-row fv-plugins-icon-container"},ra={key:1,class:"col-12 fv-row fv-plugins-icon-container"},na=Ee(()=>l("span",{class:"required"},"Custom Vendor",-1)),ia={class:"col-12 fv-row fv-plugins-icon-container"},da=Ee(()=>l("span",{class:"required"},"Site",-1)),ua={class:"col-12 fv-row fv-plugins-icon-container"},ca={class:"col-12 fv-row fv-plugins-icon-container"},pa={class:"col-12 fv-row fv-plugins-icon-container"},ma=Ee(()=>l("span",null,"Employee ID",-1)),va={class:"dialog-footer"},ha=ce({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close","input"],setup(e,{emit:i}){const r=e,o=i,n=ye(),d=fe(),c=Ce(),x=_e();A();const U=A(),P=A(""),_=A(!1),$=A([{value:"BUMA AU",label:"BUMA AU"},{value:"EXTERNAL",label:"EXTERNAL"}]),N=Ue(r,"visibility"),s=y(()=>n.formData);y(()=>n.formImageData);const b=y(()=>x.user),g=y(()=>n.errors),w=y(()=>n.isError),ae=y(()=>{if(b.value.isHO===1)return d.stateLocationOption;{const u=[];return u.push({label:b.value.Location,value:b.value.SiteId}),u}}),M=y(()=>d.stateDirectSupervisor),Y=y(()=>d.stateVendorOption),q=y(()=>d.statePositionOption),K=Be().shape({company:Q().required("Company is mandatory"),name:Q().min(3,u=>`Minimum length of Full Name is ${u.min} characters.`).required("Name is mandatory"),position:Q().required("Position is mandatory"),siteName:Q().required("Site is mandatory"),isActive:Q().required("Status is mandatory")}),V=()=>{X(""),j("BUMA AU"),G(""),se(""),ie(""),me(""),le(""),ne(""),ue(),h(""),de("")},H=(u=!1)=>{C(),V(),o("handle-close",u)},X=u=>{s.value.employeeId=u},j=u=>{s.value.company=u},G=u=>{s.value.name=u},se=u=>{s.value.email=u},le=u=>{u.toLocaleLowerCase()==="add another vendor"?(_.value=!0,s.value.vendor="Add Another Vendor"):(_.value=!1,s.value.vendor=u)},h=u=>{P.value=u},ie=u=>{s.value.supervisor=u},me=u=>{s.value.position=u},ne=u=>{s.value.employeeCode=u},de=u=>{if(ie(""),u!==""){const m=d.stateLocationOption.filter(R=>R.label.includes(s.value.siteName));d.getLookupDirectSupervisor(m[0].value)}else d.getLookupDirectSupervisor(b.value.isHO!==1?b.value.SiteId:"");s.value.siteName=u},ue=()=>{U.value="",o("input",{})},F=async()=>{C(),c.stateAlert.show=!1,n.stateLoadingMessage="Submitting Data",await K.validate(s.value,{abortEarly:!1}).catch(u=>{n.setErrors(u.errors)}),!w.value&&(U.value?n.uploadImage().then(()=>{n.isError?ge("Failed to Submit","","Ok"):n.insertData(n.stateUploadedImageData.url).then(()=>{n.isError||Ve("Record has been submitted successfully","","Ok").then(()=>{H(!0)})})}):(_.value&&(s.value.vendor=P.value),n.insertData("").then(()=>{n.isError?ge("Failed to Submit","","Ok"):ke("Record has been submitted successfully","Ok").then(()=>{H(!0)})})))},C=()=>{n.setErrors([])};return(u,m)=>{const R=I("el-input"),v=I("el-form-item"),D=I("el-option"),J=I("el-select"),he=I("el-form"),Z=I("el-button"),E=I("el-dialog");return p(),O(E,{modelValue:N.value,"onUpdate:modelValue":m[9]||(m[9]=re=>N.value=re),title:"Add New Employee",width:500,"close-on-click-modal":!1,"show-close":!1,onClose:m[10]||(m[10]=re=>H())},{footer:a(()=>[l("span",va,[t(Z,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary",onClick:m[8]||(m[8]=re=>H()),disabled:S(n).loading},{default:a(()=>[te("Cancel")]),_:1},8,["disabled"]),t(Z,{class:"btn btn-btech-secondary",onClick:F,disabled:S(n).loading},{default:a(()=>[te("Submit")]),_:1},8,["disabled"])])]),default:a(()=>[t(Re,{name:"fade"},{default:a(()=>[w.value?(p(),O(Me,{key:0,errorMessages:g.value,onResetForm:C},null,8,["errorMessages"])):oe("",!0)]),_:1}),t(he,{class:"row g-4 my-4","label-position":"top"},{default:a(()=>{var re;return[l("div",ea,[t(v,{class:"m-0"},{label:a(()=>[ta]),default:a(()=>[t(R,{modelValue:s.value.name,"onUpdate:modelValue":m[0]||(m[0]=f=>s.value.name=f),placeholder:"Write Employee Name",onInput:G},null,8,["modelValue"])]),_:1})]),l("div",aa,[t(v,null,{label:a(()=>[sa]),default:a(()=>[t(J,{class:"w-100",modelValue:s.value.position,"onUpdate:modelValue":m[1]||(m[1]=f=>s.value.position=f),placeholder:"Select employee position",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(q.value,f=>(p(),O(D,{key:f.value,label:f.label,value:f.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",oa,[t(qe,{margin:!1,class:"m-0",options:$.value,value:s.value.company,name:"Company",label:"Company",placeholder:"Select company",required:"",onHandleChange:j},null,8,["options","value"])]),((re=s.value.company)==null?void 0:re.toString().toLocaleLowerCase())==="external"?(p(),L("div",la,[t(v,{label:"Vendor"},{default:a(()=>[t(J,{class:"w-100",modelValue:s.value.vendor,"onUpdate:modelValue":m[2]||(m[2]=f=>s.value.vendor=f),placeholder:"Select vendor",clearable:"",filterable:"",onChange:le},{default:a(()=>[(p(!0),L(B,null,T(Y.value,f=>(p(),O(D,{key:f.value,label:f.label,value:f.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])):oe("",!0),_.value?(p(),L("div",ra,[t(v,{class:"m-0"},{label:a(()=>[na]),default:a(()=>[t(R,{modelValue:P.value,"onUpdate:modelValue":m[3]||(m[3]=f=>P.value=f),placeholder:"Write custom vendor",onInput:h},null,8,["modelValue"])]),_:1})])):oe("",!0),l("div",ia,[t(v,null,{label:a(()=>[da]),default:a(()=>[t(J,{class:"w-100",modelValue:s.value.siteName,"onUpdate:modelValue":m[4]||(m[4]=f=>s.value.siteName=f),placeholder:"Site",disabled:b.value.isHO!==1,clearable:"",filterable:"",onChange:de},{default:a(()=>[(p(!0),L(B,null,T(ae.value,f=>(p(),O(D,{key:f.value,label:f.label,value:f.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),l("div",ua,[t(v,{label:"Supervisor"},{default:a(()=>[t(J,{class:"w-100",modelValue:s.value.supervisor,"onUpdate:modelValue":m[5]||(m[5]=f=>s.value.supervisor=f),placeholder:"Select supervisor",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(M.value,f=>(p(),O(D,{key:f.value,label:f.label,value:f.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",ca,[t(v,{class:"m-0"},{label:a(()=>[l("span",null,ee(s.value.company==="BUMA AU"?"BUMA AU Email":"Email"),1)]),default:a(()=>[t(R,{modelValue:s.value.email,"onUpdate:modelValue":m[6]||(m[6]=f=>s.value.email=f),placeholder:`Write ${s.value.company==="BUMA AU"?"BUMA AU ":"Employee "}Email`,onInput:se},null,8,["modelValue","placeholder"])]),_:1})]),l("div",pa,[t(v,{class:"m-0"},{label:a(()=>[ma]),default:a(()=>[t(R,{modelValue:s.value.employeeCode,"onUpdate:modelValue":m[7]||(m[7]=f=>s.value.employeeCode=f),placeholder:"Write Employee ID",onInput:ne},null,8,["modelValue"])]),_:1})])]}),_:1})]),_:1},8,["modelValue"])}}}),fa=pe(ha,[["__scopeId","data-v-c00829b9"]]),De=e=>(Ie("data-v-54888975"),e=e(),Le(),e),ga={class:"col-12 fv-row fv-plugins-icon-container"},ba=De(()=>l("span",{class:"required"},"Full Name",-1)),_a={class:"col-12 fv-row fv-plugins-icon-container"},ya=De(()=>l("span",{class:"required"},"Position",-1)),Da={class:"col-12 fv-row fv-plugins-icon-container"},Sa={key:0,class:"col-12 fv-row fv-plugins-icon-container"},Ia={key:1,class:"col-12 fv-row fv-plugins-icon-container"},La=De(()=>l("span",{class:"required"},"Custom Vendor",-1)),Ea={class:"col-12 fv-row fv-plugins-icon-container"},wa=De(()=>l("span",{class:"required"},"Site",-1)),Va={class:"col-12 fv-row fv-plugins-icon-container"},Fa={class:"col-12 fv-row fv-plugins-icon-container"},ka={class:"col-12 fv-row fv-plugins-icon-container"},Ua=De(()=>l("span",null,"Employee ID",-1)),Ca={class:"col-12 fv-row fv-plugins-icon-container"},Aa={class:"align-items-center fv-row"},Pa=De(()=>l("label",{class:mt("form-label fs-6 fw-bolder")},[te("Status "),l("span",{class:"text-danger"},"*")],-1)),Oa={class:"d-flex align-items-center justify-content-between form-control form-control-lg"},$a={class:"dialog-footer"},Na=ce({__name:"FormEdit",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close","input"],setup(e,{emit:i}){const r=e,o=i,n=ye(),d=fe(),c=Ce(),x=_e();A();const U=A(),P=A(""),_=A(!1);A([{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]);const $=A([{value:"BUMA AU",label:"BUMA AU"},{value:"EXTERNAL",label:"EXTERNAL"}]),N=Ue(r,"visibility"),s=y(()=>n.formData);y(()=>n.formImageData);const b=y(()=>x.user);y(()=>s.value.isActive?"Active":"Inactive");const g=y(()=>n.errors),w=y(()=>n.isError),ae=y(()=>d.stateDirectSupervisor),M=y(()=>d.stateLocationOption),Y=y(()=>d.stateVendorOption),q=y(()=>d.statePositionOption),K=Be().shape({company:Q().required("Company is mandatory"),name:Q().min(3,u=>{`${u.min}`}).required("Name is mandatory"),position:Q().required("Position is mandatory"),siteName:Q().required("Site is mandatory"),isActive:Q().required("Status is mandatory")}),V=()=>{X(""),j("BUMA AU"),G(""),h(""),se(""),ie(""),me(""),ne(""),de("")},H=(u=!1)=>{C(),V(),o("handle-close",u)},X=u=>{s.value.employeeId=u},j=u=>{s.value.company=u},G=u=>{s.value.name=u},se=u=>{s.value.email=u},le=u=>{s.value.isActive=u},h=u=>{s.value.supervisor=u},ie=u=>{s.value.position=u},me=u=>{u.toLocaleLowerCase()==="add another vendor"?(_.value=!0,s.value.vendor="Add Another Vendor"):(_.value=!1,s.value.vendor=u)},ne=u=>{P.value=u},de=u=>{if(h(""),u!==""){const m=d.stateLocationOption.filter(R=>R.label.includes(s.value.siteName));d.getLookupDirectSupervisor(m[0].value)}else d.getLookupDirectSupervisor(b.value.isHO!==1?b.value.SiteId:"");s.value.siteName=u},ue=u=>{s.value.employeeCode=u},F=async()=>{C(),c.stateAlert.show=!1,n.stateLoadingMessage="Submitting Data",await K.validate(s.value,{abortEarly:!1}).catch(u=>{n.setErrors(u.errors)}),!w.value&&(U.value?n.uploadImage().then(()=>{n.isError?ge("Failed to Submit","","Ok"):n.insertData(n.stateUploadedImageData.url).then(()=>{n.isError||ke("Record has been submitted successfully","Ok").then(()=>{H(!0)})})}):(_.value&&(s.value.vendor=P.value),n.insertData("").then(()=>{n.isError?ge("Failed to Submit","","Ok"):Ve("Record has been submitted successfully","","Ok").then(()=>{H(!0)})})))},C=()=>{n.setErrors([])};return(u,m)=>{const R=I("el-input"),v=I("el-form-item"),D=I("el-option"),J=I("el-select"),he=I("el-switch"),Z=I("el-form"),E=I("el-button"),re=I("el-dialog");return p(),O(re,{modelValue:N.value,"onUpdate:modelValue":m[10]||(m[10]=f=>N.value=f),title:"Edit Employee",width:500,"close-on-click-modal":!1,"show-close":!1,onClose:m[11]||(m[11]=f=>H())},{footer:a(()=>[l("span",$a,[t(E,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary",onClick:m[9]||(m[9]=f=>H()),disabled:S(n).loading},{default:a(()=>[te("Cancel")]),_:1},8,["disabled"]),t(E,{class:"btn btn-btech-secondary",onClick:F,disabled:S(n).loading},{default:a(()=>[te("Submit")]),_:1},8,["disabled"])])]),default:a(()=>[t(Re,{name:"fade"},{default:a(()=>[w.value?(p(),O(Me,{key:0,errorMessages:g.value,onResetForm:C},null,8,["errorMessages"])):oe("",!0)]),_:1}),t(Z,{class:"row g-4 my-4","label-position":"top"},{default:a(()=>{var f;return[l("div",ga,[t(v,{class:"m-0"},{label:a(()=>[ba]),default:a(()=>[t(R,{modelValue:s.value.name,"onUpdate:modelValue":m[0]||(m[0]=k=>s.value.name=k),disabled:"",placeholder:"Write employee name",onInput:G},null,8,["modelValue"])]),_:1})]),l("div",_a,[t(v,null,{label:a(()=>[ya]),default:a(()=>[t(J,{class:"w-100",modelValue:s.value.position,"onUpdate:modelValue":m[1]||(m[1]=k=>s.value.position=k),placeholder:"Select employee position",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(q.value,k=>(p(),O(D,{key:k.value,label:k.label,value:k.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",Da,[t(qe,{margin:!1,options:$.value,value:s.value.company,name:"Company",label:"Company",placeholder:"Select company",required:"",onHandleChange:j},null,8,["options","value"])]),((f=s.value.company)==null?void 0:f.toLocaleLowerCase())==="external"?(p(),L("div",Sa,[t(v,{label:"Vendor"},{default:a(()=>[t(J,{class:"w-100",modelValue:s.value.vendor,"onUpdate:modelValue":m[2]||(m[2]=k=>s.value.vendor=k),placeholder:"Select vendor",clearable:"",filterable:"",onChange:me},{default:a(()=>[(p(!0),L(B,null,T(Y.value,k=>(p(),O(D,{key:k.value,label:k.label,value:k.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])):oe("",!0),_.value?(p(),L("div",Ia,[t(v,{class:"m-0"},{label:a(()=>[La]),default:a(()=>[t(R,{modelValue:P.value,"onUpdate:modelValue":m[3]||(m[3]=k=>P.value=k),placeholder:"Write custom vendor",onInput:ne},null,8,["modelValue"])]),_:1})])):oe("",!0),l("div",Ea,[t(v,null,{label:a(()=>[wa]),default:a(()=>[t(J,{class:"w-100",modelValue:s.value.siteName,"onUpdate:modelValue":m[4]||(m[4]=k=>s.value.siteName=k),placeholder:"Site",disabled:b.value.isHO!==1,clearable:"",filterable:"",onChange:de},{default:a(()=>[(p(!0),L(B,null,T(M.value,k=>(p(),O(D,{key:k.value,label:k.label,value:k.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),l("div",Va,[t(v,{label:"Supervisor"},{default:a(()=>[t(J,{class:"w-100",modelValue:s.value.supervisor,"onUpdate:modelValue":m[5]||(m[5]=k=>s.value.supervisor=k),placeholder:"Select supervisor",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(ae.value,k=>(p(),O(D,{key:k.value,label:k.label,value:k.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",Fa,[t(v,{class:"m-0"},{label:a(()=>[l("span",null,ee(s.value.company==="BUMA AU"?"BUMA AU Email":"Email"),1)]),default:a(()=>[t(R,{modelValue:s.value.email,"onUpdate:modelValue":m[6]||(m[6]=k=>s.value.email=k),placeholder:`Write ${s.value.company==="BUMA AU"?"BUMA AU ":"Employee "}Email`,onInput:se},null,8,["modelValue","placeholder"])]),_:1})]),l("div",ka,[t(v,{class:"m-0"},{label:a(()=>[Ua]),default:a(()=>[t(R,{modelValue:s.value.employeeCode,"onUpdate:modelValue":m[7]||(m[7]=k=>s.value.employeeCode=k),placeholder:"Write employee id",onInput:ue},null,8,["modelValue"])]),_:1})]),l("div",Ca,[l("div",Aa,[Pa,l("div",Oa,[t(he,{modelValue:s.value.isActive,"onUpdate:modelValue":m[8]||(m[8]=k=>s.value.isActive=k),name:"Status",onHandleChange:le},null,8,["modelValue"]),l("span",null,ee(s.value.isActive?"Active":"Inactive"),1)])])])]}),_:1})]),_:1},8,["modelValue"])}}}),xa=pe(Na,[["__scopeId","data-v-54888975"]]),Ra={key:0},Ba={class:"m-0",style:{"word-break":"normal"}},Ma={key:1},qa=ce({__name:"DraftErrorModal",props:{visibility:{type:Boolean,default:!1},errorData:{type:Object,default:null}},emits:["handle-close"],setup(e,{emit:i}){const r=e,o=y(()=>{var U,P;return(P=(U=r.errorData)==null?void 0:U.errors)==null?void 0:P.split(",")}),n=Ue(r,"visibility"),d=i,c=(x=!1)=>{d("handle-close",x)};return(x,U)=>{var _;const P=I("el-dialog");return p(),O(P,{modelValue:n.value,"onUpdate:modelValue":U[0]||(U[0]=$=>n.value=$),title:`Errors for ${(_=r.errorData)==null?void 0:_.name}`,width:"500px",onClose:U[1]||(U[1]=$=>c()),"align-center":""},{default:a(()=>[o.value?(p(),L("ul",Ra,[(p(!0),L(B,null,T(o.value,($,N)=>(p(),L("li",{key:N},[l("p",Ba,ee($),1)]))),128))])):(p(),L("p",Ma,"Undefined"))]),_:1},8,["modelValue","title"])}}}),Ha=pe(qa,[["__scopeId","data-v-967c700c"]]),Ae=e=>(Ie("data-v-1c9e25ab"),e=e(),Le(),e),Ta={class:"col-12 fv-row fv-plugins-icon-container"},za=Ae(()=>l("span",{class:"required"},"Full Name",-1)),Ka={class:"col-12 fv-row fv-plugins-icon-container"},ja=Ae(()=>l("span",{class:"required"},"Position",-1)),Ga={class:"col-12 fv-row fv-plugins-icon-container"},Wa={key:0,class:"col-12 fv-row fv-plugins-icon-container"},Xa={key:1,class:"col-12 fv-row fv-plugins-icon-container"},Ja=Ae(()=>l("span",{class:"required"},"Custom Vendor",-1)),Ya={class:"col-12 fv-row fv-plugins-icon-container"},Qa=Ae(()=>l("span",{class:"required"},"Site",-1)),Za={class:"col-12 fv-row fv-plugins-icon-container"},es={class:"col-12 fv-row fv-plugins-icon-container"},ts={class:"dialog-footer"},as=ce({__name:"FormEditDraft",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close","input"],setup(e,{emit:i}){const r=e,o=i,n=ye(),d=fe(),c=Ce(),x=_e();A();const U=A(),P=A(""),_=A(!1),$=A([{value:"BUMA AU",label:"BUMA AU"},{value:"EXTERNAL",label:"EXTERNAL"}]),N=Ue(r,"visibility"),s=y(()=>n.stateFormDraftData);y(()=>n.formImageData);const b=y(()=>x.user),g=y(()=>n.errors),w=y(()=>n.isError),ae=y(()=>d.stateDirectSupervisor),M=y(()=>{if(b.value.isHO===1)return d.stateLocationOption;{const F=[];return F.push({label:b.value.Location,value:b.value.SiteId}),F}}),Y=y(()=>d.stateVendorOption),q=y(()=>d.statePositionOption),K=Be().shape({company:Q().required("Company is mandatory"),name:Q().min(3,F=>{`${F.min}`}).required("Name is mandatory"),position:Q().required("Position is mandatory"),siteName:Q().required("Site is mandatory")}),V=()=>{X(""),j(""),G(""),le(""),se(""),h(""),ie(""),ne("")},H=(F=!1)=>{ue(),V(),o("handle-close",F)},X=F=>{s.value.employeeId=F},j=F=>{s.value.company=F},G=F=>{s.value.name=F},se=F=>{s.value.email=F},le=F=>{s.value.supervisor=F},h=F=>{s.value.position=F},ie=F=>{F.toLocaleLowerCase()==="add another vendor"?(_.value=!0,s.value.vendor="Add Another Vendor"):(_.value=!1,s.value.vendor=F)},me=F=>{P.value=F},ne=F=>{if(le(""),F!==""){const C=d.stateLocationOption.filter(u=>u.label.includes(s.value.siteName));d.getLookupDirectSupervisor(C[0].value)}else d.getLookupDirectSupervisor(b.value.isHO!==1?b.value.SiteId:"");s.value.siteName=F},de=async()=>{ue(),c.stateAlert.show=!1,n.stateLoadingMessage="Submitting Data",await K.validate(s.value,{abortEarly:!1}).catch(F=>{n.setErrors(F.errors)}),!w.value&&(U.value?n.uploadImage().then(()=>{n.isError?ge("Upload Failed","","Ok"):n.updateDraft(n.stateUploadedImageData.url).then(()=>{n.isError||Ve("Upload Success","","Ok").then(()=>{H(!0)})})}):(_.value&&(s.value.vendor=P.value),n.updateDraft("").then(()=>{n.isError?ge("Upload Failed","","Ok"):Ve("Upload Success","","Ok").then(()=>{H(!0)})})))},ue=()=>{n.setErrors([])};return(F,C)=>{const u=I("el-input"),m=I("el-form-item"),R=I("el-option"),v=I("el-select"),D=I("el-form"),J=I("el-button"),he=I("el-dialog");return p(),O(he,{modelValue:N.value,"onUpdate:modelValue":C[8]||(C[8]=Z=>N.value=Z),title:"Edit Employee",width:500,"close-on-click-modal":!1,"show-close":!1,onClose:C[9]||(C[9]=Z=>H())},{footer:a(()=>[l("span",ts,[t(J,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary",onClick:C[7]||(C[7]=Z=>H()),disabled:S(n).loading},{default:a(()=>[te("Cancel")]),_:1},8,["disabled"]),t(J,{class:"btn btn-btech-secondary",onClick:de,disabled:S(n).loading},{default:a(()=>[te("Submit")]),_:1},8,["disabled"])])]),default:a(()=>[t(Re,{name:"fade"},{default:a(()=>[w.value?(p(),O(Me,{key:0,errorMessages:g.value,onResetForm:ue},null,8,["errorMessages"])):oe("",!0)]),_:1}),t(D,{class:"row g-4 my-4","label-position":"top"},{default:a(()=>{var Z;return[l("div",Ta,[t(m,{class:"m-0"},{label:a(()=>[za]),default:a(()=>[t(u,{modelValue:s.value.name,"onUpdate:modelValue":C[0]||(C[0]=E=>s.value.name=E),placeholder:"Write employee name",onInput:G},null,8,["modelValue"])]),_:1})]),l("div",Ka,[t(m,null,{label:a(()=>[ja]),default:a(()=>[t(v,{class:"w-100",modelValue:s.value.position,"onUpdate:modelValue":C[1]||(C[1]=E=>s.value.position=E),placeholder:"Select employee position",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(q.value,E=>(p(),O(R,{key:E.value,label:E.label,value:E.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",Ga,[t(qe,{margin:!1,options:$.value,value:s.value.company,name:"Company",label:"Company",placeholder:"Select company",required:"",onHandleChange:j},null,8,["options","value"])]),((Z=s.value.company)==null?void 0:Z.toLocaleLowerCase())==="external"?(p(),L("div",Wa,[t(m,{label:"Vendor"},{default:a(()=>[t(v,{class:"w-100",modelValue:s.value.vendor,"onUpdate:modelValue":C[2]||(C[2]=E=>s.value.vendor=E),placeholder:"Select vendor",clearable:"",filterable:"",onChange:ie},{default:a(()=>[(p(!0),L(B,null,T(Y.value,E=>(p(),O(R,{key:E.value,label:E.label,value:E.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])):oe("",!0),_.value?(p(),L("div",Xa,[t(m,{class:"m-0"},{label:a(()=>[Ja]),default:a(()=>[t(u,{modelValue:P.value,"onUpdate:modelValue":C[3]||(C[3]=E=>P.value=E),placeholder:"Write custom vendor",onInput:me},null,8,["modelValue"])]),_:1})])):oe("",!0),l("div",Ya,[t(m,null,{label:a(()=>[Qa]),default:a(()=>[t(v,{class:"w-100",modelValue:s.value.siteName,"onUpdate:modelValue":C[4]||(C[4]=E=>s.value.siteName=E),placeholder:"Site",clearable:"",filterable:"",onChange:ne},{default:a(()=>[(p(!0),L(B,null,T(M.value,E=>(p(),O(R,{key:E.value,label:E.label,value:E.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",Za,[t(m,{label:"Supervisor"},{default:a(()=>[t(v,{class:"w-100",modelValue:s.value.supervisor,"onUpdate:modelValue":C[5]||(C[5]=E=>s.value.supervisor=E),placeholder:"Select supervisor",clearable:"",filterable:""},{default:a(()=>[(p(!0),L(B,null,T(ae.value,E=>(p(),O(R,{key:E.value,label:E.label,value:E.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",es,[t(m,{class:"m-0"},{label:a(()=>[l("span",null,ee(s.value.company==="BUMA AU"?"BUMA AU Email":"Email"),1)]),default:a(()=>[t(u,{modelValue:s.value.email,"onUpdate:modelValue":C[6]||(C[6]=E=>s.value.email=E),placeholder:`Write ${s.value.company==="BUMA AU"?"BUMA AU ":"Employee "}Email`,onInput:se},null,8,["modelValue","placeholder"])]),_:1})])]}),_:1})]),_:1},8,["modelValue"])}}}),ss=pe(as,[["__scopeId","data-v-1c9e25ab"]]),Pe=e=>(Ie("data-v-c6ef8b12"),e=e(),Le(),e),os={"element-loading-text":"Uploading File","element-loading-background":"rgba(0, 0, 0, 0.5)"},ls=["element-loading-text"],rs={class:"px-3 py-8"},ns={class:"d-flex justify-content-between align-items-center"},is=Pe(()=>l("div",{class:""},[l("div",{class:"flex-grow-1"},[l("h5",{class:"mb-2 header-title"},"Employee")])],-1)),ds={class:"align-self-start d-flex gap-2"},us=Pe(()=>l("i",{class:"fas fa-plus fs-4 pe-2"},null,-1)),cs={key:0,class:"card mb-6"},ps={class:"m-0"},ms={class:"text-btech-danger-500"},vs=Pe(()=>l("section",{class:"mb-6"},null,-1)),hs={class:"card mb-10"},fs={class:"card-body p-3"},gs={class:"d-flex justify-content-between my-4"},bs=Pe(()=>l("p",{class:"m-0 card-table-title"},"Employee List",-1)),_s={class:"d-flex justify-content-between gap-2"},ys={class:"my-5"},Ds=ce({__name:"Index",setup(e){const i=Ge(),r=fe(),o=ye(),n=_e(),d=Ce(),c=y(()=>d.stateBulkPayload),x=A(!1),U=A(!1),P=A(!1),_=A(["draftPanel"]),$=A(!1),N=A({}),s=y(()=>r.displayData),b=y(()=>r.draftData),g=y(()=>n.user),w=y(()=>o.formData),ae=y(()=>o.formDraftData),M=y(()=>r.pagination),Y=A(null),q=v=>{console.log(v),r.setPage(v)},K=v=>{r.setPageSize(v)};vt(()=>{i[We.ACTIVE_PAGE]("IronLake"),dt("Employee",[{pageName:"Employee",pageRoute:"employee"}]),n.user.Location!==void 0&&V()}),ht(()=>{r.resetState(),o.resetState(),d.resetState()});const V=async()=>{await r.setPage(1),r.getLookup(),r.getLookupCompany(),r.getLookupLocation(),r.getLookupPosition(),r.getLookupGender(),r.getLookupDirectSupervisor(g.value.isHO!==1?g.value.SiteId:""),r.getLookupVendor()},H=()=>{w.value.siteName=g.value.isHO!==1?g.value.Location:"",r.getLookupDirectSupervisor(g.value.isHO!==1?g.value.SiteId:""),r.getLookupVendor(),r.getLookupLocation(),x.value=!0},X=async v=>{x.value=!1,v&&await V()},j=()=>{if(w.value.siteName!==null&&w.value.siteName!==""){if(r.stateLocationOption.length>0){const v=r.stateLocationOption.filter(D=>D.label.includes(w.value.siteName));r.getLookupDirectSupervisor(v[0].value)}}else r.getLookupDirectSupervisor(g.value.isHO!==1?g.value.SiteId:"");r.getLookupVendor(),r.getLookupLocation(),U.value=!0},G=()=>{if(ae.value.siteName!==null&&w.value.siteName!==""){if(r.stateLocationOption.length>0){const v=r.stateLocationOption.filter(D=>D.label.includes(ae.value.siteName));r.getLookupDirectSupervisor(v[0].value)}}else r.getLookupDirectSupervisor(g.value.isHO!==1?g.value.SiteId:"");r.getLookupVendor(),r.getLookupLocation(),P.value=!0},se=async v=>{P.value=!1,v&&await V()},le=v=>{N.value=v,$.value=!0},h=()=>{$.value=!1},ie=async v=>{U.value=!1,v&&await V()},me=v=>{c.value.fileUpload=v},ne=async()=>{o.stateLoading=!0;const v=await r.export();o.stateLoading=!1,ze.saveAs(new Blob([v],{type:"application/octet-stream"}),"EmployeeData.xlsx")},de=()=>{var v;(v=Y.value)==null||v.click()},ue=async()=>{const v=await r.template();ze.saveAs(new Blob([v],{type:"application/octet-stream"}),"MasterEmployee.xlsx")},F=async v=>{const D=v.target.files[0];me(D),C(),Y.value&&(Y.value.value="")},C=()=>{d.bulkUpload().then(()=>{V()})},u=async v=>{Ke("Remove this record from Need Review ?","Remove").then(async D=>{D.isConfirmed&&(o.stateLoadingMessage="Removing Data",o.deleteDraft(v.employeeDraftId).then(()=>{o.isError?Xe(`Failed to delete : ${o.stateErrors[0].toString}`,"Close").then(()=>{V()}):ke("Record has been removed !","Close").then(()=>{V()})}))})},m=v=>{r.setLastActiveFilter(v),r.setFilterData(v)},R=A();return ft(()=>n.user,async v=>{const D=()=>v.isHO===1?"":v.SiteId;R.value.data.siteName=D(),r.stateFilterData.siteId=D(),V()}),(v,D)=>{const J=I("el-button"),he=I("el-tooltip"),Z=I("el-collapse-item"),E=I("el-collapse"),re=xe("loading");return p(),L(B,null,[l("template",null,[be(l("div",os,null,512),[[re,S(d).loading,void 0,{fullscreen:!0,lock:!0}]]),be(l("div",{"element-loading-text":S(o).stateLoadingMessage,"element-loading-background":"rgba(0, 0, 0, 0.5)"},null,8,ls),[[re,S(o).loading,void 0,{fullscreen:!0,lock:!0}]])]),l("section",rs,[l("div",ns,[is,l("div",ds,[t(he,{class:"box-item",effect:"dark",content:"Download Employee Template",placement:"top"},{default:a(()=>[t(J,{class:"btn btn-btech-outline btn-icon m-0",onClick:ue},{default:a(()=>[t(Fe,{name:"excel-icon",size:"20"})]),_:1})]),_:1}),t(J,{class:"btn btn-btech-outline btech-lg m-0",onClick:de},{default:a(()=>[t(Fe,{name:"upload",size:"20"}),te(" Upload ")]),_:1}),l("input",{ref_key:"bulkFile",ref:Y,type:"file",accept:".xlsx",hidden:"",onChange:F},null,544),t(J,{class:"btn btn-btech-secondary btech-lg m-0",onClick:D[0]||(D[0]=f=>H())},{default:a(()=>[us,te(" Add New ")]),_:1})])])]),t(ut,{"show-alert":S(d).stateAlert.show,"onUpdate:showAlert":D[1]||(D[1]=f=>S(d).stateAlert.show=f),variant:S(d).alertVariant,desc:S(d).alertDesc},null,8,["show-alert","variant","desc"]),b.value.length>0?(p(),L("section",cs,[t(E,{modelValue:_.value,"onUpdate:modelValue":D[4]||(D[4]=f=>_.value=f),class:"card-body p-3 ironlake-draft-collapse"},{default:a(()=>[t(Z,{name:"draftPanel"},{title:a(()=>[l("p",ps,[te(" Need Review "),l("span",ms," ("+ee(b.value.length)+") ",1)])]),default:a(()=>[vs,t(Zt,{"list-data":b.value,page:M.value.currentPage,onShowDialog:G,onShowErrors:D[2]||(D[2]=f=>le(f)),onDeleteDraft:D[3]||(D[3]=f=>u(f))},null,8,["list-data","page"])]),_:1})]),_:1},8,["modelValue"])])):oe("",!0),l("section",hs,[l("div",fs,[l("div",gs,[bs,l("div",_s,[t(wt,{ref_key:"filterRef",ref:R,onApplyFilter:D[5]||(D[5]=f=>m(f))},null,512),t(_t,{onHandleDownload:ne})])]),t(Bt,{"list-data":s.value,page:M.value.currentPage,onShowDialog:j},null,8,["list-data","page"]),l("div",ys,[S(r).paginationLoading?oe("",!0):(p(),O(ct,{key:0,onRaisePageChange:D[6]||(D[6]=f=>q(f)),onRaiseSizeChange:D[7]||(D[7]=f=>K(f)),currentPage:M.value.currentPage,totalPage:M.value.totalPage,totalPageSize:M.value.totalPageSize,isPageSizeChange:!0,pageSizes:[50,20,10],startPaginationIndex:M.value.startPaginationIndex,endPaginationIndex:M.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),t(fa,{visibility:x.value,onHandleClose:X},null,8,["visibility"]),t(xa,{visibility:U.value,onHandleClose:ie},null,8,["visibility"]),t(ss,{visibility:P.value,onHandleClose:se},null,8,["visibility"]),t(Ha,{visibility:$.value,onHandleClose:h,"error-data":N.value},null,8,["visibility","error-data"])])])],64)}}}),Do=pe(Ds,[["__scopeId","data-v-c6ef8b12"]]);export{Do as default};
