import{u as te}from"./useMenuStore-CD5Gmvif.js";import{b as Mt}from"./vue-router-iNp9kJ0K.js";import{a as ee}from"./breadcrumb-BYmEOf4C.js";import{c as k,a as V,s as G,J as it,I as ft,z as rt,A as ae}from"./index-BuVmIl8K.js";import{P as It}from"./Pagination-D-xfdYmn.js";import{F as oe}from"./FilterIconButton-Bj0WTbms.js";import{h as se,A as ne,U as re}from"./excel-generator-DMHRo93s.js";import{D as ie}from"./DownloadIconButton-CIQp-YG7.js";import{k as Z,c as L,r as W,u as a,y as et,p as c,aa as y,s,x as u,T as Ct,q as S,F as kt,Y as bt,R as N,A as ht,aB as v,C as O,P as yt,a0 as Ft,B as $,bd as le,bb as de,a7 as pe,L as ue}from"./@vue-BypzYtbH.js";import{_ as b,b as Pt}from"./element-plus-BeWdvTRa.js";import{q as K,w,x as lt,y as me}from"./date-format-8-IvfSl3.js";import{P as dt}from"./Pagination-BiobnanQ.js";import{d as _t}from"./pinia-BjOS2_Ao.js";import{b as Ut,a as Y,m as tt}from"./mapOption-CeGMwmH0.js";import{c as ce}from"./urls-DBLs_wGY.js";import{b as he}from"./urls-D--VoWL5.js";import{b as ge}from"./urls-CuZgFKSv.js";import{d as De}from"./urls-cnAouliv.js";import{L as Me}from"./urls-DjvJ6Gmy.js";import{b as z,d as ve}from"./table-sort-Bpdq_Uwn.js";import{c as Lt,a as P,f as pt,b as ut,d as qt}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as Rt}from"./ErrorAlert-CMKGfwAi.js";import{_ as U}from"./AutoComplete.vue_vue_type_script_setup_true_lang-uWBVHGLX.js";import{_ as mt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CCwjwK39.js";import{_ as ct}from"./DecimalInput.vue_vue_type_script_setup_true_lang-BrbFZUJW.js";import{_ as At}from"./nw-img-vue-CR837WER.js";import{a as fe}from"./vee-validate-C_msoaAA.js";import{_ as be}from"./lodash-DrHMlsdo.js";import{_ as Fe}from"./FileDropZone.vue_vue_type_style_index_0_lang-C5PyimC7.js";import{m as _e}from"./map-anything-abi6NY2Z.js";import{_ as j}from"./AutoComplete.vue_vue_type_style_index_0_lang-BZwsseAx.js";import{_ as Ot}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CJ7rJST9.js";import{F as xe}from"./file-saver-CwTBvle_.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./PageEnum-DUtfSNQS.js";import"./xlsx-C4maHrMm.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";import"./vue3-dropzone-_NG5IwbJ.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";import"./attr-accept-DLIfoYC7.js";const J="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_sos_mapping_for_bi",Ee=`${J}`,Se=`${J}/sos_mapping_for_bi_bulk`,Te=`${J}/validate_upload`,ye=`${J}/export`,Oe=`${J}/lookup`,we=`${J}/sos_mapping_for_bi`,Ie=`${J}/sos_mapping_for_bi/update`,vt={equipmentModel:"",equipmentModelTo:"",component:"",componentTo:"",registerNumber:"",registerNumberTo:"",registerNumberDesc:"",registerNumberDescTo:"",element:"",elementTo:"",rating:"",ratingTo:"",operatorMin:"",operatorMinTo:"",valueMin:"",valueMinTo:"",operatorMax:"",operatorMaxTo:"",valueMax:"",valueMaxTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},xt=_t({id:"MappingSosBiList",state:()=>({stateFilterData:{...vt},stateLastUsedFilterData:{...vt},statePageName:"sosMappingForBi",stateDisplayData:[],statePagination:new dt,stateLoading:!1,statePaginationLoading:!1,stateEquipmentModelOption:[],stateComponentOption:[],stateRegisterNumberOption:[],stateRegisterNumberDescOption:[],stateElementOption:[],stateRatingDescOption:[],stateOperatorMinOption:[],stateValueMinOption:[],stateOperatorMaxOption:[],stateValueMaxOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,equipmentModelOption:t=>t.stateEquipmentModelOption,componentOption:t=>t.stateComponentOption,registerNumberOption:t=>t.stateRegisterNumberOption,registerNumberDescOption:t=>t.stateRatingDescOption,elementOption:t=>t.stateElementOption,ratingDescOption:t=>t.stateRatingDescOption,operatorMinOption:t=>t.stateOperatorMinOption,valueMinOption:t=>t.stateValueMinOption,operatorMaxOption:t=>t.stateOperatorMaxOption,valueMaxOption:t=>t.stateValueMaxOption},actions:{async getData(t=!0){const n={equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,element:this.stateFilterData.element,elementTo:this.stateFilterData.elementTo,rating:this.stateFilterData.rating,ratingTo:this.stateFilterData.ratingTo,operatorMin:this.stateFilterData.operatorMin,operatorMinTo:this.stateFilterData.operatorMinTo,valueMin:this.stateFilterData.valueMin,valueMinTo:this.stateFilterData.valueMinTo,operatorMax:this.stateFilterData.operatorMax,operatorMaxTo:this.stateFilterData.operatorMaxTo,valueMax:this.stateFilterData.valueMax,valueMaxTo:this.stateFilterData.valueMaxTo,startDate:this.stateFilterData.startDate?K(w(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?K(w(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?K(w(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?K(w(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await k.get(Ee,"sos_mapping_for_bi",new URLSearchParams(n).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){!e.response.data&&(e!=null&&e.includes("Request failed with status code 401"))&&V().setLoggedIn(!1),G("IRONS",e),console.log(e)}this.stateLoading=!1},async getLookup(){const t={ver:this.stateFilterData.ver};try{const n=await k.get(Oe,"",new URLSearchParams(t).toString());this.stateEquipmentModelOption=Ut(n.data.result.content.equipmentModel,"equipmentModel","brand","equipmentModelDescription"),this.stateComponentOption=Y(n.data.result.content.component,"component","componentDescription"),this.stateElementOption=tt(n.data.result.content.element),this.stateRatingDescOption=Y(n.data.result.content.rating,"rating","ratingDescription"),this.stateOperatorMinOption=Y(n.data.result.content.operatorMin,"operator","operatorDescription"),this.stateOperatorMaxOption=Y(n.data.result.content.operatorMax,"operator","operatorDescription"),this.stateValueMinOption=tt(n.data.result.content.valueMin),this.stateValueMaxOption=tt(n.data.result.content.valueMax)}catch(n){n.response.data.statusCode==401&&V().setLoggedIn(!1),G("IRONS",n),console.log(n)}},async export(){const t={ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await k.getBlob(ye,"",new URLSearchParams(t).toString())).data}catch(n){G("IRONS",n),console.log(n)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:n}){if(!t&&!n)this.stateFilterData.order="";else{const e=n=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setEquipmentModel(t){this.stateFilterData.equipmentModel=t},setEquipmentModelTo(t){this.stateFilterData.equipmentModelTo=t},setComponent(t){this.stateFilterData.component=t},setComponentTo(t){this.stateFilterData.componentTo=t},setElement(t){this.stateFilterData.element=t},setElementTo(t){this.stateFilterData.elementTo=t},setRatingDesc(t){this.stateFilterData.rating=t},setRatingDescTo(t){this.stateFilterData.ratingTo=t},setOperatorMin(t){this.stateFilterData.operatorMin=t},setOperatorMinTo(t){this.stateFilterData.operatorMinTo=t},setValueMin(t){this.stateFilterData.valueMin=t},setValueMinTo(t){this.stateFilterData.valueMin=t},setOperatorMax(t){this.stateFilterData.operatorMax=t},setOperatorMaxTo(t){this.stateFilterData.operatorMaxTo=t},setValueMax(t){this.stateFilterData.valueMax=t},setValueMaxTo(t){this.stateFilterData.valueMaxTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},async resetFilter(){this.stateFilterData.equipmentModel="",this.stateFilterData.equipmentModelTo="",this.stateFilterData.component="",this.stateFilterData.componentTo="",this.stateFilterData.element="",this.stateFilterData.elementTo="",this.stateFilterData.rating="",this.stateFilterData.ratingTo="",this.stateFilterData.operatorMin="",this.stateFilterData.operatorMinTo="",this.stateFilterData.valueMin="",this.stateFilterData.valueMinTo="",this.stateFilterData.operatorMax="",this.stateFilterData.operatorMaxTo="",this.stateFilterData.valueMax="",this.stateFilterData.valueMaxTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const t=this.stateLastUsedFilterData.equipmentModel!=="",n=this.stateLastUsedFilterData.equipmentModelTo!=="",e=this.stateLastUsedFilterData.component!=="",M=this.stateLastUsedFilterData.componentTo!=="",l=this.stateLastUsedFilterData.element!=="",r=this.stateLastUsedFilterData.elementTo!=="",p=this.stateLastUsedFilterData.rating!=="",h=this.stateLastUsedFilterData.ratingTo!=="",x=this.stateLastUsedFilterData.operatorMin!=="",F=this.stateLastUsedFilterData.operatorMinTo!=="",q=this.stateLastUsedFilterData.valueMin!=="",i=this.stateLastUsedFilterData.valueMinTo!=="",I=this.stateLastUsedFilterData.operatorMax!=="",R=this.stateLastUsedFilterData.operatorMaxTo!=="",C=this.stateLastUsedFilterData.valueMax!=="",A=this.stateLastUsedFilterData.valueMaxTo!=="",f=this.stateLastUsedFilterData.startDate!=="",_=this.stateLastUsedFilterData.startDateTo!=="",m=this.stateLastUsedFilterData.endDate!=="",E=this.stateLastUsedFilterData.endDateTo!=="";(t||n||e||M||l||r||p||h||x||F||q||i||I||R||C||A||f||_||m||E)&&await this.getData()},resetState(){this.stateFilterData={...vt},this.stateDisplayData=[],this.statePagination=new dt,this.stateLoading=!1,this.statePaginationLoading=!1}}}),wt={sosMappingForBiId:0,equipmentModel:"",component:"",element:"",rating:"",operatorMin:"",valueMin:"",operatorMax:"",valueMax:"",startDate:w(new Date),endDate:w(new Date("12/31/9999"))},Et=_t({id:"MappingSosBiForm",state:()=>({stateFormData:{...wt},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateEquipmentModelOption:[],stateEquipmentTypeOption:[],stateComponentOption:[],stateElementOption:[],stateRatingDescOption:[],stateOperatorOption:[],stateIsEdit:!1}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,equipmentModelOption:t=>t.stateEquipmentModelOption,componentOption:t=>t.stateComponentOption,elementOption:t=>t.stateElementOption,ratingDescOption:t=>t.stateRatingDescOption,operatorOption:t=>t.stateOperatorOption,isEdit:t=>t.stateIsEdit},actions:{async getLookup(){const t={ver:"v1"};try{const n=await k.get(ce,"",new URLSearchParams(t).toString()),e=await k.get(he,"",new URLSearchParams(t).toString()),M=await k.get(ge,"",new URLSearchParams(t).toString()),l=await k.get(De,"",new URLSearchParams(t).toString()),r=await k.get(Me,"",new URLSearchParams(t).toString());this.stateComponentOption=Y(e.data.result.content,"component","componentDescription"),this.stateEquipmentModelOption=Ut(n.data.result.content,"equipmentModel","brand","equipmentModelDescription"),this.stateRatingDescOption=tt(M.data.result.content.ratingDescription),this.stateElementOption=tt(l.data.result.content.parameter),this.stateOperatorOption=Y(r.data.result.content,"operator","operatorDescription")}catch(n){n.response.data.statusCode==401&&V().setLoggedIn(!1),G("IRONS",n),console.log(n)}},async insertData(t){try{this.stateLoading=!0;const n={userAccount:t,ver:"v1"},e={sosMappingForBiId:this.stateFormData.sosMappingForBiId,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,element:this.stateFormData.element,rating:this.stateFormData.rating,operatorMin:this.stateFormData.operatorMin,valueMin:this.stateFormData.valueMin,operatorMax:this.stateFormData.operatorMax,valueMax:this.stateFormData.valueMax,startDate:K(w(new Date(this.stateFormData.startDate))),endDate:K(w(new Date(this.stateFormData.endDate)))},M=await k.post(`${we}?${new URLSearchParams(n).toString()}`,e);M.data.title==="Error"?(this.stateErrors.push(M.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(n){n.response.data.statusCode==401&&V().setLoggedIn(!1),this.stateError=n,this.stateErrors.push(n.response.data.result.message),this.stateIsError=!0,G("IRONS",n)}this.stateLoading=!1},async updateData(t){try{this.stateLoading=!0;const n={userAccount:t,ver:"v1"},e={sosMappingForBiId:this.stateFormData.sosMappingForBiId,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,element:this.stateFormData.element,rating:this.stateFormData.rating,operatorMin:this.stateFormData.operatorMin,valueMin:this.stateFormData.valueMin,operatorMax:this.stateFormData.operatorMax,valueMax:this.stateFormData.valueMax,startDate:K(w(new Date(this.stateFormData.startDate))),endDate:K(w(new Date(this.stateFormData.endDate)))},M=await k.post(`${Ie}?${new URLSearchParams(n).toString()}`,e);M.data.title==="Error"?(this.stateErrors.push(M.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(n){n.response.data.statusCode==401&&V().setLoggedIn(!1),this.stateError=n,this.stateErrors.push(n.response.data.result.message),this.stateIsError=!0,G("IRONS",n)}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.sosMappingForBiId=t.sosMappingForBiId,this.stateFormData.equipmentModel=t.equipmentModel,this.stateFormData.component=t.component,this.stateFormData.element=t.element,this.stateFormData.rating=t.rating,this.stateFormData.operatorMin=t.operatorMin,this.stateFormData.valueMin=t.valueMin,this.stateFormData.operatorMax=t.operatorMax,this.stateFormData.valueMax=t.valueMax,this.stateFormData.startDate=t.startDate,this.stateFormData.endDate=t.endDate},resetState(){this.stateFormData={...wt},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1},setIsEdit(t){this.stateIsEdit=t}}}),Ce={key:0,style:{height:"100px"}},ke={key:1},Pe={key:1},Ue={key:1},Le={key:1},qe={key:1},Re={key:1},Ae={key:1},Ve={key:1},Be={key:1},$e={key:1},Ne={key:0,class:"row justify-content-center"},He={key:1,class:"row justify-content-center"},ze={key:0},je={class:"row justify-content-center"},Ke=["disabled","onClick"],Ge={key:1,class:"d-flex"},Xe=Z({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","fetch-data"],setup(t,{emit:n}){const e=t,M=V(),l=xt(),r=Et(),p=n,h=L(()=>(e.page-1)*10+1),x=W(""),F=T=>{x.value=T.order;const D={prop:T.prop,order:T.order};l.setSort(D)},q=W({sosMappingForBiId:0,equipmentModel:"",component:"",element:"",rating:"",operatorMin:"",valueMin:"",operatorMax:"",valueMax:"",startDate:w(new Date),endDate:w(new Date("12/31/9999"))}),i=W({sosMappingForBiId:0,equipmentModel:"",component:"",element:"",rating:"",operatorMin:"",valueMin:"",operatorMax:"",valueMax:"",startDate:w(new Date),endDate:w(new Date("12/31/9999"))}),I=T=>{i.value={...T}},R=L(()=>r.isEdit),C=()=>{f(),setTimeout(()=>{i.value=Object.assign({},q.value)},300),r.resetState(),r.setIsEdit(!1)},A=Lt().shape({equipmentModel:P().required("Equipment Model is mandatory"),component:P().required("Component is mandatory"),element:P().required("Element is mandatory"),rating:P().required("Rating Description is mandatory"),operatorMin:P().required("Operator Min is mandatory"),valueMin:pt().required("Value Min is mandatory").typeError("Value Min must be number"),operatorMax:P().required("Operator Max is mandatory"),valueMax:pt().required("Value Max is mandatory").typeError("Value Max must be number"),startDate:ut().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:ut().required("End Date is mandatory").min(qt("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),f=()=>{r.setErrors([])},_=L(()=>r.isError),m=L(()=>r.errors),E=async()=>{r.setIsEdit(!0),f(),await A.validate(i.value,{abortEarly:!1}).catch(T=>{r.setErrors(T.errors),window&&window.scrollTo(0,0)}),!_.value&&it("Are you sure you want to submit ?").then(async T=>{T.isConfirmed&&(r.setFormData(i.value),r.updateData(M.user.Name).then(()=>{r.isError||ft("Form has been successfully submitted!","Ok").then(()=>{C(),p("fetch-data",null)})}))})};return(T,D)=>{const B=N("inline-svg"),X=N("el-tooltip"),H=bt("loading");return a(l).loading?et((c(),y("div",Ce,null,512)),[[H,a(l).loading]]):(c(),y(kt,{key:1},[s(Ct,{name:"fade"},{default:u(()=>[_.value&&R.value?(c(),S(Rt,{key:0,errorMessages:m.value,onResetForm:f},null,8,["errorMessages"])):ht("",!0)]),_:1}),et((c(),S(a(Pt),{data:e.listData,style:{width:"100%"},onSortChange:F,"empty-text":"No Data"},{default:u(()=>[s(a(b),{label:"No",width:"90",align:"center"},{default:u(o=>[v("span",null,O(h.value+o.$index),1)]),_:1}),s(a(b),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.equipmentModel,placeholder:"Add Equipment Model",name:"EquipmentModel",max:20,onHandleChange:D[0]||(D[0]=g=>i.value.equipmentModel=g),options:a(r).equipmentModelOption},null,8,["value","options"])):(c(),y("span",ke,O(o.equipmentModel),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.component,placeholder:"Add Component",name:"component",max:20,onHandleChange:D[1]||(D[1]=g=>i.value.component=g),options:a(r).componentOption},null,8,["value","options"])):(c(),y("span",Pe,O(o.component),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"element",label:"Element","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.element,placeholder:"Add Element",name:"element",max:20,onHandleChange:D[2]||(D[2]=g=>i.value.element=g),options:a(r).elementOption},null,8,["value","options"])):(c(),y("span",Ue,O(o.element),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"rating",label:"Rating Description","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.rating,placeholder:"Add Rating",name:"rating",max:20,onHandleChange:D[3]||(D[3]=g=>i.value.rating=g),options:a(r).ratingDescOption},null,8,["value","options"])):(c(),y("span",Le,O(o.rating),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"operatorMin",label:"Operator Min","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.operatorMin,placeholder:"Add Operator Min",name:"operatorMin",max:40,onHandleChange:D[4]||(D[4]=g=>i.value.operatorMin=g),options:a(r).operatorOption},null,8,["value","options"])):(c(),y("span",qe,O(o.operatorMin),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"valueMin",label:"Value Min","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(ct,{key:0,value:i.value.valueMin,margin:!1,placeholder:"Add Value Min",name:"valueMin",max:20,onHandleChange:D[5]||(D[5]=g=>i.value.valueMin=g)},null,8,["value"])):(c(),y("span",Re,O(o.valueMin),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"operatorMax",label:"Operator Max","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(U,{key:0,value:i.value.operatorMax,placeholder:"Add Operator Max",name:"operatorMax",max:40,onHandleChange:D[6]||(D[6]=g=>i.value.operatorMax=g),options:a(r).operatorOption},null,8,["value","options"])):(c(),y("span",Ae,O(o.operatorMax),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"valueMax",label:"Value Max","min-width":"170",sortable:"","sort-method":(o,g)=>a(z)(x.value)},{default:u(({row:o})=>[o.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(ct,{key:0,value:i.value.valueMax,margin:!1,placeholder:"Add Value Max",name:"valueMax",max:20,onHandleChange:D[7]||(D[7]=g=>i.value.valueMax=g)},null,8,["value"])):(c(),y("span",Ve,O(o.valueMax),1))]),_:1},8,["sort-method"]),s(a(b),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:u(o=>[o.row.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(mt,{key:0,value:i.value.startDate,placeholder:"Add Start Date",name:"StartDate",onHandleChange:D[8]||(D[8]=g=>i.value.startDate=g)},null,8,["value"])):(c(),y("span",Be,O(a(lt)(o.row.startDate)),1))]),_:1}),s(a(b),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:u(o=>[o.row.sosMappingForBiId===i.value.sosMappingForBiId?(c(),S(mt,{key:0,value:i.value.endDate,placeholder:"Add End Date",name:"EndDate",onHandleChange:D[9]||(D[9]=g=>i.value.endDate=g)},null,8,["value"])):(c(),y("span",$e,O(a(lt)(o.row.endDate)),1))]),_:1}),s(a(b),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:u(o=>[o.row.isActive?(c(),y("div",Ne,[s(B,{src:"/media/svg/tables/rows/check.svg"})])):(c(),y("div",He,[s(B,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),s(a(b),{prop:"changedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:u(o=>[v("span",null,O(a(me)(o.row.changedOn)),1)]),_:1}),s(a(b),{prop:"changedBy",label:"Changed by",sortable:"",width:"300"}),s(a(b),{label:"",width:"80"},{default:u(o=>[o.row.sosMappingForBiId!==i.value.sosMappingForBiId?(c(),y("div",ze,[s(X,{class:"box-item",effect:"dark",content:o.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:u(()=>[v("div",je,[v("button",{disabled:!o.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:g=>I(o.row)},[s(B,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Ke)])]),_:2},1032,["content"])])):(c(),y("div",Ge,[s(X,{class:"box-item",effect:"dark",content:"Save",placement:"top"},{default:u(()=>[v("button",{class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:yt(E,["prevent"])},[s(B,{src:"/media/svg/tables/rows/save.svg",width:"12",height:"12"})])]),_:1}),s(X,{class:"box-item",effect:"dark",content:"Cancel",placement:"top"},{default:u(()=>[v("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:yt(C,["prevent"])},[s(B,{src:"/media/svg/tables/rows/valid-false.svg",width:"12",height:"12"})])]),_:1})]))]),_:1})]),_:1},8,["data"])),[[H,a(l).loading]])],64))}}}),We=At(Xe,[["__scopeId","data-v-dca90030"]]),Je={class:"col-md-6 fv-row fv-plugins-icon-container"},Qe={class:"col-md-6 fv-row fv-plugins-icon-container"},Ye={class:"dialog-footer"},Ze=Z({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:n}){const e=t,M=n,l=Et(),r=V(),p=Ft(e,"visibility"),h=L(()=>l.formData),x=L(()=>l.errors),F=L(()=>l.isError),q=L(()=>l.isEdit),i=Lt().shape({equipmentModel:P().required("Equipment Model is mandatory"),component:P().required("Component is mandatory"),element:P().required("Element is mandatory"),rating:P().required("Rating Description is mandatory"),operatorMin:P().required("Operator Min is mandatory"),valueMin:pt().required("Value Min is mandatory").typeError("Value Min must be number"),operatorMax:P().required("Operator Max is mandatory"),valueMax:pt().required("Value Max is mandatory").typeError("Value Max must be number"),startDate:ut().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:ut().required("End Date is mandatory").min(qt("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),I=(o=!1)=>{H(),l.resetState(),M("handle-close",o)},R=o=>{h.value.equipmentModel=o},C=o=>{h.value.component=o},A=o=>{h.value.element=o},f=o=>{h.value.rating=o},_=o=>{h.value.operatorMin=o},m=o=>{h.value.valueMin=o},E=o=>{h.value.operatorMax=o},T=o=>{h.value.valueMax=o},D=o=>{h.value.startDate=o},B=o=>{h.value.endDate=o},X=async()=>{H(),await i.validate(h.value,{abortEarly:!1}).catch(o=>{l.setErrors(o.errors)}),!F.value&&it("Are you sure you want to submit ?").then(async o=>{o.isConfirmed&&l.insertData(r.user.Name).then(()=>{l.isError||ft("Form has been successfully submitted!","Ok").then(()=>{I(!0)})})})},H=()=>{l.setErrors([])};return(o,g)=>{const at=N("el-button"),gt=N("el-dialog"),ot=bt("loading");return et((c(),S(gt,{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=d=>p.value=d),title:"New Data",width:"40%",onClose:g[1]||(g[1]=d=>I())},{footer:u(()=>[v("span",Ye,[s(at,{type:"primary",onClick:X,disabled:a(l).loading},{default:u(()=>[$("Submit")]),_:1},8,["disabled"]),s(at,{type:"secondary",onClick:I,disabled:a(l).loading},{default:u(()=>[$("Close")]),_:1},8,["disabled"])])]),default:u(()=>[s(Ct,{name:"fade"},{default:u(()=>[F.value&&!q.value?(c(),S(Rt,{key:0,errorMessages:x.value,onResetForm:H},null,8,["errorMessages"])):ht("",!0)]),_:1}),et((c(),S(a(fe),{id:"kt_filter_form",class:"row g-9 my-4"},{default:u(()=>[s(U,{value:h.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"EquipmentModel",max:20,onHandleChange:R,options:a(l).equipmentModelOption},null,8,["value","options"]),s(U,{value:h.value.component,placeholder:"Add Component",label:"Component",name:"Component",max:40,onHandleChange:C,options:a(l).componentOption},null,8,["value","options"]),s(U,{value:h.value.element,placeholder:"Add Element",label:"Element",name:"Element",max:40,onHandleChange:A,options:a(l).elementOption},null,8,["value","options"]),s(U,{value:h.value.rating,placeholder:"Add Rating Description",label:"Rating Description",name:"RatingDesc",max:40,onHandleChange:f,options:a(l).ratingDescOption},null,8,["value","options"]),s(U,{value:h.value.operatorMin,placeholder:"Add Operator Min",label:"Operator Min",name:"operatorMin",max:40,onHandleChange:_,options:a(l).operatorOption},null,8,["value","options"]),s(ct,{value:h.value.valueMin,margin:!1,placeholder:"Add Value Min",label:"Value Min",name:"valueMin",max:20,onHandleChange:m},null,8,["value"]),s(U,{value:h.value.operatorMax,placeholder:"Add Operator Max",label:"Operator Max",name:"operatorMax",max:40,onHandleChange:E,options:a(l).operatorOption},null,8,["value","options"]),s(ct,{value:h.value.valueMax,margin:!1,placeholder:"Add Value Max",label:"Value Max",name:"valueMax",max:20,onHandleChange:T},null,8,["value"]),v("div",Je,[s(mt,{value:h.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:D},null,8,["value"])]),v("div",Qe,[s(mt,{value:h.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:B},null,8,["value"])])]),_:1})),[[ot,a(l).loading]])]),_:1},8,["modelValue"])),[[ot,a(l).loading]])}}}),St=_t({id:"MappingSosBiBulk",state:()=>({statePagination:new dt,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const n={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await k.post(`${Se}?${new URLSearchParams(n).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){e.response.data.statusCode==401&&V().setLoggedIn(!1),this.stateError=e.response.data.result.isError?e.response.data.result.message:"",this.stateIsError=!0,G("IRONS",e),console.log(e)}this.stateLoading=!1},async upload({userAccount:t,excelFile:n}){const e={userAccount:t,ver:"v1"},M=`${Te}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const l=await k.postImages(M,n);l.data.statusCode==200?l.data.result.isError?(this.stateIsError=!0,this.stateError=l.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=l.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=be.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=l.data.result.isError,this.stateError=l.data.result.message)}catch(l){l.response.data.statusCode==401?V().setLoggedIn(!1):(this.stateIsError=!0,this.stateError=l.response.data.result.message),G("IRONS",l)}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(ve(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new dt,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),ta={class:"icon"},ea=Z({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const n=t,e=W(""),M=St(),l=L(()=>(n.page-1)*10+1),r=p=>{e.value=p.order;const h={prop:p.prop,order:p.order};M.setSort(h)};return(p,h)=>{const x=N("inline-svg");return c(),S(a(Pt),{data:n.listData,style:{width:"100%"},onSortChange:r,"empty-text":"No Data"},{default:u(()=>[s(a(b),{label:"No",width:"60",align:"center"},{default:u(F=>[v("span",null,O(l.value+F.$index),1)]),_:1}),s(a(b),{prop:"equipmentModel",label:"Equipment Model",width:"170",sortable:""}),s(a(b),{prop:"component",label:"Component",width:"170",sortable:""}),s(a(b),{prop:"element",label:"Element",width:"170",sortable:""}),s(a(b),{prop:"rating",label:"Rating Description",width:"170",sortable:""}),s(a(b),{prop:"operatorMin",label:"Operator Min",width:"170",sortable:""}),s(a(b),{prop:"valueMin",label:"Value Min",width:"170",sortable:""}),s(a(b),{prop:"operatorMax",label:"Operator Max",width:"170",sortable:""}),s(a(b),{prop:"valueMax",label:"Value Max",width:"170",sortable:""}),s(a(b),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:u(F=>[v("span",null,O(a(lt)(F.row.startDate)),1)]),_:1}),s(a(b),{prop:"EndDate",label:"end Date",align:"center",width:"170",sortable:""},{default:u(F=>[v("span",null,O(a(lt)(F.row.endDate)),1)]),_:1}),s(a(b),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),s(a(b),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:u(F=>[v("div",ta,[s(x,{src:F.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Tt=t=>(le("data-v-7b0fbdc6"),t=t(),de(),t),aa=Tt(()=>v("div",{class:"text-center"},null,-1)),oa=Tt(()=>v("div",{class:"mb-3"},[v("span",null,[$(" Download template "),v("a",{href:"documents/MasterDataSOSMappingForBI.xlsx",target:"_blank",id:"link-download"},"here"),$(" before uploading file ")])],-1)),sa=Tt(()=>v("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[v("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),na={class:"card"},ra={class:"card-body grid-padding"},ia={class:"dialog-footer"},la=Z({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:n}){const e=t,M=n,l=V(),r=St(),p=Ft(e,"visibility"),h=()=>{const f=_e(r.validatedData,_=>{const m=_;return{sosMappingForBiId:0,equipmentModel:m.equipmentModel,component:m.component,element:m.element,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate}});return Object.values(f)},x=()=>{const f=document.getElementById("link-download");f&&f.click()},F=()=>{r.validatedData.length>0?it("Cancel Upload Data?","Confirm").then(_=>{_.isConfirmed&&i()}):i()},q=async f=>{await r.upload({userAccount:l.user.Name,excelFile:f}),r.stateError&&rt(r.error)},i=(f=!1)=>{r.resetState(),M("handle-close",f)},I=f=>{r.setIsUploadedState(f)},R=f=>{r.setPage(f)},C=()=>{if(r.validatedData.length<1){x();return}const f=["EQUIPMENT MODEL","COMPONENT","ELEMENT","RATING DESCRIPTION","OPERATOR MIN","VALUE MIN","OPERATOR MAX","VALUE MAX","START DATE","END DATE","REMARK","STATUS"],_=r.validatedData.map(m=>({equipmentModel:m.equipmentModel,component:m.component,element:m.element,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate,remark:m.validationReason,status:m.isValid?"OK":"Error"}));se("ModelWeight",f,_)},A=async()=>{if(r.displayData.length<1){rt("There is no data to submit");return}if(r.isError){rt("There is still invalid row(s)");return}it("Are you sure you want to submit ?").then(async f=>{if(f.isConfirmed){const _=h();if(r.setBulkData(_),await r.bulkInsert(l.user.Name),r.isError){rt(r.stateError);return}ft("Form has been successfully submitted!","Ok").then(()=>{i(!0)})}})};return(f,_)=>{const m=N("el-button"),E=N("el-dialog"),T=bt("loading");return c(),S(E,{title:"Upload Bulk Data",modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=D=>p.value=D),"before-close":F,width:"70%","custom-class":"upload-modal"},{footer:u(()=>[v("div",null,[v("span",ia,[s(m,{type:"success",onClick:C},{default:u(()=>[$("Download")]),_:1}),s(m,{type:"primary",onClick:A},{default:u(()=>[$("Upload")]),_:1}),s(m,{type:"success",onClick:F},{default:u(()=>[$("Cancel")]),_:1})])])]),default:u(()=>[aa,oa,et(s(Fe,{isSubmissionUploadSuccess:a(r).isUploaded,onHandleCloseUploadedFile:F,onHandleUpload:q,onHandleSetIsExcelFileUploaded:I},null,8,["isSubmissionUploadSuccess"]),[[T,a(r).uploadLoading]]),sa,v("div",na,[v("div",ra,[s(ea,{"list-data":a(r).displayData,page:a(r).pagination.currentPage},null,8,["list-data","page"])])]),a(r).displayData.length>0?(c(),S(It,{key:0,onRaisePageChange:_[0]||(_[0]=D=>R(D)),currentPage:a(r).pagination.currentPage,totalPage:a(r).pagination.totalPage,totalPageSize:a(r).pagination.totalPageSize,startPaginationIndex:a(r).pagination.startPaginationIndex,endPaginationIndex:a(r).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):ht("",!0)]),_:1},8,["modelValue"])}}}),da=At(la,[["__scopeId","data-v-7b0fbdc6"]]),pa={class:"row g-9 my-4"},ua={class:"dialog-footer"},ma=Z({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:n}){const e=xt(),M=t,l=n,r=Ft(M,"visibility"),p=L(()=>e.filterData),h=()=>{x(),e.resetFilter()},x=()=>{l("handle-close",!1)},F=d=>{e.setEquipmentModel(d)},q=d=>{e.setEquipmentModelTo(d)},i=d=>{e.setComponent(d)},I=d=>{e.setComponentTo(d)},R=d=>{e.setElement(d)},C=d=>{e.setElementTo(d)},A=d=>{e.setRatingDesc(d)},f=d=>{e.setRatingDescTo(d)},_=d=>{e.setOperatorMin(d)},m=d=>{e.setOperatorMinTo(d)},E=d=>{e.setValueMin(d)},T=d=>{e.setValueMinTo(d)},D=d=>{e.setOperatorMax(d)},B=d=>{e.setOperatorMaxTo(d)},X=d=>{e.setValueMax(d)},H=d=>{e.setValueMaxTo(d)},o=d=>{e.setStartDate(d)},g=d=>{e.setStartDateTo(d)},at=d=>{e.setEndDate(d)},gt=d=>{e.setEndDateTo(d)},ot=()=>{const d=e.lastUsedFilterData.equipmentModel!==e.filterData.equipmentModel,Q=e.lastUsedFilterData.equipmentModelTo!==e.filterData.equipmentModelTo,st=e.lastUsedFilterData.startDate!==e.filterData.startDate,Dt=e.lastUsedFilterData.startDateTo!==e.filterData.startDateTo,nt=e.lastUsedFilterData.component!==e.filterData.component,Vt=e.lastUsedFilterData.componentTo!==e.filterData.componentTo,Bt=e.lastUsedFilterData.element!==e.filterData.element,$t=e.lastUsedFilterData.elementTo!==e.filterData.elementTo,Nt=e.lastUsedFilterData.rating!==e.filterData.rating,Ht=e.lastUsedFilterData.ratingTo!==e.filterData.ratingTo,zt=e.lastUsedFilterData.operatorMin!==e.filterData.operatorMin,jt=e.lastUsedFilterData.operatorMinTo!==e.filterData.operatorMinTo,Kt=e.lastUsedFilterData.valueMin!==e.filterData.valueMin,Gt=e.lastUsedFilterData.valueMinTo!==e.filterData.valueMinTo,Xt=e.lastUsedFilterData.operatorMax!==e.filterData.operatorMax,Wt=e.lastUsedFilterData.operatorMaxTo!==e.filterData.operatorMaxTo,Jt=e.lastUsedFilterData.valueMax!==e.filterData.valueMax,Qt=e.lastUsedFilterData.valueMaxTo!==e.filterData.valueMaxTo,Yt=e.lastUsedFilterData.endDate!==e.filterData.endDate,Zt=e.lastUsedFilterData.endDateTo!==e.filterData.endDateTo;l("handle-close",d||Q||nt||Vt||Bt||$t||Nt||Ht||zt||jt||Kt||Gt||Xt||Wt||Jt||Qt||st||Dt||Yt||Zt)};return(d,Q)=>{const st=N("el-button"),Dt=N("el-dialog");return c(),S(Dt,{modelValue:r.value,"onUpdate:modelValue":Q[0]||(Q[0]=nt=>r.value=nt),title:"Filter",width:"60%",onClose:Q[1]||(Q[1]=nt=>x())},{footer:u(()=>[v("span",ua,[s(st,{type:"secondary",onClick:h},{default:u(()=>[$("Reset")]),_:1}),s(st,{type:"primary",onClick:ot},{default:u(()=>[$("Filter")]),_:1})])]),default:u(()=>[v("div",pa,[s(j,{"value-from":p.value.equipmentModel,"value-to":p.value.equipmentModelTo,label:"Equipment Model",name:"Equipment Model",options:a(e).equipmentModelOption,onHandleChangeFrom:F,onHandleChangeTo:q},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.component,"value-to":p.value.componentTo,label:"Component",name:"Component",options:a(e).componentOption,onHandleChangeFrom:i,onHandleChangeTo:I},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.element,"value-to":p.value.elementTo,label:"Element",name:"Element",options:a(e).elementOption,onHandleChangeFrom:R,onHandleChangeTo:C},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.rating,"value-to":p.value.ratingTo,label:"Rating Description",name:"rating",options:a(e).ratingDescOption,onHandleChangeFrom:A,onHandleChangeTo:f},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.operatorMin,"value-to":p.value.operatorMinTo,label:"Operator Min",name:"operatorMin",options:a(e).operatorMinOption,onHandleChangeFrom:_,onHandleChangeTo:m},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.valueMin,"value-to":p.value.valueMinTo,label:"Value Min",name:"valueMin",options:a(e).valueMinOption,onHandleChangeFrom:E,onHandleChangeTo:T},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.operatorMax,"value-to":p.value.operatorMaxTo,label:"Operator Max",name:"operatorMax",options:a(e).operatorMaxOption,onHandleChangeFrom:D,onHandleChangeTo:B},null,8,["value-from","value-to","options"]),s(j,{"value-from":p.value.valueMax,"value-to":p.value.valueMaxTo,label:"Value Max",name:"valueMax",options:a(e).valueMaxOption,onHandleChangeFrom:X,onHandleChangeTo:H},null,8,["value-from","value-to","options"]),s(Ot,{"value-from":p.value.startDate?p.value.startDate.toString():"","value-to":p.value.startDateTo?p.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:o,onHandleChangeTo:g},null,8,["value-from","value-to"]),s(Ot,{"value-from":p.value.endDate?p.value.endDate.toString():"","value-to":p.value.endDateTo?p.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:at,onHandleChangeTo:gt},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),ca={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},ha=v("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),ga={class:"d-flex justify-content-between align-items-center"},Da={class:"card"},Ma={class:"card-body grid-padding"},va={class:"my-5"},Ro=Z({__name:"Index",setup(t){const n=te(),e=xt(),M=Et(),l=St(),r=W(!1),p=W(!1),h=W(!1),x=L(()=>e.displayData),F=L(()=>e.pagination),q=E=>{e.setPage(E),M.setIsEdit(!1)};pe(async()=>{n[ae.ACTIVE_PAGE](Mt().meta.parentMenu),ee("SOS Mapping for BI",[{pageName:Mt().meta.parentMenu,pageRoute:Mt().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-sosmapbi"},{pageName:"SOS Mapping for BI",pageRoute:"ironlake-config-sosmapbi"}]),e.setPage(1),await e.getLookup(),await M.getLookup()}),ue(async()=>{e.resetState(),M.resetState(),l.resetState()});const i=async()=>{await e.setPage(1),await e.getLookup(),await M.getLookup()},I=()=>{r.value=!0,M.setIsEdit(!1),M.setErrors([]),M.resetState()},R=async E=>{r.value=!1,E&&await i()},C=()=>{p.value=!0},A=async E=>{p.value=!1,E&&await i()},f=async()=>{const E=await e.export();xe.saveAs(new Blob([E],{type:"application/octet-stream"}),"SOSMappingforBI.xlsx")},_=()=>{h.value=!0},m=async E=>{h.value=!1,E&&await i()};return(E,T)=>(c(),y(kt,null,[v("div",ca,[ha,v("div",ga,[s(ne,{onShowDialog:I}),s(oe,{onShowDialog:C}),s(ie,{onHandleDownload:f}),s(re,{onShowDialog:_})])]),v("div",Da,[v("div",Ma,[s(We,{"list-data":x.value,page:F.value.currentPage,onFetchData:i},null,8,["list-data","page"])])]),v("div",va,[a(e).paginationLoading?ht("",!0):(c(),S(It,{key:0,onRaisePageChange:T[0]||(T[0]=D=>q(D)),currentPage:F.value.currentPage,totalPage:F.value.totalPage,totalPageSize:F.value.totalPageSize,startPaginationIndex:F.value.startPaginationIndex,endPaginationIndex:F.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),s(Ze,{visibility:r.value,onHandleClose:R},null,8,["visibility"]),s(ma,{visibility:p.value,onHandleClose:A},null,8,["visibility"]),s(da,{visibility:h.value,onHandleClose:m},null,8,["visibility"])],64))}});export{Ro as default};
