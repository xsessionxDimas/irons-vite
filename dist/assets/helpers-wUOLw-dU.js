import{r as g,N as p}from"./number-format-BdMuQVyW.js";import{a as b,t as d,f as h,r as f}from"./index-BuVmIl8K.js";import{e as l}from"./lodash-DrHMlsdo.js";import{b as m}from"./webp-converter-browser-C3MD88Lp.js";import"./compressorjs-Cmz8Y9J9.js";import{F as w}from"./file-saver-CwTBvle_.js";const k=e=>{const r=["jpg","jpeg","png","webp"],n=["pdf"];return r.includes(e.toLowerCase())?"Image":n.includes(e.toLowerCase())?"Document":null},N=e=>{const r=["jpg","jpeg","png","webp"],n=["pdf"];return r.includes(e.toLowerCase())?"Image":n.includes(e.toLowerCase())?"Application":null},P=(e,r=!1)=>{const n=e.toLowerCase(),t=r?N(n):k(n);return t?`${t} / ${n.toUpperCase()}`:e.toUpperCase()},y=e=>{const r=e.split("/");return r.length===2?r[1]:e},V=(e,r)=>{const n=e.findIndex(r);return n!==-1&&e.splice(n,1),e};async function F(e,r,n,t=1e3){return new Promise(s=>{setTimeout(async()=>{await w.saveAs(new Blob([e],{type:r}),n),s(null)},t)})}const L=e=>{var s,o;const r=((o=(s=e.path)==null?void 0:s.split(".").pop())==null?void 0:o.toLowerCase())||"",n=y(e.type);return n===r?n:r};function R(e){return e.replace(/[^\d]/g,"")}const C=e=>{const{name:n,type:t,lastModified:s}=e,o=n.split(".").pop()||"";let a=n.replace(`.${o}`,"");a.length>100&&(a=a.substring(0,100)),a||(a=`${Date.now()}`);let i=o;t.startsWith("image/")?i="webp":t==="application/pdf"&&(i="pdf");const c=`${a}.${i}`;return new File([e],c,{type:t,lastModified:s})},O=(e,r)=>{let n;switch(e.operatorMin){case"=":n=Number(r)==e.minValue;break;case"<":n=Number(r)<e.minValue;break;case">":n=Number(r)>e.minValue;break;case"<>":n=Number(r)>=e.minValue;break;case">=":n=Number(r)>=e.minValue;break;case"<=":n=Number(r)<=e.minValue;break}return n},v=(e,r)=>{let n;switch(e.operatorMax){case"=":n=Number(r)==e.maxValue;break;case"<":n=Number(r)<e.maxValue;break;case">":n=Number(r)>e.maxValue;break;case"<>":n=Number(r)<=e.maxValue;break;case">=":n=Number(r)>=e.maxValue;break;case"<=":n=Number(r)<=e.maxValue;break}return n},S=(e,r,n)=>{let t="";const s=n.operatorMin,o=n.operatorMax,a=s=="<>",i=s==">"&&o=="<=",c=s==">="&&o=="<",u=s==">"&&o=="<";return a||i||c||u?e&&r&&(t=n.cbmRating):(e||r)&&(t=n.cbmRating),t},B=(e,r)=>{let n;switch(e.operatorMin){case"=":n=Number(r)==e.minValue;break;case"<":n=Number(r)<e.minValue;break;case">":n=Number(r)>e.minValue;break;case"<>":n=Number(r)>=e.minValue;break;case">=":n=Number(r)>=e.minValue;break;case"<=":n=Number(r)<=e.minValue;break}return n},W=(e,r)=>{let n;switch(e.operatorMax){case"=":n=Number(r)==e.maxValue;break;case"<":n=Number(r)<e.maxValue;break;case">":n=Number(r)>e.maxValue;break;case"<>":n=Number(r)<=e.maxValue;break;case">=":n=Number(r)>=e.maxValue;break;case"<=":n=Number(r)<=e.maxValue;break}return n},j=(e,r,n)=>{let t="";const s=n.operatorMin,o=n.operatorMax,a=s=="<>",i=s==">"&&o=="<=",c=s==">="&&o=="<",u=s==">"&&o=="<";return a||i||c||u?e&&r&&(t=n.cbmRating):(e||r)&&(t=n.cbmRating),t},U=(e,r=-1)=>e=="Open"?"Yet to Start":e=="On Progress"?r>=0?`In Progress - ${r}%`:"In Progress":e=="Submited"||e=="Close"?"Submitted":"",K=(e,r="",n=0)=>{if(e=="Open")return"Yet to Start";if(e=="On Progress")return`In Progress - ${n}%`;if(e=="Submited")return"Under Review";if(e=="Close"){if(r=="Approved (SPV)")return"Final Review";if(r=="Completed")return"Closed"}return""},z=e=>e=="Yet to Start"?"gray":e.includes("In Progress")?"blue":e=="Submitted"||e=="Under Review"||e=="Final Review"?"green":"",H=e=>{const r=new Intl.Collator([],{numeric:!0});return e.sort((n,t)=>r.compare(n,t))},_=(e="")=>{let r;return e?(e&&e.toLowerCase()=="buma"?r="green":r="red",`<span class='ownership ${r}'>${e}</span>`):""},Y=e=>e?["D11","D11T","D10T","D10T2"].some(t=>e.includes(t)):!1,$=e=>e?["LIE R9350","LIE R994B","LIE R9800 MTU","LIE R9800 CUM"].some(t=>e.includes(t)):!1,q=(e,r)=>{let n=!0;return e&&e!=""&&r&&r.id!=e.id&&(n=!1),n},G=e=>{if(!e)return"";if(e.description&&e.description!=""&&e.description.includes(";")){const r=[];if(e.description.includes("|"))return e.description.split("|").forEach(n=>{r.push(n.split("")[2])}),r.join(", ");if(e.description!="")return e.description}return e.items?e.items.length<5?e.items[1].value:e.items[2].value:""},J=e=>{const r=e;if(r){try{Array.from(r.getElementsByClassName("show-pdf")).forEach(t=>{t.onclick=s=>{s.preventDefault()}})}catch(n){console.log(n)}try{Array.from(r.getElementsByClassName("spv-print-pdf")).forEach(t=>{t.onclick=s=>{s.preventDefault()}})}catch(n){console.log(n)}}},Q=e=>e.replace(/[^0-9.]/g,""),X=e=>{const r=e.keyCode?e.keyCode:e.which;e.target.value.includes(".")&&e.target.value.split(".").length>=2&&r==46&&e.preventDefault(),(r<48||r>57)&&r!=46&&e.preventDefault()},Z=e=>{let r="";if(e.locationId)r+=`${e.locationId}. `,r+=`Crack Length - ${e.locationDesc}`;else{const n=e.locationDesc[0].toUpperCase(),t=e.locationDesc.toString().indexOf(".")+1;r=n+e.locationDesc.slice(1,t)+" Crack Length - "+e.locationDesc.slice(t)}return r},ee=e=>{let r="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=n.length;for(let s=0;s<e;s++)r+=n.charAt(Math.floor(Math.random()*t));return r},re=e=>["a","e","i","o","u"].includes(e.toLowerCase());function ne(e,r,n="id"){const t=[];return e.forEach(s=>{const o=r.find(a=>s[n]===a[n]);if(o){const a={...s,...o};t.push(a)}}),t}const te=e=>{const r=["P3","P4"];return e.every(n=>{const t=n.defectWorkorder!=null&&n.defectWorkorder!==""&&n.defectWorkorder!==void 0,s=n.status==="Decline"||n.plannerStatus==="Decline",o=n.status==="Acknowledge",a=!l.isUndefined(n.plannerStatus)&&n.plannerStatus==="Acknowledge";let i=o;return r.includes(n.priority)&&(i=a),s||i&&t})},se=(e,r=!1)=>e.every(n=>r?n.cbmNAStatus==="Decline"||n.plannerCbmNAStatus==="Confirmed":n.cbmNAStatus==="Decline"||n.cbmNAStatus==="Confirmed"),oe=(e,r)=>e.filter(n=>r.includes(n.priority)),ie=e=>e.every(r=>r.status==="Decline"||r.status==="Acknowledge"||r.plannerStatus==="Decline"||r.plannerStatus==="Acknowledge");function ae(e,r){let n=null;return e.every((t,s)=>r(t)?(n={index:s,object:t},!1):!0),n}const ce=e=>{const r=e.keyCode?e.keyCode:e.which;(r<48||r>57)&&e.preventDefault()},le=(e,r,n,t="status",s="plannerStatus",o=!1,a="")=>{let i="light-yellow color-dark-yellow";const c=r==null?void 0:r.find(u=>u.id===e);if(!c||!(t in c))return i;if(o)return a=="Approved (SPV)"?i=c[s]?"light-green color-dark-green":"light-yellow color-dark-yellow":i=["Not-Confirm","Submited"].includes(c[t])?"light-yellow color-dark-yellow":"light-green color-dark-green",i;if(!n&&!(s in c))return i;if(n)switch(c[t]){case"Not-Confirm":i="light-yellow color-dark-yellow";break;case"Confirmed":i="light-green color-dark-green";break}else!n&&c[s]&&(i="light-green color-dark-green");return i},ue=(e,r,n="status",t="plannerStatus",s="")=>{let o="light-yellow color-dark-yellow";const a=r==null?void 0:r.find(i=>i.id===e);return a&&(s=="Approved (SPV)"?o=a[t]?"light-green color-dark-green":"light-yellow color-dark-yellow":o=["Not-Confirm","Submited"].includes(a[n])?"light-yellow color-dark-yellow":"light-green color-dark-green"),o};function x(e,r,n){return e.length!==r.length?!1:e.every((t,s)=>{const o=r[s];return Object.keys(t).filter(i=>!n.some(c=>i.toLowerCase().includes(c))).every(i=>i=="totalHours"?l.isEqual(parseFloat(t[i]),parseFloat(o[i])):l.isEqual(t[i],o[i]))})}function pe(e,r,n){let t=!1;const s=["error","valid","message"];if(r&&n){for(const o of e)if(o=="labours"&&n[o].length==1&&n[o][0].position==""&&(n[o][0].position=r[o][0].position),Array.isArray(r[o])&&Array.isArray(n[o])){if(!x(r[o],n[o],s)){t=!0;break}}else if(typeof r[o]=="string"&&!l.isEqual(r[o],n[o])){t=!0;break}}return t}function me(e,r,n){const t=r/e,s=Math.round(t*n);return{width:n,height:s}}const ge=e=>{const r=l.cloneDeep(e);return r.forEach(n=>{var t;((t=n.items[3])==null?void 0:t.valueItemType)!="comment"&&n.items.splice(3,0,{})}),r},be=(e,r)=>{const[n,t,s]=e.taskDesc.split(";"),[o,a,i]=r.taskDesc.split(";");return n!==o?n-o:t!==a?t.localeCompare(a):s.localeCompare(i)},de=async()=>{(await d(h,"validTokenNew")).length<1&&f.push({name:"signindma"})};async function he(e,r=1){let n=.1;try{const t=await createImageBitmap(e);let s=await m(e,{quality:r,height:t.height,width:t.width}),o=s.size/(1024*1024);for(;o>2;)r<=n&&(n/=10),r=Math.max(n,r-n),s=await m(e,{quality:r,height:t.height,width:t.width}),o=s.size/(1024*1024);const a=e instanceof File?C(e).name:`${Date.now()}.webp`;return{file:new File([s],a,{type:"image/webp"})}}catch{throw new Error("Error converting to WebP")}}const fe=e=>{let r=0,n=0;return e.forEach(t=>{t.groupName!="DEFECT_IDENTIFIED_SERVICE"&&(n=n+t.doneTask,r=r+t.totalTask)}),r==0?100:l.floor(n/r*100)},we=e=>{const{smu:r,hmOffset:n,range:t}=e,s=g(r),o=Number(s)+Number(n)>=Number(t.min),a=Number(s)+Number(n)<=Number(t.max);return!!(s!=""&&o&&a)},ke=()=>b().user.isPlanner==1,Ne=e=>e==p.NO_NETWORK?p.NO_NETWORK_VIEW:e;export{ce as A,ge as B,Z as C,be as D,X as E,ne as F,me as G,q as H,ke as I,B as J,W as K,j as L,we as M,ue as N,V as O,R as P,P as Q,F as R,k as S,C as T,L as U,Y as a,$ as b,de as c,H as d,z as e,K as f,oe as g,ie as h,te as i,he as j,le as k,_ as l,Ne as m,pe as n,Q as o,J as p,ee as q,re as r,U as s,G as t,ae as u,se as v,fe as w,O as x,v as y,S as z};
