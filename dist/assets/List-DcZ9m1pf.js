import{a as S}from"./element-plus-BeWdvTRa.js";import{s as g,b as O,f as $,c as h}from"./date-format-8-IvfSl3.js";import{c as C,s as P,a as H}from"./index-BuVmIl8K.js";import{u as B}from"./usePositionListStore-BsprGHwA.js";import{u as N}from"./authentication-handler-Pueb_EI7.js";import{d as f}from"./pinia-BjOS2_Ao.js";import{D as A,u as V}from"./useDefectSheetStore-85RM-z1z.js";import{O as T}from"./OnlineStatus-Bhk3CA8-.js";import{L as U}from"./ListGroup-DPvT1uVA.js";import{e as q}from"./lodash-DrHMlsdo.js";import{u as j}from"./useDefectsStore-j2gYF-8i.js";import{n as W}from"./navigator-D5io2Cca.js";import{u as G}from"./usePersonelLabourStore-BUmSURn2.js";import{k as z,r as I,c as v,o as J,d as K,p as l,aa as _,aB as d,s as L,F as Q,$ as X,R as Z,bd as ee,bb as te,q as re}from"./@vue-BypzYtbH.js";import{_ as oe}from"./nw-img-vue-CR837WER.js";import"./dayjs-D0x2Df_K.js";import"./@popperjs-BaMZbQYT.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./moment-C5S46NFB.js";import"./object-path-DPahbflh.js";import"./deepmerge-oeePEK50.js";import"./vue-router-iNp9kJ0K.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./Pagination-BiobnanQ.js";import"./urls-DI_NR_TT.js";import"./mapOption-CeGMwmH0.js";import"./helpers-wUOLw-dU.js";import"./number-format-BdMuQVyW.js";import"./webp-converter-browser-C3MD88Lp.js";import"./compressorjs-Cmz8Y9J9.js";import"./file-saver-CwTBvle_.js";import"./useGlobalConnectionStore-DV9B81de.js";import"./internet-connection-CnLQPjRt.js";import"./@vueuse-DFoNmIyu.js";import"./document_download-C1p7j0nJ.js";import"./Pagination-D-xfdYmn.js";import"./language-BriOOvyN.js";import"./table-sort-Bpdq_Uwn.js";import"./Index.vue_vue_type_style_index_2_lang-BjFq237h.js";import"./SelectSearch-CnaDUnr3.js";import"./useEFormStore-DtkLPope.js";import"./prev-val-handler-DvA3D_kF.js";import"./list-pcxkCnQg.js";import"./urls-B0Rq9QQ3.js";import"./urls-CPQ2HRXU.js";import"./urls-CvqtYZA-.js";import"./useOfflineCameraStore-BBsMm6DV.js";import"./string-to-imageinfo-converter-Cdr1iOkP.js";import"./MachineSMUEnum-CgiCo9nf.js";import"./methods-bliey5hF.js";import"./useAttachmentStore-CPMOf2aR.js";import"./CrackYesClass-COntz77m.js";import"./IronformConfig-BWypCgSI.js";import"./urls-hWHEBXep.js";import"./urls-D8F5Tyyp.js";import"./disabled-state-O9W-ZY8y.js";import"./CrackNoClass-0DSU7BAn.js";import"./reference-file-C1vLEEpf.js";const ie=f({id:"useIdentifiedDefectSheetStore",state:()=>({stateIsError:!1,stateDefectSheets:[],stateError:{},stateSFOption:[],stateDefaultRange:[g(3,"months","YYYY-MM-DD"),O(0,"months","YYYY-MM-DD")]}),getters:{ServiceFormOptions:e=>e.stateSFOption,ServiceFormList:e=>e.stateDefectSheets,defaultRange:e=>e.stateDefaultRange},actions:{async getIdentifiedDefectList(e){const a={ver:"v1",supervisor:e,dateStart:this.defaultRange[0],dateEnd:this.defaultRange[1]};try{this.stateIsError=!1;const o=await C.get(`${A}?${new URLSearchParams(a).toString()}`);this.stateDefectSheets=o.data.result.content,this.stateSFOption=this.stateDefectSheets.map(t=>({label:`${t.unitNumber} - ${t.brand} ${t.equipmentModel} - ${t.psType} Hour Service - ${t.workOrder}`,value:`${t.unitNumber} - ${t.equipmentModel} - ${t.psType} Hour Service - ${t.workOrder}`}))}catch(o){N(o),this.stateIsError=!0,this.stateError=o,P("IRONS",o)}},setSelectedDefect(e){return this.stateDefectSheets.find(o=>o.dailyScheduleId===e)},setDefaultFilter(e,a){this.stateDefaultRange[0]=e,this.stateDefaultRange[1]=a},setDefaultFilterDateRange(){this.stateDefaultRange[0]=g(3,"months","YYYY-MM-DD"),this.stateDefaultRange[1]=$("YYYY-MM-DD")}}}),se=f({id:"useIdentifiedDefectInterimStore",state:()=>({}),actions:{async getIdentifiedDefectList(e){}}}),ae=f({id:"useIdentifiedDefectInterventionStore",state:()=>({}),actions:{async getIdentifiedDefectList(e){}}}),Y=e=>(ee("data-v-8d0a7606"),e=e(),te(),e),ne={class:"wrapper d-flex flex-column flex-fill"},de={class:"d-flex justify-content-between align-items-center"},me=Y(()=>d("p",{class:"page-title"},null,-1)),ce={class:"mt-4"},pe={class:"d-flex flex-row justify-content-end align-items-center"},le=Y(()=>d("p",{class:"filter-text me-6 mb-0"},"Filter by Date",-1)),fe=z({__name:"List",setup(e){const a=V(),o=G(),t=j(),b=B(),i=ie(),F=se(),y=ae(),R=H(),{redirectByLink:k}=W(),p=I(!1),s=I(i.defaultRange),u=v(()=>[{name:"Digital Service Forms",list:i.ServiceFormList,options:i.ServiceFormOptions}]),n=v(()=>R.user.EmployeeId),D=async()=>{p.value=!0;const r=S.service({lock:!0,text:"Loading Identified Defect List",background:"rgba(0, 0, 0, 0.7)"});await o.getPersonalLabours(),await b.getPositionDMA(),await i.getIdentifiedDefectList(n.value),await F.getIdentifiedDefectList(n.value),await y.getIdentifiedDefectList(n.value),r.close(),p.value=!1},w=r=>{r.name==u.value[0].name&&M(r.item.dailyScheduleId)},M=r=>{const m=i.setSelectedDefect(r);a.setSelectedDefectFromOtherPage(m),t.reset(),k("/ironforms/identified-defects/service-form-detail")},E=async()=>{const r=S.service({lock:!0,text:"Loading Identified Defect List",background:"rgba(0, 0, 0, 0.7)"});(!s.value||s.value.length===0)&&(i.setDefaultFilterDateRange(),s.value=i.defaultRange),i.setDefaultFilter(h(s.value[0],"YYYY-MM-DD"),h(s.value[1],"YYYY-MM-DD")),await i.getIdentifiedDefectList(n.value),r.close()};return J(async()=>{n.value&&await D()}),K(n,async r=>{q.isUndefined(r)||await D()},{deep:!0}),(r,m)=>{const x=Z("el-date-picker");return l(),_("div",ne,[d("div",de,[me,d("div",null,[L(T)])]),d("div",ce,[d("div",pe,[le,L(x,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=c=>s.value=c),class:"btn btn-outline filter-date-monitoring","popper-class":"filter-date-monitoring-popper",type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"Start date","end-placeholder":"End date",format:"DD/MM/YYYY",clearable:!0,onChange:E},null,8,["modelValue"])]),(l(!0),_(Q,null,X(u.value,c=>(l(),re(U,{key:c.name,dataList:c,onOnItemClick:w,loading:p.value,"is-defect-list-page":!0,pageName:"defect-identified",showCounting:!1},null,8,["dataList","loading"]))),128))])])}}}),Nt=oe(fe,[["__scopeId","data-v-8d0a7606"]]);export{Nt as default};
