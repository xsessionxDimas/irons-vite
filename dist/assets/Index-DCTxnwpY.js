import{u as A}from"./authentication-handler-Pueb_EI7.js";import{c as O,s as N,a as F}from"./index-BuVmIl8K.js";import{d as M}from"./pinia-BjOS2_Ao.js";import{a as g}from"./element-plus-BeWdvTRa.js";import{u as B}from"./usePreviewFormStore-q8XX1uYG.js";import{e as D}from"./lodash-DrHMlsdo.js";import{k as u,r as E,bL as P,d as T,o as q,p as a,aa as n,u as l,A as h,F as v,q as S,$ as C,aB as c,C as p,a7 as H,L as R,s as f,bd as G,bb as U}from"./@vue-BypzYtbH.js";import{u as V}from"./vue-router-iNp9kJ0K.js";import{u as j}from"./useDefectsFormStore-41UTMhiG.js";import{u as z}from"./useDefectsStore-7BpSnT1n.js";import{_ as J}from"./Index.vue_vue_type_style_index_2_lang-BjFq237h.js";import{O as K}from"./OnlineStatus-Bhk3CA8-.js";import{_ as Q}from"./nw-img-vue-CR837WER.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./urls-CvqtYZA-.js";import"./number-format-BdMuQVyW.js";import"./useCameraStore-BwXVJhPe.js";import"./string-to-imageinfo-converter-Cdr1iOkP.js";import"./urls-CPQ2HRXU.js";import"./helpers-wUOLw-dU.js";import"./webp-converter-browser-C3MD88Lp.js";import"./compressorjs-Cmz8Y9J9.js";import"./file-saver-CwTBvle_.js";import"./prev-val-handler-DvA3D_kF.js";import"./DefectNoClass-BqGKOkzR.js";import"./date-format-8-IvfSl3.js";import"./moment-C5S46NFB.js";import"./urls-B0Rq9QQ3.js";import"./urls-hWHEBXep.js";import"./urls-D8F5Tyyp.js";import"./useGlobalConnectionStore-DV9B81de.js";import"./useAttachmentStore-DqM3autD.js";import"./CrackNoClass-0DSU7BAn.js";import"./CrackYesClass-COntz77m.js";import"./methods-bliey5hF.js";import"./useAttachmentStore-CPMOf2aR.js";import"./SelectSearch-CnaDUnr3.js";import"./internet-connection-CnLQPjRt.js";import"./@vueuse-DFoNmIyu.js";const W="https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/service_sheet_header",X=`${W}/get_approval_service_sheet`,y=M({id:"DmaApprovalList",state:()=>({stateSelectedHeader:"Open",stateList:[],stateListLoading:!0,stateOptions:[]}),getters:{list:e=>e.stateList,listLoading:e=>e.stateListLoading,options:e=>e.stateOptions},actions:{async getList(){const e={ver:"v1"};try{const o=await O.get(X,"",new URLSearchParams(e).toString());this.stateList=o.data.result.content,this.stateOptions=this.stateList.map(t=>({label:`${t.unitNumber} - ${t.brand} ${t.equipmentModel} - ${t.psType} Hour Service - ${t.workOrder}`,value:`${t.unitNumber} - ${t.equipmentModel} - ${t.psType} Hour Service - ${t.workOrder}`}))}catch(o){A(o),N("IRONS",o),console.log(o)}finally{this.stateListLoading=!1}},resetList(){this.stateList=[]}}}),Y={class:"div"},Z={key:0,class:"row py-10 px-2 my-10 justify-content-center text-center w-100"},tt={key:0,style:{color:"#919EAB"}},et=["onClick"],ot={class:"col"},rt=u({__name:"ListItem",setup(e){const o=F(),t=B(),i=y(),w=z(),_=j(),b=V(),d=E([]),$=P(()=>i.listLoading),k=async r=>{const m=g.service({lock:!0,text:"Generating Form",background:"rgba(0, 0, 0, 0.7)"});t.setModelAndPsTypeId(`${r.brand} ${r.equipmentModel}`,r.psType.toString(),r.workOrder,r.unitNumber),await t.postGenerateServiceSheet(o.user.EmployeeId,o.user.Name,o.user.SiteId);const s=D.last(t.groups);s&&(t.setSelectedGroup(s.id),await t.updateGroupByParam(s.groupName)),await w.getDefectsData(r.workOrder.toString()),_.setModelAndPsTypeId("",r.psType.toString(),"",r.equipmentModel,""),await _.getEhmsRating(),m.close(),b.push({name:"approvalpreview"})},x=r=>{const m=i.options.findIndex(s=>s.value==r);m>=0&&(d.value=[i.list[m]])};return T(()=>i.list,r=>{d.value=r},{deep:!0}),q(()=>{d.value=i.list}),(r,m)=>(a(),n("div",Y,[l(i).list.length<1?(a(),n("div",Z,[l($)?h("",!0):(a(),n("h5",tt,"No Data Display"))])):(a(),n(v,{key:1},[l(i).options?(a(),S(J,{key:0,options:l(i).options,onHandleSelectFitter:x,"drop-down-placeholder":"Search Service Sheet"},null,8,["options"])):h("",!0),(a(!0),n(v,null,C(d.value,(s,I)=>(a(),n("div",{key:s.dailyScheduleId,class:"row p-2 m-3 bg-light monitoring-item",onClick:dt=>k(s)},[c("div",ot,p(I+1)+". "+p(s.unitNumber)+" - "+p(s.brand)+" "+p(s.equipmentModel)+" - "+p(s.psType)+" Hour Service - "+p(s.workOrder),1)],8,et))),128))],64))]))}}),st=u({__name:"Index",setup(e){const o=y();return H(async()=>{const t=g.service({lock:!0,text:"Loading Approval List",background:"rgba(0, 0, 0, 0.7)"});await o.getList(),t.close()}),R(()=>{o.resetList()}),(t,i)=>(a(),S(rt))}}),L=e=>(G("data-v-bf2839ab"),e=e(),U(),e),it={class:"wrapper d-flex flex-column flex-fill"},at={class:"d-flex justify-content-between align-items-center"},nt=L(()=>c("p",{class:"page-title"},"Service Completion Approval",-1)),pt={class:"col-12 w-100% bg-white"},ct=L(()=>c("h1",{class:"my-6"},null,-1)),mt=u({__name:"Index",setup(e){return(o,t)=>(a(),n("div",it,[c("div",at,[nt,c("div",null,[f(K)])]),c("div",pt,[ct,f(st)])]))}}),be=Q(mt,[["__scopeId","data-v-bf2839ab"]]);export{be as default};
