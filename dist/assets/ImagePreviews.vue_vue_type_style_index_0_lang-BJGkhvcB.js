import{c as x}from"./index-BuVmIl8K.js";import{e as C}from"./lodash-DrHMlsdo.js";import{k as L,r as m,a0 as R,c as $,o as A,d as E,p as o,q as D,x as P,R as j,Y as I,aa as n,y as M,aB as f,F as S,$ as F}from"./@vue-BypzYtbH.js";const G={key:0,class:"text-center"},N={style:{height:"100px"}},O={key:1,class:"row my-4"},q=["src"],J=L({__name:"ImagePreviews",props:{visibility:{type:Boolean,default:!1},images:{type:Array}},emits:["handle-close","handle-delete"],setup(h,{emit:_}){const l=h,y=_,a=m(!1),p=R(l,"visibility"),r=$(()=>C.cloneDeep(l.images)),b=m([]),v=async()=>{var e;if(w(),a.value=!0,b.value=[],((e=r.value)==null?void 0:e.length)>0){let t=0;c.value.forEach(async i=>{var s;const d={fileUrl:`${i.fileName}`,ver:"v1"};try{const u=`https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/attachment/download_by_url?${new URLSearchParams(d).toString()}`,B=(await x.getBlob(u)).data,U=new Blob([B]),k=window.URL||window.webkitURL;i.url=k.createObjectURL(U),t++,t==((s=r.value)==null?void 0:s.length)&&(a.value=!1)}catch(u){console.log("image",u)}})}},c=m([]),w=()=>{const e=l.images;c.value=e};A(async()=>{v()}),E(r,async(e,t)=>{(e==null?void 0:e.length)==0&&g(),(e==null?void 0:e.length)!=(t==null?void 0:t.length)&&await v()},{deep:!0});const g=()=>{y("handle-close",!1)};return(e,t)=>{const i=j("el-dialog"),d=I("loading");return o(),D(i,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),title:"Detailed picture",width:"80%",onClose:t[1]||(t[1]=s=>g())},{default:P(()=>[a.value?(o(),n("div",G,[M(f("div",N,null,512),[[d,a.value]])])):(o(),n("div",O,[(o(!0),n(S,null,F(c.value,s=>(o(),n("div",{key:s.imgBlob,class:"col-md-3 fv-row fv-plugins-icon-container p-2 rounded position-relative"},[f("img",{src:s.url,class:"w-100 rounded",style:{height:"200px","object-fit":"fill"}},null,8,q)]))),128))]))]),_:1},8,["modelValue"])}}});export{J as _};
