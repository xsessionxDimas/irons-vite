import{u as It}from"./vuex-BbOKrtVp.js";import{a as $t}from"./breadcrumb-D-Q4Tk9w.js";import{b as I,u as rt,i as J,h as ot,j as tt,A as At}from"./index-BCnwA6yE.js";import{P as vt}from"./Pagination-CVDIvnOM.js";import{F as xt}from"./FilterIconButton-Bj0WTbms.js";import{h as Ht,A as Rt,U as Wt}from"./excel-generator-CRLIz6fw.js";import{D as Vt}from"./DownloadIconButton-CIQp-YG7.js";import{_ as f,b as ft,a as Bt}from"./element-plus-C5R56mia.js";import{f as k,n as R,a as ut,b as Mt,h as ct,i as ht}from"./date-format-BASVuupi.js";import{P as at,b as qt,d as zt,a as Yt}from"./table-sort-VnBD5Hfa.js";import{d as Dt}from"./pinia-BjOS2_Ao.js";import{a as q,m as jt}from"./mapOption-sP4IrA4W.js";import{k as Y,c as $,r as Z,u as s,y as z,p as U,aa as et,q as L,x as p,Y as it,R as x,s as a,aB as n,C as j,a0 as nt,B as A,A as lt,T as yt,bd as Kt,bb as Gt,a7 as Qt,L as Xt,F as Zt}from"./@vue-BypzYtbH.js";import{a as bt}from"./vee-validate-C_msoaAA.js";import{c as _t,a as W,b as K,d as Tt}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as Ft}from"./ErrorAlert-CMKGfwAi.js";import{_ as G}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as Q}from"./AutoComplete.vue_vue_type_script_setup_true_lang-D4CTLiQF.js";import{_ as st}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{e as Jt}from"./lodash-Cr9vlq0V.js";import{_ as te}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as ee}from"./map-anything-abi6NY2Z.js";import{_ as ae}from"./nw-img-vue-CR837WER.js";import{_ as X}from"./AutoComplete.vue_vue_type_style_index_0_lang-CRR6Z--K.js";import{_ as St}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{F as se}from"./file-saver-DhbZvGod.js";import"./vue-router-iNp9kJ0K.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const M="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/daily_schedule",re=`${M}/bulk`,oe=`${M}/validate_upload`,ie=`${M}/export`,ne=`${M}/lookup`,le="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/equipment_number/lookup",de="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/daily_schedule/lookup_pstype",ue="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/shift/lookup",ce=`${M}/update`,he=`${M}/update_isdeleted`,mt=Dt({id:"dailyscheduleListV1",state:()=>({stateFilterData:{UnitNumber:"",SmuDue:"",WorkOrder:"",PsType:"",DateService:"",Shift:"",StartDate:"",EndDate:"",UnitNumberTo:"",SmuDueTo:"",WorkOrderTo:"",PsTypeTo:"",DateServiceTo:"",ShiftTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"dateService_asc",ver:"v1"},stateLastUsedFilterData:{UnitNumber:"",SmuDue:"",WorkOrder:"",PsType:"",DateService:"",Shift:"",StartDate:"",EndDate:"",UnitNumberTo:"",SmuDueTo:"",WorkOrderTo:"",PsTypeTo:"",DateServiceTo:"",ShiftTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"dateService_asc",ver:"v1"},statePageName:"dailyschedule",stateDisplayData:[],statePagination:new at,stateLoading:!1,statePaginationLoading:!1,statePsTypeOption:[],stateShiftOption:[],stateSmuDueOption:[],stateUnitNumberOption:[],stateWorkOrderOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,psTypeOption:t=>t.statePsTypeOption,shiftOption:t=>t.stateShiftOption,smuDueOption:t=>t.stateSmuDueOption,unitNumberOption:t=>t.stateUnitNumberOption,workOrderOption:t=>t.stateWorkOrderOption},actions:{async getData(t=!0){const o={UnitNumber:this.stateFilterData.UnitNumber,SmuDue:this.stateFilterData.SmuDue,PsType:this.stateFilterData.PsType,WorkOrder:this.stateFilterData.WorkOrder,DateService:this.stateFilterData.DateService?k(this.stateFilterData.DateService):"",Shift:this.stateFilterData.Shift,StartDate:this.stateFilterData.StartDate?k(this.stateFilterData.StartDate):"",EndDate:this.stateFilterData.EndDate?k(this.stateFilterData.EndDate):"",UnitNumberTo:this.stateFilterData.UnitNumberTo,SmuDueTo:this.stateFilterData.SmuDueTo,WorkOrderTo:this.stateFilterData.WorkOrderTo,PsTypeTo:this.stateFilterData.PsTypeTo,DateServiceTo:this.stateFilterData.DateServiceTo?k(this.stateFilterData.DateServiceTo):"",ShiftTo:this.stateFilterData.ShiftTo,StartDateTo:this.stateFilterData.StartDateTo?k(this.stateFilterData.StartDateTo):"",EndDateTo:this.stateFilterData.EndDateTo?k(this.stateFilterData.EndDateTo):"",Page:this.stateFilterData.Page.toString(),PageSize:this.stateFilterData.PageSize.toString(),Order:this.stateFilterData.Order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await I.get(M,"",new URLSearchParams(o).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){console.log(e)}this.stateLoading=!1},async getLookup(){const t={ver:this.stateFilterData.ver,DateService:this.stateFilterData.DateService?k(this.stateFilterData.DateService):"",DateServiceTo:this.stateFilterData.DateServiceTo?k(this.stateFilterData.DateServiceTo):""};try{const o=await I.get(ne,"",new URLSearchParams(t).toString());this.stateUnitNumberOption=q(o.data.result.content.unitNumber),this.statePsTypeOption=q(o.data.result.content.psType),this.stateShiftOption=q(o.data.result.content.shift),this.stateSmuDueOption=q(o.data.result.content.smuDue),this.stateWorkOrderOption=q(o.data.result.content.workOrder)}catch(o){console.log(o)}},async export(){const t={UnitNumber:this.stateFilterData.UnitNumber,SmuDue:this.stateFilterData.SmuDue,PsType:this.stateFilterData.PsType,WorkOrder:this.stateFilterData.WorkOrder,DateService:this.stateFilterData.DateService?k(this.stateFilterData.DateService):"",Shift:this.stateFilterData.Shift,StartDate:this.stateFilterData.StartDate?k(this.stateFilterData.StartDate):"",EndDate:this.stateFilterData.EndDate?k(this.stateFilterData.EndDate):"",UnitNumberTo:this.stateFilterData.UnitNumberTo,SmuDueTo:this.stateFilterData.SmuDueTo,PsTypeTo:this.stateFilterData.PsTypeTo,WorkOrderTo:this.stateFilterData.WorkOrderTo,DateServiceTo:this.stateFilterData.DateServiceTo?k(this.stateFilterData.DateServiceTo):"",ShiftTo:this.stateFilterData.ShiftTo,StartDateTo:this.stateFilterData.StartDateTo?k(this.stateFilterData.StartDateTo):"",EndDateTo:this.stateFilterData.EndDateTo?k(this.stateFilterData.EndDateTo):"",Page:this.stateFilterData.Page.toString(),PageSize:this.stateFilterData.PageSize.toString(),Order:this.stateFilterData.Order,ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await I.getBlob(ie,"",new URLSearchParams(t).toString())).data}catch(o){console.log(o)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:o}){if(!t&&!o)this.stateFilterData.Order="";else{const e=o=="ascending"?"asc":"desc";this.stateFilterData.Order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1)},setUnitNumber(t){this.stateFilterData.UnitNumber=t},setSmuDue(t){this.stateFilterData.SmuDue=t},setWorkOrder(t){this.stateFilterData.WorkOrder=t},setPsType(t){this.stateFilterData.PsType=t},setDateService(t){this.stateFilterData.DateService=t},setShift(t){this.stateFilterData.Shift=t},setStartDate(t){this.stateFilterData.StartDate=t},setEndDate(t){this.stateFilterData.EndDate=t},setUnitNumberTo(t){this.stateFilterData.UnitNumberTo=t},setSmuDueTo(t){this.stateFilterData.SmuDueTo=t},setWorkOrderTo(t){this.stateFilterData.WorkOrderTo=t},setPsTypeTo(t){this.stateFilterData.PsTypeTo=t},setDateServiceTo(t){this.stateFilterData.DateServiceTo=t},setShiftTo(t){this.stateFilterData.ShiftTo=t},setStartDateTo(t){this.stateFilterData.StartDateTo=t},setEndDateTo(t){this.stateFilterData.EndDateTo=t},async resetFilter(){this.stateFilterData.UnitNumber="",this.stateFilterData.SmuDue="",this.stateFilterData.WorkOrder="",this.stateFilterData.PsType="",this.stateFilterData.Shift="",this.stateFilterData.DateService="",this.stateFilterData.StartDate="",this.stateFilterData.EndDate="",this.stateFilterData.UnitNumberTo="",this.stateFilterData.SmuDueTo="",this.stateFilterData.WorkOrderTo="",this.stateFilterData.PsTypeTo="",this.stateFilterData.ShiftTo="",this.stateFilterData.DateServiceTo="",this.stateFilterData.StartDateTo="",this.stateFilterData.EndDateTo="";const t=this.stateLastUsedFilterData.UnitNumber!=="",o=this.stateLastUsedFilterData.SmuDue!=="",e=this.stateLastUsedFilterData.WorkOrder!=="",S=this.stateLastUsedFilterData.PsType!=="",r=this.stateLastUsedFilterData.DateService!=="",u=this.stateLastUsedFilterData.StartDate!=="",d=this.stateLastUsedFilterData.EndDate!=="",i=this.stateLastUsedFilterData.UnitNumberTo!=="",F=this.stateLastUsedFilterData.SmuDueTo!=="",_=this.stateLastUsedFilterData.WorkOrderTo!=="",w=this.stateLastUsedFilterData.PsTypeTo!=="",P=this.stateLastUsedFilterData.Shift!=="",T=this.stateLastUsedFilterData.ShiftTo!=="",E=this.stateLastUsedFilterData.DateServiceTo!=="",O=this.stateLastUsedFilterData.StartDateTo!=="",v=this.stateLastUsedFilterData.EndDateTo!=="";(t||o||e||S||u||d||i||F||_||w||O||v||P||T||r||E)&&await this.getData()},resetState(){this.stateFilterData={UnitNumber:"",SmuDue:"",WorkOrder:"",PsType:"",DateService:"",Shift:"",StartDate:"",EndDate:"",UnitNumberTo:"",SmuDueTo:"",WorkOrderTo:"",PsTypeTo:"",DateServiceTo:"",ShiftTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"dateService_asc",ver:"v1"},this.stateDisplayData=[],this.statePagination=new at,this.stateLoading=!1,this.statePaginationLoading=!1}}}),dt=Dt({id:"dailyScheduleFormV1",state:()=>({stateFormData:{dailyScheduleId:0,endDate:R(new Date("12/31/9999")),startDate:R(new Date),isActive:!0},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,statePsTypeOption:[],stateShiftOption:[],stateUnitNumberOption:[]}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,psTypeOption:t=>t.statePsTypeOption,shiftOption:t=>t.stateShiftOption,unitNumberOption:t=>t.stateUnitNumberOption},actions:{async getEquipmentNumberLookup(){const t={ver:"v1"};try{const o=await I.get(le,"",new URLSearchParams(t).toString());this.stateUnitNumberOption=jt(o.data.result.content,"equipmentNumber","equipmentNumberDescription")}catch(o){console.log(o)}},async getPsTypeLookup(){const t={ver:"v1"};try{const o=await I.get(de,"",new URLSearchParams(t).toString());this.statePsTypeOption=q(o.data.result.content.psType)}catch(o){console.log(o)}},async getShiftLookup(){const t={ver:"v1"};try{const o=await I.get(ue,"",new URLSearchParams(t).toString());this.stateShiftOption=q(o.data.result.content.shift)}catch(o){console.log(o)}},async insertData(t){this.stateFormData.startDate=k(R(new Date(this.stateFormData.startDate))),this.stateFormData.dateService=k(R(new Date(this.stateFormData.dateService))),this.stateFormData.endDate=k(R(new Date(this.stateFormData.endDate)));try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},e=await I.post(`${M}?${new URLSearchParams(o).toString()}`,this.stateFormData);e.data.title==="Error"?(this.stateErrors.push(e.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateData(t){this.stateFormData.startDate=k(R(new Date(this.stateFormData.startDate))),this.stateFormData.endDate=k(R(new Date(this.stateFormData.endDate))),this.stateFormData.dateService=k(R(new Date(this.stateFormData.dateService)));try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},e={dailyScheduleId:this.stateFormData.dailyScheduleId,unitNumber:this.stateFormData.unitNumber,smuDue:this.stateFormData.smuDue,workOrder:this.stateFormData.workOrder,psType:this.stateFormData.psType,dateService:this.stateFormData.dateService,shift:this.stateFormData.shift,startDate:this.stateFormData.startDate,endDate:this.stateFormData.endDate,isActive:this.stateFormData.isActive},S=await I.post(`${ce}?${new URLSearchParams(o).toString()}`,e);S.data.title==="Error"?(this.stateErrors.push(S.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.dailyScheduleId=t.dailyScheduleId||0,this.stateFormData.unitNumber=t.unitNumber||"",this.stateFormData.smuDue=t.smuDue||"",this.stateFormData.workOrder=t.workOrder||"",this.stateFormData.psType=t.psType||"",this.stateFormData.dateService=t.dateService||"",this.stateFormData.shift=t.shift||"",this.stateFormData.startDate=t.startDate||"",this.stateFormData.endDate=t.endDate||""},async deleteData(t,o){try{const e={workOrder:t.workOrder,isDeleted:!0},S={userAccount:o,ver:"v1"},r=await I.post(`${he}?${new URLSearchParams(S).toString()}`,e);r.data.title==="Error"?(this.stateErrors.push(r.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(e){console.log(e),this.stateErrors.push(e.response.data.result.message),this.stateIsError=!0}},resetState(){this.stateFormData={dailyScheduleId:0,endDate:R(new Date("12/31/9999")),startDate:R(new Date),isActive:!0},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),De={key:0,style:{height:"100px"}},me={key:0,class:"row justify-content-center"},pe={key:1,class:"row justify-content-center"},ge={class:"row justify-content-center"},Se=["disabled","onClick"],ve=["disabled","onClick"],fe=Y({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","reload"],setup(t,{emit:o}){const e=t,S=mt(),r=dt(),u=rt(),d=o,i=$(()=>(e.page-1)*10+1),F=Z(""),_=v=>{F.value=v.order;const h={prop:v.prop,order:v.order};S.setSort(h)},w=()=>qt(F.value),P=(v,h,g)=>zt(v[g],h[g],F.value),T=v=>{r.setFormData(v),d("show-dialog",null)},E=v=>{let h=!1;return v.status!="Open"&&(h=!0),h},O=v=>{J("Are you sure want to delete this data","Ok").then(async()=>{const h=Bt.service({lock:!0,text:"Deleting data",background:"rgba(0, 0, 0, 0.7)"});r.deleteData(v,u.user.Name).then(()=>{r.isError||ot("Data has been successfully deleted!","Ok").then(()=>{h.close(),d("reload")})})})};return(v,h)=>{const g=x("inline-svg"),m=x("el-tooltip"),C=it("loading");return s(S).loading?z((U(),et("div",De,null,512)),[[C,s(S).loading]]):z((U(),L(s(ft),{key:1,data:e.listData,style:{width:"100%"},onSortChange:_,"default-sort":{prop:"dateService",order:"ascending"},"empty-text":"No Data"},{default:p(()=>[a(s(f),{label:"No",width:"90",align:"center"},{default:p(D=>[n("span",null,j(i.value+D.$index),1)]),_:1}),a(s(f),{prop:"unitNumber",label:"Unit Number",width:"170",sortable:"","sort-method":(D,y)=>P(D,y,"unitNumber")},null,8,["sort-method"]),a(s(f),{prop:"smuDue",label:"SMU Due (Hours) ",width:"170",sortable:"","sort-method":(D,y)=>w(D,y,"smuDue")},null,8,["sort-method"]),a(s(f),{prop:"workOrder",label:"Work Order",width:"170",sortable:"","sort-method":(D,y)=>w(D,y,"workOrder")},null,8,["sort-method"]),a(s(f),{prop:"psType",label:"Service Size",width:"170",sortable:"","sort-method":()=>w()},null,8,["sort-method"]),a(s(f),{prop:"dateService",label:"Planned Service Date",align:"center",width:"180",sortable:""},{default:p(D=>[n("span",null,j(s(ut)(D.row.dateService)),1)]),_:1}),a(s(f),{prop:"shift",label:"Shift",width:"170",sortable:"","sort-method":(D,y)=>P(D,y,"shift")},null,8,["sort-method"]),a(s(f),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:p(D=>[n("span",null,j(s(ut)(D.row.startDate)),1)]),_:1}),a(s(f),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:p(D=>[n("span",null,j(s(ut)(D.row.endDate)),1)]),_:1}),a(s(f),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:p(D=>[D.row.isActive?(U(),et("div",me,[a(g,{src:"/media/svg/tables/rows/check.svg"})])):(U(),et("div",pe,[a(g,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),a(s(f),{prop:"changedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:p(D=>[n("span",null,j(s(Mt)(D.row.changedOn)),1)]),_:1}),a(s(f),{prop:"changedBy",label:"Changed by",sortable:"",width:"170","sort-method":(D,y)=>P(D,y,"changedBy")},null,8,["sort-method"]),a(s(f),{label:"",width:"80"},{default:p(D=>[n("div",ge,[a(m,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:p(()=>[n("button",{class:"btn btn-sm btn-icon btn-bg-light me-1",disabled:E(D.row),onClick:y=>T(D.row)},[a(g,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Se)]),_:2},1024),a(m,{class:"box-item",effect:"dark",content:"Delete",placement:"top"},{default:p(()=>[n("button",{class:"btn btn-sm btn-icon btn-bg-light me-1",disabled:E(D.row),onClick:y=>O(D.row)},[a(g,{src:"/media/svg/tables/rows/trash-delete-blue.svg",width:"12",height:"12"})],8,ve)]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[C,s(S).loading]])}}}),ye={class:"col-md-6 fv-row fv-plugins-icon-container"},be={class:"col-md-6 fv-row fv-plugins-icon-container"},_e={class:"col-md-6 fv-row fv-plugins-icon-container"},Te={class:"col-md-6 fv-row fv-plugins-icon-container"},Fe={class:"col-md-6 fv-row fv-plugins-icon-container"},we={class:"col-md-6 fv-row fv-plugins-icon-container"},ke={class:"col-md-6 fv-row fv-plugins-icon-container"},Pe={class:"col-md-6 fv-row fv-plugins-icon-container"},Ee={class:"dialog-footer"},Ue=Y({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){ct(new Date,"DD-MM-YYYY",1,"days").toString(),ht(new Date,"DD-MM-YYYY",14,"days").toString();const e=t,S=o,r=dt(),u=rt(),d=nt(e,"visibility"),i=$(()=>r.formData),F=$(()=>r.errors),_=$(()=>r.isError),w=_t().shape({unitNumber:W().required("Unit Number is mandatory"),smuDue:W().required("SMU Due (Hours) is mandatory"),workOrder:W().required("Work Order is mandatory"),psType:W().required("Service Size is mandatory"),shift:W().required("Shift is mandatory"),dateService:K().required("Planned Service Date is mandatory").typeError("Planned Service Date is mandatory"),startDate:K().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:K().required("End Date is mandatory").min(Tt("startDate"),"End date must be later than start date").typeError("End Date is mandatory")}),P=()=>{E(""),g(""),O(""),v(""),h(""),m(""),C(""),g(""),D("")},T=(l=!1)=>{b(),P(),r.resetState(),S("handle-close",l)},E=l=>{i.value.smuDue=l},O=l=>{i.value.unitNumber=l},v=l=>{i.value.workOrder=l},h=l=>{i.value.psType=l},g=l=>{i.value.startDate=l},m=l=>{i.value.dateService=l},C=l=>{i.value.shift=l},D=l=>{i.value.endDate=l},y=async()=>{b(),await w.validate(i.value,{abortEarly:!1}).catch(l=>{r.setErrors(l.errors)}),!_.value&&J("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&r.insertData(u.user.Name).then(()=>{r.isError||ot("Form has been successfully submitted!","Ok").then(()=>{T(!0)})})})},b=()=>{r.setErrors([])};return(l,c)=>{const N=x("el-button"),B=x("el-dialog"),V=it("loading");return z((U(),L(B,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=H=>d.value=H),title:"New Data",width:"60%",onClose:c[1]||(c[1]=H=>T())},{footer:p(()=>[n("span",Ee,[a(N,{type:"primary",onClick:y,disabled:s(r).loading},{default:p(()=>[A("Submit")]),_:1},8,["disabled"]),a(N,{type:"secondary",onClick:T,disabled:s(r).loading},{default:p(()=>[A("Close")]),_:1},8,["disabled"])])]),default:p(()=>[a(yt,{name:"fade"},{default:p(()=>[_.value?(U(),L(Ft,{key:0,errorMessages:F.value,onResetForm:b},null,8,["errorMessages"])):lt("",!0)]),_:1}),z((U(),L(s(bt),{id:"kt_filter_form",class:"row g-4 my-4"},{default:p(()=>[n("div",ye,[a(Q,{value:i.value.unitNumber,options:s(r).unitNumberOption,label:"Unit Number",name:"unitNumber",placeholder:"Add Unit Number",onHandleChange:O},null,8,["value","options"])]),n("div",be,[a(st,{value:i.value.smuDue,placeholder:"Add SMU Due (Hours)",label:"SMU Due (Hours)",name:"smuDue",max:10,margin:!1,onHandleChange:E},null,8,["value"])]),n("div",_e,[a(st,{value:i.value.workOrder,placeholder:"Add Work Order",label:"Work Order",name:"workOrder",max:10,margin:!1,onHandleChange:v},null,8,["value"])]),n("div",Te,[a(Q,{value:i.value.psType,placeholder:"Add Service Size",label:"Service Size",name:"pS Type",options:s(r).psTypeOption,onHandleChange:h},null,8,["value","options"])]),n("div",Fe,[a(G,{value:i.value.dateService?i.value.dateService.toString():"",placeholder:"Add Planned Service Date",label:"Planned Service Date",name:"dateService",onHandleChange:m},null,8,["value"])]),n("div",we,[a(Q,{value:i.value.shift,placeholder:"Add Shift",label:"Shift",name:"shift",options:s(r).shiftOption,onHandleChange:C},null,8,["value","options"])]),n("div",ke,[a(G,{value:i.value.startDate?i.value.startDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"startDate",onHandleChange:g},null,8,["value"])]),n("div",Pe,[a(G,{value:i.value.endDate?i.value.endDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"endDate",onHandleChange:D},null,8,["value"])])]),_:1})),[[V,s(r).loading]])]),_:1},8,["modelValue"])),[[V,s(r).loading]])}}}),pt=Dt({id:"dailyScheduleBulkV1",state:()=>({statePagination:new at,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const o={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await I.post(`${re}?${new URLSearchParams(o).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){console.log(e)}this.stateLoading=!1},async upload({userAccount:t,excelFile:o}){const e={userAccount:t,ver:"v1"},S=`${oe}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const r=await I.postImages(S,o);r.data.statusCode==200?r.data.result.isError?(this.stateIsError=!0,this.stateError=r.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=r.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Jt.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=r.data.result.isError,this.stateError=r.data.result.message)}catch(r){console.log(r),this.stateIsError=!0,this.stateError=r.response.data.result.message}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Yt(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new at,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),Oe={class:"icon"},Ce=Y({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const o=t,e=pt(),S=$(()=>(o.page-1)*10+1),r=d=>{const i={prop:d.prop,order:d.order};e.setSort(i)},u=d=>d.row.isProcess?!0:d.row.isValid;return(d,i)=>{const F=x("inline-svg");return U(),L(s(ft),{data:o.listData,style:{width:"100%"},onSortChange:r,"empty-text":"No Data"},{default:p(()=>[a(s(f),{label:"No",width:"60",align:"center"},{default:p(_=>[n("span",null,j(S.value+_.$index),1)]),_:1}),a(s(f),{prop:"unitNumber",label:"Unit Number",width:"170",sortable:""}),a(s(f),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:p(_=>[n("div",Oe,[a(F,{src:u(_)?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1}),a(s(f),{prop:"smuDue",label:"SMU Due (Hours)",width:"170",sortable:""}),a(s(f),{prop:"workOrder",label:"Work Order",width:"170",sortable:""}),a(s(f),{prop:"psType",label:"Service Size",width:"170",sortable:""}),a(s(f),{prop:"dateService",label:"Planned Service Date",align:"center",width:"180",sortable:""}),a(s(f),{prop:"shift",label:"Shift",width:"170",sortable:""}),a(s(f),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""}),a(s(f),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""}),a(s(f),{prop:"validationReason",label:"Remark","min-width":"100",sortable:""})]),_:1},8,["data"])}}}),gt=t=>(Kt("data-v-a3504178"),t=t(),Gt(),t),Ne=gt(()=>n("div",{class:"text-center"},null,-1)),Le=gt(()=>n("div",{class:"mb-3"},[n("span",null,[A(" Download template "),n("a",{href:"documents/Outstanding Service.xlsx",target:"_blank",id:"link-download"},"here"),A(" before uploading file ")])],-1)),Ie=gt(()=>n("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[n("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),$e={class:"card"},Ae={class:"card-body grid-padding"},xe={class:"dialog-footer"},He=Y({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:o}){const e=t,S=o,r=rt(),u=pt(),d=nt(e,"visibility"),i=()=>{const h=ee(u.validatedData,g=>{const m=g;return{dailyScheduleId:0,unitNumber:m.unitNumber,smuDue:m.smuDue,workOrder:m.workOrder,psType:m.psType,dateService:m.dateService,shift:m.shift,startDate:m.startDate,endDate:m.endDate}});return Object.values(h)},F=()=>{const h=document.getElementById("link-download");h&&h.click()},_=()=>{u.validatedData.length>0?J("Cancel Upload Data?","Confirm").then(g=>{g.isConfirmed&&P()}):P()},w=async h=>{await u.upload({userAccount:r.user.Name,excelFile:h}),u.stateError&&tt(u.error)},P=(h=!1)=>{u.resetState(),S("handle-close",h)},T=h=>{u.setIsUploadedState(h)},E=h=>{u.setPage(h)},O=()=>{if(u.validatedData.length<1){F();return}const h=["DAILY SCHEDULE","SMU DUE (HOURS)","WORKORDER","SERVICE SIZE","PLANNED SERVICE DATE","SHIFT","START DATE","END DATE","REMARK","STATUS"],g=u.validatedData.map(m=>({dailySchedule:m.unitNumber,smuDue:m.smuDue,workOrder:m.workOrder,psType:m.psType,dateService:m.dateService,shift:m.shift,startDate:m.startDate,endDate:m.endDate,remark:m.validationReason,status:m.isValid?"OK":"Error"}));Ht("Outstanding Service",h,g)},v=async()=>{if(u.displayData.length<1){tt("There is no data to submit");return}J("Are you sure you want to submit ?").then(async h=>{if(h.isConfirmed){const g=i();if(g.length==0){tt("There is no valid data to submit");return}if(u.setBulkData(g),await u.bulkInsert(r.user.Name),u.isError){tt(u.stateError);return}ot("Outstanding service schedule has been successfully uploaded !","Ok").then(()=>{P(!0)})}})};return(h,g)=>{const m=x("el-button"),C=x("el-dialog"),D=it("loading");return U(),L(C,{title:"Upload Bulk Data",modelValue:d.value,"onUpdate:modelValue":g[1]||(g[1]=y=>d.value=y),"before-close":_,width:"70%","custom-class":"upload-modal"},{footer:p(()=>[n("div",null,[n("span",xe,[a(m,{type:"success",onClick:O},{default:p(()=>[A("Download")]),_:1}),a(m,{type:"primary",onClick:v},{default:p(()=>[A("Upload")]),_:1}),a(m,{type:"success",onClick:_},{default:p(()=>[A("Cancel")]),_:1})])])]),default:p(()=>[Ne,Le,z(a(te,{isSubmissionUploadSuccess:s(u).isUploaded,onHandleCloseUploadedFile:_,onHandleUpload:w,onHandleSetIsExcelFileUploaded:T},null,8,["isSubmissionUploadSuccess"]),[[D,s(u).uploadLoading]]),Ie,n("div",$e,[n("div",Ae,[a(Ce,{"list-data":s(u).displayData,page:s(u).pagination.currentPage},null,8,["list-data","page"])])]),s(u).displayData.length>0?(U(),L(vt,{key:0,onRaisePageChange:g[0]||(g[0]=y=>E(y)),currentPage:s(u).pagination.currentPage,totalPage:s(u).pagination.totalPage,totalPageSize:s(u).pagination.totalPageSize,startPaginationIndex:s(u).pagination.startPaginationIndex,endPaginationIndex:s(u).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):lt("",!0)]),_:1},8,["modelValue"])}}}),Re=ae(He,[["__scopeId","data-v-a3504178"]]),We={class:"col-md-6 fv-row fv-plugins-icon-container"},Ve={class:"col-md-6 fv-row fv-plugins-icon-container"},Be={class:"col-md-6 fv-row fv-plugins-icon-container"},Me={class:"col-md-6 fv-row fv-plugins-icon-container"},qe={class:"col-md-6 fv-row fv-plugins-icon-container"},ze={class:"col-md-6 fv-row fv-plugins-icon-container"},Ye={class:"col-md-6 fv-row fv-plugins-icon-container"},je={class:"col-md-6 fv-row fv-plugins-icon-container"},Ke={class:"dialog-footer"},Ge=Y({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){ct(new Date,"DD-MM-YYYY",1,"days").toString(),ht(new Date,"DD-MM-YYYY",14,"days").toString();const e=t,S=o,r=dt(),u=rt(),d=nt(e,"visibility"),i=$(()=>r.formData),F=$(()=>r.errors),_=$(()=>r.isError),w=_t().shape({unitNumber:W().required("Unit Number is mandatory"),smuDue:W().required("SMU Due (Hours) is mandatory"),workOrder:W().required("Work Order is mandatory"),psType:W().required("Service Size is mandatory"),shift:W().required("Shift is mandatory"),dateService:K().required("Planned Service Date is mandatory").typeError("Planned Service Date is mandatory"),startDate:K().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:K().required("End Date is mandatory").min(Tt("startDate"),"End date must be later than start date").typeError("End Date is mandatory")}),P=()=>{E(""),g(""),O(""),v(""),h(""),m(""),C(""),g(""),D("")},T=(l=!1)=>{b(),P(),r.resetState(),S("handle-close",l)},E=l=>{i.value.smuDue=l},O=l=>{i.value.unitNumber=l},v=l=>{i.value.workOrder=l},h=l=>{i.value.psType=l},g=l=>{i.value.startDate=l},m=l=>{i.value.dateService=l},C=l=>{i.value.shift=l},D=l=>{i.value.endDate=l},y=async()=>{b(),await w.validate(i.value,{abortEarly:!1}).catch(l=>{r.setErrors(l.errors)}),!_.value&&J("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&r.insertData(u.user.Name).then(()=>{r.isError||ot("Form has been successfully submitted!","Ok").then(()=>{T(!0)})})})},b=()=>{r.setErrors([])};return(l,c)=>{const N=x("el-button"),B=x("el-dialog"),V=it("loading");return z((U(),L(B,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=H=>d.value=H),title:"Edit Data",width:"60%",onClose:c[1]||(c[1]=H=>T())},{footer:p(()=>[n("span",Ke,[a(N,{type:"primary",onClick:y,disabled:s(r).loading},{default:p(()=>[A("Submit")]),_:1},8,["disabled"]),a(N,{type:"secondary",onClick:T,disabled:s(r).loading},{default:p(()=>[A("Close")]),_:1},8,["disabled"])])]),default:p(()=>[a(yt,{name:"fade"},{default:p(()=>[_.value?(U(),L(Ft,{key:0,errorMessages:F.value,onResetForm:b},null,8,["errorMessages"])):lt("",!0)]),_:1}),z((U(),L(s(bt),{id:"kt_filter_form",class:"row g-4 my-4"},{default:p(()=>[n("div",We,[a(Q,{value:i.value.unitNumber,options:s(r).unitNumberOption,label:"Unit Number",name:"unitNumber",placeholder:"Add Unit Number",onHandleChange:O},null,8,["value","options"])]),n("div",Ve,[a(st,{value:i.value.smuDue,placeholder:"Add SMU Due (Hours)",label:"SMU Due (Hours)",name:"smuDue",max:10,margin:!1,onHandleChange:E},null,8,["value"])]),n("div",Be,[a(st,{value:i.value.workOrder,placeholder:"Add Work Order",label:"Work Order",name:"workOrder",max:10,margin:!1,onHandleChange:v},null,8,["value"])]),n("div",Me,[a(Q,{value:i.value.psType,placeholder:"Add Service Size",label:"Service Size",name:"pS Type",options:s(r).psTypeOption,onHandleChange:h},null,8,["value","options"])]),n("div",qe,[a(G,{value:i.value.dateService?i.value.dateService.toString():"",placeholder:"Add Planned Service Date",label:"Planned Service Date",name:"dateService",onHandleChange:m},null,8,["value"])]),n("div",ze,[a(Q,{value:i.value.shift,placeholder:"Add Shift",label:"Shift",name:"shift",options:s(r).shiftOption,onHandleChange:C},null,8,["value","options"])]),n("div",Ye,[a(G,{value:i.value.startDate?i.value.startDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"startDate",onHandleChange:g},null,8,["value"])]),n("div",je,[a(G,{value:i.value.endDate?i.value.endDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"endDate",onHandleChange:D},null,8,["value"])])]),_:1})),[[V,s(r).loading]])]),_:1},8,["modelValue"])),[[V,s(r).loading]])}}}),Qe={class:"row g-4 my-4"},Xe={class:"w-100 fv-row fv-plugins-icon-container"},Ze={class:"w-100 fv-row fv-plugins-icon-container"},Je={class:"w-100 fv-row fv-plugins-icon-container"},ta={class:"w-100 fv-row fv-plugins-icon-container"},ea={class:"w-100 fv-row fv-plugins-icon-container"},aa={class:"w-100 fv-row fv-plugins-icon-container"},sa={class:"w-100 fv-row fv-plugins-icon-container"},ra={class:"dialog-footer"},oa=Y({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){ct(new Date,"DD-MM-YYYY",1,"days").toString(),ht(new Date,"DD-MM-YYYY",14,"days").toString();const e=mt(),S=t,r=o,u=nt(S,"visibility"),d=$(()=>e.filterData),i=()=>{F(),e.resetFilter()},F=()=>{r("handle-close",!1)},_=c=>{e.setUnitNumber(c)},w=c=>{e.setSmuDue(c)},P=c=>{e.setWorkOrder(c)},T=c=>{e.setPsType(c)},E=c=>{e.setShift(c)},O=c=>{e.setStartDate(c)},v=c=>{e.setEndDate(c)},h=c=>{e.setUnitNumberTo(c)},g=c=>{e.setSmuDueTo(c)},m=c=>{e.setWorkOrderTo(c)},C=c=>{e.setPsTypeTo(c)},D=c=>{e.setShiftTo(c)},y=c=>{e.setStartDateTo(c)},b=c=>{e.setEndDateTo(c)},l=()=>{const c=e.lastUsedFilterData.UnitNumber!==e.filterData.UnitNumber,N=e.lastUsedFilterData.SmuDue!==e.filterData.SmuDue,B=e.lastUsedFilterData.WorkOrder!==e.filterData.WorkOrder,V=e.lastUsedFilterData.PsType!==e.filterData.PsType,H=e.lastUsedFilterData.Shift!==e.filterData.Shift,wt=e.lastUsedFilterData.StartDate!==e.filterData.StartDate,kt=e.lastUsedFilterData.EndDate!==e.filterData.EndDate,Pt=e.lastUsedFilterData.UnitNumberTo!==e.filterData.UnitNumberTo,Et=e.lastUsedFilterData.SmuDueTo!==e.filterData.SmuDueTo,Ut=e.lastUsedFilterData.WorkOrderTo!==e.filterData.WorkOrderTo,Ot=e.lastUsedFilterData.PsTypeTo!==e.filterData.PsTypeTo,Ct=e.lastUsedFilterData.ShiftTo!==e.filterData.ShiftTo,Nt=e.lastUsedFilterData.StartDateTo!==e.filterData.StartDateTo,Lt=e.lastUsedFilterData.EndDateTo!==e.filterData.EndDateTo;r("handle-close",c||N||B||H||wt||kt||V||Pt||Et||Ut||Ot||Ct||Nt||Lt)};return(c,N)=>{const B=x("el-button"),V=x("el-dialog");return U(),L(V,{modelValue:u.value,"onUpdate:modelValue":N[0]||(N[0]=H=>u.value=H),title:"Filter",width:"60%",onClose:N[1]||(N[1]=H=>F())},{footer:p(()=>[n("span",ra,[a(B,{type:"secondary",onClick:i},{default:p(()=>[A("Reset")]),_:1}),a(B,{type:"primary",onClick:l},{default:p(()=>[A("Filter")]),_:1})])]),default:p(()=>[n("div",Qe,[n("div",Xe,[a(X,{"value-from":d.value.UnitNumber,"value-to":d.value.UnitNumberTo,label:"Unit Number",name:"UnitNumber",options:s(e).unitNumberOption,onHandleChangeFrom:_,onHandleChangeTo:h},null,8,["value-from","value-to","options"])]),n("div",Ze,[a(X,{"value-from":d.value.SmuDue,"value-to":d.value.SmuDueTo,label:"SMU Due (Hours)",name:"SmuDue",options:s(e).smuDueOption,onHandleChangeFrom:w,onHandleChangeTo:g},null,8,["value-from","value-to","options"])]),n("div",Je,[a(X,{"value-from":d.value.WorkOrder,"value-to":d.value.WorkOrderTo,label:"Work Order",name:"WorkOrder",options:s(e).workOrderOption,onHandleChangeFrom:P,onHandleChangeTo:m},null,8,["value-from","value-to","options"])]),n("div",ta,[a(X,{"value-from":d.value.PsType,"value-to":d.value.PsTypeTo,label:"Service Size",name:"PsType",options:s(e).psTypeOption,onHandleChangeFrom:T,onHandleChangeTo:C},null,8,["value-from","value-to","options"])]),n("div",ea,[a(X,{"value-from":d.value.Shift,"value-to":d.value.ShiftTo,label:"Shift",name:"Shift",options:s(e).shiftOption,onHandleChangeFrom:E,onHandleChangeTo:D},null,8,["value-from","value-to","options"])]),n("div",aa,[a(St,{"value-from":d.value.StartDate?d.value.StartDate.toString():"","value-to":d.value.StartDateTo?d.value.StartDateTo.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChangeFrom:O,onHandleChangeTo:y},null,8,["value-from","value-to"])]),n("div",sa,[a(St,{"value-from":d.value.EndDate?d.value.EndDate.toString():"","value-to":d.value.EndDateTo?d.value.EndDateTo.toString():"",placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChangeFrom:v,onHandleChangeTo:b},null,8,["value-from","value-to"])])])]),_:1},8,["modelValue"])}}}),ia={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},na=n("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),la={class:"d-flex justify-content-between align-items-center"},da={class:"card"},ua={class:"card-body grid-padding"},ca={class:"my-5"},vs=Y({__name:"Index",setup(t){const o=It(),e=mt(),S=dt(),r=pt(),u=Z(!1),d=Z(!1),i=Z(!1),F=Z(!1),_=$(()=>e.displayData),w=$(()=>e.pagination),P=b=>{e.setPage(b)};Qt(async()=>{o.dispatch(At.ACTIVE_PAGE,"IronLake"),$t("Outstanding Service",[{pageName:"Iron Lake",pageRoute:"ironlake"},{pageName:"Task",pageRoute:"dailyschedule"},{pageName:"Outstanding Service",pageRoute:"dailyschedule"}]),e.setPage(1),e.getLookup(),S.getEquipmentNumberLookup(),S.getPsTypeLookup(),S.getShiftLookup()}),Xt(async()=>{e.resetState(),S.resetState(),r.resetState()});const T=async()=>{await e.setPage(1),e.getLookup(),S.getEquipmentNumberLookup(),S.getPsTypeLookup(),S.getShiftLookup()},E=()=>{F.value=!0},O=()=>{u.value=!0},v=async b=>{u.value=!1,b&&await T()},h=()=>{d.value=!0},g=async b=>{F.value=!1,b&&await T()},m=async b=>{d.value=!1,b&&await T()},C=async()=>{const b=await e.export();se.saveAs(new Blob([b],{type:"application/octet-stream"}),"Master Data Outstanding Service.xlsx")},D=()=>{i.value=!0},y=async b=>{i.value=!1,b&&await T()};return(b,l)=>(U(),et(Zt,null,[n("div",ia,[na,n("div",la,[a(Rt,{onShowDialog:O}),a(xt,{onShowDialog:h}),a(Vt,{onHandleDownload:C}),a(Wt,{onShowDialog:D})])]),n("div",da,[n("div",ua,[a(fe,{"list-data":_.value,page:w.value.currentPage,onShowDialog:E,onReload:T},null,8,["list-data","page"])])]),n("div",ca,[s(e).paginationLoading?lt("",!0):(U(),L(vt,{key:0,onRaisePageChange:l[0]||(l[0]=c=>P(c)),currentPage:w.value.currentPage,totalPage:w.value.totalPage,totalPageSize:w.value.totalPageSize,startPaginationIndex:w.value.startPaginationIndex,endPaginationIndex:w.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),a(Ue,{visibility:u.value,onHandleClose:v},null,8,["visibility"]),a(Ge,{visibility:F.value,onHandleClose:g},null,8,["visibility"]),a(oa,{visibility:d.value,onHandleClose:m},null,8,["visibility"]),a(Re,{visibility:i.value,onHandleClose:y},null,8,["visibility"])],64))}});export{vs as default};
