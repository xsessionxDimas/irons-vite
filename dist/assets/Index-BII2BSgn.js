import{u as ft}from"./useMenuStore-CD5Gmvif.js";import{a as vt}from"./breadcrumb-BYmEOf4C.js";import{c as j,a as tt,J as G,I as et,z as q,A as _t}from"./index-BuVmIl8K.js";import{P as dt}from"./Pagination-D-xfdYmn.js";import{F as bt}from"./FilterIconButton-Bj0WTbms.js";import{h as St,A as Pt,U as yt}from"./excel-generator-DMHRo93s.js";import{D as Et}from"./DownloadIconButton-CIQp-YG7.js";import{_ as E,b as ct}from"./element-plus-BeWdvTRa.js";import{w as A,q as z,x as M}from"./date-format-8-IvfSl3.js";import{u as at}from"./usePositionListStore-BsprGHwA.js";import{C as wt,U as It,B as Ct,d as kt}from"./urls-DI_NR_TT.js";import{d as ut}from"./pinia-BjOS2_Ao.js";import{k as L,bL as xt,r as N,u as o,y as O,p as w,aa as H,q as x,x as l,Y,R as U,s as e,aB as d,C as B,a0 as Q,c as $,B as F,A as W,T as mt,bd as Ft,bb as Ut,a7 as $t,L as At,F as Vt}from"./@vue-BypzYtbH.js";import{a as Bt,d as Lt}from"./table-sort-Bpdq_Uwn.js";import{_ as K}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as T}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CCwjwK39.js";import{_ as st}from"./SwitchInput.vue_vue_type_script_setup_true_lang-BosisL7w.js";import{a as pt}from"./vee-validate-C_msoaAA.js";import{c as Dt,a as Z,b as J,d as ht}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as gt}from"./ErrorAlert-CMKGfwAi.js";import{P as rt}from"./Pagination-BiobnanQ.js";import{e as Rt}from"./lodash-DrHMlsdo.js";import{_ as Ht}from"./FileDropZone.vue_vue_type_style_index_0_lang-C5PyimC7.js";import{m as Ot}from"./map-anything-abi6NY2Z.js";import{_ as Tt}from"./nw-img-vue-CR837WER.js";import{_ as lt}from"./AutoComplete.vue_vue_type_script_setup_true_lang-DJ43pGTI.js";import{F as Nt}from"./file-saver-CwTBvle_.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./vue-router-iNp9kJ0K.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./PageEnum-DUtfSNQS.js";import"./xlsx-C4maHrMm.js";import"./moment-C5S46NFB.js";import"./mapOption-CeGMwmH0.js";import"./authentication-handler-Pueb_EI7.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";import"./vue3-dropzone-_NG5IwbJ.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";import"./attr-accept-DLIfoYC7.js";const X=ut({id:"positionForm",state:()=>({stateFormData:{PositionId:0,StartDate:A(new Date),EndDate:A(new Date("12/31/9999")),IsDma:!1},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading},actions:{async insertData(t){this.stateFormData.StartDate=z(A(new Date(this.stateFormData.StartDate))),this.stateFormData.EndDate=z(A(new Date(this.stateFormData.EndDate)));try{this.stateLoading=!0;const p={userAccount:t,ver:"v1"},a=await j.post(`${wt}?${new URLSearchParams(p).toString()}`,this.stateFormData);a.data.title==="Error"?(this.stateErrors.push(a.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(p){this.stateErrors.push(p.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateData(t){this.stateFormData.StartDate=z(A(new Date(this.stateFormData.StartDate))),this.stateFormData.EndDate=z(A(new Date(this.stateFormData.EndDate)));try{this.stateLoading=!0;const p={userAccount:t,ver:"v1"},a=await j.post(`${It}?${new URLSearchParams(p).toString()}`,this.stateFormData);a.data.title==="Error"?(this.stateErrors.push(a.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(p){this.stateErrors.push(p.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.PositionId=t.PositionId||0,this.stateFormData.Position=t.Position||"",this.stateFormData.PositionDescription=t.PositionDescription||"",this.stateFormData.StartDate=t.StartDate||"",this.stateFormData.EndDate=t.EndDate||"",this.stateFormData.IsDma=t.IsDma||!1},resetState(){this.stateFormData={PositionId:0,StartDate:A(new Date),EndDate:A(new Date("12/31/9999"))},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),Mt={key:0,style:{height:"100px"}},qt={key:0,class:"row justify-content-center"},zt={key:1,class:"row justify-content-center"},jt={class:"row justify-content-center"},Gt=["onClick"],Kt=L({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(t,{emit:p}){const a=t,b=at(),i=X(),n=p,g=xt(()=>(a.page-1)*10+1),r=N(""),h=_=>{r.value=_.order;const v={prop:_.prop,order:_.order};b.setSort(v)},S=(_,v,P)=>Bt(_[P],v[P],r.value),I=_=>{i.setFormData(_),n("show-dialog",null)};return(_,v)=>{const P=U("inline-svg"),k=U("el-tooltip"),f=Y("loading");return o(b).loading?O((w(),H("div",Mt,null,512)),[[f,o(b).loading]]):O((w(),x(o(ct),{key:1,data:a.listData,style:{width:"100%"},onSortChange:h,"empty-text":"No Data"},{default:l(()=>[e(o(E),{label:"No",width:"90",align:"center"},{default:l(s=>[d("span",null,B(o(g)+s.$index),1)]),_:1}),e(o(E),{prop:"Position",label:"Position","min-width":"170",sortable:"","sort-method":(s,c)=>S(s,c,"Position")},null,8,["sort-method"]),e(o(E),{prop:"PositionDescription",label:"Position Desc.","min-width":"200",sortable:"","sort-method":(s,c)=>S(s,c,"PositionDescription")},null,8,["sort-method"]),e(o(E),{prop:"StartDate",label:"Start Date",width:"170",sortable:""},{default:l(s=>[d("span",null,B(o(M)(s.row.StartDate)),1)]),_:1}),e(o(E),{prop:"EndDate",label:"End Date",width:"170",sortable:""},{default:l(s=>[d("span",null,B(o(M)(s.row.EndDate)),1)]),_:1}),e(o(E),{prop:"IsDma",label:"Is DMA",width:"100",sortable:""},{default:l(s=>[s.row.IsDma?(w(),H("div",qt,[e(P,{src:"/media/svg/tables/rows/check.svg"})])):(w(),H("div",zt,[e(P,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),e(o(E),{prop:"ChangedOn",label:"Changed on",align:"center",width:"125",sortable:""},{default:l(s=>[d("span",null,B(o(M)(s.row.ChangedOn)),1)]),_:1}),e(o(E),{prop:"ChangedBy",label:"Changed by",sortable:"",width:"300","sort-method":(s,c)=>S(s,c,"ChangedBy")},null,8,["sort-method"]),e(o(E),{label:"",width:"80"},{default:l(s=>[d("div",jt,[e(k,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:l(()=>[d("button",{class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:c=>I(s.row)},[e(P,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Gt)]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[f,o(b).loading]])}}}),Jt={class:"dialog-footer"},Yt=L({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:p}){const a=t,b=p,i=X(),n=tt(),g=Q(a,"visibility"),r=$(()=>i.formData),h=$(()=>i.errors),S=$(()=>i.isError),I=Dt().shape({Position:Z().required("Position is mandatory"),PositionDescription:Z().required("Position Description is mandatory"),StartDate:J().required("Start Date is mandatory").typeError("Start Date is mandatory").max(ht("EndDate"),()=>"Start Date must be less or equal than End Date").nullable().default(void 0),EndDate:J().required("End Date is mandatory").nullable().default(void 0)}),_=()=>{P(""),k(""),s(null),c(null)},v=(D=!1)=>{m(),_(),i.resetState(),b("handle-close",D)},P=D=>{r.value.Position=D},k=D=>{r.value.PositionDescription=D},f=D=>{r.value.IsDma=D},s=D=>{r.value.StartDate=D},c=D=>{r.value.EndDate=D},u=async()=>{m(),await I.validate(r.value,{abortEarly:!1}).catch(D=>{i.setErrors(D.errors)}),!S.value&&G("Are you sure you want to submit ?").then(async D=>{D.isConfirmed&&i.insertData(n.user.Name).then(()=>{i.isError||et("Form has been successfully submitted!","Ok").then(()=>{v(!0)})})})},m=()=>{i.setErrors([])};return(D,C)=>{const y=U("el-button"),R=U("el-dialog"),V=Y("loading");return O((w(),x(R,{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=nt=>g.value=nt),title:"New Data",width:"40%",onClose:C[1]||(C[1]=nt=>v())},{footer:l(()=>[d("span",Jt,[e(y,{type:"primary",onClick:u,disabled:o(i).loading},{default:l(()=>[F("Submit")]),_:1},8,["disabled"]),e(y,{type:"secondary",onClick:v,disabled:o(i).loading},{default:l(()=>[F("Close")]),_:1},8,["disabled"])])]),default:l(()=>[e(mt,{name:"fade"},{default:l(()=>[S.value?(w(),x(gt,{key:0,errorMessages:h.value,onResetForm:m},null,8,["errorMessages"])):W("",!0)]),_:1}),O((w(),x(o(pt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:l(()=>[e(K,{value:r.value.Position,margin:!1,placeholder:"Add Position",label:"Position",name:"Position",max:40,onHandleChange:P},null,8,["value"]),e(K,{value:r.value.PositionDescription,placeholder:"Add Position Description",label:"Position Desc.",name:"PositionDescription",max:40,onHandleChange:k},null,8,["value"]),e(T,{value:r.value.StartDate,placeholder:"Select Start Date","grid-class":"col-md-6",label:"Start Date",name:"StartDate",onHandleChange:s},null,8,["value"]),e(T,{value:r.value.EndDate,placeholder:"Select End Date","grid-class":"col-md-6",label:"End Date",name:"EndDate",onHandleChange:c},null,8,["value"]),e(st,{value:r.value.IsDma,label:"Is DMA",name:"IsDma",onHandleChange:f},null,8,["value"])]),_:1})),[[V,o(i).loading]])]),_:1},8,["modelValue"])),[[V,o(i).loading]])}}}),Qt={class:"dialog-footer"},Wt=L({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:p}){const a=t,b=p,i=X(),n=tt(),g=Q(a,"visibility"),r=$(()=>i.formData),h=$(()=>i.errors),S=$(()=>i.isError),I=Dt().shape({PositionDescription:Z().required("Position Description is mandatory"),StartDate:J().required("Start Date is mandatory").typeError("Start Date is mandatory").max(ht("EndDate"),()=>"Start Date must be less or equal than End Date").nullable().default(void 0),EndDate:J().required("End Date is mandatory").nullable().default(void 0)}),_=()=>{r.value.PositionId=0,r.value.Position="",r.value.PositionDescription="",r.value.StartDate=null,r.value.EndDate=null},v=(m=!1)=>{_(),i.resetState(),u(),b("handle-close",m)},P=m=>{r.value.PositionDescription=m},k=m=>{r.value.IsDma=m},f=m=>{r.value.StartDate=m},s=m=>{r.value.EndDate=m},c=async()=>{u(),await I.validate(r.value,{abortEarly:!1}).catch(m=>{i.setErrors(m.errors)}),!S.value&&G("Are you sure you want to submit ?").then(async m=>{m.isConfirmed&&i.updateData(n.user.Name).then(()=>{i.isError||et("Form has been successfully submitted!","Ok").then(()=>{v(!0)})})})},u=()=>{i.setErrors([])};return(m,D)=>{const C=U("el-button"),y=U("el-dialog"),R=Y("loading");return O((w(),x(y,{modelValue:g.value,"onUpdate:modelValue":D[0]||(D[0]=V=>g.value=V),title:"Update Data",width:"40%",onClose:D[1]||(D[1]=V=>v())},{footer:l(()=>[d("span",Qt,[e(C,{type:"primary",onClick:c,disabled:o(i).loading},{default:l(()=>[F("Submit")]),_:1},8,["disabled"]),e(C,{type:"secondary",onClick:v,disabled:o(i).loading},{default:l(()=>[F("Close")]),_:1},8,["disabled"])])]),default:l(()=>[e(mt,{name:"fade"},{default:l(()=>[S.value?(w(),x(gt,{key:0,errorMessages:h.value,onResetForm:u},null,8,["errorMessages"])):W("",!0)]),_:1}),e(o(pt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:l(()=>[e(K,{value:r.value.Position,margin:!1,placeholder:"Add Position",label:"Position",name:"Position",max:25,disabled:!0},null,8,["value"]),e(K,{value:r.value.PositionDescription,margin:!1,placeholder:"Add Position Description",label:"Position Desc.",name:"PositionDescription",max:40,onHandleChange:P},null,8,["value"]),e(T,{value:r.value.StartDate,placeholder:"Select Start Date","grid-class":"col-md-6",label:"Start Date",name:"StartDate",onHandleChange:f},null,8,["value"]),e(T,{value:r.value.EndDate,placeholder:"Select End Date","grid-class":"col-md-6",label:"End Date",name:"EndDate",onHandleChange:s},null,8,["value"]),e(st,{value:r.value.IsDma,label:"Is DMA",name:"IsDma",onHandleChange:k},null,8,["value"])]),_:1})]),_:1},8,["modelValue"])),[[R,o(i).loading]])}}}),ot=ut({id:"positionBulk",state:()=>({statePagination:new rt,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const p={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const a=await j.post(`${Ct}?${new URLSearchParams(p).toString()}`,this.stateBulkData);this.stateError=a.data.result.isError?a.data.result.message:"",this.stateIsError=a.data.result.isError}catch(a){console.log(a)}this.stateLoading=!1},async upload({userAccount:t,excelFile:p}){const a={userAccount:t,ver:"v1"},b=`${kt}?${new URLSearchParams(a).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const i=await j.postImages(b,p);i.data.statusCode==200?i.data.result.isError?(this.stateIsError=!0,this.stateError=i.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=i.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Rt.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=i.data.result.isError,this.stateError=i.data.result.message)}catch(i){console.log(i),this.stateIsError=!0,this.stateError=i.response.data.result.message}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Lt(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new rt,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),Xt={key:0,class:"row justify-content-center"},Zt={key:1,class:"row justify-content-center"},te={class:"icon"},ee=L({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const p=t,a=ot(),b=$(()=>(p.page-1)*10+1),i=n=>{const g={prop:n.prop,order:n.order};a.setSort(g)};return(n,g)=>{const r=U("inline-svg");return w(),x(o(ct),{data:p.listData,style:{width:"100%"},onSortChange:i,"empty-text":"No Data"},{default:l(()=>[e(o(E),{label:"No",width:"60",align:"center"},{default:l(h=>[d("span",null,B(b.value+h.$index),1)]),_:1}),e(o(E),{prop:"Position",label:"Position",sortable:""}),e(o(E),{prop:"PositionDescription",label:"Position Desc.",sortable:""}),e(o(E),{prop:"StartDate",label:"Start Date",width:"110",sortable:""},{default:l(h=>[d("span",null,B(o(M)(h.row.StartDate)),1)]),_:1}),e(o(E),{prop:"EndDate",label:"End Date",width:"110",sortable:""},{default:l(h=>[d("span",null,B(o(M)(h.row.EndDate)),1)]),_:1}),e(o(E),{prop:"IsDma",label:"Is DMA",width:"100",sortable:""},{default:l(h=>[h.row.IsDma?(w(),H("div",Xt,[e(r,{src:"/media/svg/tables/rows/check.svg"})])):(w(),H("div",Zt,[e(r,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),e(o(E),{prop:"ValidationReason",label:"Remark","min-width":"300",sortable:""}),e(o(E),{prop:"IsValid",label:"Status",width:"100",sortable:""},{default:l(h=>[d("div",te,[e(r,{src:h.row.IsValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),it=t=>(Ft("data-v-33018fd1"),t=t(),Ut(),t),ae=it(()=>d("div",{class:"text-center"},null,-1)),se=it(()=>d("div",{class:"mb-3"},[d("span",null,[F(" Download template "),d("a",{href:"documents/MasterDataPosition.xlsx",target:"_blank",id:"link-download"},"here"),F(" before uploading file ")])],-1)),oe=it(()=>d("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[d("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),ie={class:"card"},ne={class:"card-body grid-padding"},re={class:"dialog-footer"},le=L({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:p}){const a=t,b=p,i=tt(),n=ot(),g=Q(a,"visibility"),r=()=>{const s=Ot(n.validatedData,c=>{const u=c;return{PositionId:0,Position:u.Position,PositionDescription:u.PositionDescription,StartDate:u.StartDate,EndDate:u.EndDate,IsDma:u.IsDma}});return Object.values(s)},h=()=>{const s=document.getElementById("link-download");s&&s.click()},S=()=>{n.validatedData.length>0?G("Cancel Upload Data?","Confirm").then(c=>{c.isConfirmed&&_()}):_()},I=async s=>{await n.upload({userAccount:i.user.Name,excelFile:s}),n.stateError&&q(n.error)},_=(s=!1)=>{n.resetState(),b("handle-close",s)},v=s=>{n.setIsUploadedState(s)},P=s=>{n.setPage(s)},k=()=>{if(n.validatedData.length<1){h();return}const s=["POSITION","POSITION DESC","START DATE","END DATE","IS DMA","REMARK","STATUS"],c=n.validatedData.map(u=>({position:u.Position,positionDescription:u.PositionDescription,startDate:u.StartDate,endDate:u.EndDate,IsDma:String(u.IsDma),remark:u.ValidationReason,status:u.IsValid?"OK":"Error"}));St("Position",s,c)},f=async()=>{if(n.displayData.length<1){q("There is no data to submit");return}if(n.isError){q("There is still invalid row(s)");return}G("Are you sure you want to submit ?").then(async s=>{if(s.isConfirmed){const c=r();if(n.setBulkData(c),await n.bulkInsert(i.user.Name),n.isError){q(n.stateError);return}et("Form has been successfully submitted!","Ok").then(()=>{_(!0)})}})};return(s,c)=>{const u=U("el-button"),m=U("el-dialog"),D=Y("loading");return w(),x(m,{title:"Upload Bulk Data",modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=C=>g.value=C),"before-close":S,width:"70%","custom-class":"upload-modal"},{footer:l(()=>[d("div",null,[d("span",re,[e(u,{type:"success",onClick:k},{default:l(()=>[F("Download")]),_:1}),e(u,{type:"primary",onClick:f},{default:l(()=>[F("Upload")]),_:1}),e(u,{type:"success",onClick:S},{default:l(()=>[F("Cancel")]),_:1})])])]),default:l(()=>[ae,se,O(e(Ht,{isSubmissionUploadSuccess:o(n).isUploaded,onHandleCloseUploadedFile:S,onHandleUpload:I,onHandleSetIsExcelFileUploaded:v},null,8,["isSubmissionUploadSuccess"]),[[D,o(n).uploadLoading]]),oe,d("div",ie,[d("div",ne,[e(ee,{"list-data":o(n).displayData,page:o(n).pagination.currentPage},null,8,["list-data","page"])])]),o(n).displayData.length>0?(w(),x(dt,{key:0,onRaisePageChange:c[0]||(c[0]=C=>P(C)),currentPage:o(n).pagination.currentPage,totalPage:o(n).pagination.totalPage,totalPageSize:o(n).pagination.totalPageSize,startPaginationIndex:o(n).pagination.startPaginationIndex,endPaginationIndex:o(n).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):W("",!0)]),_:1},8,["modelValue"])}}}),de=Tt(le,[["__scopeId","data-v-33018fd1"]]),ce={class:"row g-9 my-4"},ue={class:"col-md-6 fv-row fv-plugins-icon-container"},me={class:"col-md-6 fv-row fv-plugins-icon-container"},pe={class:"dialog-footer"},De=L({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:p}){const a=at(),b=t,i=p,n=Q(b,"visibility"),g=$(()=>a.filterData),r=()=>{h(),a.resetFilter()},h=()=>{i("handle-close",!1)},S=f=>{a.setPosition(f)},I=f=>{a.setPositionDescription(f)},_=f=>{a.setStartDate(f)},v=f=>{a.setEndDate(f)},P=f=>{a.setIsDma(f)},k=()=>{const f=a.lastUsedFilterData.Position!==a.filterData.Position,s=a.lastUsedFilterData.PositionDescription!==a.filterData.PositionDescription,c=a.lastUsedFilterData.StartDate!==a.filterData.StartDate,u=a.lastUsedFilterData.EndDate!==a.filterData.EndDate,m=a.lastUsedFilterData.IsDma!==a.filterData.IsDma;i("handle-close",f||s||c||u||m)};return(f,s)=>{const c=U("el-button"),u=U("el-dialog");return w(),x(u,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=m=>n.value=m),title:"Filter",width:"60%",onClose:s[1]||(s[1]=m=>h())},{footer:l(()=>[d("span",pe,[e(c,{type:"secondary",onClick:r},{default:l(()=>[F("Reset")]),_:1}),e(c,{type:"primary",onClick:k},{default:l(()=>[F("Filter")]),_:1})])]),default:l(()=>[d("div",ce,[d("div",ue,[e(lt,{value:g.value.Position,label:"Position",name:"Position",options:o(a).positionOption,onHandleChange:S},null,8,["value","options"])]),d("div",me,[e(lt,{value:g.value.PositionDescription,label:"Position Description",name:"PositionDescription",options:o(a).positionDescOption,onHandleChange:I},null,8,["value","options"])]),e(T,{value:g.value.StartDate,placeholder:"Select Start Date","grid-class":"col-md-6",label:"Start Date",name:"StartDate",onHandleChange:_},null,8,["value"]),e(T,{value:g.value.EndDate,placeholder:"Select End Date","grid-class":"col-md-6",label:"End Date",name:"EndDate",onHandleChange:v},null,8,["value"]),e(st,{value:g.value.IsDma,label:"Is DMA",name:"IsDma",onHandleChange:P},null,8,["value"])])]),_:1},8,["modelValue"])}}}),he={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},ge=d("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),fe={class:"d-flex justify-content-between align-items-center"},ve={class:"card"},_e={class:"card-body grid-padding"},be={class:"my-5"},Va=L({__name:"Index",setup(t){const p=ft(),a=at(),b=X(),i=ot(),n=N(!1),g=N(!1),r=N(!1),h=N(!1),S=$(()=>a.displayData),I=$(()=>a.pagination),_=y=>{a.setPage(y)};$t(async()=>{p[_t.ACTIVE_PAGE]("IronLake"),vt("Position",[{pageName:"Ironlake",pageRoute:"ironlake"},{pageName:"Organization Unit",pageRoute:"ironlake-organization-unit-position"},{pageName:"Position",pageRoute:"ironlake-organization-unit-position"}]),a.setPage(1),await a.getLookup()}),At(async()=>{a.resetState(),b.resetState(),i.resetState()});const v=async()=>{await a.setPage(1),await a.getLookup()},P=()=>{n.value=!0},k=async y=>{n.value=!1,y&&await v()},f=()=>{g.value=!0},s=async y=>{g.value=!1,y&&await v()},c=()=>{r.value=!0},u=async y=>{r.value=!1,y&&await v()},m=async()=>{const y=await a.export();Nt.saveAs(new Blob([y],{type:"application/octet-stream"}),"Position.xlsx")},D=()=>{h.value=!0},C=async y=>{h.value=!1,y&&await v()};return(y,R)=>(w(),H(Vt,null,[d("div",he,[ge,d("div",fe,[e(Pt,{onShowDialog:P}),e(bt,{onShowDialog:c}),e(Et,{onHandleDownload:m}),e(yt,{onShowDialog:D})])]),d("div",ve,[d("div",_e,[e(Kt,{"list-data":S.value,page:I.value.currentPage,onShowDialog:f},null,8,["list-data","page"])])]),d("div",be,[o(a).paginationLoading?W("",!0):(w(),x(dt,{key:0,onRaisePageChange:R[0]||(R[0]=V=>_(V)),currentPage:I.value.currentPage,totalPage:I.value.totalPage,totalPageSize:I.value.totalPageSize,startPaginationIndex:I.value.startPaginationIndex,endPaginationIndex:I.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),e(Yt,{visibility:n.value,onHandleClose:k},null,8,["visibility"]),e(Wt,{visibility:g.value,onHandleClose:s},null,8,["visibility"]),e(De,{visibility:r.value,onHandleClose:u},null,8,["visibility"]),e(de,{visibility:h.value,onHandleClose:C},null,8,["visibility"])],64))}});export{Va as default};
