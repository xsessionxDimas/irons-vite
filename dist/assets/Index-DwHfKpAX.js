import{u as It}from"./vuex-BbOKrtVp.js";import{b as St}from"./vue-router-iNp9kJ0K.js";import{a as Zt}from"./breadcrumb-D-Q4Tk9w.js";import{b as V,u as M,s as N,i as ot,h as ht,j as dt,A as ta}from"./index-BCnwA6yE.js";import{P as kt}from"./Pagination-CVDIvnOM.js";import{F as aa}from"./FilterIconButton-Bj0WTbms.js";import{h as ea,A as oa,U as sa}from"./excel-generator-CRLIz6fw.js";import{D as na}from"./DownloadIconButton-CIQp-YG7.js";import{M as ra}from"./PageEnum-BoOqFyRq.js";import{t as la}from"./language-BriOOvyN.js";import{u as ia}from"./vue-i18n-CE6bnohq.js";import{k as K,p as _,q as I,x as D,R as L,aa as Y,aB as g,s as e,b4 as ua,c as $,r as X,u as s,y as G,Y as st,C as Z,a0 as nt,B as R,A as rt,T as ft,bd as da,bb as ma,a7 as ca,L as pa,F as Da}from"./@vue-BypzYtbH.js";import{_ as Ut}from"./nw-img-vue-CR837WER.js";import{_ as F,b as Lt}from"./element-plus-C5R56mia.js";import{f as J,n as q,a as mt,b as ha}from"./date-format-BASVuupi.js";import{P as ct,b as ga,a as Sa,d as Ca}from"./table-sort-VnBD5Hfa.js";import{G as fa,L as Fa,E as va,I as ba,U as _a,D as ya,B as Ta,a as Oa}from"./urls-BhpdX39n.js";import{d as Ft}from"./pinia-BjOS2_Ao.js";import{a as E,m as Pa}from"./mapOption-sP4IrA4W.js";import{L as wa}from"./urls-CuZgFKSv.js";import{L as Ea}from"./urls-D--VoWL5.js";import{a as vt}from"./vee-validate-C_msoaAA.js";import{c as bt,a as T,b as pt,d as At}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as _t}from"./ErrorAlert-CMKGfwAi.js";import{_ as Dt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as O}from"./AutoComplete.vue_vue_type_script_setup_true_lang-D4CTLiQF.js";import{_ as Ia}from"./lodash-Cr9vlq0V.js";import{_ as ka}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as Ua}from"./map-anything-abi6NY2Z.js";import{_ as j}from"./AutoComplete.vue_vue_type_style_index_0_lang-CRR6Z--K.js";import{_ as Pt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{F as La}from"./file-saver-DhbZvGod.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./xlsx-CpbwoZfi.js";import"./@intlify-CjZh8qSI.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const Aa=K({props:{routeName:String,isDisabled:Boolean,isHide:Boolean,isDialog:Boolean},emits:["show-dialog"],setup(t,{emit:o}){const a=It(),{t:h,te:n}=ia();return{changePage:()=>{a.commit(ra.SET_PAGE,t.routeName)},handleModalToggle:()=>{o("show-dialog",null)},translate:la,t:h,te:n,showDialog:()=>{o("show-dialog")}}}}),xa={class:"svg-icon svg-icon-1x"},$a=["disabled"],Ma={class:"svg-icon svg-icon-1x"},Ra={key:1,class:"svg-icon svg-icon-1x"};function Ha(t,o,a,h,n,d){const i=L("inline-svg"),r=L("el-tooltip");return _(),I(r,{class:"box-item",effect:"dark",content:t.translate("DELETE",t.t,t.te),placement:"top"},{default:D(()=>[t.isDialog?(_(),Y("div",{key:0,class:"btn btn-small btn-icon duotune-icon px-2 my-5",onClick:o[0]||(o[0]=(...v)=>t.handleModalToggle&&t.handleModalToggle(...v))},[g("span",xa,[e(i,{src:"/media/svg/tables/delete-icon-button.svg"})])])):(_(),Y("div",{key:1,class:ua(["btn btn-small btn-icon duotune-icon px-2 my-5",{disabled:t.isDisabled,hideBtn:t.isHide}]),onClick:o[2]||(o[2]=(...v)=>t.showDialog&&t.showDialog(...v))},[t.routeName?(_(),Y("a",{key:0,href:"javascript:void(0)",onClick:o[1]||(o[1]=(...v)=>t.changePage&&t.changePage(...v)),disabled:t.isDisabled,class:"d-flex align-items-center"},[g("span",Ma,[e(i,{src:"/media/svg/tables/delete-icon-button.svg"})])],8,$a)):(_(),Y("span",Ra,[e(i,{src:"/media/svg/tables/delete-icon-button.svg"})]))],2))]),_:1},8,["content"])}const Ba=Ut(Aa,[["render",Ha],["__scopeId","data-v-7b93784b"]]),Ct={component:"",componentTo:"",sensorData:"",sensorDataTo:"",oilDataS1:"",oilDataS1To:"",oilDataS2:"",oilDataS2To:"",filterCutS1:"",filterCutS1To:"",filterCutS2:"",filterCutS2To:"",magPlug:"",magPlugTo:"",ironFormsCbm:"",ironFormsCbmTo:"",componentStatus:"",componentStatusTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},yt=Ft({id:"componentStatusList",state:()=>({stateFilterData:{...Ct},stateLastUsedFilterData:{...Ct},statePageName:"componentStatus",stateDisplayData:[],statePagination:new ct,stateLoading:!1,statePaginationLoading:!1,stateComponentOption:[],stateSensorDataOption:[],stateOilDataS1Option:[],stateOilDataS2Option:[],stateFilterCutS1Option:[],stateFilterCutS2Option:[],stateMagPlugOption:[],stateIronFormsCbmOption:[],stateComponentStatusOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,componentOption:t=>t.stateComponentOption,sensorDataOption:t=>t.stateSensorDataOption,oilDataS1Option:t=>t.stateOilDataS1Option,oilDataS2Option:t=>t.stateOilDataS2Option,filterCutS1Option:t=>t.stateFilterCutS1Option,filterCutS2Option:t=>t.stateFilterCutS2Option,magPlugOption:t=>t.stateMagPlugOption,ironFormsCbmOption:t=>t.stateIronFormsCbmOption,componentStatusOption:t=>t.stateComponentStatusOption},actions:{async getData(t=!0){const o={component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,sensorData:this.stateFilterData.sensorData,sensorDataTo:this.stateFilterData.sensorDataTo,oilDataS1:this.stateFilterData.oilDataS1,oilDataS1To:this.stateFilterData.oilDataS1To,oilDataS2:this.stateFilterData.oilDataS2,oilDataS2To:this.stateFilterData.oilDataS2To,filterCutS1:this.stateFilterData.filterCutS1,filterCutS1To:this.stateFilterData.filterCutS1To,filterCutS2:this.stateFilterData.filterCutS2,filterCutS2To:this.stateFilterData.filterCutS2To,magPlug:this.stateFilterData.magPlug,magPlugTo:this.stateFilterData.magPlugTo,ironFormsCbm:this.stateFilterData.ironFormsCbm,ironFormsCbmTo:this.stateFilterData.ironFormsCbmTo,componentStatus:this.stateFilterData.componentStatus,componentStatusTo:this.stateFilterData.componentStatusTo,startDate:this.stateFilterData.startDate?J(q(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?J(q(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?J(q(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?J(q(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const a=await V.get(fa,"component_status",new URLSearchParams(o).toString());this.stateDisplayData=a.data.result.content,this.setTotalPage(a.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(a){!a.response.data&&(a!=null&&a.includes("Request failed with status code 401"))&&M().setLoggedIn(!1),N("IRONS",a),console.log(a)}this.stateLoading=!1},async getLookup(){const t={ver:this.stateFilterData.ver};try{const o=await V.get(Fa,"",new URLSearchParams(t).toString());this.stateComponentOption=E(o.data.result.content.component),this.stateSensorDataOption=E(o.data.result.content.sensorData),this.stateOilDataS1Option=E(o.data.result.content.oilDataS1),this.stateOilDataS2Option=E(o.data.result.content.oilDataS2),this.stateFilterCutS1Option=E(o.data.result.content.filterCutS1),this.stateFilterCutS2Option=E(o.data.result.content.filterCutS2),this.stateMagPlugOption=E(o.data.result.content.magPlug),this.stateIronFormsCbmOption=E(o.data.result.content.ironFormsCbm),this.stateComponentStatusOption=E(o.data.result.content.componentStatus)}catch(o){o.response.data.statusCode==401&&M().setLoggedIn(!1),N("IRONS",o),console.log(o)}},async export(){const t={ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await V.getBlob(va,"",new URLSearchParams(t).toString())).data}catch(o){N("IRONS",o),console.log(o)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:o}){if(!t&&!o)this.stateFilterData.order="";else{const a=o=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${a}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setComponent(t){this.stateFilterData.component=t},setComponentTo(t){this.stateFilterData.componentTo=t},setSensorData(t){this.stateFilterData.sensorData=t},setSensorDataTo(t){this.stateFilterData.sensorDataTo=t},setOilDataS1(t){this.stateFilterData.oilDataS1=t},setOilDataS1To(t){this.stateFilterData.oilDataS1To=t},setOilDataS2(t){this.stateFilterData.oilDataS2=t},setOilDataS2To(t){this.stateFilterData.oilDataS2To=t},setFilterCutS1(t){this.stateFilterData.filterCutS1=t},setFilterCutS1To(t){this.stateFilterData.filterCutS1To=t},setFilterCutS2(t){this.stateFilterData.filterCutS2=t},setFilterCutS2To(t){this.stateFilterData.filterCutS2To=t},setMagPlug(t){this.stateFilterData.magPlug=t},setMagPlugTo(t){this.stateFilterData.magPlugTo=t},setIronFormsCbm(t){this.stateFilterData.ironFormsCbm=t},setIronFormsCbmTo(t){this.stateFilterData.ironFormsCbmTo=t},setComponentStatus(t){this.stateFilterData.componentStatus=t},setComponentStatusTo(t){this.stateFilterData.componentStatusTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},async resetFilter(){this.stateFilterData.component="",this.stateFilterData.componentTo="",this.stateFilterData.sensorData="",this.stateFilterData.sensorDataTo="",this.stateFilterData.oilDataS1="",this.stateFilterData.oilDataS1To="",this.stateFilterData.oilDataS2="",this.stateFilterData.oilDataS2To="",this.stateFilterData.filterCutS1="",this.stateFilterData.filterCutS1To="",this.stateFilterData.filterCutS2="",this.stateFilterData.filterCutS2To="",this.stateFilterData.magPlug="",this.stateFilterData.magPlugTo="",this.stateFilterData.ironFormsCbm="",this.stateFilterData.ironFormsCbmTo="",this.stateFilterData.componentStatus="",this.stateFilterData.componentStatusTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const t=this.stateLastUsedFilterData.component!=="",o=this.stateLastUsedFilterData.component!=="",a=this.stateLastUsedFilterData.sensorData!=="",h=this.stateLastUsedFilterData.sensorData!=="",n=this.stateLastUsedFilterData.oilDataS1!=="",d=this.stateLastUsedFilterData.oilDataS1!=="",i=this.stateLastUsedFilterData.oilDataS2!=="",r=this.stateLastUsedFilterData.oilDataS2!=="",v=this.stateLastUsedFilterData.filterCutS1!=="",C=this.stateLastUsedFilterData.filterCutS1!=="",c=this.stateLastUsedFilterData.filterCutS2!=="",u=this.stateLastUsedFilterData.filterCutS2!=="",P=this.stateLastUsedFilterData.magPlug!=="",y=this.stateLastUsedFilterData.magPlug!=="",k=this.stateLastUsedFilterData.ironFormsCbm!=="",w=this.stateLastUsedFilterData.ironFormsCbm!=="",S=this.stateLastUsedFilterData.componentStatus!=="",f=this.stateLastUsedFilterData.componentStatusTo!=="",b=this.stateLastUsedFilterData.startDate!=="",p=this.stateLastUsedFilterData.startDateTo!=="",A=this.stateLastUsedFilterData.endDate!=="",U=this.stateLastUsedFilterData.endDateTo!=="";(t||o||a||h||n||d||i||r||v||C||c||u||P||y||k||w||S||f||b||p||A||U)&&await this.getData()},resetState(){this.stateFilterData={...Ct},this.stateDisplayData=[],this.statePagination=new ct,this.stateLoading=!1,this.statePaginationLoading=!1}}}),wt={componentStatusId:0,component:"",sensorData:"",oilDataS1:"",oilDataS2:"",filterCutS1:"",filterCutS2:"",magPlug:"",ironFormsCbm:"",componentStatus:"",startDate:q(new Date),endDate:q(new Date("12/31/9999"))},Et={component:"",componentStatus:""},lt=Ft({id:"componentStatusForm",state:()=>({stateFormData:{...wt},stateFormDeleteData:{...Et},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateComponentOption:[],stateSensorDataOption:[],stateOilDataS1Option:[],stateOilDataS2Option:[],stateFilterCutS1Option:[],stateFilterCutS2Option:[],stateMagPlugOption:[],stateIronFormsCbmOption:[],stateComponentStatusOption:[]}),getters:{formData:t=>t.stateFormData,formDeleteData:t=>t.stateFormDeleteData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,componentOption:t=>t.stateComponentOption,sensorDataOption:t=>t.stateSensorDataOption,oilDataS1Option:t=>t.stateOilDataS1Option,oilDataS2Option:t=>t.stateOilDataS2Option,filterCutS1Option:t=>t.stateFilterCutS1Option,filterCutS2Option:t=>t.stateFilterCutS2Option,magPlugOption:t=>t.stateMagPlugOption,ironFormsCbmOption:t=>t.stateIronFormsCbmOption,componentStatusOption:t=>t.stateComponentStatusOption},actions:{async getLookupComponent(){const t={ver:"v1"};try{const o=await V.get(Ea,"",new URLSearchParams(t).toString());this.stateComponentOption=Pa(o.data.result.content,"component","componentDescription")}catch(o){N("IRONS",o),o.response.data.statusCode==401&&M().setLoggedIn(!1),console.log(o)}},async getLookupRating(){const t={ver:"v1"};try{const o=await V.get(wa,"",new URLSearchParams(t).toString());this.stateSensorDataOption=E(o.data.result.content.rating),this.stateOilDataS1Option=E(o.data.result.content.rating),this.stateOilDataS2Option=E(o.data.result.content.rating),this.stateFilterCutS1Option=E(o.data.result.content.rating),this.stateFilterCutS2Option=E(o.data.result.content.rating),this.stateMagPlugOption=E(o.data.result.content.rating),this.stateIronFormsCbmOption=E(o.data.result.content.rating),this.stateComponentStatusOption=E(o.data.result.content.ratingDescription)}catch(o){N("IRONS",o),o.response.data.statusCode==401&&M().setLoggedIn(!1),console.log(o)}},async insertData(t){try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},a={componentStatusId:this.stateFormData.componentStatusId,component:this.stateFormData.component,sensorData:this.stateFormData.sensorData,oilDataS1:this.stateFormData.oilDataS1,oilDataS2:this.stateFormData.oilDataS2,filterCutS1:this.stateFormData.filterCutS1,filterCutS2:this.stateFormData.filterCutS2,magPlug:this.stateFormData.magPlug,ironFormsCbm:this.stateFormData.ironFormsCbm,componentStatus:this.stateFormData.componentStatus,startDate:J(q(new Date(this.stateFormData.startDate))),endDate:J(q(new Date(this.stateFormData.endDate)))},h=await V.post(`${ba}?${new URLSearchParams(o).toString()}`,a);h.data.title==="Error"?(this.stateErrors.push(h.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){N("IRONS",o),o.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=o,this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateData(t){try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},a={componentStatusId:this.stateFormData.componentStatusId,component:this.stateFormData.component,sensorData:this.stateFormData.sensorData,oilDataS1:this.stateFormData.oilDataS1,oilDataS2:this.stateFormData.oilDataS2,filterCutS1:this.stateFormData.filterCutS1,filterCutS2:this.stateFormData.filterCutS2,magPlug:this.stateFormData.magPlug,ironFormsCbm:this.stateFormData.ironFormsCbm,componentStatus:this.stateFormData.componentStatus,startDate:J(q(new Date(this.stateFormData.startDate))),endDate:J(q(new Date(this.stateFormData.endDate)))},h=await V.post(`${_a}?${new URLSearchParams(o).toString()}`,a);h.data.title==="Error"?(this.stateErrors.push(h.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){N("IRONS",o),o.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=o,this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async deleteData(t){try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},a={component:this.stateFormDeleteData.component,componentStatus:this.stateFormDeleteData.componentStatus},h=await V.post(`${ya}?${new URLSearchParams(o).toString()}`,a);h.data.title==="Error"?(this.stateErrors.push(h.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){N("IRONS",o),o.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=o,this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.componentStatusId=t.componentStatusId,this.stateFormData.component=t.component,this.stateFormData.sensorData=t.sensorData,this.stateFormData.oilDataS1=t.oilDataS1,this.stateFormData.oilDataS2=t.oilDataS2,this.stateFormData.filterCutS1=t.filterCutS1,this.stateFormData.filterCutS2=t.filterCutS2,this.stateFormData.magPlug=t.magPlug,this.stateFormData.ironFormsCbm=t.ironFormsCbm,this.stateFormData.componentStatus=t.componentStatus,this.stateFormData.startDate=t.startDate,this.stateFormData.endDate=t.endDate},resetState(){this.stateFormData={...wt},this.stateFormDeleteData={...Et},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),Va={key:0,style:{height:"100px"}},Na={key:0,class:"row justify-content-center"},qa={key:1,class:"row justify-content-center"},za={class:"row justify-content-center"},ja=["disabled","onClick"],Ga=K({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(t,{emit:o}){const a=t,h=yt(),n=lt(),d=o,i=$(()=>(a.page-1)*10+1),r=X(""),v=u=>{r.value=u.order;const P={prop:u.prop,order:u.order};h.setSort(P)},C=()=>ga(r.value),c=u=>{n.setFormData(u),d("show-dialog",null)};return(u,P)=>{const y=L("inline-svg"),k=L("el-tooltip"),w=st("loading");return s(h).loading?G((_(),Y("div",Va,null,512)),[[w,s(h).loading]]):G((_(),I(s(Lt),{key:1,data:a.listData,style:{width:"100%"},onSortChange:v,"empty-text":"No Data"},{default:D(()=>[e(s(F),{label:"No",width:"90",align:"center"},{default:D(S=>[g("span",null,Z(i.value+S.$index),1)]),_:1}),e(s(F),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"componentDesc",label:"Component Desc","min-width":"170",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"sensorData",label:"Sensor Data","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"oilDataS1",label:"Oil Data S1","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"oilDataS2",label:"Oil Data S2","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"filterCutS1",label:"Filter Cut S1","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"filterCutS2",label:"Filter Cut S2","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"magPlug",label:"Mag Plug","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"ironFormsCbm",label:"Iron Forms","min-width":"120",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"componentStatus",label:"Status","min-width":"170",sortable:"","sort-method":()=>C},null,8,["sort-method"]),e(s(F),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:D(S=>[g("span",null,Z(s(mt)(S.row.startDate)),1)]),_:1}),e(s(F),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:D(S=>[g("span",null,Z(s(mt)(S.row.endDate)),1)]),_:1}),e(s(F),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:D(S=>[S.row.isActive?(_(),Y("div",Na,[e(y,{src:"/media/svg/tables/rows/check.svg"})])):(_(),Y("div",qa,[e(y,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),e(s(F),{prop:"changedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:D(S=>[g("span",null,Z(s(ha)(S.row.changedOn)),1)]),_:1}),e(s(F),{prop:"changedBy",label:"Changed by",sortable:"",width:"300"}),e(s(F),{label:"",width:"40"},{default:D(S=>[e(k,{class:"box-item",effect:"dark",content:S.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:D(()=>[g("div",za,[g("button",{disabled:!S.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:f=>c(S.row)},[e(y,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,ja)])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])),[[w,s(h).loading]])}}}),Ka={class:"col-md-6 fv-row fv-plugins-icon-container"},Xa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ya={class:"dialog-footer"},Ja=K({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const a=t,h=o,n=lt(),d=M(),i=nt(a,"visibility"),r=$(()=>n.formData),v=$(()=>n.errors),C=$(()=>n.isError),c=bt().shape({component:T().required("Component is mandatory"),sensorData:T().required("Sensor Data is mandatory"),oilDataS1:T().required("Oil Data S1 is mandatory"),oilDataS2:T().required("Oil Data S2 is mandatory"),filterCutS1:T().required("Filter Cut S1 is mandatory"),filterCutS2:T().required("Filter Cut S2 is mandatory"),magPlug:T().required("Mag Plug is mandatory"),ironFormsCbm:T().required("Iron Forms is mandatory"),componentStatus:T().required("Status is mandatory"),startDate:pt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:pt().required("End Date is mandatory").min(At("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),u=(l=!1)=>{B(),n.resetState(),h("handle-close",l)},P=l=>{r.value.component=l},y=l=>{r.value.sensorData=l},k=l=>{r.value.oilDataS1=l},w=l=>{r.value.oilDataS2=l},S=l=>{r.value.filterCutS1=l},f=l=>{r.value.filterCutS2=l},b=l=>{r.value.magPlug=l},p=l=>{r.value.ironFormsCbm=l},A=l=>{r.value.componentStatus=l},U=l=>{r.value.startDate=l},H=l=>{r.value.endDate=l},Q=async()=>{B(),await c.validate(r.value,{abortEarly:!1}).catch(l=>{n.setErrors(l.errors)}),!C.value&&ot("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&n.insertData(d.user.Name).then(()=>{n.isError||ht("Form has been successfully submitted!","Ok").then(()=>{u(!0)})})})},B=()=>{n.setErrors([])};return(l,x)=>{const z=L("el-button"),et=L("el-dialog"),tt=st("loading");return G((_(),I(et,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=W=>i.value=W),title:"New Data",width:"40%",onClose:x[1]||(x[1]=W=>u())},{footer:D(()=>[g("span",Ya,[e(z,{type:"primary",onClick:Q,disabled:s(n).loading},{default:D(()=>[R("Submit")]),_:1},8,["disabled"]),e(z,{type:"secondary",onClick:u,disabled:s(n).loading},{default:D(()=>[R("Close")]),_:1},8,["disabled"])])]),default:D(()=>[e(ft,{name:"fade"},{default:D(()=>[C.value?(_(),I(_t,{key:0,errorMessages:v.value,onResetForm:B},null,8,["errorMessages"])):rt("",!0)]),_:1}),G((_(),I(s(vt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:D(()=>[e(O,{value:r.value.component,placeholder:"Add Component",label:"Component",name:"Component",max:20,onHandleChange:P,options:s(n).componentOption},null,8,["value","options"]),e(O,{value:r.value.sensorData,placeholder:"Add Sensor Data",label:"Sensor Data",name:"SensorData",max:20,onHandleChange:y,options:s(n).sensorDataOption},null,8,["value","options"]),e(O,{value:r.value.oilDataS1,placeholder:"Add Oil Data S1",label:"Oil Data S1",name:"OilDataS1",max:20,onHandleChange:k,options:s(n).oilDataS1Option},null,8,["value","options"]),e(O,{value:r.value.oilDataS2,placeholder:"Add Oil Data S2",label:"Oil Data S2",name:"OilDataS2",max:20,onHandleChange:w,options:s(n).oilDataS2Option},null,8,["value","options"]),e(O,{value:r.value.filterCutS1,placeholder:"Add Filter Cut S1",label:"Filter Cut S1",name:"FilterCutS1",max:20,onHandleChange:S,options:s(n).filterCutS1Option},null,8,["value","options"]),e(O,{value:r.value.filterCutS2,placeholder:"Add Filter Cut S2",label:"Filter Cut S2",name:"FilterCutS2",max:20,onHandleChange:f,options:s(n).filterCutS2Option},null,8,["value","options"]),e(O,{value:r.value.magPlug,placeholder:"Add Mag Plug",label:"Mag Plug",name:"MagPlug",max:20,onHandleChange:b,options:s(n).magPlugOption},null,8,["value","options"]),e(O,{value:r.value.ironFormsCbm,placeholder:"Add Irom Forms CBM",label:"Irom Forms CBM",name:"IromForms",max:20,onHandleChange:p,options:s(n).ironFormsCbmOption},null,8,["value","options"]),e(O,{value:r.value.componentStatus,placeholder:"Add Component Status",label:"Component Status",name:"ComponentStatus",max:20,onHandleChange:A,options:s(n).componentStatusOption},null,8,["value","options"]),g("div",Ka,[e(Dt,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:U},null,8,["value"])]),g("div",Xa,[e(Dt,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:H},null,8,["value"])])]),_:1})),[[tt,s(n).loading]])]),_:1},8,["modelValue"])),[[tt,s(n).loading]])}}}),Qa={class:"col-md-6 fv-row fv-plugins-icon-container"},Wa={class:"col-md-6 fv-row fv-plugins-icon-container"},Za={class:"dialog-footer"},te=K({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const a=t,h=o,n=lt(),d=M(),i=nt(a,"visibility"),r=$(()=>n.formData),v=$(()=>n.errors),C=$(()=>n.isError),c=bt().shape({component:T().required("Component is mandatory"),sensorData:T().required("Sensor Data is mandatory"),oilDataS1:T().required("Oil Data S1 is mandatory"),oilDataS2:T().required("Oil Data S2 is mandatory"),filterCutS1:T().required("Filter Cut S1 is mandatory"),filterCutS2:T().required("Filter Cut S2 is mandatory"),magPlug:T().required("Mag Plug is mandatory"),ironFormsCbm:T().required("Iron Forms is mandatory"),componentStatus:T().required("Status is mandatory"),startDate:pt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:pt().required("End Date is mandatory").min(At("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),u=(l=!1)=>{n.resetState(),B(),h("handle-close",l)},P=l=>{r.value.component=l},y=l=>{r.value.sensorData=l},k=l=>{r.value.oilDataS1=l},w=l=>{r.value.oilDataS2=l},S=l=>{r.value.filterCutS1=l},f=l=>{r.value.filterCutS2=l},b=l=>{r.value.magPlug=l},p=l=>{r.value.ironFormsCbm=l},A=l=>{r.value.componentStatus=l},U=l=>{r.value.startDate=l},H=l=>{r.value.endDate=l},Q=async()=>{B(),await c.validate(r.value,{abortEarly:!1}).catch(l=>{n.setErrors(l.errors)}),!C.value&&ot("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&n.updateData(d.user.Name).then(()=>{n.isError||ht("Form has been successfully submitted!","Ok").then(()=>{u(!0)})})})},B=()=>{n.setErrors([])};return(l,x)=>{const z=L("el-button"),et=L("el-dialog"),tt=st("loading");return G((_(),I(et,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=W=>i.value=W),title:"Update Data",width:"40%",onClose:x[1]||(x[1]=W=>u())},{footer:D(()=>[g("span",Za,[e(z,{type:"primary",onClick:Q,disabled:s(n).loading},{default:D(()=>[R("Submit")]),_:1},8,["disabled"]),e(z,{type:"secondary",onClick:u,disabled:s(n).loading},{default:D(()=>[R("Close")]),_:1},8,["disabled"])])]),default:D(()=>[e(ft,{name:"fade"},{default:D(()=>[C.value?(_(),I(_t,{key:0,errorMessages:v.value,onResetForm:B},null,8,["errorMessages"])):rt("",!0)]),_:1}),e(s(vt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:D(()=>[e(O,{value:r.value.component,placeholder:"Add Component",label:"Component",name:"Component",max:20,onHandleChange:P,options:s(n).componentOption},null,8,["value","options"]),e(O,{value:r.value.sensorData,placeholder:"Add Sensor Data",label:"Sensor Data",name:"SensorData",max:20,onHandleChange:y,options:s(n).sensorDataOption},null,8,["value","options"]),e(O,{value:r.value.oilDataS1,placeholder:"Add Oil Data S1",label:"Oil Data S1",name:"OilData1",max:20,onHandleChange:k,options:s(n).oilDataS1Option},null,8,["value","options"]),e(O,{value:r.value.oilDataS2,placeholder:"Add Oil Data S2",label:"Oil Data S2",name:"OilData2",max:20,onHandleChange:w,options:s(n).oilDataS2Option},null,8,["value","options"]),e(O,{value:r.value.filterCutS1,placeholder:"Add Filter Cut S1",label:"Filter Cut S1",name:"FilterCut1",max:20,onHandleChange:S,options:s(n).filterCutS1Option},null,8,["value","options"]),e(O,{value:r.value.filterCutS2,placeholder:"Add Filter Cut S2",label:"Filter Cut S2",name:"FilterCut2",max:20,onHandleChange:f,options:s(n).filterCutS2Option},null,8,["value","options"]),e(O,{value:r.value.magPlug,placeholder:"Add Mag Plug",label:"Mag Plug",name:"MagPlug",max:20,onHandleChange:b,options:s(n).magPlugOption},null,8,["value","options"]),e(O,{value:r.value.ironFormsCbm,placeholder:"Add Irom Forms CBM",label:"Irom Forms CBM",name:"IromForms",max:20,onHandleChange:p,options:s(n).ironFormsCbmOption},null,8,["value","options"]),e(O,{value:r.value.componentStatus,placeholder:"Add Component Status",label:"Component Status",name:"ComponentStatus",max:10,onHandleChange:A,options:s(n).componentStatusOption},null,8,["value","options"]),g("div",Qa,[e(Dt,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:U},null,8,["value"])]),g("div",Wa,[e(Dt,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:H},null,8,["value"])])]),_:1})]),_:1},8,["modelValue"])),[[tt,s(n).loading]])}}}),Tt=Ft({id:"componentStatusBulk",state:()=>({statePagination:new ct,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const o={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const a=await V.post(`${Ta}?${new URLSearchParams(o).toString()}`,this.stateBulkData);this.stateError=a.data.result.isError?a.data.result.message:"",this.stateIsError=a.data.result.isError}catch(a){a.response.data.statusCode==401&&M().setLoggedIn(!1),N("IRONS",a),console.log(a)}this.stateLoading=!1},async upload({userAccount:t,excelFile:o}){const a={userAccount:t,ver:"v1"},h=`${Oa}?${new URLSearchParams(a).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const n=await V.postImages(h,o);n.data.statusCode==200?n.data.result.isError?(this.stateIsError=!0,this.stateError=n.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=n.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Ia.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=n.data.result.isError,this.stateError=n.data.result.message)}catch(n){n.response.data.statusCode==401?M().setLoggedIn(!1):(this.stateIsError=!0,this.stateError=n.response.data.result.message),N("IRONS",n)}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Sa(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new ct,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),ae={class:"icon"},ee=K({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const o=t,a=X(""),h=Tt(),n=$(()=>(o.page-1)*10+1),d=r=>{a.value=r.order;const v={prop:r.prop,order:r.order};h.setSort(v)},i=(r,v,C)=>Ca(r[C],v[C],a.value);return(r,v)=>{const C=L("inline-svg");return _(),I(s(Lt),{data:o.listData,style:{width:"100%"},onSortChange:d,"empty-text":"No Data"},{default:D(()=>[e(s(F),{label:"No",width:"60",align:"center"},{default:D(c=>[g("span",null,Z(n.value+c.$index),1)]),_:1}),e(s(F),{prop:"component",label:"Component",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"component")},null,8,["sort-method"]),e(s(F),{prop:"sensorData",label:"Sensor Data",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"sensorData")},null,8,["sort-method"]),e(s(F),{prop:"oilDataS1",label:"Oil Data S1",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"oilDataS1")},null,8,["sort-method"]),e(s(F),{prop:"oilDataS2",label:"Oil Data S2",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"oilDataS2")},null,8,["sort-method"]),e(s(F),{prop:"filterCutS1",label:"Filter Cut S1",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"filterCutS1")},null,8,["sort-method"]),e(s(F),{prop:"filterCutS2",label:"Filter Cut S2",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"filterCutS2")},null,8,["sort-method"]),e(s(F),{prop:"magPlug",label:"Mag Plug",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"magPlug")},null,8,["sort-method"]),e(s(F),{prop:"ironFormsCbm",label:"Iron Forms CBM",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"ironFormsCbm")},null,8,["sort-method"]),e(s(F),{prop:"componentStatus",label:"Component Status",width:"300",sortable:"","sort-method":(c,u)=>i(c,u,"componentStatus")},null,8,["sort-method"]),e(s(F),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:D(c=>[g("span",null,Z(s(mt)(c.row.startDate)),1)]),_:1}),e(s(F),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:D(c=>[g("span",null,Z(s(mt)(c.row.endDate)),1)]),_:1}),e(s(F),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),e(s(F),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:D(c=>[g("div",ae,[e(C,{src:c.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Ot=t=>(da("data-v-0cddbd64"),t=t(),ma(),t),oe=Ot(()=>g("div",{class:"text-center"},null,-1)),se=Ot(()=>g("div",{class:"mb-3"},[g("span",null,[R(" Download template "),g("a",{href:"documents/MasterDataComponentStatus.xlsx",target:"_blank",id:"link-download"},"here"),R(" before uploading file ")])],-1)),ne=Ot(()=>g("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[g("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),re={class:"card"},le={class:"card-body grid-padding"},ie={class:"dialog-footer"},ue=K({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:o}){const a=t,h=o,n=M(),d=Tt(),i=nt(a,"visibility"),r=X(!1),v=()=>{const f=Ua(d.validatedData,b=>{const p=b;return{component:p.component,sensorData:p.sensorData,oilDataS1:p.oilDataS1,oilDataS2:p.oilDataS2,filterCutS1:p.filterCutS1,filterCutS2:p.filterCutS2,magPlug:p.magPlug,ironFormsCbm:p.ironFormsCbm,componentStatus:p.componentStatus,startDate:p.startDate,endDate:p.endDate}});return Object.values(f)},C=()=>{const f=document.getElementById("link-download");f&&f.click()},c=()=>{d.validatedData.length>0?ot("Cancel Upload Data?","Confirm").then(b=>{b.isConfirmed&&P()}):P()},u=async f=>{await d.upload({userAccount:n.user.Name,excelFile:f}),d.stateError&&dt(d.error)},P=(f=!1)=>{d.resetState(),h("handle-close",f)},y=f=>{d.setIsUploadedState(f)},k=f=>{d.setPage(f)},w=()=>{if(d.validatedData.length<1){C();return}const f=["COMPONENT","SENSOR DATA","OIL DATA S1","OIL DATA S2","FILTER CUT S1","FILTER CUT S2","MAG PLUG","IRON FORMS CBM","COMPONENT STATUS","START DATE","END DATE","REMARK","STATUS"],b=d.validatedData.map(p=>({component:p.component,sensorData:p.sensorData,oilDataS1:p.oilDataS1,oilDataS2:p.oilDataS2,filterCutS1:p.filterCutS1,filterCutS2:p.filterCutS2,magPlug:p.magPlug,ironFormsCbm:p.ironFormsCbm,componentStatus:p.componentStatus,startDate:p.startDate,endDate:p.endDate,remark:p.validationReason,stat:p.isValid?"OK":"Error"}));ea("ComponentStatus",f,b)},S=async()=>{if(d.displayData.length<1){dt("There is no data to submit");return}if(d.isError){dt("There is still invalid row(s)");return}ot("Are you sure you want to submit ?").then(async f=>{if(f.isConfirmed){r.value=!0;const b=v();if(d.setBulkData(b),await d.bulkInsert(n.user.Name),r.value=!1,d.isError){dt(d.stateError);return}ht("Form has been successfully submitted!","Ok").then(()=>{P(!0)})}})};return(f,b)=>{const p=L("el-button"),A=L("el-dialog"),U=st("loading");return _(),I(A,{title:"Upload Bulk Data",modelValue:i.value,"onUpdate:modelValue":b[1]||(b[1]=H=>i.value=H),"before-close":c,width:"70%","custom-class":"upload-modal"},{footer:D(()=>[g("div",null,[g("span",ie,[e(p,{type:"success",onClick:w},{default:D(()=>[R("Download")]),_:1}),G((_(),I(p,{type:"primary",onClick:S},{default:D(()=>[R("Upload")]),_:1})),[[U,r.value]]),e(p,{type:"success",onClick:c},{default:D(()=>[R("Cancel")]),_:1})])])]),default:D(()=>[oe,se,G(e(ka,{isSubmissionUploadSuccess:s(d).isUploaded,onHandleCloseUploadedFile:c,onHandleUpload:u,onHandleSetIsExcelFileUploaded:y},null,8,["isSubmissionUploadSuccess"]),[[U,s(d).uploadLoading]]),ne,g("div",re,[g("div",le,[e(ee,{"list-data":s(d).displayData,page:s(d).pagination.currentPage},null,8,["list-data","page"])])]),s(d).displayData.length>0?(_(),I(kt,{key:0,onRaisePageChange:b[0]||(b[0]=H=>k(H)),currentPage:s(d).pagination.currentPage,totalPage:s(d).pagination.totalPage,totalPageSize:s(d).pagination.totalPageSize,startPaginationIndex:s(d).pagination.startPaginationIndex,endPaginationIndex:s(d).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):rt("",!0)]),_:1},8,["modelValue"])}}}),de=Ut(ue,[["__scopeId","data-v-0cddbd64"]]),me={class:"dialog-footer"},ce=K({__name:"FormDeleteDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const a=t,h=o,n=lt(),d=M(),i=nt(a,"visibility"),r=$(()=>n.formDeleteData),v=$(()=>n.errors),C=$(()=>n.isError),c=bt().shape({component:T().required("Component is mandatory"),componentStatus:T().required("Status is mandatory")}),u=(S=!1)=>{w(),n.resetState(),h("handle-close",S)},P=S=>{r.value.component=S},y=S=>{r.value.componentStatus=S},k=async()=>{w(),await c.validate(r.value,{abortEarly:!1}).catch(S=>{n.setErrors(S.errors)}),!C.value&&ot("Are you sure you want to delete the data?").then(async S=>{S.isConfirmed&&n.deleteData(d.user.Name).then(()=>{n.isError||ht("Data has been successfully deleted!","Ok").then(()=>{u(!0)})})})},w=()=>{n.setErrors([])};return(S,f)=>{const b=L("el-button"),p=L("el-dialog"),A=st("loading");return G((_(),I(p,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=U=>i.value=U),title:"Delete Data",width:"40%",onClose:f[1]||(f[1]=U=>u())},{footer:D(()=>[g("span",me,[e(b,{type:"primary",onClick:k,disabled:s(n).loading},{default:D(()=>[R("Delete")]),_:1},8,["disabled"]),e(b,{type:"secondary",onClick:u,disabled:s(n).loading},{default:D(()=>[R("Close")]),_:1},8,["disabled"])])]),default:D(()=>[e(ft,{name:"fade"},{default:D(()=>[C.value?(_(),I(_t,{key:0,errorMessages:v.value,onResetForm:w},null,8,["errorMessages"])):rt("",!0)]),_:1}),G((_(),I(s(vt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:D(()=>[e(O,{value:r.value.component,placeholder:"Type Component",label:"Component",name:"Component",max:20,onHandleChange:P,options:s(n).componentOption},null,8,["value","options"]),e(O,{value:r.value.componentStatus,placeholder:"Type Component Status",label:"Component Status",name:"ComponentStatus",max:20,onHandleChange:y,options:s(n).componentStatusOption},null,8,["value","options"])]),_:1})),[[A,s(n).loading]])]),_:1},8,["modelValue"])),[[A,s(n).loading]])}}}),pe={class:"row g-9 my-4"},De={class:"dialog-footer"},he=K({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const a=yt(),h=t,n=o,d=nt(h,"visibility"),i=$(()=>a.filterData),r=()=>{v(),a.resetFilter()},v=()=>{n("handle-close",!1)},C=m=>{a.setComponent(m)},c=m=>{a.setComponentTo(m)},u=m=>{a.setSensorData(m)},P=m=>{a.setSensorDataTo(m)},y=m=>{a.setOilDataS1(m)},k=m=>{a.setOilDataS1To(m)},w=m=>{a.setOilDataS2(m)},S=m=>{a.setOilDataS2To(m)},f=m=>{a.setFilterCutS1(m)},b=m=>{a.setFilterCutS1To(m)},p=m=>{a.setFilterCutS2(m)},A=m=>{a.setFilterCutS2To(m)},U=m=>{a.setMagPlug(m)},H=m=>{a.setMagPlugTo(m)},Q=m=>{a.setIronFormsCbm(m)},B=m=>{a.setIronFormsCbmTo(m)},l=m=>{a.setComponentStatus(m)},x=m=>{a.setComponentStatusTo(m)},z=m=>{a.setStartDate(m)},et=m=>{a.setStartDateTo(m)},tt=m=>{a.setEndDate(m)},W=m=>{a.setEndDateTo(m)},xt=()=>{const m=a.lastUsedFilterData.component!==a.filterData.component,at=a.lastUsedFilterData.componentTo!==a.filterData.componentTo,it=a.lastUsedFilterData.sensorData!==a.filterData.sensorData,gt=a.lastUsedFilterData.sensorDataTo!==a.filterData.sensorDataTo,ut=a.lastUsedFilterData.oilDataS1!==a.filterData.oilDataS1,$t=a.lastUsedFilterData.oilDataS1To!==a.filterData.oilDataS1To,Mt=a.lastUsedFilterData.oilDataS2!==a.filterData.oilDataS2,Rt=a.lastUsedFilterData.oilDataS2To!==a.filterData.oilDataS2To,Ht=a.lastUsedFilterData.filterCutS1!==a.filterData.filterCutS1,Bt=a.lastUsedFilterData.filterCutS1To!==a.filterData.filterCutS1To,Vt=a.lastUsedFilterData.filterCutS2!==a.filterData.filterCutS2,Nt=a.lastUsedFilterData.filterCutS2To!==a.filterData.filterCutS2To,qt=a.lastUsedFilterData.magPlug!==a.filterData.magPlug,zt=a.lastUsedFilterData.magPlugTo!==a.filterData.magPlugTo,jt=a.lastUsedFilterData.ironFormsCbm!==a.filterData.ironFormsCbm,Gt=a.lastUsedFilterData.ironFormsCbmTo!==a.filterData.ironFormsCbmTo,Kt=a.lastUsedFilterData.componentStatus!==a.filterData.componentStatus,Xt=a.lastUsedFilterData.componentStatusTo!==a.filterData.componentStatusTo,Yt=a.lastUsedFilterData.startDate!==a.filterData.startDate,Jt=a.lastUsedFilterData.startDateTo!==a.filterData.startDateTo,Qt=a.lastUsedFilterData.endDate!==a.filterData.endDate,Wt=a.lastUsedFilterData.endDateTo!==a.filterData.endDateTo;n("handle-close",m||at||it||gt||ut||$t||Mt||Rt||Ht||Bt||Vt||Nt||qt||zt||jt||Gt||Kt||Xt||Yt||Jt||Qt||Wt)};return(m,at)=>{const it=L("el-button"),gt=L("el-dialog");return _(),I(gt,{modelValue:d.value,"onUpdate:modelValue":at[0]||(at[0]=ut=>d.value=ut),title:"Filter",width:"60%",onClose:at[1]||(at[1]=ut=>v())},{footer:D(()=>[g("span",De,[e(it,{type:"secondary",onClick:r},{default:D(()=>[R("Reset")]),_:1}),e(it,{type:"primary",onClick:xt},{default:D(()=>[R("Filter")]),_:1})])]),default:D(()=>[g("div",pe,[e(j,{"value-from":i.value.component,"value-to":i.value.componentTo,label:"Component",name:"Component",options:s(a).componentOption,onHandleChangeFrom:C,onHandleChangeTo:c},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.sensorData,"value-to":i.value.sensorDataTo,label:"Sensor Data",name:"SensorData",options:s(a).sensorDataOption,onHandleChangeFrom:u,onHandleChangeTo:P},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.oilDataS1,"value-to":i.value.oilDataS1To,label:"Oil Data S1",name:"OilDataS1",options:s(a).oilDataS1Option,onHandleChangeFrom:y,onHandleChangeTo:k},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.oilDataS2,"value-to":i.value.oilDataS2To,label:"Oil Data S2",name:"OilDataS2",options:s(a).oilDataS2Option,onHandleChangeFrom:w,onHandleChangeTo:S},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.filterCutS1,"value-to":i.value.filterCutS1To,label:"Filter Cut S1",name:"FilterCutS1",options:s(a).filterCutS1Option,onHandleChangeFrom:f,onHandleChangeTo:b},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.filterCutS2,"value-to":i.value.filterCutS2To,label:"Filter Cut S2",name:"FilterCutS2",options:s(a).filterCutS2Option,onHandleChangeFrom:p,onHandleChangeTo:A},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.magPlug,"value-to":i.value.magPlugTo,label:"Mag Plug",name:"MagPlug",options:s(a).magPlugOption,onHandleChangeFrom:U,onHandleChangeTo:H},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.ironFormsCbm,"value-to":i.value.ironFormsCbmTo,label:"Iron Forms CBM",name:"IronFormsCbm",options:s(a).ironFormsCbmOption,onHandleChangeFrom:Q,onHandleChangeTo:B},null,8,["value-from","value-to","options"]),e(j,{"value-from":i.value.componentStatus,"value-to":i.value.componentStatusTo,label:"Component Status",name:"ComponentStatus",options:s(a).componentStatusOption,onHandleChangeFrom:l,onHandleChangeTo:x},null,8,["value-from","value-to","options"]),e(Pt,{"value-from":i.value.startDate?i.value.startDate.toString():"","value-to":i.value.startDateTo?i.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:z,onHandleChangeTo:et},null,8,["value-from","value-to"]),e(Pt,{"value-from":i.value.endDate?i.value.endDate.toString():"","value-to":i.value.endDateTo?i.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:tt,onHandleChangeTo:W},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),ge={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Se=g("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),Ce={class:"d-flex justify-content-between align-items-center"},fe={class:"card"},Fe={class:"card-body grid-padding"},ve={class:"my-5"},ko=K({__name:"Index",setup(t){const o=It(),a=yt(),h=lt(),n=Tt(),d=X(!1),i=X(!1),r=X(!1),v=X(!1),C=X(!1),c=$(()=>a.displayData),u=$(()=>a.pagination),P=l=>{a.setPage(l)};ca(async()=>{o.dispatch(ta.ACTIVE_PAGE,St().meta.parentMenu),Zt("Component Status",[{pageName:St().meta.parentMenu,pageRoute:St().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-componentstatus"},{pageName:"Component Status",pageRoute:"ironlake-config-componentstatus"}]),a.setPage(1),await a.getLookup(),await h.getLookupRating(),await h.getLookupComponent()}),pa(async()=>{a.resetState(),h.resetState(),n.resetState()});const y=async()=>{await a.setPage(1),await a.getLookup(),await h.getLookupRating(),await h.getLookupComponent()},k=()=>{d.value=!0},w=async l=>{d.value=!1,l&&await y()},S=()=>{r.value=!0},f=async l=>{r.value=!1,l&&await y()},b=()=>{i.value=!0},p=async l=>{i.value=!1,l&&await y()},A=()=>{v.value=!0},U=async l=>{v.value=!1,l&&await y()},H=async()=>{const l=await a.export();La.saveAs(new Blob([l],{type:"application/octet-stream"}),"ComponentStatus.xlsx")},Q=()=>{C.value=!0},B=async l=>{C.value=!1,l&&await y()};return(l,x)=>(_(),Y(Da,null,[g("div",ge,[Se,g("div",Ce,[e(oa,{onShowDialog:k}),e(aa,{onShowDialog:A}),e(na,{onHandleDownload:H}),e(sa,{onShowDialog:Q}),e(Ba,{onShowDialog:S})])]),g("div",fe,[g("div",Fe,[e(Ga,{"list-data":c.value,page:u.value.currentPage,onShowDialog:b},null,8,["list-data","page"])])]),g("div",ve,[s(a).paginationLoading?rt("",!0):(_(),I(kt,{key:0,onRaisePageChange:x[0]||(x[0]=z=>P(z)),currentPage:u.value.currentPage,totalPage:u.value.totalPage,totalPageSize:u.value.totalPageSize,startPaginationIndex:u.value.startPaginationIndex,endPaginationIndex:u.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),e(Ja,{visibility:d.value,onHandleClose:w},null,8,["visibility"]),e(te,{visibility:i.value,onHandleClose:p},null,8,["visibility"]),e(ce,{visibility:r.value,onHandleClose:f},null,8,["visibility"]),e(he,{visibility:v.value,onHandleClose:U},null,8,["visibility"]),e(de,{visibility:C.value,onHandleClose:B},null,8,["visibility"])],64))}});export{ko as default};
