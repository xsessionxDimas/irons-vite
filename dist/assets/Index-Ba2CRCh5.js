import{u as it}from"./vuex-BbOKrtVp.js";import{a as lt}from"./breadcrumb-BYmEOf4C.js";import{c as L,A as nt}from"./index-BuVmIl8K.js";import{P as rt}from"./Pagination-D-xfdYmn.js";import{F as ct}from"./FilterIconButton-Bj0WTbms.js";import{D as dt}from"./DownloadIconButton-CIQp-YG7.js";import{_ as T,b as ut}from"./element-plus-BeWdvTRa.js";import{q as U,x as H,y as mt}from"./date-format-8-IvfSl3.js";import{P as R}from"./Pagination-BiobnanQ.js";import{d as pt}from"./pinia-BjOS2_Ao.js";import{m as _}from"./mapOption-CeGMwmH0.js";import{k as O,bL as Dt,r as z,u as i,y as B,p as P,aa as w,q as x,x as S,Y as ht,R as E,s as o,aB as u,C as A,a0 as gt,c as C,B as N,a7 as Tt,L as St,A as Ft,F as Pt}from"./@vue-BypzYtbH.js";import{b as ft,a as vt}from"./table-sort-Bpdq_Uwn.js";import{_ as b}from"./AutoComplete.vue_vue_type_style_index_0_lang-DrAAOf71.js";import{_ as V}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CJ7rJST9.js";import{F as yt}from"./file-saver-CwTBvle_.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./nw-img-vue-CR837WER.js";import"./vue-router-iNp9kJ0K.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./lodash-DrHMlsdo.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./moment-C5S46NFB.js";const $="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/smu_actual",Ut=`${$}/export`,_t=`${$}/lookup`,M={Model:"",ModelTo:"",PsType:"",PsTypeTo:"",SmuActual:"",SmuActualTo:"",Uom:"",UomTo:"",StartDate:"",StartDateTo:"",EndDate:"",EndDateTo:"",ver:"v1",Page:1,PageSize:10,Order:""},I=pt({id:"smuactual",state:()=>({stateFilterData:{...M},stateLastUsedFilterData:{...M},statePageName:"smuactual",stateDisplayData:[],statePagination:new R,stateLoading:!1,statePaginationLoading:!1,stateModelOption:[],statePsTypeOption:[],stateUomOption:[],stateSmuActualOption:[]}),getters:{pageName:a=>a.statePageName,pagination:a=>a.statePagination,displayData:a=>a.stateDisplayData,filterData:a=>a.stateFilterData,lastUsedFilterData:a=>a.stateLastUsedFilterData,loading:a=>a.stateLoading,paginationLoading:a=>a.statePaginationLoading,modelOption:a=>a.stateModelOption,psTypeOption:a=>a.statePsTypeOption,uomOption:a=>a.stateUomOption,smuActualOption:a=>a.stateSmuActualOption},actions:{async getData(a=!0){const s={Model:this.stateFilterData.Model,ModelTo:this.stateFilterData.ModelTo,PsType:this.stateFilterData.PsType,PsTypeTo:this.stateFilterData.PsTypeTo,SmuActual:this.stateFilterData.SmuActual,SmuActualTo:this.stateFilterData.SmuActualTo,Uom:this.stateFilterData.Uom,UomTo:this.stateFilterData.UomTo,StartDate:this.stateFilterData.StartDate?U(this.stateFilterData.StartDate):"",StartDateTo:this.stateFilterData.StartDateTo?U(this.stateFilterData.StartDateTo):"",EndDate:this.stateFilterData.EndDate?U(this.stateFilterData.EndDate):"",EndDateTo:this.stateFilterData.EndDateTo?U(this.stateFilterData.EndDateTo):"",Page:this.stateFilterData.Page.toString(),PageSize:this.stateFilterData.PageSize.toString(),Order:this.stateFilterData.Order,ver:this.stateFilterData.ver};try{a&&(this.stateLoading=!0),a||(this.stateDisplayData=[]);const t=await L.get($,"",new URLSearchParams(s).toString());this.stateDisplayData=t.data.result.content,this.setTotalPage(t.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(t){console.log(t)}this.stateLoading=!1},async getLookup(){const a={ver:this.stateFilterData.ver};try{const s=await L.get(_t,"",new URLSearchParams(a).toString());this.stateModelOption=_(s.data.result.content.model),this.statePsTypeOption=_(s.data.result.content.psType),this.stateUomOption=_(s.data.result.content.uom),this.stateSmuActualOption=_(s.data.result.content.smuActual)}catch(s){console.log(s)}},async export(){const a={ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await L.getBlob(Ut,"",new URLSearchParams(a).toString())).data}catch(s){console.log(s)}},setTotalPage(a){this.pagination.totalPage=a,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(a){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(a),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:a,order:s}){if(!a&&!s)this.stateFilterData.Order="";else{const t=s=="ascending"?"asc":"desc";this.stateFilterData.Order=`${a}_${t}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1)},setModel(a){this.stateFilterData.Model=a},setModelTo(a){this.stateFilterData.ModelTo=a},setPsType(a){this.stateFilterData.PsType=a},setPsTypeTo(a){this.stateFilterData.PsTypeTo=a},setUom(a){this.stateFilterData.Uom=a},setUomTo(a){this.stateFilterData.UomTo=a},setSmuActual(a){this.stateFilterData.SmuActual=a},setSmuActualTo(a){this.stateFilterData.SmuActualTo=a},setStartDate(a){this.stateFilterData.StartDate=a},setStartDateTo(a){this.stateFilterData.StartDateTo=a},setEndDate(a){this.stateFilterData.EndDate=a},setEndDateTo(a){this.stateFilterData.EndDateTo=a},async resetFilter(){this.stateFilterData.Model="",this.stateFilterData.ModelTo="",this.stateFilterData.PsType="",this.stateFilterData.PsTypeTo="",this.stateFilterData.Uom="",this.stateFilterData.UomTo="",this.stateFilterData.SmuActual="",this.stateFilterData.SmuActualTo="",this.stateFilterData.StartDate="",this.stateFilterData.StartDateTo="",this.stateFilterData.EndDate="",this.stateFilterData.EndDateTo="";const a=this.stateLastUsedFilterData.Model!=="",s=this.stateLastUsedFilterData.ModelTo!=="",t=this.stateLastUsedFilterData.PsType!=="",F=this.stateLastUsedFilterData.PsTypeTo!=="",D=this.stateLastUsedFilterData.Uom!=="",r=this.stateLastUsedFilterData.UomTo!=="",l=this.stateLastUsedFilterData.SmuActual!=="",h=this.stateLastUsedFilterData.SmuActualTo!=="",c=this.stateLastUsedFilterData.StartDate!=="",g=this.stateLastUsedFilterData.StartDateTo!=="",m=this.stateLastUsedFilterData.EndDate!=="",d=this.stateLastUsedFilterData.EndDateTo!=="";(t||F||a||s||D||r||l||h||c||g||m||d)&&await this.getData()},resetState(){this.stateFilterData={...M},this.stateDisplayData=[],this.statePagination=new R,this.stateLoading=!1,this.statePaginationLoading=!1}}}),At={key:0,style:{height:"100px"}},bt={key:0,class:"row justify-content-center"},wt={key:1,class:"row justify-content-center"},kt=O({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(a){const s=a,t=I(),F=Dt(()=>(s.page-1)*10+1),D=z(""),r=c=>{D.value=c.order;const g={prop:c.prop,order:c.order};t.setSort(g)},l=()=>ft(D.value),h=(c,g,m)=>vt(c[m],g[m],D.value);return(c,g)=>{const m=E("inline-svg"),d=ht("loading");return i(t).loading?B((P(),w("div",At,null,512)),[[d,i(t).loading]]):B((P(),x(i(ut),{key:1,data:s.listData,style:{width:"100%"},onSortChange:r,"empty-text":"No Data"},{default:S(()=>[o(i(T),{label:"No",width:"90",align:"center"},{default:S(n=>[u("span",null,A(i(F)+n.$index),1)]),_:1}),o(i(T),{prop:"model",label:"Model","min-width":"200",sortable:"","sort-method":(n,p)=>h(n,p,"model")},null,8,["sort-method"]),o(i(T),{prop:"psType",label:"PS Type","min-width":"200",sortable:"","sort-method":()=>l()},null,8,["sort-method"]),o(i(T),{prop:"smuActual",label:"SMU Actual","min-width":"200",sortable:"","sort-method":(n,p)=>h(n,p,"smuActual")},null,8,["sort-method"]),o(i(T),{prop:"uom",label:"UOM",width:"75",sortable:"","sort-method":(n,p)=>h(n,p,"uom")},null,8,["sort-method"]),o(i(T),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:S(n=>[u("span",null,A(i(H)(n.row.startDate)),1)]),_:1}),o(i(T),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:S(n=>[u("span",null,A(i(H)(n.row.endDate)),1)]),_:1}),o(i(T),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:S(n=>[n.row.isActive?(P(),w("div",bt,[o(m,{src:"/media/svg/tables/rows/check.svg"})])):(P(),w("div",wt,[o(m,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),o(i(T),{prop:"changedOn",label:"Changed on",align:"center",width:"150",sortable:""},{default:S(n=>[u("span",null,A(i(mt)(n.row.changedOn)),1)]),_:1}),o(i(T),{prop:"changedBy",label:"Changed by",sortable:"",width:"300","sort-method":(n,p)=>h(n,p,"changedBy")},null,8,["sort-method"])]),_:1},8,["data"])),[[d,i(t).loading]])}}}),Lt={class:"row g-9 my-4"},Mt={class:"dialog-footer"},Et=O({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(a,{emit:s}){const t=I(),F=a,D=s,r=gt(F,"visibility"),l=C(()=>t.filterData),h=()=>{c(),t.resetFilter()},c=()=>{D("handle-close",!1)},g=e=>{t.setModel(e)},m=e=>{t.setModelTo(e)},d=e=>{t.setSmuActual(e)},n=e=>{t.setSmuActualTo(e)},p=e=>{t.setUom(e)},j=e=>{t.setUomTo(e)},q=e=>{t.setPsType(e)},G=e=>{t.setPsTypeTo(e)},K=e=>{t.setStartDate(e)},X=e=>{t.setStartDateTo(e)},Y=e=>{t.setEndDate(e)},J=e=>{t.setEndDateTo(e)},Q=()=>{const e=t.lastUsedFilterData.Uom!==t.filterData.Uom,f=t.lastUsedFilterData.UomTo!==t.filterData.UomTo,v=t.lastUsedFilterData.PsType!==t.filterData.PsType,k=t.lastUsedFilterData.PsTypeTo!==t.filterData.PsTypeTo,y=t.lastUsedFilterData.Model!==t.filterData.Model,W=t.lastUsedFilterData.ModelTo!==t.filterData.ModelTo,Z=t.lastUsedFilterData.SmuActual!==t.filterData.SmuActual,tt=t.lastUsedFilterData.SmuActualTo!==t.filterData.SmuActualTo,at=t.lastUsedFilterData.StartDate!==t.filterData.StartDate,et=t.lastUsedFilterData.StartDateTo!==t.filterData.StartDateTo,ot=t.lastUsedFilterData.EndDate!==t.filterData.EndDate,st=t.lastUsedFilterData.EndDateTo!==t.filterData.EndDateTo;D("handle-close",e||f||v||k||y||W||Z||tt||at||et||ot||st)};return(e,f)=>{const v=E("el-button"),k=E("el-dialog");return P(),x(k,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=y=>r.value=y),title:"Filter",width:"60%",onClose:f[1]||(f[1]=y=>c())},{footer:S(()=>[u("span",Mt,[o(v,{type:"secondary",onClick:h},{default:S(()=>[N("Reset")]),_:1}),o(v,{type:"primary",onClick:Q},{default:S(()=>[N("Filter")]),_:1})])]),default:S(()=>[u("div",Lt,[o(b,{"value-from":l.value.Model,"value-to":l.value.ModelTo,label:"Model",name:"Model",options:i(t).modelOption,onHandleChangeFrom:g,onHandleChangeTo:m},null,8,["value-from","value-to","options"]),o(b,{"value-from":l.value.PsType,"value-to":l.value.PsTypeTo,label:"Ps Type",name:"PsType",options:i(t).psTypeOption,onHandleChangeFrom:q,onHandleChangeTo:G},null,8,["value-from","value-to","options"]),o(b,{"value-from":l.value.SmuActual,"value-to":l.value.SmuActualTo,label:"SMU Actual",name:"SmuActual",options:i(t).smuActualOption,onHandleChangeFrom:d,onHandleChangeTo:n},null,8,["value-from","value-to","options"]),o(b,{"value-from":l.value.Uom,"value-to":l.value.UomTo,label:"Smu Due",name:"Uom",options:i(t).uomOption,onHandleChangeFrom:p,onHandleChangeTo:j},null,8,["value-from","value-to","options"]),o(V,{"value-from":l.value.StartDate?l.value.StartDate.toString():"","value-to":l.value.StartDateTo?l.value.StartDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:K,onHandleChangeTo:X},null,8,["value-from","value-to"]),o(V,{"value-from":l.value.EndDate?l.value.EndDate.toString():"","value-to":l.value.EndDateTo?l.value.EndDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:Y,onHandleChangeTo:J},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),Ct={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Ot=u("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),xt={class:"d-flex justify-content-between align-items-center"},$t={class:"card"},It={class:"card-body grid-padding"},Ht={class:"my-5"},Ca=O({__name:"Index",setup(a){const s=it(),t=I(),F=z(!1),D=C(()=>t.displayData),r=C(()=>t.pagination),l=d=>{t.setPage(d)};Tt(async()=>{s[nt.ACTIVE_PAGE]("IronLake"),lt("SMU Actual",[{pageName:"Iron Lake",pageRoute:"ironlake"},{pageName:"Parameter",pageRoute:"smuactual"},{pageName:"SMU Actual",pageRoute:"smuactual"}]),t.setPage(1),await t.getLookup()}),St(()=>{t.resetState()});const h=async()=>{await t.setPage(1),await t.getLookup()},c=()=>{F.value=!0},g=async d=>{F.value=!1,d&&await h()},m=async()=>{const d=await t.export();yt.saveAs(new Blob([d],{type:"application/octet-stream"}),"SMU Actual.xlsx")};return(d,n)=>(P(),w(Pt,null,[u("div",Ct,[Ot,u("div",xt,[o(ct,{onShowDialog:c}),o(dt,{onHandleDownload:m})])]),u("div",$t,[u("div",It,[o(kt,{"list-data":D.value,page:r.value.currentPage},null,8,["list-data","page"])])]),u("div",Ht,[i(t).paginationLoading?Ft("",!0):(P(),x(rt,{key:0,onRaisePageChange:n[0]||(n[0]=p=>l(p)),currentPage:r.value.currentPage,totalPage:r.value.totalPage,totalPageSize:r.value.totalPageSize,startPaginationIndex:r.value.startPaginationIndex,endPaginationIndex:r.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),o(Et,{visibility:F.value,onHandleClose:g},null,8,["visibility"])],64))}});export{Ca as default};
