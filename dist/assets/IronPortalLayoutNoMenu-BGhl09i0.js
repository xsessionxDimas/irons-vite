import{u as z,a as O,b as k}from"./index-BCnwA6yE.js";import{d as E}from"./pinia-BjOS2_Ao.js";import{e as V}from"./lodash-Cr9vlq0V.js";import{s as W,n as q}from"./date-format-BASVuupi.js";import{b as G,u as H}from"./vue-router-iNp9kJ0K.js";import{c as K,a as Q}from"./get-user-info-ClQf79xP.js";import{u as X}from"./@vueuse-MfruhCTE.js";import{u as Y}from"./useSyncStore-DsLBNjEA.js";import{u as Z}from"./useMsal-BbsBYoof.js";import{i as _,r as T}from"./internet-connection-B91-AJht.js";import{d as tt}from"./cron-Ci8nYs3o.js";import{k as et,r as d,c as s,d as g,a7 as nt,o as ot,p,aa as y,s as v,x as at,aB as t,q as rt,F as st,R as h,C as i,u as w}from"./@vue-BypzYtbH.js";import{_ as it}from"./nw-img-vue-CR837WER.js";import"./vuex-BbOKrtVp.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./dexie-CWyjz2Lo.js";import"./element-plus-C5R56mia.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./luxon-C_T8jI2d.js";import"./moment-C5S46NFB.js";import"./index-CLJyswLZ.js";const lt=E({id:"cronStore",state:()=>({stateTokenIntervalId:null,stateSyncInterventionIntervalId:null,stateFormSyncIntervalId:null}),getters:{TokenIntervalId:n=>n.stateTokenIntervalId,SyncIntervalId:n=>n.stateSyncInterventionIntervalId,FormSyncIntervalId:n=>n.stateFormSyncIntervalId},actions:{setTokenCronJob(n){this.stateTokenIntervalId=n},setSyncInteventionCronJob(n){this.stateSyncInterventionIntervalId=n},setFormSyncCronJob(n){this.stateFormSyncIntervalId=n},releaseCronJob(){this.stateTokenIntervalId&&window.clearInterval(this.stateTokenIntervalId),this.stateSyncInterventionIntervalId&&window.clearInterval(this.stateSyncInterventionIntervalId),this.stateFormSyncIntervalId&&window.clearInterval(this.stateFormSyncIntervalId),this.stateTokenIntervalId=null,this.stateSyncInterventionIntervalId=null,this.stateFormSyncIntervalId=null}}}),ct={class:"ironportal-logo top-menu-item"},mt={class:"ironportal-logo top-menu-item"},ut={class:"top-menu-item d-flex justify-content-end align-items-center"},dt={id:"user-menu"},pt={class:"px-md-10 px-sm-5 d-flex align-items-center",style:{width:"max-content","justify-content":"normal",height:"60px"}},vt={key:0,class:"symbol symbol-circle"},ht=["src"],ft={key:1,class:"symbol avatar-card symbol-circle firstname-placeholder text-center d-flex flex-row justify-content-center align-items-center py-5"},It={class:"d-flex flex-column",style:{"margin-left":"10px",width:"70%"}},_t={class:"d-flex align-items-center text-white wrap name-container justify-content-between text-medium fw-600"},gt={class:"text-elipsis text-green text-normal fw-500",style:{"text-align":"left",width:"max-content"}},yt={class:"w-100 top-menu-time"},wt={class:"text-green fw-500 text-normal"},St={class:"text-white fw-400 text-normal"},xt={class:"ironportal-content"},bt=et({__name:"IronPortalLayoutNoMenu",setup(n){const P=X(),C=G(),S=H(),a=z();lt();const{instance:l}=Z(),F=d(0),R=O(),N=d(""),c=d(""),m=d(""),x=s(()=>a.userPic),B=s(()=>C.path),j=s(()=>V.isUndefined(a.user.Name)?"":a.user.Name[0]),J=s(()=>{var r;return typeof((r=a.user)==null?void 0:r.Name)!=="undefined"?a.user.Name:""}),D=s(()=>a.loggedIn),M=async()=>{const e="https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_url_ehms",r={ver:"v1"};try{const o=await k.getBlob(e,"",new URLSearchParams(r).toString()),I=new Blob([o.data]);N.value=URL.createObjectURL(I)}catch(o){console.log(o)}},U=async()=>{const e="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_week",r={ver:"v1"};try{const o=await k.get(e,"week_number",new URLSearchParams(r).toString());c.value=o.data.result.content.weekNumber,m.value=o.data.result.content.date}catch(o){console.log(o)}},A=()=>{S.push({name:"mydashboard"})},f=Y(),u=s(()=>f.jobRenewToken),b=()=>{if(!(u.value&&u.value.running))if(u.value)u.value.start();else{const e=new tt.CronJob("*/10 * * * *",async function(){T(l)},null,!0);f.setJobRenewTokenRunning(e)}};return g(D,e=>{e||T(l)}),g(B,e=>{R.authPage(e)||S.push({name:"401"})}),nt(async()=>{await K(l),await Q(!_(),l),await M(),await U(),a.userPic==""&&await a.setUserProfilePic(!_())}),ot(()=>{_()||b()}),g(P,e=>{e?b():f.stopAllJob()}),(e,r)=>{const o=h("el-image"),I=h("el-divider"),L=h("el-menu"),$=h("router-view");return p(),y(st,null,[v(L,{mode:"horizontal","background-color":"#2d2b39",ellipsis:!1,class:"ironportal-top-menu d-flex align-items-center justify-content-between"},{default:at(()=>[t("div",ct,[t("a",{href:"javascript:void(0)",onClick:r[0]||(r[0]=kt=>A())},[v(o,{style:{height:"40px"},class:"px-md-10 px-sm-2",src:"/media/logos/logo-whitebg.png",alt:"BUMA AU logo"})])]),t("div",mt,[v(o,{style:{height:"50px",margin:"0 auto"},src:"/media/logos/iron-portal/ironportal-white.png",alt:"IronPortal logo"})]),t("div",ut,[t("div",dt,[t("div",pt,[x.value!=""?(p(),y("div",vt,[t("img",{class:"menu-avatar-img",src:x.value,alt:"metronic",style:{height:"50px",width:"50px"}},null,8,ht)])):(p(),y("div",ft,[t("span",null,i(j.value),1)])),t("div",It,[t("div",_t,i(J.value),1),t("span",gt,i(w(a).user.Position),1),t("div",yt,[t("span",wt,i(c.value&&c.value!=""?c.value:"Week -"),1),v(I,{direction:"vertical"}),t("span",St,i(m.value&&m.value!=""?w(W)(w(q)(new Date(m.value))):"-"),1)])])])])])]),_:1}),t("div",xt,[(p(),rt($,{key:F.value}))])],64)}}}),ce=it(bt,[["__scopeId","data-v-d7a3a7e6"]]);export{ce as default};
