import{y as ue}from"./date-format-8-IvfSl3.js";import{u as qe}from"./vuex-BbOKrtVp.js";import{P as Se}from"./Pagination-BiobnanQ.js";import{d as ge}from"./pinia-BjOS2_Ao.js";import{c as G,j as fe,J as ke,I as we,K as Pe,a as Re,A as ze,y as Oe}from"./index-BuVmIl8K.js";import{k as Z,R as f,Y as ce,u as x,y as ae,p as d,aa as I,q as M,x as l,s as t,B as H,C as se,aB as s,b4 as J,r as K,A as te,F as O,c as D,$ as B,bd as pe,bb as me,a0 as _e,T as Ve,a7 as Be,L as Ae}from"./@vue-BypzYtbH.js";import{_ as Q}from"./nw-img-vue-CR837WER.js";import{_ as Ie}from"./Icon.vue_vue_type_script_setup_true_lang-DE-yo5DI.js";import{A as Ge}from"./MetronicAlert-CahvwpSR.js";import{c as Ee,a as j}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as Le}from"./ErrorAlert-CMKGfwAi.js";import{u as Ne}from"./useCbmParameterBulkStore-Xmopllem.js";import{P as Te}from"./Pagination-D-xfdYmn.js";import{F as Ke}from"./file-saver-CwTBvle_.js";import"./moment-C5S46NFB.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./vue-router-iNp9kJ0K.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./element-plus-BeWdvTRa.js";import"./dayjs-D0x2Df_K.js";import"./lodash-DrHMlsdo.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";import"./table-sort-Bpdq_Uwn.js";import"./language-BriOOvyN.js";const Y="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/cbm_parameter",je="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/equipment/lookup_component",He="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/cbm_parameter/lookup_rating",Xe="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/equipment/lookup_equipment_model",Ye="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/daily_schedule/lookup_pstype",Je="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/cbm_parameter/export/",Ze="https://digital-bumaau-dev-apm-001.azure-api.net/ironlake-asset/api/ironlake/cbm_parameter/bulk?ver=v1",Qe={description:"",equipmentModelId:null,serviceSize:"",typeParameterId:null,componentId:null,cbmGroupId:null,rating:"",page:1,pageSize:20},le=ge({id:"cbmParameterList",state:()=>({stateFilterData:{description:"",equipmentModelId:null,serviceSize:"",typeParameterId:null,componentId:null,cbmGroupId:null,rating:"",isSync:!1,page:1,pageSize:20},stateLastUsedFilterData:{description:"",equipmentModelId:null,serviceSize:"",typeParameterId:null,componentId:null,cbmGroupId:null,rating:"",isSync:!1,page:1,pageSize:20},stateExportFilter:{description:"",equipmentModelId:null,serviceSize:"",typeParameterId:null,componentId:null,cbmGroupId:null,rating:"",isSync:!1},stateLastSyncDate:"",statePageName:"cbm parameter",stateDisplayData:[],stateFilterVisibility:!1,stateDraftData:[],statePagination:new Se,stateSyncData:[],stateCbmGroupOption:[],stateTypeParameterOption:[],stateEquipmentModelOption:[],stateComponentOption:[],stateRatingOption:[],stateServiceSizeOption:[],stateStatusConverter:[],stateLoading:!1,statePaginationLoading:!1}),getters:{pageName:e=>e.statePageName,pagination:e=>e.statePagination,loading:e=>e.stateLoading,draftData:e=>e.stateDraftData,displayData:e=>e.stateDisplayData,syncData:e=>e.stateSyncData,lastUsedFilterData:e=>e.stateLastUsedFilterData,paginationLoading:e=>e.statePaginationLoading,filterVisibility:e=>e.stateFilterVisibility},actions:{async getData(e=!0){this.stateLoading=!0,this.stateLastUsedFilterData={...this.stateFilterData};const r={ver:"v1"},n={description:this.stateFilterData.description,equipmentModelId:this.stateFilterData.equipmentModelId===""?null:this.stateFilterData.equipmentModelId,serviceSize:this.stateFilterData.serviceSize,typeParameterId:this.stateFilterData.typeParameterId===""?null:this.stateFilterData.typeParameterId,componentId:this.stateFilterData.componentId===""?null:this.stateFilterData.componentId,cbmGroupId:this.stateFilterData.cbmGroupId===""?null:this.stateFilterData.cbmGroupId,rating:this.stateFilterData.rating,isSync:this.stateFilterData.isSync,page:this.stateFilterData.page,pageSize:this.stateFilterData.pageSize};try{e?this.stateLoading=!0:this.stateDisplayData=[];const o=await G.post(`${Y}?${new URLSearchParams(r).toString()}`,n);o.data.title==="Error"?fe("Failed to Fetch Data",o.data.result.message,"Ok"):(this.stateDisplayData=o.data.result.content.cbmParameterList,this.stateDraftData=o.data.result.content.cbmParameterDraftList,this.setTotalPage(o.data.result.content.totalData))}catch(o){console.log(o)}this.stateLoading=!1},async getSyncData(e=!0){this.stateLoading=!0;const r={ver:"v1"};try{e?this.stateLoading=!0:this.stateSyncData=[];const n=await G.get(`${Y}/sync_history?${new URLSearchParams(r).toString()}`);this.stateSyncData=n.data.result.content,this.stateLastSyncDate=n.data.result.content[0].syncDate}catch(n){console.log(n)}this.stateLoading=!1},async getLookupCbmGroup(){const e={ver:"v1"};try{const n=(await G.get(`${Y}/lookup_cbm_group`,"",new URLSearchParams(e).toString())).data.result.content;this.stateCbmGroupOption=[],n.forEach(o=>{const a={value:o.cbmGroupId,label:o.cbmGroup};this.stateCbmGroupOption.push(a)})}catch(r){console.log(r)}},async getLookupTypeParameter(){const e={ver:"v1"};try{const n=(await G.get(`${Y}/lookup_type_parameter`,"",new URLSearchParams(e).toString())).data.result.content;this.stateTypeParameterOption=[],n.forEach(o=>{const a={value:o.typeParameterId,label:o.typeParameter};this.stateTypeParameterOption.push(a)})}catch(r){console.log(r)}},async getLookupStatus(){const e={ver:"v1"};try{const n=(await G.get(`${Y}/lookup_status_converter`,"",new URLSearchParams(e).toString())).data.result.content;this.stateStatusConverter=[],n.forEach(o=>{const a={value:o,label:o};this.stateStatusConverter.push(a)})}catch(r){console.log(r)}},async getLookupServiceSize(){const e={ver:"v1"};try{const n=(await G.get(`${Ye}?${new URLSearchParams(e).toString()}`)).data.result.content.psType;this.stateServiceSizeOption=[],n.forEach(o=>{const a={value:`${o}`,label:`${o}`};this.stateServiceSizeOption.push(a)})}catch(r){console.log(r)}},async getLookupEquipmentModel(){const e={ver:"v1"};try{const n=(await G.get(`${Xe}?${new URLSearchParams(e).toString()}`)).data.result.content;this.stateEquipmentModelOption=[],n.forEach(o=>{const a={value:o.equipmentModelId,label:o.equipmentModel};this.stateEquipmentModelOption.push(a)})}catch(r){console.log(r)}},async getLookupComponent(){const e={ver:"v1"};try{const n=(await G.get(`${je}?${new URLSearchParams(e).toString()}`)).data.result.content;this.stateComponentOption=[],n.forEach(o=>{const a={value:o.componentId,label:o.componentCode!==""?`${o.componentCode} | ${o.componentName}`:""};this.stateComponentOption.push(a)})}catch(r){console.log(r)}},async getLookupRating(){const e={ver:"v1"};try{const n=(await G.get(`${He}?${new URLSearchParams(e).toString()}`)).data.result.content;this.stateRatingOption=[],n.forEach(o=>{const a={value:o,label:o};this.stateRatingOption.push(a)})}catch(r){console.log(r)}},async export(){const e={ver:"v1"};this.stateExportFilter.description=this.stateFilterData.description,this.stateExportFilter.equipmentModelId=this.stateFilterData.equipmentModelId===""?null:this.stateFilterData.equipmentModelId,this.stateExportFilter.serviceSize=this.stateFilterData.serviceSize,this.stateExportFilter.typeParameterId=this.stateFilterData.typeParameterId===""?null:this.stateFilterData.typeParameterId,this.stateExportFilter.componentId=this.stateFilterData.componentId===""?null:this.stateFilterData.componentId,this.stateExportFilter.cbmGroupId=this.stateFilterData.cbmGroupId===""?null:this.stateFilterData.cbmGroupId,this.stateExportFilter.rating=this.stateFilterData.rating,this.stateExportFilter.isSync=this.stateFilterData.isSync;try{return(await G.postBlob(`${Je}/false?${new URLSearchParams(e).toString()}`,this.stateExportFilter)).data}catch(r){console.log(r)}},setTotalPage(e){this.pagination.totalPage=e,this.pagination.getPaginationLastIndex(),this.pagination.getPaginationLastIndex()},async setPage(e){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(e),this.statePagination.totalPageSize=this.stateFilterData.pageSize,this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setPageSize(e){this.statePaginationLoading=!0,this.stateFilterData.pageSize=e,this.statePagination.totalPageSize=this.stateFilterData.pageSize,this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!0),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setFilterData(e){this.stateLoading=!0,this.stateFilterData=e,await this.getData(!1)},setLastActiveFilter(e){this.stateFilterData=e},setFilterVisibility(e){this.stateFilterVisibility=e},resetState(){this.stateFilterData={...Qe},this.stateDisplayData=[],this.statePagination=new Se,this.stateSyncData=[],this.stateDraftData=[],this.stateLoading=!1,this.statePaginationLoading=!1}}}),We={key:0,style:{height:"100px"}},et=Z({__name:"SyncTable",props:{listData:{required:!0,type:Array}},emits:["show-errors","delete-draft","show-dialog"],setup(e,{emit:r}){const n=e,o=le(),a=S=>S?"badge-light-success text-btech-success-500":"badge-light-danger";return(S,m)=>{const u=f("el-table-column"),y=f("el-table"),F=ce("loading");return x(o).loading?ae((d(),I("div",We,null,512)),[[F,x(o).loading]]):ae((d(),M(y,{key:1,data:n.listData,style:{width:"100%"},"max-height":500,"empty-text":"No Data","header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell"},{default:l(()=>[t(u,{label:"Sync Date",prop:"syncDate","min-width":"200"},{default:l(E=>[H(se(x(ue)(E.row.syncDate)),1)]),_:1}),t(u,{label:"Status",prop:"status","min-width":"200"},{default:l(E=>[s("span",{class:J(["badge btech-badge",a(E.row.status)])},se(E.row.status?"SUCCESS":"FAILED"),3)]),_:1})]),_:1},8,["data"])),[[F,x(o).loading]])}}}),tt=Q(et,[["__scopeId","data-v-a8dac4b8"]]),ie=ge({id:"cbmForm",state:()=>({stateFormData:[],stateFormEditData:{},stateFormDraftData:{},stateFormCBMData:[],stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateLoadingMessage:""}),getters:{formData:e=>e.stateFormData,formDraftData:e=>e.stateFormDraftData,formEditData:e=>e.stateFormEditData,formCbmData:e=>e.stateFormCBMData,error:e=>e.stateError,errors:e=>e.stateErrors,isError:e=>e.stateIsError,loading:e=>e.stateLoading},actions:{async updateData(){var e,r;try{this.stateLoading=!0;const n={ver:"v1"},o=this.stateFormData,a=await G.post(`${Y}/upsert?${new URLSearchParams(n).toString()}`,o);a.data.title!=="Error"&&(a.data.result.isError?(this.stateErrors.push((r=(e=a.data.result.content)==null?void 0:e.cbmParameterList[0])==null?void 0:r.validationReason),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1))}catch(n){this.stateError=n.response.data.result.message,this.stateErrors.push(n&&n.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async deleteDraft(e){try{this.stateLoading=!0;const r=[{cbmParameterDraftId:e}],n=await G.post(`${Y}/delete_draft?ver=v1`,r);n.data.title!=="Error"?n.data.result.isError?(this.stateErrors.push("Failed to delete draft"),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1):(this.stateErrors.push(n.data.result.message),this.stateIsError=!0)}catch(r){this.stateErrors.push(r&&r.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateDraft(){var e,r;try{this.stateLoading=!0;const n={ver:"v1"},o=[{cbmParameterDraftId:this.stateFormDraftData.cbmParameterDraftId,taskKey:this.stateFormDraftData.taskKey,model:this.stateFormDraftData.equipmentModel,serviceSize:this.stateFormDraftData.serviceSize,description:this.stateFormDraftData.taskDescription,uom:this.stateFormDraftData.uom,typeParameter:this.stateFormDraftData.typeParameter,status:this.stateFormDraftData.status,minValue:this.stateFormDraftData.minValue,maxValue:this.stateFormDraftData.maxValue,component:this.stateFormDraftData.component,cbmGroup:this.stateFormDraftData.cbmGroup,taskNo:this.stateFormDraftData.taskNo,taskNoDetail:this.stateFormDraftData.taskNoDetail,rating:this.stateFormDraftData.rating,isActive:!0}],a=await G.post(`${Y}/upsert?${new URLSearchParams(n).toString()}`,o);a.data.title!=="Error"&&(a.data.result.isError?(this.stateErrors.push((r=(e=a.data.result.content)==null?void 0:e.cbmParameterList[0])==null?void 0:r.validationReason),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1))}catch(n){this.stateErrors.push(n&&n.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(e){this.stateErrors=e,this.stateIsError=this.stateErrors.length>0},setFormDraftData(e){this.stateFormDraftData=e},setFormEditData(e){this.stateFormEditData={taskKey:e.taskKey||"",equipmentModel:e.equipmentModel||"",serviceSize:e.serviceSize||"",component:e.component||"",typeParameter:e.typeParameter||"",cbmGroup:e.cbmGroup||"",rating:e.rating||"",taskDescription:e.taskDescription||"",isActive:e.isActive||!1,taskNo:e.taskNo||"",taskNoDetail:e.taskNoDetail||"",modifiedBy:e.modifiedBy||"",modifiedOn:e.modifiedOn||"",cbmParameter:e.cbmParameter||[]}},setPayload(e){this.stateFormData=[],this.formCbmData.forEach(r=>{this.stateFormData.push({taskKey:e.taskKey,model:e.equipmentModel,serviceSize:e.serviceSize,description:e.taskDescription,typeParameter:e.rating.toLocaleLowerCase().includes("automatic")||e.rating.toLocaleLowerCase().includes("calibration")?e.typeParameter:"",rating:e.rating,component:e.component,cbmGroup:e.cbmGroup,uom:r.uom,cbmParameterId:r.cbmParameterId,status:r.status,minValue:r.minValue,maxValue:r.maxValue,taskNo:e.taskNo,taskNoDetail:e.taskNoDetail,isActive:!0})})},setFormCbmData(e){this.stateFormCBMData=[],e.forEach(r=>{this.stateFormCBMData.push({cbmParameterId:r.cbmParameterId,uom:r.uom,minValue:r.minValue,maxValue:r.maxValue,status:r.status})})},resetFormData(){this.stateFormEditData={}}}}),Fe=ge({id:"cbmParameterBulk",state:()=>({stateBulkPayload:{},stateBulkErrors:{totalItem:0,employeeList:[]},stateAlert:{show:!1,variant:"",desc:""},stateBulkPerformed:!1,stateLoading:!1,stateLoadingMsg:"",stateUploadLoading:!1,stateValidatedData:[],stateDisplayData:[],stateIsError:!1,stateError:"",stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:e=>e.stateValidatedData,displayData:e=>e.stateDisplayData,error:e=>e.stateError,isError:e=>e.stateIsError,alertVariant:e=>e.stateAlert.variant,alertDesc:e=>e.stateAlert.desc,loading:e=>e.stateLoading,loadingMessage:e=>e.stateLoadingMsg,uploadLoading:e=>e.stateUploadLoading,isUploaded:e=>e.stateIsUploaded,bulkErrors:e=>e.stateBulkErrors,testLoading:e=>e.stateUploadLoading},actions:{async bulkUpload(){this.stateLoading=!0;const e=new FormData;e.append("fileUpload",this.stateBulkPayload.fileUpload);try{const r=await G.post(`${Ze}`,e);if(r.data.statusCode==200)if(r.data.result.isError)this.stateIsError=!0,this.stateError=r.data.result.message;else{const n=r.data.result.content,o=n.totalData,S=n.cbmParameterList.filter(u=>u.validationReason!=="").length,m=o>1?"records":"record";S===0&&o===0?this.stateAlert={show:!0,variant:"info",desc:"No record has been submitted, please check your file"}:S===0&&o>0?this.stateAlert={show:!0,variant:"success",desc:`${o} of ${o} ${m} submitted successfully`}:S>0&&o>0&&(this.stateAlert={show:!0,variant:"warning",desc:`${S} of ${o} ${m} failed to submit`})}else this.stateAlert={show:!0,variant:"warning",desc:r.data.result.message},this.stateIsError=r.data.result.isError,this.stateError=r.data.result.message;this.stateLoading=!1}catch(r){console.log(r),this.stateLoading=!1,this.stateError=r,this.stateIsError=!0}},async deleteBulkDraft(e){const r=new URLSearchParams({ver:"v1"}).toString();this.stateLoading=!0,this.stateLoadingMsg="Removing Data";try{const n=await G.post(`${Y}/delete_draft?${r}`,e);return this.stateAlert.show=!1,n.data}catch(n){console.log(n)}finally{this.stateLoading=!1,this.stateLoadingMsg=""}},setIsUploadedState(e){this.stateIsUploaded=e},resetState(){this.stateBulkPayload={},this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkPerformed=!1,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),at={key:0,class:"d-flex justify-content-end"},st={class:"svg-icon svg-icon-btech-danger-500 d-inline-block mr-2"},lt={key:1,style:{height:"100px"}},ot={class:"d-flex gap-4 justify-content-center"},nt=["onClick"],rt={class:"d-flex justify-content-end gap-6"},it=["onClick"],dt=["onClick"],ut=Z({__name:"DraftTable",props:{listData:{required:!0,type:Array}},emits:["show-errors","delete-draft","show-dialog","load-page"],setup(e,{emit:r}){const n=e,o=le(),a=ie(),S=Fe(),m=r,u=b=>{const V={name:b.taskDescription,errors:b.validationReason};m("show-errors",V)},y=b=>{a.setFormDraftData(b),m("show-dialog",b)},F=b=>{m("delete-draft",b)},E=K([]),_=b=>{E.value=b.map(V=>({cbmParameterDraftId:V.cbmParameterDraftId}))},q=()=>{ke("Remove all selected records from Need Review?","Remove").then(async b=>{b.isConfirmed&&await S.deleteBulkDraft(E.value).then(()=>{m("load-page"),we("Records have been successfully deleted!","Ok"),E.value=[]})})};return(b,V)=>{const $=f("inline-svg"),N=f("el-button"),k=f("el-tooltip"),v=f("el-table-column"),w=f("el-table"),R=ce("loading");return d(),I(O,null,[E.value.length>0?(d(),I("section",at,[t(N,{class:"btn btn-outline btn-outline-btech-danger btn-active-light-btech-danger btech-md mb-4",onClick:q},{default:l(()=>[s("span",st,[t($,{src:"/media/icons/bumaau/delete.svg",style:{width:"1.25rem",height:"1.25rem"}})]),H(" Delete ("+se(E.value.length)+") ",1)]),_:1})])):te("",!0),x(o).loading?ae((d(),I("div",lt,null,512)),[[R,x(o).loading]]):ae((d(),M(w,{key:2,data:n.listData,style:{width:"100%"},"max-height":400,"empty-text":"No Data","header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell",onSelect:_,onSelectAll:_},{default:l(()=>[t(v,{label:"","min-width":"50",align:"center",prop:"validationReason"},{default:l(L=>[s("div",ot,[t(k,{class:"box-item",effect:"dark",content:"Click to see errors.",placement:"top"},{default:l(()=>[s("span",{class:"svg-icon svg-icon-btech-danger-500 me-1",style:{cursor:"pointer"},onClick:g=>u(L.row)},[t($,{src:"/media/icons/bumaau/info.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,nt)]),_:2},1024)])]),_:1}),t(v,{label:"Description",prop:"taskDescription","min-width":"400"}),t(v,{label:"Model",prop:"equipmentModel",width:"200"}),t(v,{label:"Service Size",prop:"serviceSize",width:"200"}),t(v,{label:"Rating",prop:"rating",width:"200"}),t(v,{label:"Type Parameter",prop:"typeParameter",width:"200"}),t(v,{label:"Component",prop:"component",width:"200"}),t(v,{label:"CBM Group",prop:"cbmGroup",width:"200"}),t(v,{label:"UoM",prop:"uom",width:"200"}),t(v,{label:"Status",prop:"status",width:"200"}),t(v,{label:"Min Value",prop:"minValue",width:"200"}),t(v,{label:"Max Value",prop:"maxValue",width:"200"}),t(v,{label:"Action",width:"80",align:"center",fixed:"right"},{default:l(L=>[s("div",rt,[t(k,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:l(()=>[s("span",{onClick:g=>y(L.row),class:"svg-icon svg-icon-btech-secondary-500 d-inline-block m-0 cursor-pointer"},[t($,{src:"/media/svg/tables/rows/mode-edit-round.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,it)]),_:2},1024),t(k,{class:"box-item",effect:"dark",content:"Delete",placement:"top"},{default:l(()=>[s("span",{onClick:g=>F(L.row),class:"svg-icon svg-icon-btech-danger-500 d-inline-block m-0 cursor-pointer"},[t($,{src:"/media/icons/bumaau/delete.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,dt)]),_:2},1024)])]),_:1}),t(v,{type:"selection",fixed:"right",width:"40",align:"center","header-align":"center"})]),_:1},8,["data"])),[[R,x(o).loading]])],64)}}}),ct=Q(ut,[["__scopeId","data-v-766d2115"]]),pt={key:0,style:{height:"100px"}},mt={class:"row"},vt={class:"d-flex justify-content-center"},bt=["onClick"],ht=Z({__name:"ListTable",props:{listData:{required:!0,type:Array}},emits:["show-errors","delete-draft","show-dialog"],setup(e,{emit:r}){const n=e,o=le(),a=ie(),S=r,m=_=>{a.resetFormData();const q={taskKey:_.taskKey,equipmentModel:_.equipmentModel,serviceSize:_.serviceSize,component:_.component,typeParameter:_.typeParameter,cbmGroup:_.cbmGroup,rating:_.rating,taskDescription:_.taskDescription,isActive:_.isActive,taskNo:_.taskNo,taskNoDetail:_.taskNoDetail,modifiedBy:_.modifiedBy,modifiedOn:_.modifiedOn,cbmParameter:_.cbmParameter};a.setFormCbmData(_.cbmParameter),a.setFormEditData(q),S("show-dialog",null)},u=K(""),y=_=>{u.value=_.order},F=(_,q)=>{const b=_.toLocaleLowerCase(),V=q.toLocaleLowerCase();return b===null?1:V===null?-1:b===null&&V===null?0:b.localeCompare(V)},E=(_,q)=>{const b=parseInt(_.serviceSize),V=parseInt(q.serviceSize);return b-V};return(_,q)=>{const b=f("el-table-column"),V=f("el-table"),$=f("inline-svg"),N=f("el-tooltip"),k=ce("loading");return x(o).loading?ae((d(),I("div",pt,null,512)),[[k,x(o).loading]]):ae((d(),M(V,{key:1,data:n.listData,style:{width:"100%"},"empty-text":"No Data","header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell",onSortChange:y},{default:l(()=>[t(b,{type:"expand","min-width":"50"},{default:l(v=>[s("div",null,[t(V,{data:v.row.cbmParameter,border:!0,"header-cell-class-name":"ironlake-table-cell-header","cell-class-name":"ironlake-table-cell","max-height":400,style:{width:"30%"}},{default:l(()=>[t(b,{label:"Status",prop:"status"}),t(b,{label:"Min Value",prop:"minValue"}),t(b,{label:"Max Value",prop:"maxValue"}),t(b,{label:"UoM",prop:"uom"})]),_:2},1032,["data"])])]),_:1}),t(b,{label:"Description",prop:"taskDescription","min-width":"400",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.taskDescription,w.taskDescription)},null,8,["sort-method"]),t(b,{label:"Model",prop:"equipmentModel",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.equipmentModel,w.equipmentModel)},null,8,["sort-method"]),t(b,{label:"Service Size",prop:"serviceSize",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":E}),t(b,{label:"Rating",prop:"rating",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.rating,w.rating)},null,8,["sort-method"]),t(b,{label:"Type Parameter",prop:"typeParameter",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.typeParameter,w.typeParameter)},null,8,["sort-method"]),t(b,{label:"Component",prop:"component",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.component,w.component)},null,8,["sort-method"]),t(b,{label:"CBM Group",prop:"cbmGroup",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.cbmGroup,w.cbmGroup)},null,8,["sort-method"]),t(b,{label:"Modified By",prop:"modifiedBy",width:"200",sortable:"","sort-orders":["ascending","descending"],"sort-method":(v,w)=>F(v.modifiedBy,w.modifiedBy)},null,8,["sort-method"]),t(b,{label:"Action","min-width":"80",align:"center",fixed:"right"},{default:l(v=>[s("div",mt,[s("div",vt,[t(N,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:l(()=>[s("span",{onClick:w=>m(v.row),class:"svg-icon svg-icon-btech-secondary-500 d-flex justify-content-end cursor-pointer"},[t($,{src:"/media/svg/tables/rows/mode-edit-round.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,bt)]),_:2},1024)])])]),_:1})]),_:1},8,["data"])),[[k,x(o).loading]])}}}),gt=Q(ht,[["__scopeId","data-v-4cde8ed8"]]),ft=Z({__name:"DownloadButton",emits:["handleDownload"],setup(e,{emit:r}){const n=r,o=()=>{n("handleDownload")};return(a,S)=>(d(),I("button",{class:"d-flex gap-2 align-items-center btn btn-btech-outline px-4 py-2",onClick:o},[t(Ie,{name:"download",size:"24"}),H(" Export ")]))}}),_t=Q(ft,[["__scopeId","data-v-44b9d32e"]]),Ce=e=>(pe("data-v-220e00a0"),e=e(),me(),e),yt={class:"p-2 d-flex flex-column gap-8"},Dt=Ce(()=>s("div",{class:"employee-filter-header"},[s("p",{class:"m-0 fw-700 text-large"},"Filters")],-1)),St={class:"d-flex flex-column gap-8"},kt=Ce(()=>s("span",null,"Description",-1)),wt={class:"d-flex align-items-center gap-4 form-control form-control-lg"},Pt=Z({__name:"FilterButton",emits:["applyFilter"],setup(e,{expose:r,emit:n}){const o=le(),a=K({description:"",equipmentModelId:null,serviceSize:"",typeParameterId:null,componentId:null,cbmGroupId:null,rating:"",isSync:!1,page:1,pageSize:20});r({data:a});const S=D(()=>o.stateRatingOption);K(!1);const m=D(()=>o.stateTypeParameterOption),u=D(()=>o.stateCbmGroupOption),y=D(()=>o.stateServiceSizeOption),F=D(()=>o.stateEquipmentModelOption),E=D(()=>o.stateComponentOption),_=n,q=()=>{_("applyFilter",a)},b=()=>{a.value.description=o.stateLastUsedFilterData.description,a.value.equipmentModelId=o.stateLastUsedFilterData.equipmentModelId,a.value.serviceSize=o.stateLastUsedFilterData.serviceSize,a.value.componentId=o.stateLastUsedFilterData.componentId,a.value.cbmGroupId=o.stateLastUsedFilterData.cbmGroupId,a.value.typeParameterId=o.lastUsedFilterData.typeParameterId,a.value.rating=o.stateLastUsedFilterData.rating,a.value.isSync=o.stateLastUsedFilterData.isSync,o.setFilterVisibility(!o.filterVisibility)},V=()=>{a.value.description=o.stateLastUsedFilterData.description,a.value.equipmentModelId=o.stateLastUsedFilterData.equipmentModelId,a.value.serviceSize=o.stateLastUsedFilterData.serviceSize,a.value.componentId=o.stateLastUsedFilterData.componentId,a.value.cbmGroupId=o.stateLastUsedFilterData.cbmGroupId,a.value.typeParameterId=o.lastUsedFilterData.typeParameterId,a.value.rating=o.stateLastUsedFilterData.rating,a.value.isSync=o.stateLastUsedFilterData.isSync,o.setFilterVisibility(!o.filterVisibility)},$=()=>{a.value.description="",a.value.equipmentModelId=null,a.value.serviceSize="",a.value.componentId=null,a.value.typeParameterId=null,a.value.cbmGroupId=null,a.value.rating="",a.value.isSync=!1};return(N,k)=>{const v=f("el-input"),w=f("el-form-item"),R=f("el-option"),L=f("el-select"),g=f("el-checkbox"),P=f("el-form"),c=f("el-popover");return d(),M(c,{placement:"bottom",width:480,trigger:"click",visible:x(o).filterVisibility},{reference:l(()=>[s("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md m-0",onClick:b},[t(Ie,{name:"filter",size:"24"}),H(" Filter ")])]),default:l(()=>[s("div",yt,[Dt,s("section",St,[t(P,{"label-position":"top",class:"ironlake-form d-flex flex-column gap-6"},{default:l(()=>[t(w,null,{label:l(()=>[kt]),default:l(()=>[t(v,{modelValue:a.value.description,"onUpdate:modelValue":k[0]||(k[0]=i=>a.value.description=i),placeholder:"Input Description",onInput:k[1]||(k[1]=i=>a.value.description=i)},null,8,["modelValue"])]),_:1}),t(w,{label:"Equipment Model"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.equipmentModelId,"onUpdate:modelValue":k[2]||(k[2]=i=>a.value.equipmentModelId=i),placeholder:"Select Equipment Model",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(F.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"Service Size"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.serviceSize,"onUpdate:modelValue":k[3]||(k[3]=i=>a.value.serviceSize=i),placeholder:"Select Service Size",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(y.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"Rating"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.rating,"onUpdate:modelValue":k[4]||(k[4]=i=>a.value.rating=i),placeholder:"Select Rating",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(S.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"Type Parameter"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.typeParameterId,"onUpdate:modelValue":k[5]||(k[5]=i=>a.value.typeParameterId=i),placeholder:"Select Type Parameter",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(m.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"Component"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.componentId,"onUpdate:modelValue":k[6]||(k[6]=i=>a.value.componentId=i),placeholder:"Select Component",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(E.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"CBM Group"},{default:l(()=>[t(L,{class:"w-100",modelValue:a.value.cbmGroupId,"onUpdate:modelValue":k[7]||(k[7]=i=>a.value.cbmGroupId=i),placeholder:"Select CBM Group",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(u.value,i=>(d(),M(R,{key:i.value,label:i.label!==""?i.label:" ",value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{class:"mt-4"},{default:l(()=>[s("div",wt,[t(g,{modelValue:a.value.isSync,"onUpdate:modelValue":k[8]||(k[8]=i=>a.value.isSync=i),size:"small",label:"Show parameter with missing value"},null,8,["modelValue"])])]),_:1})]),_:1})]),s("div",{class:"d-flex justify-content-between"},[s("div",null,[s("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md me-auto",onClick:$}," Reset ")]),s("div",{class:"d-flex gap-4 align-items-center"},[s("button",{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-md",onClick:V}," Close "),s("button",{class:"btn btn-btech-secondary btech-md",onClick:q},"Apply")])])])]),_:1},8,["visible"])}}}),Vt=Q(Pt,[["__scopeId","data-v-220e00a0"]]),It={key:0},Et={class:"m-0",style:{"word-break":"normal"}},Lt={key:1},Ft=Z({__name:"DraftErrorModal",props:{visibility:{type:Boolean,default:!1},errorData:{type:Object,default:null}},emits:["handle-close"],setup(e,{emit:r}){const n=e,o=D(()=>{var y,F;return(F=(y=n.errorData)==null?void 0:y.errors)==null?void 0:F.split(", ")}),a=_e(n,"visibility"),S=r,m=(u=!1)=>{S("handle-close",u)};return(u,y)=>{const F=f("el-dialog");return d(),M(F,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=E=>a.value=E),title:"Errors",width:"500px",onClose:y[1]||(y[1]=E=>m()),"align-center":""},{default:l(()=>[o.value?(d(),I("ul",It,[(d(!0),I(O,null,B(o.value,(E,_)=>(d(),I("li",{key:_},[s("p",Et,se(E),1)]))),128))])):(d(),I("p",Lt,"Undefined"))]),_:1},8,["modelValue"])}}}),Ct=Q(Ft,[["__scopeId","data-v-ee8d6d7a"]]),W=e=>(pe("data-v-f311d988"),e=e(),me(),e),$t={class:"col-12 fv-row fv-plugins-icon-container"},xt=W(()=>s("span",{class:""},"Description",-1)),Mt={class:"col-12 fv-row fv-plugins-icon-container"},Ut=W(()=>s("span",{class:""},"Equipment Model",-1)),qt={class:"col-12 fv-row fv-plugins-icon-container"},Rt=W(()=>s("span",{class:""},"Service Size",-1)),zt={class:"col-12 fv-row fv-plugins-icon-container"},Ot=W(()=>s("span",{class:"required"},"Component",-1)),Bt={class:"col-12 fv-row fv-plugins-icon-container"},At=W(()=>s("span",{class:"required"},"CBM Group",-1)),Gt={class:"col-12 fv-row fv-plugins-icon-container"},Nt={class:"align-items-center fv-row"},Tt={class:"align-items-center justify-content-between form-control form-control-lg"},Kt={class:"col-12 fv-row fv-plugins-icon-container"},jt=W(()=>s("span",{class:""},"Rating",-1)),Ht={class:"col-12 fv-row fv-plugins-icon-container mt-2"},Xt={class:"grid mt-2"},Yt={class:"d-flex gap-2 justify-content-between align-items-center"},Jt={class:"w-100"},Zt={class:"w-100"},Qt={class:"w-100"},Wt={class:"w-100"},ea=W(()=>s("span",{class:""},"UoM",-1)),ta=W(()=>s("div",{class:""},null,-1)),aa={class:"w-100"},sa={class:"w-100"},la={class:"w-100"},oa={class:"w-100"},na=["onClick"],ra={class:"grid"},ia={key:0,class:"w-100 btn-addparam"},da=W(()=>s("i",{class:"fas fa-plus fs-6 text-btech-secondary-500"},null,-1)),ua={class:"dialog-footer"},ca=Z({__name:"FormEdit",props:{visibility:{type:Boolean,default:!1},cbmData:{type:Object,default:null}},emits:["handle-close","input"],setup(e,{emit:r}){const n=e,o=r,a=ie(),S=le(),m=D(()=>a.formEditData),u=D(()=>a.formCbmData);K({taskKey:a.formEditData.taskKey,equipmentModel:a.formEditData.equipmentModel,serviceSize:a.formEditData.serviceSize,component:a.formEditData.component,typeParameter:a.formEditData.typeParameter,cbmGroup:a.formEditData.cbmGroup,rating:a.formEditData.rating,taskDescription:a.formEditData.taskDescription,isActive:a.formEditData.isActive,taskNo:a.formEditData.taskNo,taskNoDetail:a.formEditData.taskNoDetail,modifiedBy:a.formEditData.modifiedBy,modifiedOn:a.formEditData.modifiedOn,cbmParameter:a.formEditData.cbmParameter});const y=_e(n,"visibility"),F=D(()=>a.errors),E=D(()=>a.isError),_=D(()=>S.stateComponentOption),q=D(()=>S.stateCbmGroupOption),b=D(()=>S.stateTypeParameterOption),V=D(()=>m.value.typeParameter.toLocaleLowerCase()==="suspension"?[{label:"In Spec",value:"In Spec"},{label:"Out of spec",value:"Out of spec"}]:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"X",value:"X"}]);D(()=>S.stateRatingOption);const $=D(()=>["automatic","calibration"].some(c=>m.value.rating.toLocaleLowerCase().includes(c)));Ee().shape({company:j().required("Company is mandatory"),name:j().min(3,P=>{`${P.min}`}).required("Name is mandatory"),position:j().required("Position is mandatory"),siteName:j().required("Site is mandatory"),vendor:j().required("Vendor is mandatory"),isActive:j().required("Status is mandatory")});const N=(P=!1)=>{g(),o("handle-close",P)},k=P=>{const c=m.value.cbmParameter[P].minValue;m.value.cbmParameter[P].minValue=`${c.replace(/[^\d.-/>/</ ]+/g,"")}`},v=P=>{const c=m.value.cbmParameter[P].maxValue;m.value.cbmParameter[P].maxValue=`${c.replace(/[^\d.-/>/</ ]+/g,"")}`},w=P=>{a.formCbmData.push({cbmParameterId:null,status:"",minValue:"",maxValue:"",uom:P})},R=P=>{const c=a.formCbmData.findIndex(i=>P.cbmParameterId===i.cbmParameterId&&P.status===i.status&&P.minValue===i.minValue&&P.maxValue===i.maxValue&&P.uom===i.uom);c!==-1&&a.formCbmData.splice(c,1)},L=async()=>{g(),a.stateLoadingMessage="Submitting Data",a.setPayload(m.value),a.updateData().then(()=>{a.isError?fe("Failed to Update","","Ok"):Pe("Record has been submitted successfully","","Ok").then(()=>{N(!0)})}),console.log(a.stateFormData)},g=()=>{a.setErrors([])};return(P,c)=>{const i=f("el-input"),U=f("el-form-item"),ee=f("el-option"),X=f("el-select"),ne=f("inline-svg"),p=f("el-tooltip"),be=f("el-form"),de=f("el-button"),he=f("el-dialog");return d(),M(he,{modelValue:y.value,"onUpdate:modelValue":c[9]||(c[9]=h=>y.value=h),title:"Edit CBM Parameter",width:500,"close-on-click-modal":!1,"show-close":!1,onClose:c[10]||(c[10]=h=>N())},{footer:l(()=>[s("span",ua,[t(de,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary",onClick:c[8]||(c[8]=h=>N(!1)),disabled:x(a).loading},{default:l(()=>[H("Cancel")]),_:1},8,["disabled"]),t(de,{class:"btn btn-btech-secondary",onClick:L,disabled:x(a).loading},{default:l(()=>[H("Submit")]),_:1},8,["disabled"])])]),default:l(()=>[t(Ve,{name:"fade"},{default:l(()=>[E.value?(d(),M(Le,{key:0,errorMessages:F.value,onResetForm:g},null,8,["errorMessages"])):te("",!0)]),_:1}),t(be,{class:"row g-4 my-4","label-position":"top"},{default:l(()=>[s("div",$t,[t(U,{class:"m-0"},{label:l(()=>[xt]),default:l(()=>[t(i,{modelValue:m.value.taskDescription,"onUpdate:modelValue":c[0]||(c[0]=h=>m.value.taskDescription=h),disabled:"",placeholder:"Description"},null,8,["modelValue"])]),_:1})]),s("div",Mt,[t(U,{class:"m-0"},{label:l(()=>[Ut]),default:l(()=>[t(i,{modelValue:m.value.equipmentModel,"onUpdate:modelValue":c[1]||(c[1]=h=>m.value.equipmentModel=h),disabled:"",placeholder:"Equipment Model"},null,8,["modelValue"])]),_:1})]),s("div",qt,[t(U,{class:"m-0"},{label:l(()=>[Rt]),default:l(()=>[t(i,{modelValue:m.value.serviceSize,"onUpdate:modelValue":c[2]||(c[2]=h=>m.value.serviceSize=h),disabled:"",placeholder:"Equipment Model"},null,8,["modelValue"])]),_:1})]),s("div",zt,[t(U,{label:"Component"},{label:l(()=>[Ot]),default:l(()=>[t(X,{class:"w-100",modelValue:m.value.component,"onUpdate:modelValue":c[3]||(c[3]=h=>m.value.component=h),placeholder:"Component",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(_.value,h=>(d(),M(ee,{key:h.value,label:h.label,value:h.label.split(" | ")[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",Bt,[t(U,null,{label:l(()=>[At]),default:l(()=>[t(X,{class:"w-100",modelValue:m.value.cbmGroup,"onUpdate:modelValue":c[4]||(c[4]=h=>m.value.cbmGroup=h),placeholder:"CBM Group",clearable:"",filterable:""},{default:l(()=>[(d(!0),I(O,null,B(q.value,h=>(d(),M(ee,{key:h.value,label:h.label,value:h.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",Gt,[s("div",Nt,[s("div",Tt,[s("div",Kt,[t(U,{class:"m-0"},{label:l(()=>[jt]),default:l(()=>[t(i,{modelValue:m.value.rating,"onUpdate:modelValue":c[5]||(c[5]=h=>m.value.rating=h),placeholder:"Rating",disabled:!0},null,8,["modelValue"])]),_:1})]),s("div",Ht,[t(U,{class:"m-0"},{label:l(()=>[s("span",{class:J($.value?"required":"")},"Type Parameter",2)]),default:l(()=>[t(X,{class:"w-100",modelValue:m.value.typeParameter,"onUpdate:modelValue":c[6]||(c[6]=h=>m.value.typeParameter=h),placeholder:"Type Parameter",disabled:!$.value,filterable:""},{default:l(()=>[(d(!0),I(O,null,B(b.value,h=>(d(),M(ee,{key:h.value,label:h.label,value:h.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),s("div",Xt,[s("div",Yt,[s("div",Jt,[t(U,{class:"m-0"},{label:l(()=>[s("span",{class:J($.value?"required":"")},"Status",2)]),_:1})]),s("div",Zt,[t(U,{class:"m-0"},{label:l(()=>[s("span",{class:J($.value?"required":"")},"Min Value",2)]),_:1})]),s("div",Qt,[t(U,{class:"m-0"},{label:l(()=>[s("span",{class:J($.value?"required":"")},"Max Value",2)]),_:1})]),s("div",Wt,[t(U,{class:"m-0"},{label:l(()=>[ea]),_:1})]),ta]),(d(!0),I(O,null,B(u.value,(h,re)=>(d(),I("div",{key:re,class:"d-flex gap-2 justify-content-between align-items-center mt-2"},[s("div",aa,[t(U,{class:"m-0"},{default:l(()=>[t(X,{option:"",placeholder:"Status",modelValue:h.status,"onUpdate:modelValue":A=>h.status=A,disabled:!$.value},{default:l(()=>[(d(!0),I(O,null,B(V.value,(A,C)=>(d(),M(ee,{key:C,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),s("div",sa,[t(U,{class:"m-0"},{default:l(()=>[t(i,{modelValue:h.minValue,"onUpdate:modelValue":A=>h.minValue=A,placeholder:"Min Values",disabled:!$.value,onInput:A=>k(re)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput"])]),_:2},1024)]),s("div",la,[t(U,{class:"m-0"},{default:l(()=>[t(i,{modelValue:h.maxValue,"onUpdate:modelValue":A=>h.maxValue=A,placeholder:"Max Value",disabled:!$.value,onInput:A=>v(re)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput"])]),_:2},1024)]),s("div",oa,[t(U,{class:"m-0"},{default:l(()=>[t(i,{modelValue:h.uom,"onUpdate:modelValue":A=>h.uom=A,placeholder:"UoM",disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),s("div",null,[u.value.length>1&&$.value?(d(),M(p,{key:0,class:"box-item",effect:"dark",content:"Delete",placement:"top"},{default:l(()=>[s("span",{class:"svg-icon svg-icon-btech-danger-500 d-inline-block m-0",style:{cursor:"pointer"},onClick:A=>R(h)},[t(ne,{src:"/media/icons/bumaau/delete.svg",style:{width:"1.25rem",height:"1.25rem"}})],8,na)]),_:2},1024)):te("",!0)])]))),128)),s("div",ra,[$.value?(d(),I("div",ia,[s("div",{class:"btn-addparam-text d-flex gap-2 align-items-center justify-content-center",onClick:c[7]||(c[7]=h=>w(m.value.cbmParameter[m.value.cbmParameter.length-1].uom))},[da,H(" Add Parameter ")])])):te("",!0)])])])])])]),_:1})]),_:1},8,["modelValue"])}}}),pa=Q(ca,[["__scopeId","data-v-f311d988"]]),oe=e=>(pe("data-v-fc21b0af"),e=e(),me(),e),ma={class:"col-12 fv-row fv-plugins-icon-container"},va=oe(()=>s("span",{class:""},"Description",-1)),ba={class:"col-12 fv-row fv-plugins-icon-container"},ha=oe(()=>s("span",{class:""},"Equipment Model",-1)),ga={class:"col-12 fv-row fv-plugins-icon-container"},fa=oe(()=>s("span",{class:""},"Service Size",-1)),_a={class:"col-12 fv-row fv-plugins-icon-container"},ya=oe(()=>s("span",{class:""},"Rating",-1)),Da={class:"col-12 fv-row fv-plugins-icon-container"},Sa={class:"col-12 fv-row fv-plugins-icon-container"},ka=oe(()=>s("span",{class:"required"},"Component",-1)),wa={class:"col-12 fv-row fv-plugins-icon-container"},Pa=oe(()=>s("span",{class:"required"},"CBM Group",-1)),Va={class:"col-12 fv-row fv-plugins-icon-container"},Ia=oe(()=>s("span",null,"UoM",-1)),Ea={class:"col-12 fv-row fv-plugins-icon-container"},La={class:"col-12 fv-row fv-plugins-icon-container"},Fa={class:"col-12 fv-row fv-plugins-icon-container"},Ca={class:"dialog-footer"},$a=Z({__name:"FormEditDraft",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close","input"],setup(e,{emit:r}){const n=e,o=r,a=ie(),S=le();Ne(),Re();const m=_e(n,"visibility"),u=D(()=>a.stateFormDraftData);K("");const y=()=>{let L="";return u.value.rating&&(L=u.value.rating.toLocaleLowerCase()),L},F=D(()=>a.errors),E=D(()=>a.isError),_=D(()=>S.stateComponentOption),q=D(()=>S.stateCbmGroupOption),b=D(()=>S.stateTypeParameterOption);D(()=>S.stateStatusConverter);const V=D(()=>["automatic","calibration"].some(g=>u.value.rating.toLocaleLowerCase().includes(g))),$=D(()=>u.value.typeParameter.toLocaleLowerCase()==="suspension"?[{label:"In Spec",value:"In Spec"},{label:"Out of spec",value:"Out of spec"}]:[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"X",value:"X"}]);D(()=>S.stateRatingOption),Ee().shape({company:j().required("Company is mandatory"),name:j().min(3,L=>{`${L.min}`}).required("Name is mandatory"),position:j().required("Position is mandatory"),siteName:j().required("Site is mandatory"),vendor:j().required("Vendor is mandatory"),isActive:j().required("Status is mandatory")});const N=(L=!1)=>{R(),o("handle-close",L)},k=()=>{const L=u.value.minValue;u.value.minValue=`${L.replace(/[^\d.-/>/</ ]+/g,"")}`},v=()=>{const L=u.value.maxValue;u.value.maxValue=`${L.replace(/[^\d.-/>/</ ]+/g,"")}`},w=async()=>{R(),a.stateLoadingMessage="Submitting Data",a.updateDraft().then(()=>{a.isError?fe("Failed to Update","","Ok"):Pe("Record has been submitted successfully","","Ok").then(()=>{N(!0)})}),console.log(a.stateFormData)},R=()=>{a.setErrors([])};return(L,g)=>{const P=f("el-input"),c=f("el-form-item"),i=f("el-option"),U=f("el-select"),ee=f("el-form"),X=f("el-button"),ne=f("el-dialog");return d(),M(ne,{modelValue:m.value,"onUpdate:modelValue":g[12]||(g[12]=p=>m.value=p),title:"Edit CBM Parameter",width:500,"close-on-click-modal":!1,"show-close":!1,onClose:g[13]||(g[13]=p=>N())},{footer:l(()=>[s("span",Ca,[t(X,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary",onClick:g[11]||(g[11]=p=>N()),disabled:x(a).loading},{default:l(()=>[H("Cancel")]),_:1},8,["disabled"]),t(X,{class:"btn btn-btech-secondary",onClick:w,disabled:x(a).loading},{default:l(()=>[H("Submit")]),_:1},8,["disabled"])])]),default:l(()=>[t(Ve,{name:"fade"},{default:l(()=>[E.value?(d(),M(Le,{key:0,errorMessages:F.value,onResetForm:R},null,8,["errorMessages"])):te("",!0)]),_:1}),t(ee,{class:"row g-4 my-4","label-position":"top"},{default:l(()=>[s("div",ma,[t(c,{class:"m-0"},{label:l(()=>[va]),default:l(()=>[t(P,{modelValue:u.value.taskDescription,"onUpdate:modelValue":g[0]||(g[0]=p=>u.value.taskDescription=p),disabled:"",placeholder:"Description"},null,8,["modelValue"])]),_:1})]),s("div",ba,[t(c,{class:"m-0"},{label:l(()=>[ha]),default:l(()=>[t(P,{modelValue:u.value.equipmentModel,"onUpdate:modelValue":g[1]||(g[1]=p=>u.value.equipmentModel=p),disabled:"",placeholder:"Equipment Model"},null,8,["modelValue"])]),_:1})]),s("div",ga,[t(c,{class:"m-0"},{label:l(()=>[fa]),default:l(()=>[t(P,{modelValue:u.value.serviceSize,"onUpdate:modelValue":g[2]||(g[2]=p=>u.value.serviceSize=p),disabled:"",placeholder:"Equipment Model"},null,8,["modelValue"])]),_:1})]),s("div",_a,[t(c,{class:"m-0"},{label:l(()=>[ya]),default:l(()=>[t(P,{modelValue:u.value.rating,"onUpdate:modelValue":g[3]||(g[3]=p=>u.value.rating=p),disabled:"",placeholder:"Rating"},null,8,["modelValue"])]),_:1})]),s("div",Da,[t(c,null,{label:l(()=>[s("span",{class:J(V.value?"required":"")},"Type Parameter",2)]),default:l(()=>[t(U,{class:"w-100",modelValue:u.value.typeParameter,"onUpdate:modelValue":g[4]||(g[4]=p=>u.value.typeParameter=p),placeholder:"Type Parameter",clearable:"",disabled:!V.value,filterable:""},{default:l(()=>[(d(!0),I(O,null,B(b.value,p=>(d(),M(i,{key:p.value,label:p.label,value:p.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),s("div",Sa,[t(c,null,{label:l(()=>[ka]),default:l(()=>[t(U,{class:"w-100",modelValue:u.value.component,"onUpdate:modelValue":g[5]||(g[5]=p=>u.value.component=p),placeholder:"Component",clearable:"",filterable:"",disabled:y()==="calibration"||y()==="automatic"||y()==="automatic_previous"||y()==="normal"?!1:y()!=="manual"},{default:l(()=>[(d(!0),I(O,null,B(_.value,p=>(d(),M(i,{key:p.value,label:p.label,value:p.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),s("div",wa,[t(c,null,{label:l(()=>[Pa]),default:l(()=>[t(U,{class:"w-100",modelValue:u.value.cbmGroup,"onUpdate:modelValue":g[6]||(g[6]=p=>u.value.cbmGroup=p),placeholder:"CBM Group",clearable:"",filterable:"",disabled:y()==="calibration"||y()==="automatic"||y()==="automatic_previous"||y()==="normal"?!1:y()!=="manual"},{default:l(()=>[(d(!0),I(O,null,B(q.value,p=>(d(),M(i,{key:p.value,label:p.label,value:p.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),s("div",Va,[t(c,{class:"m-0"},{label:l(()=>[Ia]),default:l(()=>[t(P,{modelValue:u.value.uom,"onUpdate:modelValue":g[7]||(g[7]=p=>u.value.uom=p),placeholder:"UoM",disabled:!0},null,8,["modelValue"])]),_:1})]),s("div",Ea,[t(c,null,{label:l(()=>[s("span",{class:J(V.value?"required":"")},"Status",2)]),default:l(()=>[t(U,{class:"w-100",modelValue:u.value.status,"onUpdate:modelValue":g[8]||(g[8]=p=>u.value.status=p),placeholder:"Status Converter",clearable:"",filterable:"",disabled:!V.value},{default:l(()=>[(d(!0),I(O,null,B($.value,p=>(d(),M(i,{key:p.value,label:p.label,value:p.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),s("div",La,[t(c,{class:"m-0"},{label:l(()=>[s("span",{class:J(V.value?"required":"")},"Min Value",2)]),default:l(()=>[t(P,{modelValue:u.value.minValue,"onUpdate:modelValue":g[9]||(g[9]=p=>u.value.minValue=p),placeholder:"Min Value",disabled:!V.value,onInput:k},null,8,["modelValue","disabled"])]),_:1})]),s("div",Fa,[t(c,{class:"m-0"},{label:l(()=>[s("span",{class:J(V.value?"required":"")},"Max Value",2)]),default:l(()=>[t(P,{modelValue:u.value.maxValue,"onUpdate:modelValue":g[10]||(g[10]=p=>u.value.maxValue=p),placeholder:"Max Value",disabled:!V.value,onInput:v},null,8,["modelValue","disabled"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])}}}),xa=Q($a,[["__scopeId","data-v-fc21b0af"]]),ve=e=>(pe("data-v-1962d829"),e=e(),me(),e),Ma={"element-loading-text":"Submitting Data","element-loading-background":"rgba(0, 0, 0, 0.5)"},Ua={"element-loading-text":"Loading","element-loading-background":"rgba(0, 0, 0, 0.5)"},qa={class:"px-3 py-8 d-flex"},Ra=ve(()=>s("div",{class:"flex-grow-1"},[s("h5",{class:"m-0 header-title"},"CBM Parameter")],-1)),za={class:"align-self-start d-flex gap-2"},Oa=ve(()=>s("i",{class:"fas fa-file-upload text-btech-secondary-500 fs-4 pe-2"},null,-1)),Ba={key:0,class:"card mb-6"},Aa={class:"m-0"},Ga={class:"text-btech-danger-500"},Na=ve(()=>s("section",{class:"mb-6"},null,-1)),Ta={class:"card mb-10"},Ka={class:"card-body p-3"},ja={class:"d-flex justify-content-between my-4 align-items-center"},Ha={class:"d-flex gap-2 align-items-center"},Xa=ve(()=>s("p",{class:"m-0 card-table-title"},"CBM Parameter List",-1)),Ya={key:0,class:"m-0"},Ja={class:"d-flex justify-content-between gap-2"},Za={class:"my-5"},Qa={class:"card mb-10"},Wa={class:"card-body p-3"},es={class:"mb-2"},ts=Z({__name:"Index",setup(e){const r=qe(),n=le(),o=ie(),a=Fe(),S=K("list"),m=K(["draftPanel"]),u=K(!1),y=K(!1),F=K(!1),E=K(null),_=K({});Be(async()=>{r[ze.ACTIVE_PAGE]("IronLake"),await n.setPage(1),await n.getSyncData(),n.getLookupCbmGroup(),n.getLookupStatus(),n.getLookupTypeParameter(),n.getLookupComponent(),n.getLookupEquipmentModel(),n.getLookupServiceSize(),n.getLookupRating()}),Ae(()=>{n.resetState()});const q=async()=>{await n.setPage(1),n.getLookupCbmGroup(),n.getLookupStatus(),n.getLookupTypeParameter(),n.getLookupComponent(),n.getLookupEquipmentModel(),n.getLookupServiceSize()},b=async()=>{await n.getSyncData(),$.value=ue(n.stateLastSyncDate)},V=D(()=>n.draftData),$=D(()=>ue(n.stateLastSyncDate)),N=D(()=>n.displayData),k=D(()=>n.syncData),v=D(()=>n.pagination),w=D(()=>a.stateBulkPayload),R=async()=>{await n.setPage(1)},L=()=>{var C;(C=E.value)==null||C.click()},g=C=>{w.value.fileUpload=C},P=async C=>{const z=C.target.files[0];g(z),c(),E.value&&(E.value.value="")},c=()=>{a.bulkUpload().then(()=>{R()})},i=()=>{F.value=!0},U=async C=>{F.value=!1,C&&await R()},ee=()=>{y.value=!1},X=C=>{_.value=C,y.value=!0},ne=C=>{n.setPage(C)},p=C=>{n.setPageSize(C)},be=()=>{n.setFilterVisibility(!1),S.value==="list"&&q(),b()},de=()=>{u.value=!0},he=async C=>{u.value=!1,C&&await R()},h=async()=>{o.stateLoading=!0;const C=await n.export();o.stateLoading=!1,Ke.saveAs(new Blob([C],{type:"application/octet-stream"}),"CBMData.xlsx")},re=async C=>{ke("Remove this record from Need Review ?","Remove").then(async z=>{z.isConfirmed&&(o.stateLoadingMessage="Removing Data",o.deleteDraft(C.cbmParameterDraftId).then(()=>{o.stateIsError?Oe(`Failed to delete : ${o.stateErrors[0].toString}`,"Close").then(()=>{q()}):we("Record has been removed !","Close").then(()=>{q()})}))})},A=C=>{n.setFilterData(C),n.setLastActiveFilter(C)};return(C,z)=>{const $e=f("el-button"),xe=f("el-collapse-item"),Me=f("el-collapse"),ye=f("el-tab-pane"),Ue=f("el-tabs"),De=ce("loading");return d(),I(O,null,[s("template",null,[ae(s("div",Ma,null,512),[[De,x(a).loading,void 0,{fullscreen:!0,lock:!0}]]),ae(s("div",Ua,null,512),[[De,x(o).loading,void 0,{fullscreen:!0,lock:!0}]])]),s("section",qa,[Ra,s("div",za,[t($e,{class:"btn btn-outline btn-outline-btech-secondary btn-active-light-btech-secondary btech-lg m-0",onClick:L},{default:l(()=>[Oa,H(" Upload ")]),_:1}),s("input",{ref_key:"bulkFile",ref:E,type:"file",accept:".xlsx",hidden:"",onChange:P},null,544)])]),s("section",null,[t(Ue,{modelValue:S.value,"onUpdate:modelValue":z[6]||(z[6]=T=>S.value=T),onTabClick:be},{default:l(()=>[t(ye,{label:"LIST",name:"list"},{default:l(()=>[t(Ge,{"show-alert":x(a).stateAlert.show,"onUpdate:showAlert":z[0]||(z[0]=T=>x(a).stateAlert.show=T),variant:x(a).alertVariant,desc:x(a).alertDesc},null,8,["show-alert","variant","desc"]),V.value.length>0?(d(),I("section",Ba,[t(Me,{modelValue:m.value,"onUpdate:modelValue":z[2]||(z[2]=T=>m.value=T),class:"card-body p-3 ironlake-draft-collapse"},{default:l(()=>[t(xe,{name:"draftPanel"},{title:l(()=>[s("p",Aa,[H(" Need Review "),s("span",Ga," ("+se(V.value.length)+")",1)])]),default:l(()=>[Na,t(ct,{"list-data":V.value,onDeleteDraft:z[1]||(z[1]=T=>re(T)),onShowErrors:X,onShowDialog:i,onLoadPage:q},null,8,["list-data"])]),_:1})]),_:1},8,["modelValue"])])):te("",!0),s("section",Ta,[s("div",Ka,[s("div",ja,[s("div",Ha,[Xa,x(n).loading?te("",!0):(d(),I("p",Ya,"Last Sync At : "+se(x(ue)(x(n).stateLastSyncDate)),1))]),s("div",Ja,[t(Vt,{onApplyFilter:z[3]||(z[3]=T=>A(T))}),t(_t,{onHandleDownload:h})])]),t(gt,{"list-data":N.value,onShowDialog:de},null,8,["list-data"]),s("div",Za,[x(n).paginationLoading?te("",!0):(d(),M(Te,{key:0,onRaisePageChange:z[4]||(z[4]=T=>ne(T)),onRaiseSizeChange:z[5]||(z[5]=T=>p(T)),currentPage:v.value.currentPage,totalPage:v.value.totalPage,totalPageSize:v.value.totalPageSize,startPaginationIndex:v.value.startPaginationIndex,endPaginationIndex:v.value.endPaginationIndex,isPageSizeChange:!0,pageSizes:[50,20,10]},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))])])])]),_:1}),t(ye,{label:"SYNC HISTORY",name:"sync"},{default:l(()=>[s("section",Qa,[s("div",Wa,[s("h5",es,"Last Sync : "+se($.value),1),t(tt,{"list-data":k.value},null,8,["list-data"])])])]),_:1})]),_:1},8,["modelValue"]),t(pa,{visibility:u.value,onHandleClose:he},null,8,["visibility"]),t(xa,{visibility:F.value,onHandleClose:U},null,8,["visibility"]),t(Ct,{visibility:y.value,onHandleClose:ee,"error-data":_.value},null,8,["visibility","error-data"])])],64)}}}),Zs=Q(ts,[["__scopeId","data-v-1962d829"]]);export{Zs as default};
