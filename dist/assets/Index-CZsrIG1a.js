import{u as Le}from"./useMenuStore-CD5Gmvif.js";import{b as Ft}from"./vue-router-iNp9kJ0K.js";import{a as Ue}from"./breadcrumb-BYmEOf4C.js";import{c as q,a as B,s as H,J as ct,I as St,z as ut,A as Me}from"./index-BuVmIl8K.js";import{P as qt}from"./Pagination-D-xfdYmn.js";import{F as xe}from"./FilterIconButton-Bj0WTbms.js";import{h as Pe,A as qe,U as He}from"./excel-generator-DMHRo93s.js";import{D as We}from"./DownloadIconButton-CIQp-YG7.js";import{k as rt,c as K,r as et,u as o,y as mt,p as g,aa as _,s,x as v,T as Ht,q as O,F as Wt,Y as bt,R as J,A as kt,aB as I,C as A,P as Ut,a0 as Ot,B as X,bd as $e,bb as Be,a7 as Ne,L as Ve}from"./@vue-BypzYtbH.js";import{_ as T,b as $t}from"./element-plus-BeWdvTRa.js";import{q as G,w as M,x as Mt}from"./date-format-8-IvfSl3.js";import{P as ht}from"./Pagination-BiobnanQ.js";import{d as wt}from"./pinia-BjOS2_Ao.js";import{a as nt,m as U,b as Bt}from"./mapOption-CeGMwmH0.js";import{L as Ke}from"./urls-BUeydZtD.js";import{b as W,d as ze,a as Ge}from"./table-sort-Bpdq_Uwn.js";import{c as Nt,a as N,b as gt,d as Vt}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as Kt}from"./ErrorAlert-CMKGfwAi.js";import{_ as vt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CCwjwK39.js";import{_ as it}from"./ElementTextInput.vue_vue_type_style_index_0_lang-kzHysIyZ.js";import{_ as L}from"./AutoComplete.vue_vue_type_script_setup_true_lang-DJ43pGTI.js";import{_ as lt}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{a as je}from"./vee-validate-C_msoaAA.js";import{e as Ye}from"./lodash-DrHMlsdo.js";import{_ as Xe}from"./FileDropZone.vue_vue_type_style_index_0_lang-C5PyimC7.js";import{m as Je}from"./map-anything-abi6NY2Z.js";import{_ as Qe}from"./nw-img-vue-CR837WER.js";import{_ as $}from"./AutoComplete.vue_vue_type_style_index_0_lang-DrAAOf71.js";import{_ as xt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CJ7rJST9.js";import{F as Ze}from"./file-saver-CwTBvle_.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./PageEnum-DUtfSNQS.js";import"./xlsx-C4maHrMm.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";import"./vue3-dropzone-_NG5IwbJ.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";import"./attr-accept-DLIfoYC7.js";const tt="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_component_risk_rating",ta=`${tt}/component_risk_rating`,ea=`${tt}/component_risk_rating_bulk`,aa=`${tt}/validate_upload`,oa=`${tt}/export`,sa=`${tt}/lookup`,st=`${tt}/lookup_rating`,na=`${tt}/component_risk_rating`,ia=`${tt}/component_risk_rating/update`,It="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/component_risk_rating/lookup",Ct={equipmentModel:"",equipmentModelTo:"",component:"",componentTo:"",componentType:"",componentTypeTo:"",maxRiskRank:"",maxRiskRankTo:"",revisedRank:"",revisedRankTo:"",overallRisk:"",overallRiskTo:"",failureTiming:"",failureTimingTo:"",systemImpact:"",systemImpactTo:"",opsImpact:"",opsImpactTo:"",supplyRisk:"",supplyRiskTo:"",failureCost:"",failureCostTo:"",comments:"",commentsTo:"",site:"",siteTo:"",oemInterval:"",oemIntervalTo:"",bumaAuTarget:"",bumaAuTargetTo:"",componentWeight:"",componentWeightTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},_t=wt({id:"componentRiskRatingList",state:()=>({stateFilterData:{...Ct},stateLastUsedFilterData:{...Ct},statePageName:"componentRiskRating",stateDisplayData:[],statePagination:new ht,stateLoading:!1,statePaginationLoading:!1,stateEquipmentModelOption:[],stateComponentOption:[],stateComponentTypeOption:[],stateMaxRiskRankOption:[],stateRevisedRankOption:[],stateOverallRiskOption:[],stateFailureTimingOption:[],stateSystemImpactOption:[],stateOpsImpactOption:[],stateSupplyRiskOption:[],stateFailureCostOption:[],stateCommentsOption:[],stateSiteOption:[],stateOemIntervalOption:[],stateBumaAuTargetOption:[],stateComponentWeightOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,equipmentModelOption:t=>t.stateEquipmentModelOption,componentOption:t=>t.stateComponentOption,componentTypeOption:t=>t.stateComponentTypeOption,maxRiskRankOption:t=>t.stateMaxRiskRankOption,revisedRankOption:t=>t.stateRevisedRankOption,overallRiskOption:t=>t.stateOverallRiskOption,failureTimingOption:t=>t.stateFailureTimingOption,systemImpactOption:t=>t.stateSystemImpactOption,opsImpactOption:t=>t.stateOpsImpactOption,supplyRiskOption:t=>t.stateSupplyRiskOption,failureCostOption:t=>t.stateFailureCostOption,commentsOption:t=>t.stateCommentsOption,siteOption:t=>t.stateSiteOption,oemIntervalOption:t=>t.stateOemIntervalOption,bumaAuTargettOption:t=>t.stateBumaAuTargetOption,componentWeightOption:t=>t.stateComponentWeightOption},actions:{async getData(t=!0){const a={site:this.stateFilterData.site,siteTo:this.stateFilterData.siteTo,equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,componentType:this.stateFilterData.componentType,componentTypeTo:this.stateFilterData.componentTypeTo,oemInterval:this.stateFilterData.oemInterval,oemIntervalTo:this.stateFilterData.oemIntervalTo,bumaAuTarget:this.stateFilterData.bumaAuTarget,bumaAuTargetTo:this.stateFilterData.bumaAuTargetTo,maxRiskRank:this.stateFilterData.maxRiskRank,maxRiskRankTo:this.stateFilterData.maxRiskRankTo,revisedRank:this.stateFilterData.revisedRank,revisedRankTo:this.stateFilterData.revisedRankTo,overallRisk:this.stateFilterData.overallRisk,overallRiskTo:this.stateFilterData.overallRiskTo,failureTiming:this.stateFilterData.failureTiming,failureTimingTo:this.stateFilterData.failureTimingTo,systemImpact:this.stateFilterData.systemImpact,systemImpactTo:this.stateFilterData.systemImpactTo,opsImpact:this.stateFilterData.opsImpact,opsImpactTo:this.stateFilterData.opsImpactTo,supplyRisk:this.stateFilterData.supplyRisk,supplyRiskTo:this.stateFilterData.supplyRiskTo,failureCost:this.stateFilterData.failureCost,failureCostTo:this.stateFilterData.failureCostTo,comments:this.stateFilterData.comments,commentsTo:this.stateFilterData.commentsTo,componentWeight:this.stateFilterData.componentWeight,componentWeightTo:this.stateFilterData.componentWeightTo,startDate:this.stateFilterData.startDate?G(M(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?G(M(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?G(M(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?G(M(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await q.get(ta,"",new URLSearchParams(a).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){e.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",e),console.log(e)}finally{this.stateLoading=!1}},async getLookup(){const t={ver:this.stateFilterData.ver};try{const a=await q.get(sa,"",new URLSearchParams(t).toString());this.stateEquipmentModelOption=nt(a.data.result.content.equipmentModel,"equipmentModel","equipmentModelDescription"),this.stateComponentOption=nt(a.data.result.content.component,"component","componentDescription"),this.stateComponentTypeOption=nt(a.data.result.content.componentType,"componentType","componentTypeDescription"),this.stateMaxRiskRankOption=U(a.data.result.content.maxRiskRank),this.stateRevisedRankOption=U(a.data.result.content.revisedRank),this.stateOverallRiskOption=U(a.data.result.content.overallRisk),this.stateFailureTimingOption=U(a.data.result.content.failureTiming),this.stateSystemImpactOption=U(a.data.result.content.systemImpact),this.stateOpsImpactOption=U(a.data.result.content.opsImpact),this.stateSupplyRiskOption=U(a.data.result.content.supplyRisk),this.stateFailureCostOption=U(a.data.result.content.failureCost),this.stateCommentsOption=U(a.data.result.content.comments),this.stateSiteOption=Bt(a.data.result.content.site,"siteId","siteCode","siteDescription"),this.stateOemIntervalOption=U(a.data.result.content.oemInterval),this.stateBumaAuTargetOption=U(a.data.result.content.bumaAuTarget),this.stateComponentWeightOption=U(a.data.result.content.componentWeight)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async export(){const t={site:this.stateFilterData.site,siteTo:this.stateFilterData.siteTo,equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,componentType:this.stateFilterData.componentType,componentTypeTo:this.stateFilterData.componentTypeTo,oemInterval:this.stateFilterData.oemInterval,oemIntervalTo:this.stateFilterData.oemIntervalTo,bumaAuTarget:this.stateFilterData.bumaAuTarget,bumaAuTargetTo:this.stateFilterData.bumaAuTargetTo,maxRiskRank:this.stateFilterData.maxRiskRank,maxRiskRankTo:this.stateFilterData.maxRiskRankTo,revisedRank:this.stateFilterData.revisedRank,revisedRankTo:this.stateFilterData.revisedRankTo,overallRisk:this.stateFilterData.overallRisk,overallRiskTo:this.stateFilterData.overallRiskTo,failureTiming:this.stateFilterData.failureTiming,failureTimingTo:this.stateFilterData.failureTimingTo,systemImpact:this.stateFilterData.systemImpact,systemImpactTo:this.stateFilterData.systemImpactTo,opsImpact:this.stateFilterData.opsImpact,opsImpactTo:this.stateFilterData.opsImpactTo,supplyRisk:this.stateFilterData.supplyRisk,supplyRiskTo:this.stateFilterData.supplyRiskTo,failureCost:this.stateFilterData.failureCost,failureCostTo:this.stateFilterData.failureCostTo,comments:this.stateFilterData.comments,commentsTo:this.stateFilterData.commentsTo,componentWeight:this.stateFilterData.componentWeight,componentWeightTo:this.stateFilterData.componentWeightTo,startDate:this.stateFilterData.startDate?G(M(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?G(M(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?G(M(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?G(M(new Date(this.stateFilterData.endDateTo))):"",order:this.stateFilterData.order,ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await q.getBlob(oa,"",new URLSearchParams(t).toString())).data}catch(a){H("IRONS",a),console.log(a)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:a}){if(!t&&!a)this.stateFilterData.order="";else{const e=a=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setEquipmentModel(t){this.stateFilterData.equipmentModel=t},setEquipmentModelTo(t){this.stateFilterData.equipmentModelTo=t},setComponent(t){this.stateFilterData.component=t},setComponentTo(t){this.stateFilterData.componentTo=t},setComponentType(t){this.stateFilterData.componentType=t},setComponentTypeTo(t){this.stateFilterData.componentTypeTo=t},setMaxRiskRank(t){this.stateFilterData.maxRiskRank=t},setMaxRiskRankTo(t){this.stateFilterData.maxRiskRankTo=t},setRevisedRank(t){this.stateFilterData.revisedRank=t},setRevisedRankTo(t){this.stateFilterData.revisedRankTo=t},setOverallRisk(t){this.stateFilterData.overallRisk=t},setOverallRiskTo(t){this.stateFilterData.overallRiskTo=t},setFailureTiming(t){this.stateFilterData.failureTiming=t},setFailureTimingTo(t){this.stateFilterData.failureTimingTo=t},setSystemImpact(t){this.stateFilterData.systemImpact=t},setSystemImpactTo(t){this.stateFilterData.systemImpactTo=t},setOpsImpact(t){this.stateFilterData.opsImpact=t},setOpsImpactTo(t){this.stateFilterData.opsImpactTo=t},setSupplyRisk(t){this.stateFilterData.supplyRisk=t},setSupplyRiskTo(t){this.stateFilterData.supplyRiskTo=t},setFailureCost(t){this.stateFilterData.failureCost=t},setFailureCostTo(t){this.stateFilterData.failureCostTo=t},setComments(t){this.stateFilterData.comments=t},setCommentsTo(t){this.stateFilterData.commentsTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},setSite(t){this.stateFilterData.site=t},setSiteTo(t){this.stateFilterData.siteTo=t},setOemInterval(t){this.stateFilterData.oemInterval=t},setOemIntervalTo(t){this.stateFilterData.oemIntervalTo=t},setBumaAuTarget(t){this.stateFilterData.bumaAuTarget=t},setBumaAuTargetTo(t){this.stateFilterData.bumaAuTargetTo=t},setComponentWeight(t){this.stateFilterData.componentWeight=t},setComponentWeightTo(t){this.stateFilterData.componentWeightTo=t},async resetFilter(){this.stateFilterData.equipmentModel="",this.stateFilterData.equipmentModelTo="",this.stateFilterData.component="",this.stateFilterData.componentTo="",this.stateFilterData.componentType="",this.stateFilterData.componentTypeTo="",this.stateFilterData.maxRiskRank="",this.stateFilterData.maxRiskRankTo="",this.stateFilterData.revisedRank="",this.stateFilterData.revisedRankTo="",this.stateFilterData.overallRisk="",this.stateFilterData.overallRiskTo="",this.stateFilterData.failureTiming="",this.stateFilterData.failureTimingTo="",this.stateFilterData.systemImpact="",this.stateFilterData.systemImpactTo="",this.stateFilterData.opsImpact="",this.stateFilterData.opsImpactTo="",this.stateFilterData.supplyRisk="",this.stateFilterData.supplyRiskTo="",this.stateFilterData.failureCost="",this.stateFilterData.failureCostTo="",this.stateFilterData.comments="",this.stateFilterData.commentsTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="",this.stateFilterData.site="",this.stateFilterData.siteTo="",this.stateFilterData.oemInterval="",this.stateFilterData.oemIntervalTo="",this.stateFilterData.bumaAuTarget="",this.stateFilterData.bumaAuTargetTo="",this.stateFilterData.componentWeight="",this.stateFilterData.componentWeightTo="";const t=this.stateLastUsedFilterData.equipmentModel!=="",a=this.stateLastUsedFilterData.equipmentModelTo!=="",e=this.stateLastUsedFilterData.component!=="",k=this.stateLastUsedFilterData.componentTo!=="",d=this.stateLastUsedFilterData.componentType!=="",r=this.stateLastUsedFilterData.componentTypeTo!=="",l=this.stateLastUsedFilterData.maxRiskRank!=="",p=this.stateLastUsedFilterData.maxRiskRankTo!=="",x=this.stateLastUsedFilterData.revisedRank!=="",D=this.stateLastUsedFilterData.revisedRankTo!=="",c=this.stateLastUsedFilterData.overallRisk!=="",h=this.stateLastUsedFilterData.overallRiskTo!=="",n=this.stateLastUsedFilterData.failureTiming!=="",V=this.stateLastUsedFilterData.failureTimingTo!=="",z=this.stateLastUsedFilterData.systemImpact!=="",j=this.stateLastUsedFilterData.systemImpactTo!=="",C=this.stateLastUsedFilterData.opsImpact!=="",w=this.stateLastUsedFilterData.opsImpactTo!=="",u=this.stateLastUsedFilterData.supplyRisk!=="",Y=this.stateLastUsedFilterData.supplyRiskTo!=="",E=this.stateLastUsedFilterData.failureCost!=="",P=this.stateLastUsedFilterData.failureCostTo!=="",S=this.stateLastUsedFilterData.comments!=="",f=this.stateLastUsedFilterData.commentsTo!=="",Q=this.stateLastUsedFilterData.startDate!=="",b=this.stateLastUsedFilterData.startDateTo!=="",R=this.stateLastUsedFilterData.endDate!=="",y=this.stateLastUsedFilterData.endDateTo!=="",Z=this.stateLastUsedFilterData.site!=="",at=this.stateLastUsedFilterData.siteTo!=="",m=this.stateLastUsedFilterData.oemInterval!=="",F=this.stateLastUsedFilterData.oemIntervalTo!=="",Dt=this.stateLastUsedFilterData.bumaAuTarget!=="",Tt=this.stateLastUsedFilterData.bumaAuTargetTo!=="",Rt=this.stateLastUsedFilterData.componentWeight!=="",yt=this.stateLastUsedFilterData.componentWeightTo!=="";(t||a||e||k||d||r||l||p||x||D||c||h||n||V||z||j||C||w||u||Y||E||P||S||f||Q||b||R||y||Z||at||m||F||Dt||Tt||Rt||yt)&&await this.getData()},resetState(){this.stateFilterData={...Ct},this.stateDisplayData=[],this.statePagination=new ht,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Pt={componentRiskRatingId:0,equipmentModel:"",component:"",componentType:"",maxRiskRank:"",revisedRank:"",overallRisk:"",failureTiming:"",systemImpact:"",opsImpact:"",supplyRisk:"",failureCost:"",comments:"",site:"",oemInterval:"",bumaAuTarget:"",componentWeight:"",startDate:M(new Date),endDate:M(new Date("12/31/9999"))},la={site:!1,equipmentModel:!1,component:!1},Et=wt({id:"componentRiskRatingForm",state:()=>({stateFormData:{...Pt},stateIsError:!1,stateError:"",stateErrors:[],stateIsEdit:!1,stateLoading:!1,stateEquipmentModelOption:[],stateComponentOption:[],stateComponentTypeOption:[],stateOverallRiskOption:[],stateFailureTimingOption:[],stateSystemImpactOption:[],stateOpsImpactOption:[],stateSupplyRiskOption:[],stateFailureCostOption:[],stateCommentsOption:[],stateMaxRiskRankOption:[],stateRevisedRankOption:[],stateSiteOption:[],stateFormLoading:{...la}}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,isEdit:t=>t.stateIsEdit,equipmentModelOption:t=>t.stateEquipmentModelOption,componentOption:t=>t.stateComponentOption,componentTypeOption:t=>t.stateComponentTypeOption,overallRiskOption:t=>t.stateOverallRiskOption,failureTimingOption:t=>t.stateFailureTimingOption,systemImpactOption:t=>t.stateSystemImpactOption,opsImpactOption:t=>t.stateOpsImpactOption,supplyRiskOption:t=>t.stateSupplyRiskOption,failureCostOption:t=>t.stateFailureCostOption,commentsOption:t=>t.stateCommentsOption,siteOption:t=>t.stateSiteOption,formLoading:t=>t.stateFormLoading},actions:{async getLookupSite(){this.stateFormLoading.site=!0;const t={ver:"v1"};try{const a=await q.get(It,"",new URLSearchParams(t).toString());this.stateSiteOption=Bt(a.data.result.content.site,"siteId","siteCode","siteDescription")}catch(a){H("IRONS",a),console.log(a)}finally{this.stateFormLoading.site=!1}},async getLookupEquipmentModel(){this.stateFormLoading.equipmentModel=!0;const t={site:this.formData.site,ver:"v1"};try{const a=await q.get(It,"",new URLSearchParams(t).toString());this.stateEquipmentModelOption=nt(a.data.result.content.equipmentModel,"equipmentModel","equipmentModelDescription")}catch(a){H("IRONS",a),console.log(a)}finally{this.stateFormLoading.equipmentModel=!1}},async getLookupComponent(){this.stateFormLoading.component=!0;const t={site:this.formData.site,equipmentModel:this.formData.equipmentModel,ver:"v1"};try{const a=await q.get(It,"",new URLSearchParams(t).toString());this.stateComponentOption=nt(a.data.result.content.component,"component","componentDescription")}catch(a){H("IRONS",a),console.log(a)}finally{this.stateFormLoading.component=!1}},async getLookupComponentType(){const t={ver:"v1"};try{const a=await q.get(Ke,"",new URLSearchParams(t).toString());this.stateComponentTypeOption=nt(a.data.result.content,"componentType","componentTypeDescription")}catch(a){H("IRONS",a),console.log(a)}},async getLookupOverallRisk(){const t={ratingParameter:"OVERALL RISK RATING",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateOverallRiskOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async getLookupFailureTiming(){const t={ratingParameter:"FAILURE TIMING RISK",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateFailureTimingOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async getLookupSystemImpact(){const t={ratingParameter:"SYSTEM IMPACT RISK",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateSystemImpactOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async getLookupOpsImpact(){const t={ratingParameter:"OPS IMPACT RISK",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateOpsImpactOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async getLookupSupplyRisk(){const t={ratingParameter:"SUPPLY RISK",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateSupplyRiskOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async getLookupFailureCost(){const t={ratingParameter:"FAILURE COST RISK",ver:"v1"};try{const a=await q.get(st,"",new URLSearchParams(t).toString());this.stateFailureCostOption=U(a.data.result.content.ratingCode)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),H("IRONS",a),console.log(a)}},async insertData(t){try{this.stateLoading=!0;const a={userAccount:t,ver:"v1"},e={componentRiskRatingId:0,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,componentType:this.stateFormData.componentType,maxRiskRank:this.stateFormData.maxRiskRank,revisedRank:this.stateFormData.revisedRank,overallRisk:this.stateFormData.overallRisk,failureTiming:this.stateFormData.failureTiming,systemImpact:this.stateFormData.systemImpact,opsImpact:this.stateFormData.opsImpact,supplyRisk:this.stateFormData.supplyRisk,failureCost:this.stateFormData.failureCost,comments:this.stateFormData.comments,site:this.stateFormData.site,oemInterval:this.stateFormData.oemInterval,bumaAuTarget:this.stateFormData.bumaAuTarget,componentWeight:this.stateFormData.componentWeight,startDate:G(M(new Date(this.stateFormData.startDate))),endDate:G(M(new Date(this.stateFormData.endDate)))},k=await q.post(`${na}?${new URLSearchParams(a).toString()}`,e);k.data.title==="Error"?(this.stateErrors.push(k.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),this.stateError=a,this.stateErrors.push(a.response.data.result.message),this.stateIsError=!0,H("IRONS",a)}finally{this.stateLoading=!1}},async updateData(t){try{this.stateLoading=!0;const a={userAccount:t,ver:"v1"},e={componentRiskRatingId:this.stateFormData.componentRiskRatingId,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,componentType:this.stateFormData.componentType,maxRiskRank:this.stateFormData.maxRiskRank,revisedRank:this.stateFormData.revisedRank,overallRisk:this.stateFormData.overallRisk,failureTiming:this.stateFormData.failureTiming,systemImpact:this.stateFormData.systemImpact,opsImpact:this.stateFormData.opsImpact,supplyRisk:this.stateFormData.supplyRisk,failureCost:this.stateFormData.failureCost,comments:this.stateFormData.comments,site:this.stateFormData.site,oemInterval:this.stateFormData.oemInterval,bumaAuTarget:this.stateFormData.bumaAuTarget,componentWeight:this.stateFormData.componentWeight,startDate:G(M(new Date(this.stateFormData.startDate))),endDate:G(M(new Date(this.stateFormData.endDate)))},k=await q.post(`${ia}?${new URLSearchParams(a).toString()}`,e);k.data.title==="Error"?(this.stateErrors.push(k.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(a){a.response.data.statusCode==401&&B().setLoggedIn(!1),this.stateError=a,this.stateErrors.push(a.response.data.result.message),this.stateIsError=!0,H("IRONS",a)}finally{this.stateLoading=!1}},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.componentRiskRatingId=t.componentRiskRatingId,this.stateFormData.equipmentModel=t.equipmentModel,this.stateFormData.component=t.component,this.stateFormData.componentType=t.componentType,this.stateFormData.maxRiskRank=t.maxRiskRank,this.stateFormData.revisedRank=t.revisedRank,this.stateFormData.overallRisk=t.overallRisk,this.stateFormData.failureTiming=t.failureTiming,this.stateFormData.systemImpact=t.systemImpact,this.stateFormData.opsImpact=t.opsImpact,this.stateFormData.supplyRisk=t.supplyRisk,this.stateFormData.failureCost=t.failureCost,this.stateFormData.comments=t.comments,this.stateFormData.site=t.site,this.stateFormData.oemInterval=t.oemInterval,this.stateFormData.bumaAuTarget=t.bumaAuTarget,this.stateFormData.componentWeight=t.componentWeight,this.stateFormData.startDate=t.startDate,this.stateFormData.endDate=t.endDate},setIsEdit(t){this.stateIsEdit=t},resetState(){this.stateFormData={...Pt},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),ra={key:0,style:{height:"100px"}},ma={key:1},pa={key:1},da={key:1},ua={key:1},ca={key:1},ha={key:1},ga={key:1},va={key:1},ka={key:1},Da={key:1},Ta={key:1},Ra={key:1},ya={key:1},fa={key:1},Fa={key:1},Ia={key:1},Ca={key:0,class:"d-flex align-items-center"},Sa=I("span",{class:"mx-1 w-20"},"to",-1),ba={key:1,class:"row justify-content-center"},Oa={key:0,class:"d-flex justify-content-end"},wa=["disabled","onClick"],_a=["onClick"],Ea={key:1,class:"d-flex"},Aa=rt({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["fetch-data","duplicateData"],setup(t,{emit:a}){const e=t,k=B(),d=_t(),r=Et(),l=a,p=K(()=>r.isEdit),x=K(()=>(e.page-1)*10+1),D=et(""),c=b=>{D.value=b.order;const R={prop:b.prop,order:b.order};d.setSort(R)},h=et({componentRiskRatingId:0,equipmentModel:"",component:"",componentType:"",maxRiskRank:"",revisedRank:"",overallRisk:"",failureTiming:"",systemImpact:"",opsImpact:"",supplyRisk:"",failureCost:"",comments:"",site:"",oemInterval:"",bumaAuTarget:"",componentWeight:"",startDate:M(new Date),endDate:M(new Date("12/31/9999"))}),n=et({componentRiskRatingId:0,equipmentModel:"",component:"",componentType:"",maxRiskRank:"",revisedRank:"",overallRisk:"",failureTiming:"",systemImpact:"",opsImpact:"",supplyRisk:"",failureCost:"",comments:"",site:"",oemInterval:"",bumaAuTarget:"",componentWeight:"",startDate:M(new Date),endDate:M(new Date("12/31/9999"))}),V=b=>{C(),n.value={...b}},z=()=>{r.setIsEdit(!1),r.resetState(),C(),setTimeout(()=>{n.value=Object.assign({},h.value)},300)},j=Nt().shape({equipmentModel:N().required("Equipment Model is mandatory"),component:N().required("Component is mandatory"),componentType:N().required("Component Type is mandatory"),componentWeight:N().required("Component Weight is mandatory"),site:N().required("Site is mandatory"),oemInterval:N().required("OEM Interval is mandatory"),bumaAuTarget:N().required("BUMA AU Target is mandatory"),startDate:gt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:gt().required("End Date is mandatory").min(Vt("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),C=()=>{r.setErrors([])},w=K(()=>r.isError),u=K(()=>r.errors),Y=async b=>{n.value.site=b,b!=""&&(r.setFormData(n.value),await r.getLookupEquipmentModel()),E("")},E=async b=>{n.value.equipmentModel=b,b!=""&&(r.setFormData(n.value),await r.getLookupComponent()),P("")},P=async b=>{n.value.component=b},S=b=>{n.value.componentType=b},f=async()=>{r.setIsEdit(!0),C(),await j.validate(n.value,{abortEarly:!1}).catch(b=>{r.setErrors(b.errors),window&&window.scrollTo(0,0)}),!w.value&&ct("Are you sure you want to submit ?").then(async b=>{b.isConfirmed&&(r.setFormData(n.value),r.updateData(k.user.Name).then(()=>{r.isError||St("Form has been successfully submitted!","Ok").then(()=>{z(),l("fetch-data",null)})}))})},Q=async b=>{r.setFormData(b),l("duplicateData",!0)};return(b,R)=>{const y=J("inline-svg"),Z=J("el-tooltip"),at=bt("loading");return o(d).loading?mt((g(),_("div",ra,null,512)),[[at,o(d).loading]]):(g(),_(Wt,{key:1},[s(Ht,{name:"fade"},{default:v(()=>[w.value&&p.value?(g(),O(Kt,{key:0,errorMessages:u.value,onResetForm:C},null,8,["errorMessages"])):kt("",!0)]),_:1}),mt((g(),O(o($t),{data:e.listData,style:{width:"100%"},onSortChange:c,"empty-text":"No Data"},{default:v(()=>[s(o(T),{label:"No",width:"90",align:"center"},{default:v(m=>[I("span",null,A(x.value+m.$index),1)]),_:1}),s(o(T),{prop:"site",label:"Site","min-width":"120",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.site,placeholder:"Add Site",name:"Site",options:o(r).siteOption,max:20,onHandleChange:Y},null,8,["value","options"])):(g(),_("span",ma,A(m.row.site),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,"is-disabled":!n.value.site||n.value.site=="",value:n.value.equipmentModel,placeholder:"Add Equipment Model",name:"EquipmentModel",options:o(r).equipmentModelOption,max:20,onHandleChange:E},null,8,["is-disabled","value","options"])):(g(),_("span",pa,A(m.row.equipmentModel),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.component,"is-disabled":!n.value.equipmentModel||n.value.equipmentModel=="",placeholder:"Add Component",name:"Component",options:o(r).componentOption,max:40,onHandleChange:P},null,8,["value","is-disabled","options"])):(g(),_("span",da,A(m.row.component),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"componentType",label:"Component Type","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.componentType,placeholder:"Add Component Type",name:"ComponentType",options:o(r).componentTypeOption,max:20,onHandleChange:S},null,8,["value","options"])):(g(),_("span",ua,A(m.row.componentType),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"componentWeight",label:"Component Weight","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(lt,{key:0,value:n.value.componentWeight,placeholder:"Add Component Weight",name:"componentWeight",onHandleChange:R[0]||(R[0]=F=>n.value.componentWeight=F)},null,8,["value"])):(g(),_("span",ca,A(m.row.componentWeight),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"oemInterval",label:"OEM Interval","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(lt,{key:0,value:n.value.oemInterval,placeholder:"Add OEM Interval",name:"oemInterval",onHandleChange:R[1]||(R[1]=F=>n.value.oemInterval=F)},null,8,["value"])):(g(),_("span",ha,A(m.row.oemInterval),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"bumaAuTarget",label:"BUMA AU Target","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(lt,{key:0,value:n.value.bumaAuTarget,placeholder:"Add BUMA AU Target",name:"bumaAuTarget",onHandleChange:R[2]||(R[2]=F=>n.value.bumaAuTarget=F)},null,8,["value"])):(g(),_("span",ga,A(m.row.bumaAuTarget),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"maxRiskRank",label:"Max Risk Rank","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(it,{key:0,value:n.value.maxRiskRank,placeholder:"Add Max Risk Rank",name:"MaxRiskRank",onHandleChange:R[3]||(R[3]=F=>n.value.maxRiskRank=F),max:5},null,8,["value"])):(g(),_("span",va,A(m.row.maxRiskRank),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"revisedRank",label:"Revised Rank","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(it,{key:0,value:n.value.revisedRank,placeholder:"Add Revised Rank",name:"RevisedRank",onHandleChange:R[4]||(R[4]=F=>n.value.revisedRank=F),max:5},null,8,["value"])):(g(),_("span",ka,A(m.row.revisedRank),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"overallRisk",label:"Overall Risk","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.overallRisk,placeholder:"Add Overall Risk",name:"OverallRisk",options:o(r).overallRiskOption,onHandleChange:R[5]||(R[5]=F=>n.value.overallRisk=F),max:5},null,8,["value","options"])):(g(),_("span",Da,A(m.row.overallRisk),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"failureTiming",label:"Failure Timing","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.failureTiming,placeholder:"Add Failure Timing",name:"FailureTiming",options:o(r).failureTimingOption,onHandleChange:R[6]||(R[6]=F=>n.value.failureTiming=F),max:5},null,8,["value","options"])):(g(),_("span",Ta,A(m.row.failureTiming),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"systemImpact",label:"System Impact","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.systemImpact,placeholder:"Add System Impact",name:"SystemImpact",options:o(r).systemImpactOption,onHandleChange:R[7]||(R[7]=F=>n.value.systemImpact=F),max:5},null,8,["value","options"])):(g(),_("span",Ra,A(m.row.systemImpact),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"opsImpact",label:"OPS Impact","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.opsImpact,placeholder:"Add OPS Impact",name:"OpsImpact",options:o(r).opsImpactOption,onHandleChange:R[8]||(R[8]=F=>n.value.opsImpact=F),max:5},null,8,["value","options"])):(g(),_("span",ya,A(m.row.opsImpact),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"supplyRisk",label:"Supply Risk","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.supplyRisk,placeholder:"Add Supply Risk",name:"SupplyRisk",options:o(r).supplyRiskOption,onHandleChange:R[9]||(R[9]=F=>n.value.supplyRisk=F),max:5},null,8,["value","options"])):(g(),_("span",fa,A(m.row.supplyRisk),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"failureCost",label:"Failure Cost","min-width":"170",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(L,{key:0,value:n.value.failureCost,placeholder:"Add Failure Cost",name:"FailureCost",options:o(r).failureCostOption,onHandleChange:R[10]||(R[10]=F=>n.value.failureCost=F),max:5},null,8,["value","options"])):(g(),_("span",Fa,A(m.row.failureCost),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"comments",label:"Comments","min-width":"250",sortable:"","sort-method":o(W)(D.value)},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),O(it,{key:0,value:n.value.comments,placeholder:"Add Comments",name:"Comments",options:o(r).commentsOption,onHandleChange:R[11]||(R[11]=F=>n.value.comments=F),textInputType:"textarea",max:255},null,8,["value","options"])):(g(),_("span",Ia,A(m.row.comments),1))]),_:1},8,["sort-method"]),s(o(T),{prop:"isActive",label:"Is Active",width:n.value.componentRiskRatingId!=0?350:100,sortable:"",align:"center"},{default:v(m=>[m.row.componentRiskRatingId===n.value.componentRiskRatingId?(g(),_("div",Ca,[s(vt,{value:n.value.startDate,placeholder:"Add Start Date",name:"StartDate",onHandleChange:R[12]||(R[12]=F=>n.value.startDate=F)},null,8,["value"]),Sa,s(vt,{value:n.value.endDate,placeholder:"Add End Date",name:"EndDate",onHandleChange:R[13]||(R[13]=F=>n.value.endDate=F)},null,8,["value"])])):(g(),_("div",ba,[m.row.isActive?(g(),O(y,{key:0,src:"/media/svg/tables/rows/check.svg"})):(g(),O(y,{key:1,src:"/media/svg/tables/rows/minus.svg"}))]))]),_:1},8,["width"]),s(o(T),{label:"",width:"100"},{default:v(m=>[m.row.componentRiskRatingId!==n.value.componentRiskRatingId?(g(),_("div",Oa,[s(Z,{class:"box-item",effect:"dark",content:m.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:v(()=>[I("div",null,[I("button",{disabled:!m.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:F=>V(m.row)},[s(y,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,wa)])]),_:2},1032,["content"]),s(Z,{class:"box-item",effect:"dark",content:"Add new data based on table rows",placement:"top"},{default:v(()=>[I("div",null,[I("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:F=>Q(m.row)},[s(y,{src:"/media/svg/tables/rows/paste-icon-button-blue.svg",width:"12",height:"12"})],8,_a)])]),_:2},1024)])):(g(),_("div",Ea,[s(Z,{class:"box-item",effect:"dark",content:"Save",placement:"top"},{default:v(()=>[I("button",{class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:Ut(f,["prevent"])},[s(y,{src:"/media/svg/tables/rows/save.svg",width:"12",height:"12"})])]),_:1}),s(Z,{class:"box-item",effect:"dark",content:"Cancel",placement:"top"},{default:v(()=>[I("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:Ut(z,["prevent"])},[s(y,{src:"/media/svg/tables/rows/valid-false.svg",width:"12",height:"12"})])]),_:1})]))]),_:1})]),_:1},8,["data"])),[[at,o(d).loading]])],64))}}}),La={class:"col-md-6 fv-row fv-plugins-icon-container"},Ua={class:"col-md-6 fv-row fv-plugins-icon-container"},Ma={class:"dialog-footer"},xa=rt({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:a}){const e=t,k=a,d=Et(),r=B(),l=Ot(e,"visibility"),p=K(()=>d.formData),x=K(()=>d.errors),D=K(()=>d.isError),c=K(()=>d.isEdit),h=K(()=>d.formLoading),n=Nt().shape({equipmentModel:N().required("Equipment Model is mandatory"),component:N().required("Component is mandatory"),componentType:N().required("Component Type is mandatory"),componentWeight:N().required("Component Weight is mandatory"),site:N().required("Site is mandatory"),oemInterval:N().required("OEM Interval is mandatory"),bumaAuTarget:N().required("BUMA AU Target is mandatory"),startDate:gt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:gt().required("End Date is mandatory").min(Vt("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),V=(S=!1)=>{P(),d.resetState(),k("handle-close",S)},z=S=>{p.value.startDate=S},j=S=>{p.value.endDate=S},C=async S=>{p.value.site=S,S!=""&&await d.getLookupEquipmentModel(),w("")},w=async S=>{p.value.equipmentModel=S,S!=""&&await d.getLookupComponent(),u("")},u=async S=>{p.value.component=S},Y=S=>{p.value.componentType=S},E=async()=>{P(),await n.validate(p.value,{abortEarly:!1}).catch(S=>{d.setErrors(S.errors)}),!D.value&&ct("Are you sure you want to submit ?").then(async S=>{S.isConfirmed&&d.insertData(r.user.Name).then(()=>{d.isError||St("Form has been successfully submitted!","Ok").then(()=>{V(!0)})})})},P=()=>{d.setErrors([])};return(S,f)=>{const Q=J("el-button"),b=J("el-dialog"),R=bt("loading");return mt((g(),O(b,{modelValue:l.value,"onUpdate:modelValue":f[12]||(f[12]=y=>l.value=y),title:"New Data",width:"40%",onClose:f[13]||(f[13]=y=>V())},{footer:v(()=>[I("span",Ma,[s(Q,{type:"primary",onClick:E,disabled:o(d).loading},{default:v(()=>[X("Submit")]),_:1},8,["disabled"]),s(Q,{type:"secondary",onClick:V,disabled:o(d).loading},{default:v(()=>[X("Close")]),_:1},8,["disabled"])])]),default:v(()=>[s(Ht,{name:"fade"},{default:v(()=>[D.value&&!c.value?(g(),O(Kt,{key:0,errorMessages:x.value,onResetForm:P},null,8,["errorMessages"])):kt("",!0)]),_:1}),mt((g(),O(o(je),{id:"kt_filter_form",class:"row g-9 my-4"},{default:v(()=>[s(L,{value:p.value.site,placeholder:"Add Site",isLoading:h.value.site,label:"Site",name:"Site",onHandleChange:C,options:o(d).siteOption},null,8,["value","isLoading","options"]),s(L,{value:p.value.equipmentModel,isLoading:h.value.equipmentModel,"is-disabled":!p.value.site||p.value.site=="",label:"Equipment Model",placeholder:"Add Equipment Model",name:"EquipmentModel",options:o(d).equipmentModelOption,max:20,onHandleChange:w},null,8,["value","isLoading","is-disabled","options"]),s(L,{value:p.value.component,isLoading:h.value.component,"is-disabled":!p.value.equipmentModel||p.value.equipmentModel=="",label:"Component",placeholder:"Add Component",name:"Component",options:o(d).componentOption,max:40,onHandleChange:u},null,8,["value","isLoading","is-disabled","options"]),s(L,{value:p.value.componentType,label:"Component Type",placeholder:"Add Component Type",name:"ComponentType",options:o(d).componentTypeOption,max:20,onHandleChange:Y},null,8,["value","options"]),s(lt,{value:p.value.componentWeight,placeholder:"Add Component Weight",label:"Component Weight",name:"componentWeight",onHandleChange:f[0]||(f[0]=y=>p.value.componentWeight=y)},null,8,["value"]),s(lt,{value:p.value.oemInterval,placeholder:"Add OEM Interval",label:"OEM Interval",name:"bumaAuTarget",onHandleChange:f[1]||(f[1]=y=>p.value.oemInterval=y)},null,8,["value"]),s(lt,{value:p.value.bumaAuTarget,placeholder:"Add BUMA AU Target",label:"BUMA AU Target",name:"bumaAuTarget",onHandleChange:f[2]||(f[2]=y=>p.value.bumaAuTarget=y)},null,8,["value"]),s(it,{value:p.value.maxRiskRank,label:"Max Risk Rank",placeholder:"Add Max Risk Rank",name:"MaxRiskRank",max:5,onHandleChange:f[3]||(f[3]=y=>p.value.maxRiskRank=y)},null,8,["value"]),s(it,{value:p.value.revisedRank,label:"Revised Rank",placeholder:"Add Revised Rank",name:"RevisedRank",max:5,onHandleChange:f[4]||(f[4]=y=>p.value.revisedRank=y)},null,8,["value"]),s(L,{value:p.value.overallRisk,label:"Overall Risk",placeholder:"Add Overall Risk",name:"OverallRisk",options:o(d).overallRiskOption,max:5,onHandleChange:f[5]||(f[5]=y=>p.value.overallRisk=y)},null,8,["value","options"]),s(L,{value:p.value.failureTiming,label:"Failure Timing",placeholder:"Add Failure Timing",name:"FailureTiming",options:o(d).failureTimingOption,max:5,onHandleChange:f[6]||(f[6]=y=>p.value.failureTiming=y)},null,8,["value","options"]),s(L,{value:p.value.systemImpact,label:"System Impact",placeholder:"Add System Impact",name:"SystemImpact",options:o(d).systemImpactOption,max:5,onHandleChange:f[7]||(f[7]=y=>p.value.systemImpact=y)},null,8,["value","options"]),s(L,{value:p.value.opsImpact,label:"OPS Impact",placeholder:"Add OPS Impact",name:"OpsImpact",options:o(d).opsImpactOption,max:5,onHandleChange:f[8]||(f[8]=y=>p.value.opsImpact=y)},null,8,["value","options"]),s(L,{value:p.value.supplyRisk,label:"Supply Risk",placeholder:"Add Supply Risk",name:"SupplyRisk",options:o(d).supplyRiskOption,max:5,onHandleChange:f[9]||(f[9]=y=>p.value.supplyRisk=y)},null,8,["value","options"]),s(L,{value:p.value.failureCost,label:"Failure Cost",placeholder:"Add Failure Cost",name:"FailureCost",options:o(d).failureCostOption,max:5,onHandleChange:f[10]||(f[10]=y=>p.value.failureCost=y)},null,8,["value","options"]),s(it,{value:p.value.comments,label:"Comments",placeholder:"Add Comments",name:"Comments",options:o(d).commentsOption,max:255,textInputType:"textarea",onHandleChange:f[11]||(f[11]=y=>p.value.comments=y)},null,8,["value","options"]),I("div",La,[s(vt,{value:p.value.startDate,label:"Start Date",placeholder:"Add Start Date",name:"StartDate",onHandleChange:z},null,8,["value"])]),I("div",Ua,[s(vt,{value:p.value.endDate,label:"End Date",placeholder:"Add End Date",name:"EndDate",onHandleChange:j},null,8,["value"])])]),_:1})),[[R,o(d).loading]])]),_:1},8,["modelValue"])),[[R,o(d).loading]])}}}),At=wt({id:"componentRiskRatingBulk",state:()=>({statePagination:new ht,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const a={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await q.post(`${ea}?${new URLSearchParams(a).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){e.response.data.statusCode==401&&B().setLoggedIn(!1),this.stateIsError=!0,this.stateError=e.response.data.result.message,H("IRONS",e),console.log(e)}finally{this.stateLoading=!1}},async upload({userAccount:t,excelFile:a}){const e={userAccount:t,ver:"v1"},k=`${aa}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const d=await q.postImages(k,a);d.data.statusCode==200?d.data.result.isError?(this.stateIsError=!0,this.stateError=d.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=d.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Ye.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=d.data.result.isError,this.stateError=d.data.result.message)}catch(d){d.response.data.statusCode==401&&B().setLoggedIn(!1),console.log(d),this.stateIsError=!0,this.stateError=d.response.data.result.message,H("IRONS",d)}finally{this.stateUploadLoading=!1}},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(ze(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new ht,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),Pa={class:"icon"},qa=rt({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const a=t,e=At(),k=K(()=>(a.page-1)*10+1),d=et(""),r=p=>{d.value=p.order;const x={prop:p.prop,order:p.order};e.setSort(x)},l=(p,x,D)=>Ge(p[D],x[D],d.value);return(p,x)=>{const D=J("inline-svg");return g(),O(o($t),{data:a.listData,style:{width:"100%"},onSortChange:r,"empty-text":"No Data"},{default:v(()=>[s(o(T),{label:"No",width:"60",align:"center"},{default:v(c=>[I("span",null,A(k.value+c.$index),1)]),_:1}),s(o(T),{prop:"site",label:"Site",width:"170",sortable:"","sort-method":(c,h)=>l(c,h,"site")},null,8,["sort-method"]),s(o(T),{prop:"equipmentModel",label:"Equipment Model",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"equipmentModel")},null,8,["sort-method"]),s(o(T),{prop:"component",label:"Component",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"component")},null,8,["sort-method"]),s(o(T),{prop:"componentType",label:"Component Type",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"componentType")},null,8,["sort-method"]),s(o(T),{prop:"componentWeight",label:"Component Weight",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"componentWeight")},null,8,["sort-method"]),s(o(T),{prop:"oemInterval",label:"OEM Interval",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"oemInterval")},null,8,["sort-method"]),s(o(T),{prop:"bumaAuTarget",label:"BUMA AU Target",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"bumaAuTarget")},null,8,["sort-method"]),s(o(T),{prop:"maxRiskRank",label:"Max Risk Rank",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"maxRiskRank")},null,8,["sort-method"]),s(o(T),{prop:"revisedRank",label:"Revised Rank",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"revisedRank")},null,8,["sort-method"]),s(o(T),{prop:"overallRisk",label:"Overall Risk",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"overallRisk")},null,8,["sort-method"]),s(o(T),{prop:"failureTiming",label:"Failure Timing",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"failureTiming")},null,8,["sort-method"]),s(o(T),{prop:"systemImpact",label:"System Impact",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"systemImpact")},null,8,["sort-method"]),s(o(T),{prop:"opsImpact",label:"OPS Impact",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"opsImpact")},null,8,["sort-method"]),s(o(T),{prop:"supplyRisk",label:"Supply Risk",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"supplyRisk")},null,8,["sort-method"]),s(o(T),{prop:"failureCost",label:"Failure Cost",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"failureCost")},null,8,["sort-method"]),s(o(T),{prop:"comments",label:"Comments",width:"300",sortable:"","sort-method":(c,h)=>l(c,h,"comments")},null,8,["sort-method"]),s(o(T),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:v(c=>[I("span",null,A(o(Mt)(c.row.startDate)),1)]),_:1}),s(o(T),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:v(c=>[I("span",null,A(o(Mt)(c.row.endDate)),1)]),_:1}),s(o(T),{prop:"validationReason",label:"Remark","min-width":"300",sortable:"","sort-method":(c,h)=>l(c,h,"validationReason")},null,8,["sort-method"]),s(o(T),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:v(c=>[I("div",Pa,[s(D,{src:c.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Lt=t=>($e("data-v-2bbb8b12"),t=t(),Be(),t),Ha=Lt(()=>I("div",{class:"text-center"},null,-1)),Wa=Lt(()=>I("div",{class:"mb-3"},[I("span",null,[X(" Download template "),I("a",{href:"documents/MasterDataComponentRiskRating.xlsx",target:"_blank",id:"link-download"},"here"),X(" before uploading file ")])],-1)),$a=Lt(()=>I("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[I("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),Ba={class:"card"},Na={class:"card-body grid-padding"},Va={class:"dialog-footer"},Ka=rt({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:a}){const e=t,k=a,d=B(),r=At(),l=Ot(e,"visibility"),p=()=>{const C=Je(r.validatedData,w=>{const u=w;return{componentRiskRatingId:0,equipmentModel:u.equipmentModel,component:u.component,componentType:u.componentType,componentWeight:u.componentWeight,oemInterval:u.oemInterval,bumaAuTarget:u.bumaAuTarget,maxRiskRank:u.maxRiskRank,revisedRank:u.revisedRank,overallRisk:u.overallRisk,failureTiming:u.failureTiming,systemImpact:u.systemImpact,opsImpact:u.opsImpact,supplyRisk:u.supplyRisk,failureCost:u.failureCost,comments:u.comments,site:u.site,startDate:u.startDate,endDate:u.endDate}});return Object.values(C)},x=()=>{const C=document.getElementById("link-download");C&&C.click()},D=()=>{r.validatedData.length>0?ct("Cancel Upload Data?","Confirm").then(w=>{w.isConfirmed&&h()}):h()},c=async C=>{await r.upload({userAccount:d.user.Name,excelFile:C}),r.stateError&&ut(r.error)},h=(C=!1)=>{r.resetState(),k("handle-close",C)},n=C=>{r.setIsUploadedState(C)},V=C=>{r.setPage(C)},z=()=>{if(r.validatedData.length<1){x();return}const C=["SITE","EQUIPMENT MODEL","COMPONENT","COMPONENT TYPE","COMPONENT WEIGHT","OEM INTERVAL","BUMA AU TARGET","MAX RISK RANK","REVISED RANK","OVERALL RISK","FAILURE TIMING","SYSTEM IMPACT","OPS IMPACT","SUPPLY RISK","FAILURE COST","COMMENTS","START DATE","END DATE","REMARK","STATUS"],w=r.validatedData.map(u=>({site:u.site,equipmentModel:u.equipmentModel,component:u.component,componentType:u.componentType,componentWeight:u.componentWeight,oemInterval:u.oemInterval,bumaAuTarget:u.bumaAuTarget,maxRiskRank:u.maxRiskRank,revisedRank:u.revisedRank,overallRisk:u.overallRisk,failureTiming:u.failureTiming,systemImpact:u.systemImpact,opsImpact:u.opsImpact,supplyRisk:u.supplyRisk,failureCost:u.failureCost,comments:u.comments,startDate:u.startDate,endDate:u.endDate,remark:u.validationReason,status:u.isValid?"OK":"Error"}));Pe("Component Risk Rating",C,w)},j=async()=>{if(r.displayData.length<1){ut("There is no data to submit");return}if(r.isError){ut("There is still invalid row(s)");return}ct("Are you sure you want to submit ?").then(async C=>{if(C.isConfirmed){const w=p();if(r.setBulkData(w),await r.bulkInsert(d.user.Name),r.isError){ut(r.stateError);return}St("Form has been successfully submitted!","Ok").then(()=>{h(!0)})}})};return(C,w)=>{const u=J("el-button"),Y=J("el-dialog"),E=bt("loading");return g(),O(Y,{title:"Upload Bulk Data",modelValue:l.value,"onUpdate:modelValue":w[1]||(w[1]=P=>l.value=P),"before-close":D,width:"70%","custom-class":"upload-modal"},{footer:v(()=>[I("div",null,[I("span",Va,[s(u,{type:"success",onClick:z},{default:v(()=>[X("Download")]),_:1}),s(u,{type:"primary",onClick:j},{default:v(()=>[X("Upload")]),_:1}),s(u,{type:"success",onClick:D},{default:v(()=>[X("Cancel")]),_:1})])])]),default:v(()=>[Ha,Wa,mt(s(Xe,{isSubmissionUploadSuccess:o(r).isUploaded,onHandleCloseUploadedFile:D,onHandleUpload:c,onHandleSetIsExcelFileUploaded:n},null,8,["isSubmissionUploadSuccess"]),[[E,o(r).uploadLoading]]),$a,I("div",Ba,[I("div",Na,[s(qa,{"list-data":o(r).displayData,page:o(r).pagination.currentPage},null,8,["list-data","page"])])]),o(r).displayData.length>0?(g(),O(qt,{key:0,onRaisePageChange:w[0]||(w[0]=P=>V(P)),currentPage:o(r).pagination.currentPage,totalPage:o(r).pagination.totalPage,totalPageSize:o(r).pagination.totalPageSize,startPaginationIndex:o(r).pagination.startPaginationIndex,endPaginationIndex:o(r).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):kt("",!0)]),_:1},8,["modelValue"])}}}),za=Qe(Ka,[["__scopeId","data-v-2bbb8b12"]]),Ga={class:"row g-9 my-4"},ja={class:"dialog-footer"},Ya=rt({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:a}){const e=_t(),k=t,d=a,r=Ot(k,"visibility"),l=K(()=>e.filterData),p=()=>{x(),e.resetFilter()},x=()=>{d("handle-close",!1)},D=i=>{e.setEquipmentModel(i)},c=i=>{e.setEquipmentModelTo(i)},h=i=>{e.setComponent(i)},n=i=>{e.setComponentTo(i)},V=i=>{e.setComponentType(i)},z=i=>{e.setComponentTypeTo(i)},j=i=>{e.setMaxRiskRank(i)},C=i=>{e.setMaxRiskRankTo(i)},w=i=>{e.setRevisedRank(i)},u=i=>{e.setRevisedRankTo(i)},Y=i=>{e.setOverallRisk(i)},E=i=>{e.setOverallRiskTo(i)},P=i=>{e.setFailureTiming(i)},S=i=>{e.setFailureTimingTo(i)},f=i=>{e.setSystemImpact(i)},Q=i=>{e.setSystemImpactTo(i)},b=i=>{e.setOpsImpact(i)},R=i=>{e.setOpsImpactTo(i)},y=i=>{e.setSupplyRisk(i)},Z=i=>{e.setSupplyRiskTo(i)},at=i=>{e.setFailureCost(i)},m=i=>{e.setFailureCostTo(i)},F=i=>{e.setComments(i)},Dt=i=>{e.setCommentsTo(i)},Tt=i=>{e.setStartDate(i)},Rt=i=>{e.setStartDateTo(i)},yt=i=>{e.setEndDate(i)},zt=i=>{e.setEndDateTo(i)},Gt=i=>{e.setSite(i)},jt=i=>{e.setSiteTo(i)},Yt=i=>{e.setOemInterval(i)},Xt=i=>{e.setOemIntervalTo(i)},Jt=i=>{e.setBumaAuTarget(i)},Qt=i=>{e.setBumaAuTargetTo(i)},Zt=i=>{e.setComponentWeight(i)},te=i=>{e.setComponentWeightTo(i)},ee=()=>{const i=e.lastUsedFilterData.equipmentModel!==e.filterData.equipmentModel,ot=e.lastUsedFilterData.equipmentModelTo!==e.filterData.equipmentModelTo,pt=e.lastUsedFilterData.component!==e.filterData.component,ft=e.lastUsedFilterData.componentTo!==e.filterData.componentTo,dt=e.lastUsedFilterData.componentType!==e.filterData.componentType,ae=e.lastUsedFilterData.componentTypeTo!==e.filterData.componentTypeTo,oe=e.lastUsedFilterData.maxRiskRank!==e.filterData.maxRiskRank,se=e.lastUsedFilterData.maxRiskRankTo!==e.filterData.maxRiskRankTo,ne=e.lastUsedFilterData.revisedRank!==e.filterData.revisedRank,ie=e.lastUsedFilterData.revisedRankTo!==e.filterData.revisedRankTo,le=e.lastUsedFilterData.overallRisk!==e.filterData.overallRisk,re=e.lastUsedFilterData.overallRiskTo!==e.filterData.overallRiskTo,me=e.lastUsedFilterData.failureTiming!==e.filterData.failureTiming,pe=e.lastUsedFilterData.failureTimingTo!==e.filterData.failureTimingTo,de=e.lastUsedFilterData.systemImpact!==e.filterData.systemImpact,ue=e.lastUsedFilterData.systemImpactTo!==e.filterData.systemImpactTo,ce=e.lastUsedFilterData.opsImpact!==e.filterData.opsImpact,he=e.lastUsedFilterData.opsImpactTo!==e.filterData.opsImpactTo,ge=e.lastUsedFilterData.supplyRisk!==e.filterData.supplyRisk,ve=e.lastUsedFilterData.supplyRiskTo!==e.filterData.supplyRiskTo,ke=e.lastUsedFilterData.failureCost!==e.filterData.failureCost,De=e.lastUsedFilterData.failureCostTo!==e.filterData.failureCostTo,Te=e.lastUsedFilterData.comments!==e.filterData.comments,Re=e.lastUsedFilterData.commentsTo!==e.filterData.commentsTo,ye=e.lastUsedFilterData.startDate!==e.filterData.startDate,fe=e.lastUsedFilterData.startDateTo!==e.filterData.startDateTo,Fe=e.lastUsedFilterData.endDate!==e.filterData.endDate,Ie=e.lastUsedFilterData.endDateTo!==e.filterData.endDateTo,Ce=e.lastUsedFilterData.site!==e.filterData.site,Se=e.lastUsedFilterData.siteTo!==e.filterData.siteTo,be=e.lastUsedFilterData.oemInterval!==e.filterData.oemInterval,Oe=e.lastUsedFilterData.oemIntervalTo!==e.filterData.oemIntervalTo,we=e.lastUsedFilterData.bumaAuTarget!==e.filterData.bumaAuTarget,_e=e.lastUsedFilterData.bumaAuTargetTo!==e.filterData.bumaAuTargetTo,Ee=e.lastUsedFilterData.componentWeight!==e.filterData.componentWeight,Ae=e.lastUsedFilterData.componentWeightTo!==e.filterData.componentWeightTo;d("handle-close",i||ot||pt||ft||dt||ae||oe||se||ne||ie||le||re||me||pe||de||ue||ce||he||ge||ve||ke||De||Te||Re||ye||fe||Fe||Ie||Ce||Se||be||Oe||we||_e||Ee||Ae)};return(i,ot)=>{const pt=J("el-button"),ft=J("el-dialog");return g(),O(ft,{modelValue:r.value,"onUpdate:modelValue":ot[0]||(ot[0]=dt=>r.value=dt),title:"Filter",width:"60%",onClose:ot[1]||(ot[1]=dt=>x())},{footer:v(()=>[I("span",ja,[s(pt,{type:"secondary",onClick:p},{default:v(()=>[X("Reset")]),_:1}),s(pt,{type:"primary",onClick:ee},{default:v(()=>[X("Filter")]),_:1})])]),default:v(()=>[I("div",Ga,[s($,{"value-from":l.value.site,"value-to":l.value.siteTo,label:"Site",name:"site",options:o(e).siteOption,onHandleChangeFrom:Gt,onHandleChangeTo:jt},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.equipmentModel,"value-to":l.value.equipmentModelTo,label:"Equipment Model",name:"EquipmentModel",options:o(e).equipmentModelOption,onHandleChangeFrom:D,onHandleChangeTo:c},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.component,"value-to":l.value.componentTo,label:"Component",name:"Component",options:o(e).componentOption,onHandleChangeFrom:h,onHandleChangeTo:n},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.componentType,"value-to":l.value.componentTypeTo,label:"Component Type",name:"ComponentType",options:o(e).componentTypeOption,onHandleChangeFrom:V,onHandleChangeTo:z},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.componentWeight,"value-to":l.value.componentWeightTo,label:"Component Weight",name:"componentWeight",options:o(e).componentWeightOption,onHandleChangeFrom:Zt,onHandleChangeTo:te},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.oemInterval,"value-to":l.value.oemIntervalTo,label:"OEM Interval",name:"oemInterval",options:o(e).oemIntervalOption,onHandleChangeFrom:Yt,onHandleChangeTo:Xt},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.bumaAuTarget,"value-to":l.value.bumaAuTargetTo,label:"BUMA AU Target",name:"bumaAuTarget",options:o(e).bumaAuTargettOption,onHandleChangeFrom:Jt,onHandleChangeTo:Qt},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.maxRiskRank,"value-to":l.value.maxRiskRankTo,label:"Max Risk Rank",name:"MaxRiskRank",options:o(e).maxRiskRankOption,onHandleChangeFrom:j,onHandleChangeTo:C},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.revisedRank,"value-to":l.value.revisedRankTo,label:"Revised Rank",name:"RevisedRank",options:o(e).revisedRankOption,onHandleChangeFrom:w,onHandleChangeTo:u},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.overallRisk,"value-to":l.value.overallRiskTo,label:"Overall Risk",name:"OverallRisk",options:o(e).overallRiskOption,onHandleChangeFrom:Y,onHandleChangeTo:E},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.failureTiming,"value-to":l.value.failureTimingTo,label:"Failure Timing",name:"FailureTiming",options:o(e).failureTimingOption,onHandleChangeFrom:P,onHandleChangeTo:S},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.systemImpact,"value-to":l.value.systemImpactTo,label:"System Impact",name:"SystemImpact",options:o(e).systemImpactOption,onHandleChangeFrom:f,onHandleChangeTo:Q},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.opsImpact,"value-to":l.value.opsImpactTo,label:"OPS Impact",name:"OpsImpact",options:o(e).opsImpactOption,onHandleChangeFrom:b,onHandleChangeTo:R},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.supplyRisk,"value-to":l.value.supplyRiskTo,label:"Supply Risk",name:"SupplyRisk",options:o(e).supplyRiskOption,onHandleChangeFrom:y,onHandleChangeTo:Z},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.failureCost,"value-to":l.value.failureCostTo,label:"Failure Cost",name:"FailureCost",options:o(e).failureCostOption,onHandleChangeFrom:at,onHandleChangeTo:m},null,8,["value-from","value-to","options"]),s($,{"value-from":l.value.comments,"value-to":l.value.commentsTo,label:"Comments",name:"Comments",options:o(e).commentsOption,onHandleChangeFrom:F,onHandleChangeTo:Dt},null,8,["value-from","value-to","options"]),s(xt,{"value-from":l.value.startDate?l.value.startDate.toString():"","value-to":l.value.startDateTo?l.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:Tt,onHandleChangeTo:Rt},null,8,["value-from","value-to"]),s(xt,{"value-from":l.value.endDate?l.value.endDate.toString():"","value-to":l.value.endDateTo?l.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:yt,onHandleChangeTo:zt},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),Xa={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Ja=I("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),Qa={class:"d-flex justify-content-between align-items-center"},Za={class:"card"},to={class:"card-body grid-padding"},eo={class:"my-5"},ks=rt({__name:"Index",setup(t){const a=Le(),e=_t(),k=Et(),d=At(),r=et(!1),l=et(!1),p=et(!1),x=K(()=>e.displayData),D=K(()=>e.pagination),c=E=>{e.setPage(E)};Ne(async()=>{a[Me.ACTIVE_PAGE](Ft().meta.parentMenu),Ue("Component Risk Rating",[{pageName:Ft().meta.parentMenu,pageRoute:Ft().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-componentriskrating"},{pageName:"Component Risk Rating",pageRoute:"ironlake-config-componentriskrating"}]),e.setPage(1),await e.getLookup(),await k.getLookupSite(),await k.getLookupEquipmentModel(),await k.getLookupComponent(),await k.getLookupComponentType(),await k.getLookupOverallRisk(),await k.getLookupFailureTiming(),await k.getLookupSystemImpact(),await k.getLookupOpsImpact(),await k.getLookupSupplyRisk(),await k.getLookupFailureCost()}),Ve(async()=>{e.resetState(),k.resetState(),d.resetState()});const h=async()=>{await e.setPage(1),await e.getLookup(),await k.getLookupSite(),await k.getLookupComponentType(),await k.getLookupOverallRisk(),await k.getLookupFailureTiming(),await k.getLookupSystemImpact(),await k.getLookupOpsImpact(),await k.getLookupSupplyRisk(),await k.getLookupFailureCost()},n=()=>{r.value=!0,k.setIsEdit(!1),k.setErrors([])},V=async E=>{r.value=!1,E&&await h()},z=()=>{l.value=!0},j=async E=>{l.value=!1,E&&await h()},C=async()=>{const E=await e.export();Ze.saveAs(new Blob([E],{type:"application/octet-stream"}),"ComponentRiskRating.xlsx")},w=()=>{p.value=!0},u=async E=>{p.value=!1,E&&await h()},Y=()=>{r.value=!0,k.setErrors([])};return(E,P)=>(g(),_(Wt,null,[I("div",Xa,[Ja,I("div",Qa,[s(qe,{onShowDialog:n}),s(xe,{onShowDialog:z}),s(We,{onHandleDownload:C}),s(He,{onShowDialog:w})])]),I("div",Za,[I("div",to,[s(Aa,{"list-data":x.value,page:D.value.currentPage,onFetchData:h,onDuplicateData:Y},null,8,["list-data","page"])])]),I("div",eo,[o(e).paginationLoading?kt("",!0):(g(),O(qt,{key:0,onRaisePageChange:P[0]||(P[0]=S=>c(S)),currentPage:D.value.currentPage,totalPage:D.value.totalPage,totalPageSize:D.value.totalPageSize,startPaginationIndex:D.value.startPaginationIndex,endPaginationIndex:D.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),s(xa,{visibility:r.value,onHandleClose:V},null,8,["visibility"]),s(Ya,{visibility:l.value,onHandleClose:j},null,8,["visibility"]),s(za,{visibility:p.value,onHandleClose:u},null,8,["visibility"])],64))}});export{ks as default};
