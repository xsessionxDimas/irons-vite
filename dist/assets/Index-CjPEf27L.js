import{u as Et}from"./vuex-BbOKrtVp.js";import{b as lt}from"./vue-router-iNp9kJ0K.js";import{a as Ut}from"./breadcrumb-D-Q4Tk9w.js";import{b as ae,u as se,s as be,i as xe,h as Ne,j as Ee,A as xt}from"./index-BCnwA6yE.js";import{P as dt}from"./Pagination-CVDIvnOM.js";import{P as je,a as Ot,b as de}from"./table-sort-VnBD5Hfa.js";import{G as wt,a as kt,b as Pt,E as Lt,B as qt,c as At,U as ct,d as ht,D as It,e as He,f as Nt,g as Ht,I as $t,h as Vt,i as Bt,j as Gt}from"./urls-ieoV4vRn.js";import{d as ut}from"./pinia-BjOS2_Ao.js";import{b as $e,m as Re,a as Te}from"./mapOption-sP4IrA4W.js";import{f as Ue,n as De,a as ze}from"./date-format-BASVuupi.js";import{e as jt}from"./lodash-Cr9vlq0V.js";import{b as zt}from"./urls-CuZgFKSv.js";import{L as Kt}from"./urls-DjvJ6Gmy.js";import{c as vt}from"./urls-cnAouliv.js";import{F as mt}from"./file-saver-DhbZvGod.js";import{F as Xt}from"./FilterIconButton-Bj0WTbms.js";import{h as Tt,A as Yt,U as Wt}from"./excel-generator-CRLIz6fw.js";import{D as Qt}from"./DownloadIconButton-CIQp-YG7.js";import{b as Ie,_ as f}from"./element-plus-C5R56mia.js";import{k as ye,c as A,r as qe,u as o,y as fe,p as h,aa as N,q as E,x as g,Y as Pe,R as I,s as a,A as M,aB as i,C as j,B as H,b4 as Jt,a0 as Le,w as Xe,T as Ye,F as Ve,$ as We,P as Qe,bd as bt,bb as Dt,a7 as Zt,L as ea}from"./@vue-BypzYtbH.js";import{a as Je}from"./vee-validate-C_msoaAA.js";import{c as Oe,a as x,b as me,d as we}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as Ze}from"./ErrorAlert-CMKGfwAi.js";import{_ as pe}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as ke}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as Ce}from"./SelectInput.vue_vue_type_script_setup_true_lang-CILKiK7F.js";import{_ as oe}from"./AutoComplete.vue_vue_type_script_setup_true_lang-BJG-QfZq.js";import{_ as et}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{_ as ft}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as yt}from"./map-anything-abi6NY2Z.js";import{_ as Ct}from"./nw-img-vue-CR837WER.js";import{_ as ee}from"./AutoComplete.vue_vue_type_style_index_0_lang-DTl0xZyN.js";import{_ as Ke}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./moment-C5S46NFB.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const it={cbmType:"",cbmTypeTo:"",site:"",siteTo:"",equipmentModel:"",equipmentModelTo:"",component:"",componentTo:"",parameterFrom:"",parameterFromTo:"",parameterTo:"",parameterToTo:"",registerNumber:"",registerNumberTo:"",severityLevel:"",severityLevelTo:"",uomFrom:"",uomFromTo:"",uomTo:"",uomToTo:"",uomConvertRatio:"",uomConvertRatioTo:"",rating:"",ratingTo:"",operatorMin:"",operatorMinTo:"",valueMin:"",valueMinTo:"",operatorMax:"",operatorMaxTo:"",valueMax:"",valueMaxTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},Be=ut({id:"cbmThresholdList",state:()=>({stateFilterData:{...it},stateLastUsedFilterData:{...it},statePageName:"cbmThreshold",stateActiveTab:"General",stateDisplayData:[],statePagination:new je,stateLoading:!1,stateLoadingTableThreshold:!1,statePaginationLoading:!1,stateSiteOption:[],stateEquipmentModelOption:[],stateComponentOption:[],stateCbmTypeOption:[],stateRegisterNumberOption:[],stateParameterFromOption:[],stateParameterToOption:[],stateSeverityLevelOption:[],stateUomFromOption:[],stateUomToOption:[],stateUomConvertRatioOption:[],stateRatingOption:[],stateOperatorMinOption:[],stateValueMinOption:[],stateOperatorMaxOption:[],stateValueMaxOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,siteOption:t=>t.stateSiteOption,equipmentModelOption:t=>t.stateEquipmentModelOption,componentOption:t=>t.stateComponentOption,cbmTypeOption:t=>t.stateCbmTypeOption,registerNumberOption:t=>t.stateRegisterNumberOption,parameterFromOption:t=>t.stateParameterFromOption,parameterToOption:t=>t.stateParameterToOption,severityLevelOption:t=>t.stateSeverityLevelOption,uomFromOption:t=>t.stateUomFromOption,uomToOption:t=>t.stateUomToOption,uomConvertRatioOption:t=>t.stateUomConvertRatioOption,ratingOption:t=>t.stateRatingOption,operatorMinOption:t=>t.stateOperatorMinOption,valueMinOption:t=>t.stateValueMinOption,operatorMaxOption:t=>t.stateOperatorMaxOption,valueMaxOption:t=>t.stateValueMaxOption,activeTab:t=>t.stateActiveTab},actions:{setActiveTab(t){this.stateActiveTab=t},setGeneralParam(){return{equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,cbmType:this.stateFilterData.cbmType,cbmTypeTo:this.stateFilterData.cbmTypeTo,registerNumber:this.stateFilterData.registerNumber,registerNumberTo:this.stateFilterData.registerNumberTo,parameterFrom:this.stateFilterData.parameterFrom,parameterFromTo:this.stateFilterData.parameterFromTo,parameterTo:this.stateFilterData.parameterTo,parameterToTo:this.stateFilterData.parameterToTo,severityLevel:this.stateFilterData.severityLevel,severityLevelTo:this.stateFilterData.severityLevelTo,uomFrom:this.stateFilterData.uomFrom,uomFromTo:this.stateFilterData.uomFromTo,uomTo:this.stateFilterData.uomTo,uomToTo:this.stateFilterData.uomToTo,uomConvertRatio:this.stateFilterData.uomConvertRatio,uomConvertRatioTo:this.stateFilterData.uomConvertRatioTo,startDate:this.stateFilterData.startDate?Ue(De(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?Ue(De(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?Ue(De(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?Ue(De(new Date(this.stateFilterData.endDateTo))):"",order:this.stateFilterData.order,ver:this.stateFilterData.ver}},async getData(t=!0,y=!1){const e=this.setGeneralParam(),c=y?{...e,site:this.stateFilterData.site,siteTo:this.stateFilterData.siteTo,page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString()}:{...e,page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString()};try{t&&(this.stateLoading=!0),this.statePaginationLoading=!0,t||(this.stateDisplayData=[]);const T=await ae.get(wt,`cbm_threshold${y?"_specific":""}`,new URLSearchParams(c).toString());this.stateDisplayData=T.data.result.content,this.setTotalPage(T.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(T){T.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(T),be("IRONS",T)}finally{this.stateLoading=!1,this.statePaginationLoading=!1}},async getCbmThresholdList(t){const y={cbmThresholdId:t,ver:"v1"};try{const e=this.stateDisplayData.findIndex(c=>c.cbmThresholdId==t);if(e!=-1){const c=await ae.get(`${kt}?${new URLSearchParams(y).toString()}`);this.stateDisplayData[e].thresholdList=c.data.result.content.map((T,u)=>({id:T.id,idFe:u+1,rating:T.rating,operatorMin:T.operatorMin,valueMin:T.valueMin,operatorMax:T.operatorMax,valueMax:T.valueMax,isActive:T.isActive}))}}catch(e){e.response.data.statusCode==401&&se().setLoggedIn(!1),be("IRONS",e),console.log(e)}},async getLookup(t=!1){const y={ver:this.stateFilterData.ver};try{const e=await ae.get(Pt,"",new URLSearchParams(y).toString());this.stateEquipmentModelOption=$e(e.data.result.content.equipmentModel,"equipmentModel","brand","equipmentModelDescription"),this.stateComponentOption=Re(e.data.result.content.component,"component","componentDescription"),this.stateCbmTypeOption=Re(e.data.result.content.cbmType,"type","type",!1),this.stateRegisterNumberOption=Te(e.data.result.content.registerNumber),this.stateParameterFromOption=Te(e.data.result.content.parameterFrom),this.stateParameterToOption=Te(e.data.result.content.parameterTo),this.stateSeverityLevelOption=Te(e.data.result.content.severityLevel),this.stateUomFromOption=Te(e.data.result.content.uomFrom),this.stateUomToOption=Te(e.data.result.content.uomTo),this.stateUomConvertRatioOption=Te(e.data.result.content.uomConvertRatio),this.stateRatingOption=Re(e.data.result.content.rating,"rating","ratingDescription"),this.stateOperatorMinOption=Re(e.data.result.content.operatorMin,"operator","operatorDescription"),this.stateValueMinOption=Te(e.data.result.content.valueMin),this.stateOperatorMaxOption=Re(e.data.result.content.operatorMax,"operator","operatorDescription"),this.stateValueMaxOption=Te(e.data.result.content.valueMin),this.stateSiteOption=$e(e.data.result.content.site,"siteDescription","siteId","siteCode")}catch(e){e.response.data.statusCode==401&&se().setLoggedIn(!1),be("IRONS",e),console.log(e)}},async export(t=!1){const e={...this.setGeneralParam(),Gmt:new Date().toTimeString().slice(12,17)};try{return this.stateLoading=!0,(await ae.getBlob(`${Lt}${t?"_specific":""}`,"",new URLSearchParams(e).toString())).data}catch(c){be("IRONS",c),console.log(c)}finally{this.stateLoading=!1}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.setActiveTab("General"),this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,this.getData(!1,!1)},async setPageSpecific(t){this.setActiveTab("Specific"),this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,this.getData(!1,!0)},async setSort({prop:t,order:y}){if(!t&&!y)this.stateFilterData.order="";else{const e=y=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},async setSortSpecific({prop:t,order:y}){if(!t&&!y)this.stateFilterData.order="";else{const e=y=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1,!0)},setSite(t){this.stateFilterData.site=t},setSiteTo(t){this.stateFilterData.siteTo=t},setEquipmentModel(t){this.stateFilterData.equipmentModel=t},setEquipmentModelTo(t){this.stateFilterData.equipmentModelTo=t},setComponent(t){this.stateFilterData.component=t},setComponentTo(t){this.stateFilterData.componentTo=t},setCbmType(t){this.stateFilterData.cbmType=t},setCbmTypeTo(t){this.stateFilterData.cbmTypeTo=t},setRegisterNumber(t){this.stateFilterData.registerNumber=t},setRegisterNumberTo(t){this.stateFilterData.registerNumberTo=t},setParameterFrom(t){this.stateFilterData.parameterFrom=t},setParameterFromTo(t){this.stateFilterData.parameterFromTo=t},setParameterTo(t){this.stateFilterData.parameterTo=t},setParameterToTo(t){this.stateFilterData.parameterToTo=t},setSeverityLevel(t){this.stateFilterData.severityLevel=t},setSeverityLevelTo(t){this.stateFilterData.severityLevelTo=t},setUomFrom(t){this.stateFilterData.uomFrom=t},setUomFromTo(t){this.stateFilterData.uomFromTo=t},setUomTo(t){this.stateFilterData.uomTo=t},setUomToTo(t){this.stateFilterData.uomToTo=t},setUomConvertRatio(t){this.stateFilterData.uomConvertRatio=t},setUomConvertRatioTo(t){this.stateFilterData.uomConvertRatioTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},async resetFilter(){this.stateFilterData.site="",this.stateFilterData.siteTo="",this.stateFilterData.equipmentModel="",this.stateFilterData.equipmentModelTo="",this.stateFilterData.component="",this.stateFilterData.componentTo="",this.stateFilterData.cbmType="",this.stateFilterData.cbmTypeTo="",this.stateFilterData.registerNumber="",this.stateFilterData.registerNumberTo="",this.stateFilterData.parameterFrom="",this.stateFilterData.parameterFromTo="",this.stateFilterData.parameterTo="",this.stateFilterData.parameterToTo="",this.stateFilterData.severityLevel="",this.stateFilterData.severityLevelTo="",this.stateFilterData.uomFrom="",this.stateFilterData.uomFromTo="",this.stateFilterData.uomTo="",this.stateFilterData.uomToTo="",this.stateFilterData.uomConvertRatio="",this.stateFilterData.uomConvertRatioTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const t=this.stateLastUsedFilterData.site!=="",y=this.stateLastUsedFilterData.siteTo!=="",e=this.stateLastUsedFilterData.equipmentModel!=="",c=this.stateLastUsedFilterData.equipmentModelTo!=="",T=this.stateLastUsedFilterData.component!=="",u=this.stateLastUsedFilterData.componentTo!=="",n=this.stateLastUsedFilterData.cbmType!=="",O=this.stateLastUsedFilterData.cbmTypeTo!=="",w=this.stateLastUsedFilterData.registerNumber!=="",r=this.stateLastUsedFilterData.registerNumberTo!=="",v=this.stateLastUsedFilterData.parameterFrom!=="",C=this.stateLastUsedFilterData.parameterFromTo!=="",L=this.stateLastUsedFilterData.parameterTo!=="",d=this.stateLastUsedFilterData.parameterToTo!=="",R=this.stateLastUsedFilterData.severityLevel!=="",V=this.stateLastUsedFilterData.severityLevelTo!=="",$=this.stateLastUsedFilterData.uomFrom!=="",S=this.stateLastUsedFilterData.uomFromTo!=="",p=this.stateLastUsedFilterData.uomTo!=="",m=this.stateLastUsedFilterData.uomToTo!=="",z=this.stateLastUsedFilterData.uomConvertRatio!=="",W=this.stateLastUsedFilterData.uomConvertRatioTo!=="",G=this.stateLastUsedFilterData.startDate!=="",re=this.stateLastUsedFilterData.startDateTo!=="",Q=this.stateLastUsedFilterData.endDate!=="",q=this.stateLastUsedFilterData.endDateTo!=="";(t||y||T||u||n||e||c||O||w||r||v||C||R||L||d||V||$||S||p||m||z||W||G||re||Q||q)&&await this.getData()},resetState(){this.stateFilterData={...it},this.stateDisplayData=[],this.statePagination=new je,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Ge=ut({id:"cbmThreshold",state:()=>({statePagination:new je,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t,y=!1){const e={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const c=await ae.post(`${y?qt:At}?${new URLSearchParams(e).toString()}`,this.stateBulkData);this.stateError=c.data.result.isError?c.data.result.message:"",this.stateIsError=c.data.result.isError}catch(c){be("IRONS",c),this.stateIsError=c.response.data.result.isError,this.stateError=c.response.data.result.message,c.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(c)}finally{this.stateLoading=!1}},async upload({userAccount:t,excelFile:y},e=!1){console.log(e?ct:ht);const c={userAccount:t,ver:"v1"},T=`${e?ct:ht}?${new URLSearchParams(c).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const u=await ae.postImages(T,y);u.data.statusCode==200?u.data.result.isError?(this.stateIsError=!0,this.stateError=u.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=u.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=jt.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=u.data.result.isError,this.stateError=u.data.result.message)}catch(u){be("IRONS",u),u.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(u),this.stateIsError=!0,this.stateError=u.response.data.result.message}this.stateUploadLoading=!1},async downloadTemplate(t){const y={cbmThresholdType:t,ver:"v1"};try{return(await ae.getBlob(`${It}?${new URLSearchParams(y).toString()}`,"")).data}catch(e){be("IRONS",e),console.log(e)}},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Ot(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new je,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),gt={cbmThresholdId:0,cbmType:"",site:"",equipmentModel:"",component:"",parameterFrom:"",parameterTo:"",registerNumber:"",severityLevel:"",uomFrom:"",uomTo:"",uomConvertRatio:"",isRequiredThreshold:!1,thresholdList:[],startDate:De(new Date),endDate:De(new Date("12/31/9999"))},Ae=ut({id:"cbmThresholdForm",state:()=>({stateFormData:{...gt},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateSiteOption:[],stateComponentOption:[],stateEquipmentModelOption:[],stateCbmTypeOption:[],stateUomOption:[],stateUomConvertRatioOption:[],stateRatingOption:[],stateOperatorOption:[],stateParameterToOption:[],stateParameterFromOption:[],stateIsEdit:!1}),getters:{isEdit:t=>t.stateIsEdit,formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,siteOption:t=>t.stateSiteOption,componentOption:t=>t.stateComponentOption,equipmentModelOption:t=>t.stateEquipmentModelOption,cbmTypeOption:t=>t.stateCbmTypeOption,uomOption:t=>t.stateUomOption,uomConvertRatioOption:t=>t.stateUomConvertRatioOption,ratingOption:t=>t.stateRatingOption,operatorOption:t=>t.stateOperatorOption,parameterToOption:t=>t.stateParameterToOption,parameterFromOption:t=>t.stateParameterFromOption},actions:{setIsEdit(t){this.stateIsEdit=t},async getLookup(t=!1){const y={ver:"v1"};try{const e=await ae.get(He,"",new URLSearchParams(y).toString()),c=await ae.get(He,"",new URLSearchParams(y).toString()),T=await ae.get(zt,"",new URLSearchParams(y).toString()),u=await ae.get(Kt,"",new URLSearchParams(y).toString()),n=await ae.get(Nt,"",new URLSearchParams(y).toString()),O=await ae.get(vt,"",new URLSearchParams(y).toString());if(this.stateEquipmentModelOption=$e(e.data.result.content.equipmentModel,"equipmentModel","brand","equipmentModelDescription"),this.stateComponentOption=Re(c.data.result.content.component,"component","componentDescription"),this.stateRatingOption=Re(T.data.result.content,"rating","ratingDescription"),this.stateOperatorOption=Re(u.data.result.content,"operator","operatorDescription"),this.stateUomOption=Te(n.data.result.content.uom),this.stateParameterToOption=Te(O.data.result.content.parameter),this.stateParameterFromOption=Te(O.data.result.content.parameter),this.stateCbmTypeOption=Te(O.data.result.content.type),t){const w=await ae.get(He,"",new URLSearchParams(y).toString());this.stateSiteOption=$e(w.data.result.content.site,"siteDescription","siteId","siteCode")}}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(e)}},async getLookupEquipmentModelForSpecific(){const t=this.stateSiteOption.find(e=>e.value==this.stateFormData.site),y={ver:"v1",siteId:(t==null?void 0:t.label.split(" | ")[1])||""};try{const e=await ae.get(He,"",new URLSearchParams(y).toString());this.stateEquipmentModelOption=$e(e.data.result.content.equipmentModel,"equipmentModel","brand","equipmentModelDescription")}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(e)}},async getLookupComponent(){const t=this.stateSiteOption.find(e=>e.value==this.stateFormData.site),y={ver:"v1",siteId:(t==null?void 0:t.label.split(" | ")[1])||"",equipmentModel:this.stateFormData.equipmentModel||""};try{const e=await ae.get(He,"",new URLSearchParams(y).toString());this.stateComponentOption=Re(e.data.result.content.component,"component","componentDescription")}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(e)}},async getLookupParameterTo(t){const y={type:t,typeTo:t,ver:"v1"};try{const e=await ae.get(vt,"",new URLSearchParams(y).toString());this.stateParameterToOption=Te(e.data.result.content.parameter)}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(e)}},async getRegisterNumber(t,y){const e={CbmType:t,ParameterTo:y,ver:"v1"};try{const c=await ae.get(Ht,"",new URLSearchParams(e).toString());this.stateFormData.registerNumber=c.data.result.content[0].registerNumber}catch(c){be("IRONS",c),c.response.data.statusCode==401&&se().setLoggedIn(!1),console.log(c)}},async insertData(t,y=!1){try{this.stateLoading=!0;const e={userAccount:t,ver:"v1"},c={cbmThresholdId:0,cbmType:this.stateFormData.cbmType,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,parameterFrom:this.stateFormData.parameterFrom,parameterTo:this.stateFormData.parameterTo,registerNumber:this.stateFormData.registerNumber,startDate:Ue(De(new Date(this.stateFormData.startDate))),endDate:Ue(De(new Date(this.stateFormData.endDate)))};y&&(c.site=this.stateFormData.site),["Filter Cut","Mag Plug","Iron Forms CBM"].includes(this.stateFormData.cbmType)||(c.severityLevel=this.stateFormData.severityLevel,c.uomFrom=this.stateFormData.uomFrom,c.uomTo=this.stateFormData.uomTo,c.uomConvertRatio=this.stateFormData.uomConvertRatio,c.isRequiredThreshold=this.stateFormData.isRequiredThreshold,c.thresholdList=this.stateFormData.thresholdList);const u=await ae.post(`${y?$t:Vt}?${new URLSearchParams(e).toString()}`,c);u.data.title==="Error"?(this.stateErrors.push(u.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),this.stateError=e,this.stateErrors.push(e.response.data.result.message),this.stateIsError=!0}finally{this.stateLoading=!1}},async updateData(t,y=!1){try{this.stateLoading=!0;const e={userAccount:t,ver:"v1"},c={cbmThresholdId:this.stateFormData.cbmThresholdId,site:"",cbmType:this.stateFormData.cbmType,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,parameterFrom:this.stateFormData.parameterFrom,parameterTo:this.stateFormData.parameterTo,registerNumber:this.stateFormData.registerNumber,severityLevel:this.stateFormData.severityLevel,uomFrom:this.stateFormData.uomFrom,uomTo:this.stateFormData.uomTo,uomConvertRatio:this.stateFormData.uomConvertRatio,isRequiredThreshold:this.stateFormData.isRequiredThreshold,thresholdList:this.stateFormData.thresholdList,startDate:Ue(De(new Date(this.stateFormData.startDate))),endDate:Ue(De(new Date(this.stateFormData.endDate)))};y&&(c.site=this.stateFormData.site);const T=await ae.post(`${y?Bt:Gt}?${new URLSearchParams(e).toString()}`,c);T.data.title==="Error"?(this.stateErrors.push(T.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(e){be("IRONS",e),e.response.data.statusCode==401&&se().setLoggedIn(!1),this.stateError=e,this.stateErrors.push(e.response.data.result.message),this.stateIsError=!0}finally{this.stateLoading=!1}},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.cbmThresholdId=t.cbmThresholdId,this.stateFormData.cbmType=t.cbmType,this.stateFormData.equipmentModel=t.equipmentModel,this.stateFormData.component=t.component,this.stateFormData.parameterFrom=t.parameterFrom,this.stateFormData.parameterTo=t.parameterTo,this.stateFormData.registerNumber=t.registerNumber,this.stateFormData.severityLevel=t.severityLevel,this.stateFormData.uomFrom=t.uomFrom,this.stateFormData.uomTo=t.uomTo,this.stateFormData.uomConvertRatio=t.uomConvertRatio,this.stateFormData.isRequiredThreshold=t.isRequiredThreshold,this.stateFormData.thresholdList=t.thresholdList,this.stateFormData.startDate=t.startDate,this.stateFormData.endDate=t.endDate,t.site&&(this.stateFormData.site=t.site)},resetState(){this.stateFormData={...gt},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),ta={key:0,style:{height:"100px"}},aa={key:0},oa={class:"row justify-content-center"},ra={class:"d-flex justify-content-end"},na=["disabled","onClick"],sa=["onClick"],la=ye({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["fetch-data","duplicateData","handle-edit"],setup(t,{emit:y}){const e=t,c=Be(),T=Ae(),u=y,n=A(()=>(e.page-1)*10+1),O=qe(""),w=d=>{O.value=d.order;const R={prop:d.prop,order:d.order};c.setSort(R)},r=(d,R)=>{R.length!=0&&c.getCbmThresholdList(d.cbmThresholdId)},v=async d=>{d.isRequiredThreshold&&!d.thresholdList&&await c.getCbmThresholdList(d.cbmThresholdId);const R=C(d);T.setFormData(R),u("handle-edit")},C=d=>({cbmThresholdId:d.cbmThresholdId,equipmentModel:d.equipmentModel,component:d.component,cbmType:d.cbmType,registerNumber:d.registerNumber,parameterFrom:d.parameterFrom,parameterTo:d.parameterTo,severityLevel:d.severityLevel,uomFrom:d.uomFrom,uomTo:d.uomTo,uomConvertRatio:d.uomConvertRatio,startDate:De(new Date(d.startDate)),endDate:De(new Date(d.endDate)),isRequiredThreshold:d.isRequiredThreshold||!1,thresholdList:d.thresholdList?[...d.thresholdList]:[]}),L=async d=>{d.isRequiredThreshold&&!d.thresholdList&&await c.getCbmThresholdList(d.cbmThresholdId);const R=C(d);T.setFormData(R),u("duplicateData",!0)};return(d,R)=>{const V=I("inline-svg"),$=I("el-tooltip"),S=Pe("loading");return o(c).loading?fe((h(),N("div",ta,null,512)),[[S,o(c).loading]]):fe((h(),E(o(Ie),{key:1,data:e.listData,style:{width:"100%"},onSortChange:w,"empty-text":"No Data",onExpandChange:r,"row-key":"cbmThresholdId"},{default:g(()=>[a(o(f),{type:"expand"},{default:g(p=>[p.row.thresholdList?(h(),N("div",aa,[a(o(Ie),{data:p.row.thresholdList,border:!0,style:{width:"40%"}},{default:g(()=>[a(o(f),{label:"Rating",prop:"rating"}),a(o(f),{label:"Operator Min",prop:"operatorMin"}),a(o(f),{label:"Value Min",prop:"valueMin"}),a(o(f),{label:"Operator Max",prop:"operatorMax"}),a(o(f),{label:"Value Max",prop:"valueMax"})]),_:2},1032,["data"])])):M("",!0)]),_:1}),a(o(f),{label:"No",width:"70",align:"center"},{default:g(p=>[i("span",null,j(n.value+p.$index),1)]),_:1}),a(o(f),{prop:"cbmType",label:"CBM Type","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.cbmType),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.equipmentModel),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.component),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"parameterFrom",label:"Parameter From","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[H(j(p.parameterFrom),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"parameterTo",label:"Parameter To","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[H(j(p.parameterTo),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomFrom",label:"Uom From","min-width":"130",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[H(j(p.uomFrom),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomTo",label:"Uom To","min-width":"130",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[H(j(p.uomTo),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomConvertRatio",label:"Uom Convert Ratio","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[H(j(p.uomConvertRatio),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"isActive",label:"Is Active",width:"100",sortable:"",align:"center"},{default:g(p=>[i("div",oa,[p.row.isActive?(h(),E(V,{key:0,src:"/media/svg/tables/rows/check.svg"})):(h(),E(V,{key:1,src:"/media/svg/tables/rows/minus.svg"}))])]),_:1}),a(o(f),{label:"",width:"80"},{default:g(p=>[i("div",ra,[a($,{class:"box-item",effect:"dark",content:p.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:g(()=>[i("div",null,[i("button",{disabled:!p.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:m=>v(p.row)},[a(V,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,na)])]),_:2},1032,["content"]),a($,{class:"box-item",effect:"dark",content:"Add new data based on table rows",placement:"top"},{default:g(()=>[i("div",null,[i("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:m=>L(p.row)},[a(V,{src:"/media/svg/tables/rows/paste-icon-button-blue.svg",width:"12",height:"12"})],8,sa)])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[S,o(c).loading]])}}}),ia={key:0,class:"form-label fs-6 fw-bolder text-dark"},Fe=ye({__name:"Decimal3Input",props:{margin:{type:Boolean,default:!0},gridClass:{required:!1,type:String,default:""},max:{type:Number,default:524288},value:{required:!0,type:String},name:{required:!0,type:String},label:{required:!1,type:String},placeholder:{required:!1,type:String,default:"Input Text"},disabled:{default:!1}},emits:["handleChange"],setup(t,{emit:y}){const e=t,c=y,T=A({get:()=>e.value,set:v=>{c("handleChange",v)}}),u=v=>{let C=v;T.value=C.indexOf(".")>=0?C.substr(0,C.indexOf("."))+C.substr(C.indexOf("."),4):C},n=v=>{if(!v)return"0.000";const C=v.toString(),L=C.startsWith("-");let d=C.split(".")[0],R=C.split(".")[1];return d=d===""?"0":d.replace(/[^0-9]/g,""),R===void 0?R="000":R.length===1?R+="00":R.length===2?R+="0":R=R.toString().substring(0,3),`${L?"-":""}${d}.${R}`},O=v=>{const C=v.which?v.which:v.keyCode;(C<48||C>57)&&(C!==46||T.value.indexOf(".")!==-1)&&v.preventDefault(),T.value[0]==="0"&&T.value[1]!=="."&&C!==46&&v.preventDefault()},w=()=>{(T.value==="0"||T.value==="0.00"||T.value==="0.000")&&(T.value="")},r=()=>{let v=T.value;const C=T.value.split(".")[1];if(parseFloat(v)===0){T.value=n("0");return}if(v===""){T.value=n("0"),c("handleChange",T.value);return}if(C!==""||typeof C>"u"){v=n(T.value),c("handleChange",v);return}v+="000",T.value=n(v)};return(v,C)=>{const L=I("el-input"),d=I("el-form-item");return h(),N("div",{class:Jt(["fv-row",t.gridClass])},[t.label?(h(),N("label",ia,j(t.label),1)):M("",!0),a(d,null,{default:g(()=>[a(L,{modelValue:T.value,"onUpdate:modelValue":C[0]||(C[0]=R=>T.value=R),placeholder:t.placeholder,class:"select-bg-grey",maxlength:t.max,disabled:t.disabled,onKeypress:O,onFocus:w,onBlur:r,onInput:u},null,8,["modelValue","placeholder","maxlength","disabled"])]),_:1})],2)}}});function tt(){const t=qe(1);return{stateCondition:t,calStateCondition:e=>{switch(e.toLowerCase()){case"filter cut":case"mag plug":case"iron forms cbm":t.value=2;break;case"oil data":t.value=3;break;default:t.value=1;break}}}}const da={key:4},ua={class:"d-flex"},ma=i("span",{class:"ms-5"},"Required to maintain threshold",-1),pa={key:0},ca=i("tr",null,[i("th",null,"Sample Rating"),i("th",null,"Operator Min"),i("th",null,"Value Min"),i("th",null,"Operator Max"),i("th",null,"Value Max"),i("th")],-1),ha={class:"d-flex align-items-start"},va=["onClick"],ga={class:"d-flex justify-content-end"},Ta={class:"col-md-6 fv-row fv-plugins-icon-container"},ba={class:"col-md-6 fv-row fv-plugins-icon-container"},Da={class:"dialog-footer"},fa=ye({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,{stateCondition:T,calStateCondition:u}=tt(),n=Ae(),O=se(),w=Le(e,"visibility"),r=A(()=>n.formData),v=A(()=>r.value.thresholdList),C=A(()=>n.errors),L=A(()=>n.isError),d=A(()=>T.value===2),R=A(()=>r.value.cbmType=="Oil Data");Xe(()=>{r.value&&r.value.parameterTo!=""&&n.getRegisterNumber(r.value.cbmType,r.value.parameterTo)});const V=Oe().shape({cbmType:x().required("CBM Type is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),registerNumber:x().required("Register Number is mandatory"),severityLevel:x().required("Severity Level is mandatory"),uomConvertRatio:x().required("Uom Convert Ratio is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),$=Oe().shape({cbmType:x().required("CBM Type is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),registerNumber:x().required("Register Number is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),S=()=>{W(""),m(""),z(""),G(""),re(""),Q(""),q(""),K(""),X(""),J(""),ne(""),ue(""),v.value.length=0},p=(F=!1)=>{he(),S(),n.resetState(),c("handle-close",F)},m=F=>{r.value.equipmentModel=F,z(""),n.getLookupComponent()},z=F=>{r.value.component=F},W=async F=>{F=="VIMS"?q("3"):F=="Oil Data"&&(q("3"),J("1"),Q(""),G("")),u(F),r.value.cbmType=F,await n.getLookupParameterTo(F),r.value.parameterTo=""},G=F=>{r.value.registerNumber=F},re=F=>{r.value.parameterFrom=F},Q=F=>{r.value.parameterTo=F},q=F=>{r.value.severityLevel=F},K=F=>{r.value.uomFrom=F},X=F=>{r.value.uomTo=F},J=F=>{r.value.uomConvertRatio=F},te=F=>{F?["A","B","C","X"].forEach((s,b)=>{v.value.push({id:0,idFe:b+1,rating:s,operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})}):v.value.length=0},ce=(F,l)=>{const s=Z(l);s!=-1&&(v.value[s].rating=F)},_e=(F,l)=>{const s=Z(l);s!=-1&&(v.value[s].operatorMin=F)},Se=(F,l)=>{const s=Z(l);s!=-1&&(v.value[s].valueMin=F)},Me=(F,l)=>{const s=Z(l);s!=-1&&(v.value[s].operatorMax=F)},U=(F,l)=>{const s=Z(l);s!=-1&&(v.value[s].valueMax=F)},Z=F=>v.value.findIndex(s=>s.idFe==F),D=()=>{const F=v.value.length,l=v.value[F==0?0:F-1];v.value.push({id:0,idFe:l.idFe+1,rating:"A",operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})},Y=F=>{const l=Z(F);l!=-1&&v.value.splice(l,1)},ne=F=>{r.value.startDate=F},ue=F=>{r.value.endDate=F},le=async()=>{he();let F=$;switch(T.value){case 2:F=$,q(""),K(""),X(""),J(""),r.value.isRequiredThreshold=!1,v.value.length=0;break;default:F=V;break}await F.validate(r.value,{abortEarly:!1}).catch(l=>{n.setErrors(l.errors)}),!L.value&&xe("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&n.insertData(O.user.Name).then(()=>{n.isError||Ne("Form has been successfully submitted!","Ok").then(()=>{p(!0)})})})},he=()=>{n.setErrors([])};return(F,l)=>{const s=I("el-switch"),b=I("inline-svg"),P=I("el-button"),ie=I("el-dialog"),ve=Pe("loading");return fe((h(),E(ie,{modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=B=>w.value=B),title:"New Data General",width:"60%",onClose:l[2]||(l[2]=B=>p())},{footer:g(()=>[i("span",Da,[a(P,{type:"primary",onClick:le,disabled:o(n).loading},{default:g(()=>[H("Submit")]),_:1},8,["disabled"]),a(P,{type:"secondary",onClick:p,disabled:o(n).loading},{default:g(()=>[H("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Ye,{name:"fade"},{default:g(()=>[L.value?(h(),E(Ze,{key:0,errorMessages:C.value,onResetForm:he},null,8,["errorMessages"])):M("",!0)]),_:1}),fe((h(),E(o(Je),{id:"kt_filter_form",class:"row g-9 my-4"},{default:g(()=>[a(oe,{value:r.value.cbmType,placeholder:"Add CBM Type",label:"CBM Type",name:"omsType",max:40,onHandleChange:W,options:o(n).cbmTypeOption},null,8,["value","options"]),a(oe,{value:r.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"equipmentModel",max:20,onHandleChange:m,options:o(n).equipmentModelOption},null,8,["value","options"]),a(oe,{value:r.value.component,placeholder:"Add Component",label:"Component",name:"Component",max:40,onHandleChange:z,options:o(n).componentOption},null,8,["value","options"]),a(pe,{value:r.value.parameterFrom,margin:!1,placeholder:"Add Parameter From",label:"Parameter From",name:"parameterFrom",onHandleChange:re},null,8,["value"]),a(oe,{value:r.value.parameterTo,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",max:255,options:o(n).parameterToOption,onHandleChange:Q},null,8,["value","options"]),a(pe,{value:r.value.registerNumber,margin:!1,label:"Register Number",name:"registerNumber",max:20,disabled:!0,onHandleChange:G},null,8,["value"]),d.value?M("",!0):(h(),E(et,{key:0,value:r.value.severityLevel,margin:!1,placeholder:"Add Severity Level",label:"Severity Level",name:"severityLevel",max:20,disabled:R.value,onHandleChange:q},null,8,["value","disabled"])),d.value?M("",!0):(h(),E(oe,{key:1,value:r.value.uomFrom,placeholder:"Add Uom From",label:"Uom From",name:"uomFrom",max:40,onHandleChange:K,options:o(n).uomOption},null,8,["value","options"])),d.value?M("",!0):(h(),E(oe,{key:2,value:r.value.uomTo,placeholder:"Add Uom To",label:"Uom To",name:"uomTo",max:40,onHandleChange:X,options:o(n).uomOption},null,8,["value","options"])),d.value?M("",!0):(h(),E(Fe,{key:3,value:r.value.uomConvertRatio,placeholder:"Add Uom Convert Ratio",label:"Uom Convert Ratio",name:"uomConvertRatio",max:40,onHandleChange:J},null,8,["value"])),d.value?M("",!0):(h(),N("div",da,[i("div",ua,[a(s,{modelValue:r.value.isRequiredThreshold,"onUpdate:modelValue":l[0]||(l[0]=B=>r.value.isRequiredThreshold=B),onChange:te},null,8,["modelValue"]),ma]),r.value.isRequiredThreshold?(h(),N("div",pa,[i("table",null,[ca,(h(!0),N(Ve,null,We(v.value,B=>(h(),N("tr",{key:B.idFe},[i("td",null,[a(Ce,{value:B.rating,placeholder:"Add Sample Rating",name:"rating",max:40,onHandleChange:_=>{ce(_,B.idFe)},options:o(n).ratingOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Ce,{value:B.operatorMin,placeholder:"Add Operator Min",name:"operatorMin",max:40,onHandleChange:_=>{_e(_,B.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Fe,{value:B.valueMin,margin:!1,placeholder:"Add Value Min",name:"valueMin",max:20,onHandleChange:_=>{Se(_,B.idFe)}},null,8,["value","onHandleChange"])]),i("td",null,[a(Ce,{value:B.operatorMax,placeholder:"Add Operator Max",name:"operatorMax",max:40,onHandleChange:_=>{Me(_,B.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Fe,{value:B.valueMax,margin:!1,placeholder:"Add Value Max",name:"valueMax",max:20,onHandleChange:_=>{U(_,B.idFe)}},null,8,["value","onHandleChange"])]),i("td",ha,[i("button",{class:"btn btn-icon btn-bg-light",onClick:Qe(_=>Y(B.idFe),["prevent"])},[a(b,{src:"/media/svg/tables/rows/trash-delete-blue.svg",width:"12",height:"12"})],8,va)])]))),128))]),i("div",ga,[a(P,{text:"",size:"small",onClick:D},{default:g(()=>[H("Add more")]),_:1})])])):M("",!0)])),i("div",Ta,[a(ke,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:ne},null,8,["value"])]),i("div",ba,[a(ke,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:ue},null,8,["value"])])]),_:1})),[[ve,o(n).loading]])]),_:1},8,["modelValue"])),[[ve,o(n).loading]])}}}),ya={class:"d-flex"},Ca=i("span",{class:"ms-5"},"Required to maintain threshold",-1),Fa={key:4},_a=i("tr",null,[i("th",null,"Sample Rating"),i("th",null,"Operator Min"),i("th",null,"Value Min"),i("th",null,"Operator Max"),i("th",null,"Value Max"),i("th")],-1),Sa={key:0},Ma={key:1},Ra={key:2},Ea={key:3},Ua={key:4},xa={key:5,class:"d-flex align-items-start"},Oa=["onClick"],wa={class:"d-flex justify-content-end"},ka={class:"col-md-6 fv-row fv-plugins-icon-container"},Pa={class:"col-md-6 fv-row fv-plugins-icon-container"},La={class:"dialog-footer"},qa=ye({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,{stateCondition:T,calStateCondition:u}=tt(),n=Ae(),O=se(),w=Le(e,"visibility"),r=A(()=>n.formData),v=A(()=>r.value.thresholdList),C=A(()=>n.errors),L=A(()=>n.isError),d=A(()=>T.value===2),R=A(()=>r.value.cbmType=="Oil Data");Xe(()=>{r.value&&r.value.parameterTo!=""&&n.getRegisterNumber(r.value.cbmType,r.value.parameterTo)});const V=Oe().shape({cbmType:x().required("CBM Type is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),registerNumber:x().required("Register Number is mandatory"),severityLevel:x().required("Severity Level is mandatory"),uomConvertRatio:x().required("Uom Convert Ratio is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),$=Oe().shape({cbmType:x().required("CBM Type is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),registerNumber:x().required("Register Number is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),S=()=>{G(""),z(""),W(""),re(""),Q(""),q(""),K(""),X(""),J(""),te(""),ue(""),le(""),v.value.length=0},p=async()=>{await n.getLookupParameterTo(r.value.cbmType)},m=()=>{F(),S(),n.resetState(),c("handle-close")},z=l=>{console.log(l),r.value.equipmentModel=l},W=l=>{r.value.component=l},G=async l=>{u(l),r.value.cbmType=l,await n.getLookupParameterTo(l),r.value.parameterTo=""},re=l=>{r.value.registerNumber=l},Q=l=>{r.value.parameterFrom=l},q=l=>{r.value.parameterTo=l},K=l=>{r.value.severityLevel=l},X=l=>{r.value.uomFrom=l},J=l=>{r.value.uomTo=l},te=l=>{r.value.uomConvertRatio=l},ce=l=>{l?["A","B","C","X"].map((b,P)=>{v.value.push({id:0,idFe:P+1,rating:b,operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})}):v.value.length=0},_e=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].rating=l)},Se=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].operatorMin=l)},Me=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].valueMin=l)},U=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].operatorMax=l)},Z=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].valueMax=l)},D=l=>v.value.findIndex(b=>b.idFe==l),Y=()=>{const l=v.value.length,s=v.value[l==0?0:l-1];v.value.push({id:0,idFe:s.idFe+1,rating:"A",operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})},ne=l=>{const s=D(l);s!=-1&&(v.value[s].id!=0?v.value[s].isActive=!1:v.value.splice(s,1))},ue=l=>{r.value.startDate=l},le=l=>{r.value.endDate=l},he=async()=>{F();let l=$;switch(T.value){case 2:l=$,z(""),K(""),X(""),J(""),te(""),v.value.length=0;break;default:l=V;break}await l.validate(r.value,{abortEarly:!1}).catch(s=>{n.setErrors(s.errors)}),!L.value&&xe("Are you sure you want to submit ?").then(async s=>{s.isConfirmed&&n.updateData(O.user.Name).then(()=>{n.isError||Ne("Form has been successfully submitted!","Ok").then(()=>{m()})})})},F=()=>{n.setErrors([])};return(l,s)=>{const b=I("el-switch"),P=I("inline-svg"),ie=I("el-button"),ve=I("el-dialog"),B=Pe("loading");return fe((h(),E(ve,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=_=>w.value=_),title:"Edit Data General",width:"60%",onOpen:s[2]||(s[2]=_=>p()),onClose:s[3]||(s[3]=_=>m())},{footer:g(()=>[i("span",La,[a(ie,{type:"primary",onClick:he,disabled:o(n).loading},{default:g(()=>[H("Submit")]),_:1},8,["disabled"]),a(ie,{type:"secondary",onClick:m,disabled:o(n).loading},{default:g(()=>[H("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Ye,{name:"fade"},{default:g(()=>[L.value?(h(),E(Ze,{key:0,errorMessages:C.value,onResetForm:F},null,8,["errorMessages"])):M("",!0)]),_:1}),fe((h(),E(o(Je),{id:"kt_filter_form",class:"row g-9 my-4"},{default:g(()=>[a(pe,{value:r.value.cbmType,placeholder:"Add CBM Type",label:"CBM Type",name:"omsType",disabled:!0},null,8,["value"]),a(pe,{value:r.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"equipmentModel",disabled:!0},null,8,["value"]),a(pe,{value:r.value.component,placeholder:"Add Component",label:"Component",name:"Component",disabled:!0},null,8,["value"]),a(pe,{value:r.value.parameterFrom,margin:!1,placeholder:"Add Parameter From",label:"Parameter From",name:"parameterFrom",onHandleChange:Q},null,8,["value"]),a(oe,{value:r.value.parameterTo,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",max:255,options:o(n).parameterToOption,onHandleChange:q},null,8,["value","options"]),a(pe,{value:r.value.registerNumber,margin:!1,label:"Register Number",name:"registerNumber",disabled:!0},null,8,["value"]),d.value?M("",!0):(h(),E(et,{key:0,value:r.value.severityLevel,margin:!1,placeholder:"Add Severity Level",label:"Severity Level",name:"severityLevel",max:20,disabled:R.value,onHandleChange:K},null,8,["value","disabled"])),d.value?M("",!0):(h(),E(oe,{key:1,value:r.value.uomFrom,placeholder:"Add Uom From",label:"Uom From",name:"uomFrom",max:40,onHandleChange:X,"is-disabled":R.value,options:o(n).uomOption},null,8,["value","is-disabled","options"])),d.value?M("",!0):(h(),E(oe,{key:2,value:r.value.uomTo,placeholder:"Add Uom To",label:"Uom To",name:"uomTo",max:40,onHandleChange:J,"is-disabled":R.value,options:o(n).uomOption},null,8,["value","is-disabled","options"])),d.value?M("",!0):(h(),E(Fe,{key:3,value:r.value.uomConvertRatio,placeholder:"Add Uom Convert Ratio",label:"Uom Convert Ratio",name:"uomConvertRatio",max:40,disabled:R.value,onHandleChange:te},null,8,["value","disabled"])),i("div",ya,[a(b,{modelValue:r.value.isRequiredThreshold,"onUpdate:modelValue":s[0]||(s[0]=_=>r.value.isRequiredThreshold=_),onChange:ce},null,8,["modelValue"]),Ca]),r.value.isRequiredThreshold?(h(),N("div",Fa,[i("table",null,[_a,(h(!0),N(Ve,null,We(v.value,_=>(h(),N("tr",{key:_.idFe},[_.isActive?(h(),N("td",Sa,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.rating,placeholder:"Add Sample Rating",name:"rating",max:40,onHandleChange:k=>{_e(k,_.idFe)},options:o(n).ratingOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",Ma,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.operatorMin,placeholder:"Add Operator Min",name:"operatorMin",max:40,onHandleChange:k=>{Se(k,_.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",Ra,[d.value?M("",!0):(h(),E(Fe,{key:0,value:_.valueMin,margin:!1,placeholder:"Add Value Min",name:"valueMin",max:20,onHandleChange:k=>{Me(k,_.idFe)}},null,8,["value","onHandleChange"]))])):M("",!0),_.isActive?(h(),N("td",Ea,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.operatorMax,placeholder:"Add Operator Max",name:"operatorMax",max:40,onHandleChange:k=>{U(k,_.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",Ua,[d.value?M("",!0):(h(),E(Fe,{key:0,value:_.valueMax,margin:!1,placeholder:"Add Value Max",name:"valueMax",max:20,onHandleChange:k=>{Z(k,_.idFe)}},null,8,["value","onHandleChange"]))])):M("",!0),_.isActive?(h(),N("td",xa,[i("button",{class:"btn btn-icon btn-bg-light",onClick:Qe(k=>ne(_.idFe),["prevent"])},[a(P,{src:"/media/svg/tables/rows/trash-delete-blue.svg",width:"12",height:"12"})],8,Oa)])):M("",!0)]))),128))]),i("div",wa,[a(ie,{text:"",size:"small",onClick:Y},{default:g(()=>[H("Add more")]),_:1})])])):M("",!0),i("div",ka,[a(ke,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:ue},null,8,["value"])]),i("div",Pa,[a(ke,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:le},null,8,["value"])])]),_:1})),[[B,o(n).loading]])]),_:1},8,["modelValue"])),[[B,o(n).loading]])}}}),Aa={class:"icon"},Ia=ye({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const y=t,e=Ge(),c=A(()=>(y.page-1)*10+1),T=u=>{const n={prop:u.prop,order:u.order};e.setSort(n)};return(u,n)=>{const O=I("inline-svg");return h(),E(o(Ie),{data:y.listData,style:{width:"100%"},onSortChange:T,"empty-text":"No Data"},{default:g(()=>[a(o(f),{label:"No",width:"60",align:"center"},{default:g(w=>[i("span",null,j(c.value+w.$index),1)]),_:1}),a(o(f),{prop:"cbmType",label:"CMB Type","min-width":"170",sortable:""}),a(o(f),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:""}),a(o(f),{prop:"component",label:"Component","min-width":"170",sortable:""}),a(o(f),{prop:"parameterFrom",label:"Parameter From","min-width":"170",sortable:""}),a(o(f),{prop:"parameterTo",label:"Parameter To","min-width":"170",sortable:""}),a(o(f),{prop:"registerNumber",label:"Register Number","min-width":"170",sortable:""}),a(o(f),{prop:"severityLevel",label:"Severity Level","min-width":"170",sortable:""}),a(o(f),{prop:"uomFrom",label:"Uom From","min-width":"170",sortable:""}),a(o(f),{prop:"uomTo",label:"Uom To","min-width":"170",sortable:""}),a(o(f),{prop:"uomConvertRatio",label:"Uom Convert Ratio","min-width":"170",sortable:""}),a(o(f),{prop:"rating",label:"Rating","min-width":"170",sortable:""}),a(o(f),{prop:"operatorMin",label:"Operator Min","min-width":"170",sortable:""}),a(o(f),{prop:"valueMin",label:"Value Min","min-width":"170",sortable:""}),a(o(f),{prop:"operatorMax",label:"Operator Max","min-width":"170",sortable:""}),a(o(f),{prop:"valueMax",label:"Value Max","min-width":"170",sortable:""}),a(o(f),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:g(w=>[i("span",null,j(o(ze)(w.row.startDate)),1)]),_:1}),a(o(f),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:g(w=>[i("span",null,j(o(ze)(w.row.endDate)),1)]),_:1}),a(o(f),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),a(o(f),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:g(w=>[i("div",Aa,[a(O,{src:w.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Ft=t=>(bt("data-v-5e31d1e9"),t=t(),Dt(),t),Na=Ft(()=>i("div",{class:"text-center"},null,-1)),Ha=Ft(()=>i("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[i("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),$a={class:"card"},Va={class:"card-body grid-padding"},Ba={class:"dialog-footer"},Ga=ye({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,T=se(),u=Ge(),n=Le(e,"visibility"),O=()=>{const S=yt(u.validatedData,p=>{const m=p;return{cbmThresholdId:0,cbmType:m.cbmType,equipmentModel:m.equipmentModel,component:m.component,parameterFrom:m.parameterFrom,parameterTo:m.parameterTo,registerNumber:m.registerNumber,severityLevel:m.severityLevel,uomFrom:m.uomFrom,uomTo:m.uomTo,uomConvertRatio:m.uomConvertRatio,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate}});return Object.values(S)},w=()=>{const S=document.getElementById("link-download");S&&S.click()},r=()=>{u.validatedData.length>0?xe("Cancel Upload Data?","Confirm").then(p=>{p.isConfirmed&&L()}):L()},v=async S=>{await u.upload({userAccount:T.user.Name,excelFile:S}),u.stateError&&Ee(u.error)},C=async S=>{S.preventDefault();const p=await u.downloadTemplate("General");mt.saveAs(new Blob([p],{type:"application/octet-stream"}),"MasterDataCBMParameterThresholdGeneral.xlsx")},L=(S=!1)=>{u.resetState(),c("handle-close",S)},d=S=>{u.setIsUploadedState(S)},R=S=>{u.setPage(S)},V=()=>{if(u.validatedData.length<1){w();return}const S=["CBM TYPE","EQUIPMENT MODEL","COMPONENT","PARAMETER FROM","PARAMETER TO","REGISTER NUMBER","SEVERITY LEVEL","UOM FROM","UOM TO","UOM CONVERT RATIO","RATING","OPERATOR MIN","VALUE MIN","OPERATOR MAX","VALUE MAX","START DATE","END DATE","REMARK","STATUS"],p=u.validatedData.map(m=>({cbmType:m.cbmType,equipmentModel:m.equipmentModel,component:m.component,parameterFrom:m.parameterFrom,parameterTo:m.parameterTo,registerNumber:m.registerNumber,severityLevel:m.severityLevel,uomFrom:m.uomFrom,uomTo:m.uomTo,uomConvertRatio:m.uomConvertRatio,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate,remark:m.validationReason,status:m.isValid?"OK":"Error"}));Tt("CBMParameterThreshold",S,p)},$=async()=>{if(u.displayData.length<1){Ee("There is no data to submit");return}if(u.isError){Ee("There is still invalid row(s)");return}xe("Are you sure you want to submit ?").then(async S=>{if(S.isConfirmed){const p=O();if(u.setBulkData(p),await u.bulkInsert(T.user.Name),u.isError){Ee(u.stateError);return}Ne("Form has been successfully submitted!","Ok").then(()=>{L(!0)})}})};return(S,p)=>{const m=I("el-button"),z=I("el-dialog"),W=Pe("loading");return h(),E(z,{title:"Upload Bulk Data",modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=G=>n.value=G),"before-close":r,width:"70%","custom-class":"upload-modal"},{footer:g(()=>[i("div",null,[i("span",Ba,[a(m,{type:"success",onClick:V},{default:g(()=>[H("Download")]),_:1}),a(m,{type:"primary",onClick:$},{default:g(()=>[H("Upload")]),_:1}),a(m,{type:"success",onClick:r},{default:g(()=>[H("Cancel")]),_:1})])])]),default:g(()=>[Na,i("div",{class:"mb-3"},[i("span",null,[H(" Download template "),i("a",{onClick:C,href:"javascript:void(0);",target:"_blank",id:"link-download"},"here"),H(" before uploading file ")])]),fe(a(ft,{isSubmissionUploadSuccess:o(u).isUploaded,onHandleCloseUploadedFile:r,onHandleUpload:v,onHandleSetIsExcelFileUploaded:d},null,8,["isSubmissionUploadSuccess"]),[[W,o(u).uploadLoading]]),Ha,i("div",$a,[i("div",Va,[a(Ia,{"list-data":o(u).displayData,page:o(u).pagination.currentPage},null,8,["list-data","page"])])]),o(u).displayData.length>0?(h(),E(dt,{key:0,onRaisePageChange:p[0]||(p[0]=G=>R(G)),currentPage:o(u).pagination.currentPage,totalPage:o(u).pagination.totalPage,totalPageSize:o(u).pagination.totalPageSize,startPaginationIndex:o(u).pagination.startPaginationIndex,endPaginationIndex:o(u).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):M("",!0)]),_:1},8,["modelValue"])}}}),ja=Ct(Ga,[["__scopeId","data-v-5e31d1e9"]]),za={class:"row g-9 my-4"},Ka={class:"dialog-footer"},Xa=ye({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=Be(),c=t,T=y,u=Le(c,"visibility"),n=A(()=>e.filterData),O=()=>{w(),e.resetFilter()},w=()=>{T("handle-close",!1)},r=U=>{e.setEquipmentModel(U)},v=U=>{e.setEquipmentModelTo(U)},C=U=>{e.setComponent(U)},L=U=>{e.setComponentTo(U)},d=U=>{e.setCbmType(U)},R=U=>{e.setCbmTypeTo(U)},V=U=>{e.setRegisterNumber(U)},$=U=>{e.setRegisterNumberTo(U)},S=U=>{e.setParameterFrom(U)},p=U=>{e.setParameterFromTo(U)},m=U=>{e.setParameterTo(U)},z=U=>{e.setParameterToTo(U)},W=U=>{e.setSeverityLevel(U)},G=U=>{e.setSeverityLevelTo(U)},re=U=>{e.setUomFrom(U)},Q=U=>{e.setUomFromTo(U)},q=U=>{e.setUomTo(U)},K=U=>{e.setUomToTo(U)},X=U=>{e.setUomConvertRatio(U)},J=U=>{e.setUomConvertRatioTo(U)},te=U=>{e.setStartDate(U)},ce=U=>{e.setStartDateTo(U)},_e=U=>{e.setEndDate(U)},Se=U=>{e.setEndDateTo(U)},Me=()=>{const U=e.lastUsedFilterData.equipmentModel!==e.filterData.equipmentModel,Z=e.lastUsedFilterData.equipmentModelTo!==e.filterData.equipmentModelTo,D=e.lastUsedFilterData.component!==e.filterData.component,Y=e.lastUsedFilterData.componentTo!==e.filterData.componentTo,ne=e.lastUsedFilterData.cbmType!==e.filterData.cbmType,ue=e.lastUsedFilterData.cbmTypeTo!==e.filterData.cbmTypeTo,le=e.lastUsedFilterData.registerNumber!==e.filterData.registerNumber,he=e.lastUsedFilterData.registerNumberTo!==e.filterData.registerNumberTo,F=e.lastUsedFilterData.parameterFrom!==e.filterData.parameterFrom,l=e.lastUsedFilterData.parameterFromTo!==e.filterData.parameterFromTo,s=e.lastUsedFilterData.parameterTo!==e.filterData.parameterTo,b=e.lastUsedFilterData.parameterToTo!==e.filterData.parameterToTo,P=e.lastUsedFilterData.severityLevel!==e.filterData.severityLevel,ie=e.lastUsedFilterData.severityLevelTo!==e.filterData.severityLevelTo,ve=e.lastUsedFilterData.uomFrom!==e.filterData.uomFrom,B=e.lastUsedFilterData.uomFromTo!==e.filterData.uomFromTo,_=e.lastUsedFilterData.uomTo!==e.filterData.uomTo,k=e.lastUsedFilterData.uomToTo!==e.filterData.uomToTo,ge=e.lastUsedFilterData.uomConvertRatio!==e.filterData.uomConvertRatio,at=e.lastUsedFilterData.uomConvertRatioTo!==e.filterData.uomConvertRatioTo,ot=e.lastUsedFilterData.startDate!==e.filterData.startDate,rt=e.lastUsedFilterData.startDateTo!==e.filterData.startDateTo,nt=e.lastUsedFilterData.endDate!==e.filterData.endDate,st=e.lastUsedFilterData.endDateTo!==e.filterData.endDateTo;T("handle-close",D||Y||ne||U||Z||ue||le||he||F||s||b||l||P||ie||ve||B||_||k||ge||at||ot||rt||nt||st)};return(U,Z)=>{const D=I("el-button"),Y=I("el-dialog");return h(),E(Y,{modelValue:u.value,"onUpdate:modelValue":Z[0]||(Z[0]=ne=>u.value=ne),title:"Filter Data",width:"60%",onClose:Z[1]||(Z[1]=ne=>w())},{footer:g(()=>[i("span",Ka,[a(D,{type:"secondary",onClick:O},{default:g(()=>[H("Reset")]),_:1}),a(D,{type:"primary",onClick:Me},{default:g(()=>[H("Filter")]),_:1})])]),default:g(()=>[i("div",za,[a(ee,{"value-from":n.value.cbmType,"value-to":n.value.cbmTypeTo,label:"CBM Type",name:"cbmType",options:o(e).cbmTypeOption,onHandleChangeFrom:d,onHandleChangeTo:R},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.equipmentModel,"value-to":n.value.equipmentModelTo,label:"Equipment Model",name:"EquipmentModel",options:o(e).equipmentModelOption,onHandleChangeFrom:r,onHandleChangeTo:v},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.component,"value-to":n.value.componentTo,label:"Component",name:"Component",options:o(e).componentOption,onHandleChangeFrom:C,onHandleChangeTo:L},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.parameterFrom,"value-to":n.value.parameterFromTo,label:"Parameter From",name:"parameterFrom",options:o(e).parameterFromOption,onHandleChangeFrom:S,onHandleChangeTo:p},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.parameterTo,"value-to":n.value.parameterToTo,label:"Parameter To",name:"parameterTo",options:o(e).parameterToOption,onHandleChangeFrom:m,onHandleChangeTo:z},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.registerNumber,"value-to":n.value.registerNumberTo,label:"Register Number",name:"registerNumber",options:o(e).registerNumberOption,onHandleChangeFrom:V,onHandleChangeTo:$},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.severityLevel,"value-to":n.value.severityLevelTo,label:"Severity Level",name:"severityLevel",options:o(e).severityLevelOption,onHandleChangeFrom:W,onHandleChangeTo:G},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomFrom,"value-to":n.value.uomFromTo,label:"Uom From",name:"uomFrom",options:o(e).uomFromOption,onHandleChangeFrom:re,onHandleChangeTo:Q},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomTo,"value-to":n.value.uomToTo,label:"Uom To",name:"uomTo",options:o(e).uomToOption,onHandleChangeFrom:q,onHandleChangeTo:K},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomConvertRatio,"value-to":n.value.uomConvertRatioTo,label:"Uom Convert Ratio",name:"uomConvertRatio",options:o(e).uomConvertRatioOption,onHandleChangeFrom:X,onHandleChangeTo:J},null,8,["value-from","value-to","options"]),a(Ke,{"value-from":n.value.startDate?n.value.startDate.toString():"","value-to":n.value.startDateTo?n.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:te,onHandleChangeTo:ce},null,8,["value-from","value-to"]),a(Ke,{"value-from":n.value.endDate?n.value.endDate.toString():"","value-to":n.value.endDateTo?n.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:_e,onHandleChangeTo:Se},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),Ya={key:0,style:{height:"100px"}},Wa={key:0},Qa={class:"row justify-content-center"},Ja={class:"d-flex justify-content-end"},Za=["disabled","onClick"],eo=["onClick"],to=ye({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["fetch-data","duplicateData","handle-edit"],setup(t,{emit:y}){const e=t,c=Be(),T=Ae(),u=y,n=A(()=>(e.page-1)*10+1),O=qe(""),w=d=>{O.value=d.order;const R={prop:d.prop,order:d.order};c.setSortSpecific(R)},r=(d,R)=>{R.length!=0&&c.getCbmThresholdList(d.cbmThresholdId)},v=async d=>{d.isRequiredThreshold&&!d.thresholdList&&await c.getCbmThresholdList(d.cbmThresholdId);const R=C(d);T.setFormData(R),u("handle-edit")},C=d=>({cbmThresholdId:d.cbmThresholdId,site:d.site,equipmentModel:d.equipmentModel,component:d.component,cbmType:d.cbmType,registerNumber:d.registerNumber,parameterFrom:d.parameterFrom,parameterTo:d.parameterTo,severityLevel:d.severityLevel,uomFrom:d.uomFrom,uomTo:d.uomTo,uomConvertRatio:d.uomConvertRatio,startDate:De(new Date(d.startDate)),endDate:De(new Date(d.endDate)),isRequiredThreshold:d.isRequiredThreshold||!1,thresholdList:d.thresholdList?[...d.thresholdList]:[]}),L=async d=>{console.log(d),d.isRequiredThreshold&&!d.thresholdList&&await c.getCbmThresholdList(d.cbmThresholdId);const R=C(d);T.setFormData(R),u("duplicateData",!0)};return(d,R)=>{const V=I("inline-svg"),$=I("el-tooltip"),S=Pe("loading");return o(c).loading?fe((h(),N("div",Ya,null,512)),[[S,o(c).loading]]):fe((h(),E(o(Ie),{key:1,data:e.listData,style:{width:"100%"},onSortChange:w,"empty-text":"No Data",onExpandChange:r,"row-key":"cbmThresholdId"},{default:g(()=>[a(o(f),{type:"expand"},{default:g(p=>[p.row.thresholdList?(h(),N("div",Wa,[a(o(Ie),{data:p.row.thresholdList,border:!0,style:{width:"40%"}},{default:g(()=>[a(o(f),{label:"Rating",prop:"rating"}),a(o(f),{label:"Operator Min",prop:"operatorMin"}),a(o(f),{label:"Value Min",prop:"valueMin"}),a(o(f),{label:"Operator Max",prop:"operatorMax"}),a(o(f),{label:"Value Max",prop:"valueMax"})]),_:2},1032,["data"])])):M("",!0)]),_:1}),a(o(f),{label:"No",width:"70",align:"center"},{default:g(p=>[i("span",null,j(n.value+p.$index),1)]),_:1}),a(o(f),{prop:"cbmType",label:"CBM Type","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.cbmType),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"site",label:"Site","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.site),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.equipmentModel),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.component),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"parameterFrom",label:"Parameter From","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.parameterFrom),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"parameterTo",label:"Parameter To","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.parameterTo),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomFrom",label:"Uom From","min-width":"130",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.uomFrom),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomTo",label:"Uom To","min-width":"130",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.uomTo),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"uomConvertRatio",label:"Uom Convert Ratio","min-width":"170",sortable:"","sort-method":()=>o(de)(O.value)},{default:g(({row:p})=>[i("span",null,j(p.uomConvertRatio),1)]),_:1},8,["sort-method"]),a(o(f),{prop:"isActive",label:"Is Active",width:"100",sortable:"",align:"center"},{default:g(p=>[i("div",Qa,[p.row.isActive?(h(),E(V,{key:0,src:"/media/svg/tables/rows/check.svg"})):(h(),E(V,{key:1,src:"/media/svg/tables/rows/minus.svg"}))])]),_:1}),a(o(f),{label:"",width:"80"},{default:g(p=>[i("div",Ja,[a($,{class:"box-item",effect:"dark",content:p.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:g(()=>[i("div",null,[i("button",{disabled:!p.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:m=>v(p.row)},[a(V,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Za)])]),_:2},1032,["content"]),a($,{class:"box-item",effect:"dark",content:"Add new data based on table rows",placement:"top"},{default:g(()=>[i("div",null,[i("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:m=>L(p.row)},[a(V,{src:"/media/svg/tables/rows/paste-icon-button-blue.svg",width:"12",height:"12"})],8,eo)])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[S,o(c).loading]])}}}),ao={key:4},oo={class:"d-flex"},ro=i("span",{class:"ms-5"},"Required to maintain threshold",-1),no={key:0},so=i("tr",null,[i("th",null,"Sample Rating"),i("th",null,"Operator Min"),i("th",null,"Value Min"),i("th",null,"Operator Max"),i("th",null,"Value Max"),i("th")],-1),lo={class:"d-flex align-items-start"},io=["onClick"],uo={class:"d-flex justify-content-end"},mo={class:"col-md-6 fv-row fv-plugins-icon-container"},po={class:"col-md-6 fv-row fv-plugins-icon-container"},co={class:"dialog-footer"},ho=ye({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,{stateCondition:T,calStateCondition:u}=tt(),n=Ae(),O=se(),w=Le(e,"visibility"),r=A(()=>n.formData),v=A(()=>r.value.cbmType=="Oil Data"),C=A(()=>r.value.thresholdList),L=A(()=>n.errors),d=A(()=>n.isError),R=A(()=>T.value===2);Xe(()=>{r.value&&r.value.parameterTo!=""&&n.getRegisterNumber(r.value.cbmType,r.value.parameterTo)});const V=Oe().shape({cbmType:x().required("CBM Type is mandatory"),site:x().required("Site is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),registerNumber:x().required("Register Number is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),uomConvertRatio:x().required("Uom Convert Ratio is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),$=Oe().shape({cbmType:x().required("CBM Type is mandatory"),site:x().required("Site is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),registerNumber:x().required("Register Number is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),S=()=>{X("3")},p=()=>{re(""),z(""),W(""),G(""),Q(""),q(""),K(""),X(""),J(""),te(""),ce(""),le(""),he(""),C.value.length=0},m=(s=!1)=>{l(),p(),n.resetState(),c("handle-close",s)},z=s=>{r.value.site=s,W(""),n.getLookupEquipmentModelForSpecific()},W=s=>{r.value.equipmentModel=s,G(""),n.getLookupComponent()},G=s=>{r.value.component=s},re=async s=>{s=="VIMS"?X("3"):s=="Oil Data"&&(X("3"),ce("1"),K(""),Q("")),u(s),r.value.cbmType=s,await n.getLookupParameterTo(s),r.value.parameterTo=""},Q=s=>{r.value.registerNumber=s},q=s=>{r.value.parameterFrom=s},K=s=>{r.value.parameterTo=s},X=s=>{r.value.severityLevel=s},J=s=>{r.value.uomFrom=s},te=s=>{r.value.uomTo=s},ce=s=>{r.value.uomConvertRatio=s},_e=s=>{s?["A","B","C","X"].forEach((P,ie)=>{C.value.push({id:0,idFe:ie+1,rating:P,operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})}):C.value.length=0},Se=(s,b)=>{const P=Y(b);P!=-1&&(C.value[P].rating=s)},Me=(s,b)=>{const P=Y(b);P!=-1&&(C.value[P].operatorMin=s)},U=(s,b)=>{const P=Y(b);P!=-1&&(C.value[P].valueMin=s)},Z=(s,b)=>{const P=Y(b);P!=-1&&(C.value[P].operatorMax=s)},D=(s,b)=>{const P=Y(b);P!=-1&&(C.value[P].valueMax=s)},Y=s=>C.value.findIndex(P=>P.idFe==s),ne=()=>{const s=C.value.length,b=C.value[s==0?0:s-1];C.value.push({id:0,idFe:b.idFe+1,rating:"A",operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})},ue=s=>{const b=Y(s);b!=-1&&C.value.splice(b,1)},le=s=>{r.value.startDate=s},he=s=>{r.value.endDate=s},F=async()=>{l();let s=$;switch(T.value){case 2:s=$,X(""),J(""),te(""),ce(""),r.value.isRequiredThreshold=!1,C.value.length=0;break;default:s=V;break}await s.validate(r.value,{abortEarly:!1}).catch(b=>{n.setErrors(b.errors)}),!d.value&&xe("Are you sure you want to submit ?").then(async b=>{b.isConfirmed&&n.insertData(O.user.Name,!0).then(()=>{n.isError||Ne("Form has been successfully submitted!","Ok").then(()=>{m(!0)})})})},l=()=>{n.setErrors([])};return(s,b)=>{const P=I("el-switch"),ie=I("inline-svg"),ve=I("el-button"),B=I("el-dialog"),_=Pe("loading");return fe((h(),E(B,{modelValue:w.value,"onUpdate:modelValue":b[1]||(b[1]=k=>w.value=k),title:"New Data Specific",width:"60%",onOpen:b[2]||(b[2]=k=>S()),onClose:b[3]||(b[3]=k=>m())},{footer:g(()=>[i("span",co,[a(ve,{type:"primary",onClick:F,disabled:o(n).loading},{default:g(()=>[H("Submit")]),_:1},8,["disabled"]),a(ve,{type:"secondary",onClick:m,disabled:o(n).loading},{default:g(()=>[H("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Ye,{name:"fade"},{default:g(()=>[d.value?(h(),E(Ze,{key:0,errorMessages:L.value,onResetForm:l},null,8,["errorMessages"])):M("",!0)]),_:1}),fe((h(),E(o(Je),{id:"kt_filter_form",class:"row g-9 my-4"},{default:g(()=>[a(oe,{value:r.value.cbmType,placeholder:"Add CBM Type",label:"CBM Type",name:"omsType",max:40,onHandleChange:re,options:o(n).cbmTypeOption},null,8,["value","options"]),a(oe,{value:r.value.site,placeholder:"Add Site",label:"Site",name:"Site",onHandleChange:z,options:o(n).siteOption},null,8,["value","options"]),a(oe,{value:r.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"EquipmentModel",max:20,onHandleChange:W,options:o(n).equipmentModelOption},null,8,["value","options"]),a(oe,{value:r.value.component,placeholder:"Add Component",label:"Component",name:"Component",max:40,onHandleChange:G,options:o(n).componentOption},null,8,["value","options"]),a(pe,{value:r.value.parameterFrom,margin:!1,placeholder:"Add Parameter From",label:"Parameter From",name:"parameterFrom",onHandleChange:q},null,8,["value"]),a(oe,{value:r.value.parameterTo,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",max:255,options:o(n).parameterToOption,onHandleChange:K},null,8,["value","options"]),a(pe,{value:r.value.registerNumber,margin:!1,label:"Register Number",name:"registerNumber",max:20,disabled:!0,onHandleChange:Q},null,8,["value"]),R.value?M("",!0):(h(),E(et,{key:0,value:r.value.severityLevel,margin:!1,placeholder:"Add Severity Level",label:"Severity Level",name:"severityLevel",max:20,disabled:v.value,onHandleChange:X},null,8,["value","disabled"])),!R.value||!v.value?(h(),E(oe,{key:1,value:r.value.uomFrom,placeholder:"Add Uom From",label:"Uom From",name:"uomFrom",max:40,onHandleChange:J,options:o(n).uomOption},null,8,["value","options"])):M("",!0),!R.value||!v.value?(h(),E(oe,{key:2,value:r.value.uomTo,placeholder:"Add Uom To",label:"Uom To",name:"uomTo",max:40,onHandleChange:te,options:o(n).uomOption},null,8,["value","options"])):M("",!0),!R.value||!v.value?(h(),E(Fe,{key:3,value:r.value.uomConvertRatio,placeholder:"Add Uom Convert Ratio",label:"Uom Convert Ratio",name:"uomConvertRatio",max:40,onHandleChange:ce,disabled:v.value},null,8,["value","disabled"])):M("",!0),R.value?M("",!0):(h(),N("div",ao,[i("div",oo,[a(P,{modelValue:r.value.isRequiredThreshold,"onUpdate:modelValue":b[0]||(b[0]=k=>r.value.isRequiredThreshold=k),onChange:_e},null,8,["modelValue"]),ro]),r.value.isRequiredThreshold?(h(),N("div",no,[i("table",null,[so,(h(!0),N(Ve,null,We(C.value,k=>(h(),N("tr",{key:k.idFe},[i("td",null,[a(Ce,{value:k.rating,placeholder:"Add Sample Rating",name:"rating",max:40,onHandleChange:ge=>{Se(ge,k.idFe)},options:o(n).ratingOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Ce,{value:k.operatorMin,placeholder:"Add Operator Min",name:"operatorMin",max:40,onHandleChange:ge=>{Me(ge,k.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Fe,{value:k.valueMin,margin:!1,placeholder:"Add Value Min",name:"valueMin",max:20,onHandleChange:ge=>{U(ge,k.idFe)}},null,8,["value","onHandleChange"])]),i("td",null,[a(Ce,{value:k.operatorMax,placeholder:"Add Operator Max",name:"operatorMax",max:40,onHandleChange:ge=>{Z(ge,k.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"])]),i("td",null,[a(Fe,{value:k.valueMax,margin:!1,placeholder:"Add Value Max",name:"valueMax",max:20,onHandleChange:ge=>{D(ge,k.idFe)}},null,8,["value","onHandleChange"])]),i("td",lo,[i("button",{class:"btn btn-icon btn-bg-light",onClick:Qe(ge=>ue(k.idFe),["prevent"])},[a(ie,{src:"/media/svg/tables/rows/trash-delete-blue.svg",width:"12",height:"12"})],8,io)])]))),128))]),i("div",uo,[a(ve,{text:"",size:"small",onClick:ne},{default:g(()=>[H("Add more")]),_:1})])])):M("",!0)])),i("div",mo,[a(ke,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:le},null,8,["value"])]),i("div",po,[a(ke,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:he},null,8,["value"])])]),_:1})),[[_,o(n).loading]])]),_:1},8,["modelValue"])),[[_,o(n).loading]])}}}),vo={class:"d-flex"},go=i("span",{class:"ms-5"},"Required to maintain threshold",-1),To={key:4},bo=i("tr",null,[i("th",null,"Sample Rating"),i("th",null,"Operator Min"),i("th",null,"Value Min"),i("th",null,"Operator Max"),i("th",null,"Value Max"),i("th")],-1),Do={key:0},fo={key:1},yo={key:2},Co={key:3},Fo={key:4},_o={key:5,class:"d-flex align-items-start"},So=["onClick"],Mo={class:"d-flex justify-content-end"},Ro={class:"col-md-6 fv-row fv-plugins-icon-container"},Eo={class:"col-md-6 fv-row fv-plugins-icon-container"},Uo={class:"dialog-footer"},xo=ye({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,{stateCondition:T,calStateCondition:u}=tt(),n=Ae(),O=se(),w=Le(e,"visibility"),r=A(()=>n.formData),v=A(()=>r.value.thresholdList),C=A(()=>n.errors),L=A(()=>n.isError),d=A(()=>T.value===2),R=A(()=>r.value.cbmType=="Oil Data");Xe(()=>{r.value&&r.value.parameterTo!=""&&n.getRegisterNumber(r.value.cbmType,r.value.parameterTo)});const V=Oe().shape({cbmType:x().required("CBM Type is mandatory"),site:x().required("Site is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),registerNumber:x().required("Register Number is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),severityLevel:x().required("Severity Level is mandatory"),uomConvertRatio:x().required("Uom Convert Ratio is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),$=Oe().shape({cbmType:x().required("CBM Type is mandatory"),site:x().required("Site is mandatory"),equipmentModel:x().required("Equipment Model is mandatory"),component:x().required("Component is mandatory"),registerNumber:x().required("Register Number is mandatory"),parameterFrom:x().required("Parameter From is mandatory"),parameterTo:x().required("Parameter To is mandatory"),uomConvertRatio:x().required("Uom Convert Ratio is mandatory"),startDate:me().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:me().required("End Date is mandatory").min(we("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),S=()=>{G(""),z(""),W(""),re(""),Q(""),q(""),K(""),X(""),J(""),te(""),ue(""),le(""),v.value.length=0},p=async()=>{await n.getLookupParameterTo(r.value.cbmType)},m=()=>{F(),S(),n.resetState(),c("handle-close")},z=l=>{console.log(l),r.value.equipmentModel=l},W=l=>{r.value.component=l},G=async l=>{u(l),r.value.cbmType=l,await n.getLookupParameterTo(l),r.value.parameterTo=""},re=l=>{r.value.registerNumber=l},Q=l=>{r.value.parameterFrom=l},q=l=>{r.value.parameterTo=l},K=l=>{r.value.severityLevel=l},X=l=>{r.value.uomFrom=l},J=l=>{r.value.uomTo=l},te=l=>{r.value.uomConvertRatio=l},ce=l=>{l?["A","B","C","X"].map((b,P)=>{v.value.push({id:0,idFe:P+1,rating:b,operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})}):v.value.length=0},_e=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].rating=l)},Se=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].operatorMin=l)},Me=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].valueMin=l)},U=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].operatorMax=l)},Z=(l,s)=>{const b=D(s);b!=-1&&(v.value[b].valueMax=l)},D=l=>v.value.findIndex(b=>b.idFe==l),Y=()=>{const l=v.value.length,s=v.value[l==0?0:l-1];v.value.push({id:0,idFe:s.idFe+1,rating:"A",operatorMin:">=",valueMin:"-999999.000",operatorMax:"<",valueMax:"5.000",isActive:!0})},ne=l=>{const s=D(l);s!=-1&&(v.value[s].id!=0?v.value[s].isActive=!1:v.value.splice(s,1))},ue=l=>{r.value.startDate=l},le=l=>{r.value.endDate=l},he=async()=>{F();let l=$;switch(T.value){case 2:l=$,K(""),v.value.length=0;break;default:l=V;break}await l.validate(r.value,{abortEarly:!1}).catch(s=>{n.setErrors(s.errors)}),!L.value&&xe("Are you sure you want to submit ?").then(async s=>{s.isConfirmed&&n.updateData(O.user.Name,!0).then(()=>{n.isError||Ne("Form has been successfully submitted!","Ok").then(()=>{m()})})})},F=()=>{n.setErrors([])};return(l,s)=>{const b=I("el-switch"),P=I("inline-svg"),ie=I("el-button"),ve=I("el-dialog"),B=Pe("loading");return fe((h(),E(ve,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=_=>w.value=_),title:"Edit Data Specific",width:"60%",onOpen:s[2]||(s[2]=_=>p()),onClose:s[3]||(s[3]=_=>m())},{footer:g(()=>[i("span",Uo,[a(ie,{type:"primary",onClick:he,disabled:o(n).loading},{default:g(()=>[H("Submit")]),_:1},8,["disabled"]),a(ie,{type:"secondary",onClick:m,disabled:o(n).loading},{default:g(()=>[H("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Ye,{name:"fade"},{default:g(()=>[L.value?(h(),E(Ze,{key:0,errorMessages:C.value,onResetForm:F},null,8,["errorMessages"])):M("",!0)]),_:1}),fe((h(),E(o(Je),{id:"kt_filter_form",class:"row g-9 my-4"},{default:g(()=>[a(pe,{value:r.value.cbmType,label:"CBM Type",name:"omsType",disabled:!0},null,8,["value"]),a(pe,{value:r.value.site||"",label:"Site",name:"site",disabled:!0},null,8,["value"]),a(pe,{value:r.value.equipmentModel,label:"Equipment Model",name:"equipmentModel",disabled:!0},null,8,["value"]),a(pe,{value:r.value.component,label:"Component",name:"Component",disabled:!0},null,8,["value"]),a(pe,{value:r.value.parameterFrom,margin:!1,placeholder:"Add Parameter From",label:"Parameter From",name:"parameterFrom",onHandleChange:Q},null,8,["value"]),a(oe,{value:r.value.parameterTo,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",max:255,options:o(n).parameterToOption,onHandleChange:q},null,8,["value","options"]),a(pe,{value:r.value.registerNumber,margin:!1,label:"Register Number",name:"registerNumber",disabled:!0},null,8,["value"]),d.value?M("",!0):(h(),E(et,{key:0,value:r.value.severityLevel,margin:!1,placeholder:"Add Severity Level",label:"Severity Level",name:"severityLevel",max:20,disabled:R.value,onHandleChange:K},null,8,["value","disabled"])),d.value?M("",!0):(h(),E(oe,{key:1,value:r.value.uomFrom,placeholder:"Add Uom From",label:"Uom From",name:"uomFrom",max:40,onHandleChange:X,"is-disabled":R.value,options:o(n).uomOption},null,8,["value","is-disabled","options"])),d.value?M("",!0):(h(),E(oe,{key:2,value:r.value.uomTo,placeholder:"Add Uom To",label:"Uom To",name:"uomTo",max:40,onHandleChange:J,"is-disabled":R.value,options:o(n).uomOption},null,8,["value","is-disabled","options"])),d.value?M("",!0):(h(),E(Fe,{key:3,value:r.value.uomConvertRatio,placeholder:"Add Uom Convert Ratio",label:"Uom Convert Ratio",name:"uomConvertRatio",max:40,disabled:R.value,onHandleChange:te},null,8,["value","disabled"])),i("div",vo,[a(b,{modelValue:r.value.isRequiredThreshold,"onUpdate:modelValue":s[0]||(s[0]=_=>r.value.isRequiredThreshold=_),onChange:ce},null,8,["modelValue"]),go]),r.value.isRequiredThreshold?(h(),N("div",To,[i("table",null,[bo,(h(!0),N(Ve,null,We(v.value,_=>(h(),N("tr",{key:_.idFe},[_.isActive?(h(),N("td",Do,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.rating,placeholder:"Add Sample Rating",name:"rating",max:40,onHandleChange:k=>{_e(k,_.idFe)},options:o(n).ratingOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",fo,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.operatorMin,placeholder:"Add Operator Min",name:"operatorMin",max:40,onHandleChange:k=>{Se(k,_.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",yo,[d.value?M("",!0):(h(),E(Fe,{key:0,value:_.valueMin,margin:!1,placeholder:"Add Value Min",name:"valueMin",max:20,onHandleChange:k=>{Me(k,_.idFe)}},null,8,["value","onHandleChange"]))])):M("",!0),_.isActive?(h(),N("td",Co,[d.value?M("",!0):(h(),E(Ce,{key:0,value:_.operatorMax,placeholder:"Add Operator Max",name:"operatorMax",max:40,onHandleChange:k=>{U(k,_.idFe)},options:o(n).operatorOption},null,8,["value","onHandleChange","options"]))])):M("",!0),_.isActive?(h(),N("td",Fo,[d.value?M("",!0):(h(),E(Fe,{key:0,value:_.valueMax,margin:!1,placeholder:"Add Value Max",name:"valueMax",max:20,onHandleChange:k=>{Z(k,_.idFe)}},null,8,["value","onHandleChange"]))])):M("",!0),_.isActive?(h(),N("td",_o,[i("button",{class:"btn btn-icon btn-bg-light",onClick:Qe(k=>ne(_.idFe),["prevent"])},[a(P,{src:"/media/svg/tables/rows/trash-delete-blue.svg",width:"12",height:"12"})],8,So)])):M("",!0)]))),128))]),i("div",Mo,[a(ie,{text:"",size:"small",onClick:Y},{default:g(()=>[H("Add more")]),_:1})])])):M("",!0),i("div",Ro,[a(ke,{value:r.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:ue},null,8,["value"])]),i("div",Eo,[a(ke,{value:r.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:le},null,8,["value"])])]),_:1})),[[B,o(n).loading]])]),_:1},8,["modelValue"])),[[B,o(n).loading]])}}}),Oo={class:"icon"},wo=ye({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const y=t,e=Ge(),c=A(()=>(y.page-1)*10+1),T=u=>{const n={prop:u.prop,order:u.order};e.setSort(n)};return(u,n)=>{const O=I("inline-svg");return h(),E(o(Ie),{data:y.listData,style:{width:"100%"},onSortChange:T,"empty-text":"No Data"},{default:g(()=>[a(o(f),{label:"No",width:"60",align:"center"},{default:g(w=>[i("span",null,j(c.value+w.$index),1)]),_:1}),a(o(f),{prop:"cbmType",label:"CMB Type","min-width":"170",sortable:""}),a(o(f),{prop:"site",label:"Site","min-width":"170",sortable:""}),a(o(f),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:""}),a(o(f),{prop:"component",label:"Component","min-width":"170",sortable:""}),a(o(f),{prop:"parameterFrom",label:"Parameter From","min-width":"170",sortable:""}),a(o(f),{prop:"parameterTo",label:"Parameter To","min-width":"170",sortable:""}),a(o(f),{prop:"registerNumber",label:"Register Number","min-width":"170",sortable:""}),a(o(f),{prop:"severityLevel",label:"Severity Level","min-width":"170",sortable:""}),a(o(f),{prop:"uomFrom",label:"Uom From","min-width":"170",sortable:""}),a(o(f),{prop:"uomTo",label:"Uom To","min-width":"170",sortable:""}),a(o(f),{prop:"uomConvertRatio",label:"Uom Convert Ratio","min-width":"170",sortable:""}),a(o(f),{prop:"rating",label:"Rating","min-width":"170",sortable:""}),a(o(f),{prop:"operatorMin",label:"Operator Min","min-width":"170",sortable:""}),a(o(f),{prop:"valueMin",label:"Value Min","min-width":"170",sortable:""}),a(o(f),{prop:"operatorMax",label:"Operator Max","min-width":"170",sortable:""}),a(o(f),{prop:"valueMax",label:"Value Max","min-width":"170",sortable:""}),a(o(f),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:g(w=>[i("span",null,j(o(ze)(w.row.startDate)),1)]),_:1}),a(o(f),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:g(w=>[i("span",null,j(o(ze)(w.row.endDate)),1)]),_:1}),a(o(f),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),a(o(f),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:g(w=>[i("div",Oo,[a(O,{src:w.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),_t=t=>(bt("data-v-0ac65b6e"),t=t(),Dt(),t),ko=_t(()=>i("div",{class:"text-center"},null,-1)),Po=_t(()=>i("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[i("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),Lo={class:"card"},qo={class:"card-body grid-padding"},Ao={class:"dialog-footer"},Io=ye({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:y}){const e=t,c=y,T=se(),u=Ge(),n=Le(e,"visibility"),O=()=>{const S=yt(u.validatedData,p=>{const m=p;return{cbmThresholdId:0,cbmType:m.cbmType,site:m.site,equipmentModel:m.equipmentModel,component:m.component,parameterFrom:m.parameterFrom,parameterTo:m.parameterTo,registerNumber:m.registerNumber,severityLevel:m.severityLevel,uomFrom:m.uomFrom,uomTo:m.uomTo,uomConvertRatio:m.uomConvertRatio,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate}});return Object.values(S)},w=()=>{const S=document.getElementById("link-download");S&&S.click()},r=()=>{u.validatedData.length>0?xe("Cancel Upload Data?","Confirm").then(p=>{p.isConfirmed&&L()}):L()},v=async S=>{await u.upload({userAccount:T.user.Name,excelFile:S},!0),u.stateError&&Ee(u.error)},C=async S=>{S.preventDefault();const p=await u.downloadTemplate("Specific");mt.saveAs(new Blob([p],{type:"application/octet-stream"}),"MasterDataCBMParameterThresholdSpecific.xlsx")},L=(S=!1)=>{u.resetState(),c("handle-close",S)},d=S=>{u.setIsUploadedState(S)},R=S=>{u.setPage(S)},V=()=>{if(u.validatedData.length<1){w();return}const S=["CBM TYPE","SITE","EQUIPMENT MODEL","COMPONENT","PARAMETER FROM","PARAMETER TO","REGISTER NUMBER","SEVERITY LEVEL","UOM FROM","UOM TO","UOM CONVERT RATIO","RATING","OPERATOR MIN","VALUE MIN","OPERATOR MAX","VALUE MAX","START DATE","END DATE","REMARK","STATUS"],p=u.validatedData.map(m=>({cbmType:m.cbmType,site:m.site,equipmentModel:m.equipmentModel,component:m.component,parameterFrom:m.parameterFrom,parameterTo:m.parameterTo,registerNumber:m.registerNumber,severityLevel:m.severityLevel,uomFrom:m.uomFrom,uomTo:m.uomTo,uomConvertRatio:m.uomConvertRatio,rating:m.rating,operatorMin:m.operatorMin,valueMin:m.valueMin,operatorMax:m.operatorMax,valueMax:m.valueMax,startDate:m.startDate,endDate:m.endDate,remark:m.validationReason,status:m.isValid?"OK":"Error"}));Tt("CBMParameterThreshold",S,p)},$=async()=>{if(u.displayData.length<1){Ee("There is no data to submit");return}if(u.isError){Ee("There is still invalid row(s)");return}xe("Are you sure you want to submit ?").then(async S=>{if(S.isConfirmed){const p=O();if(u.setBulkData(p),await u.bulkInsert(T.user.Name,!0),u.isError){Ee(u.stateError);return}Ne("Form has been successfully submitted!","Ok").then(()=>{L(!0)})}})};return(S,p)=>{const m=I("el-button"),z=I("el-dialog"),W=Pe("loading");return h(),E(z,{title:"Upload Bulk Data",modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=G=>n.value=G),"before-close":r,width:"70%","custom-class":"upload-modal"},{footer:g(()=>[i("div",null,[i("span",Ao,[a(m,{type:"success",onClick:V},{default:g(()=>[H("Download")]),_:1}),a(m,{type:"primary",onClick:$},{default:g(()=>[H("Upload")]),_:1}),a(m,{type:"success",onClick:r},{default:g(()=>[H("Cancel")]),_:1})])])]),default:g(()=>[ko,i("div",{class:"mb-3"},[i("span",null,[H(" Download template "),i("a",{onClick:C,href:"javascript:void(0);",target:"_blank",id:"link-download"},"here"),H(" before uploading file ")])]),fe(a(ft,{isSubmissionUploadSuccess:o(u).isUploaded,onHandleCloseUploadedFile:r,onHandleUpload:v,onHandleSetIsExcelFileUploaded:d},null,8,["isSubmissionUploadSuccess"]),[[W,o(u).uploadLoading]]),Po,i("div",Lo,[i("div",qo,[a(wo,{"list-data":o(u).displayData,page:o(u).pagination.currentPage},null,8,["list-data","page"])])]),o(u).displayData.length>0?(h(),E(dt,{key:0,onRaisePageChange:p[0]||(p[0]=G=>R(G)),currentPage:o(u).pagination.currentPage,totalPage:o(u).pagination.totalPage,totalPageSize:o(u).pagination.totalPageSize,startPaginationIndex:o(u).pagination.startPaginationIndex,endPaginationIndex:o(u).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):M("",!0)]),_:1},8,["modelValue"])}}}),No=Ct(Io,[["__scopeId","data-v-0ac65b6e"]]),Ho={class:"row g-9 my-4"},$o={class:"dialog-footer"},Vo=ye({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:y}){const e=Be(),c=t,T=y,u=Le(c,"visibility"),n=A(()=>e.filterData),O=()=>{w(),e.resetFilter()},w=()=>{T("handle-close",!1)},r=D=>{e.setSite(D)},v=D=>{e.setSiteTo(D)},C=D=>{e.setEquipmentModel(D)},L=D=>{e.setEquipmentModelTo(D)},d=D=>{e.setComponent(D)},R=D=>{e.setComponentTo(D)},V=D=>{e.setCbmType(D)},$=D=>{e.setCbmTypeTo(D)},S=D=>{e.setRegisterNumber(D)},p=D=>{e.setRegisterNumberTo(D)},m=D=>{e.setParameterFrom(D)},z=D=>{e.setParameterFromTo(D)},W=D=>{e.setParameterTo(D)},G=D=>{e.setParameterToTo(D)},re=D=>{e.setSeverityLevel(D)},Q=D=>{e.setSeverityLevelTo(D)},q=D=>{e.setUomFrom(D)},K=D=>{e.setUomFromTo(D)},X=D=>{e.setUomTo(D)},J=D=>{e.setUomToTo(D)},te=D=>{e.setUomConvertRatio(D)},ce=D=>{e.setUomConvertRatioTo(D)},_e=D=>{e.setStartDate(D)},Se=D=>{e.setStartDateTo(D)},Me=D=>{e.setEndDate(D)},U=D=>{e.setEndDateTo(D)},Z=()=>{const D=e.lastUsedFilterData.site!==e.filterData.site,Y=e.lastUsedFilterData.siteTo!==e.filterData.siteTo,ne=e.lastUsedFilterData.equipmentModel!==e.filterData.equipmentModel,ue=e.lastUsedFilterData.equipmentModelTo!==e.filterData.equipmentModelTo,le=e.lastUsedFilterData.component!==e.filterData.component,he=e.lastUsedFilterData.componentTo!==e.filterData.componentTo,F=e.lastUsedFilterData.cbmType!==e.filterData.cbmType,l=e.lastUsedFilterData.cbmTypeTo!==e.filterData.cbmTypeTo,s=e.lastUsedFilterData.registerNumber!==e.filterData.registerNumber,b=e.lastUsedFilterData.registerNumberTo!==e.filterData.registerNumberTo,P=e.lastUsedFilterData.parameterFrom!==e.filterData.parameterFrom,ie=e.lastUsedFilterData.parameterFromTo!==e.filterData.parameterFromTo,ve=e.lastUsedFilterData.parameterTo!==e.filterData.parameterTo,B=e.lastUsedFilterData.parameterToTo!==e.filterData.parameterToTo,_=e.lastUsedFilterData.severityLevel!==e.filterData.severityLevel,k=e.lastUsedFilterData.severityLevelTo!==e.filterData.severityLevelTo,ge=e.lastUsedFilterData.uomFrom!==e.filterData.uomFrom,at=e.lastUsedFilterData.uomFromTo!==e.filterData.uomFromTo,ot=e.lastUsedFilterData.uomTo!==e.filterData.uomTo,rt=e.lastUsedFilterData.uomToTo!==e.filterData.uomToTo,nt=e.lastUsedFilterData.uomConvertRatio!==e.filterData.uomConvertRatio,st=e.lastUsedFilterData.uomConvertRatioTo!==e.filterData.uomConvertRatioTo,pt=e.lastUsedFilterData.startDate!==e.filterData.startDate,St=e.lastUsedFilterData.startDateTo!==e.filterData.startDateTo,Mt=e.lastUsedFilterData.endDate!==e.filterData.endDate,Rt=e.lastUsedFilterData.endDateTo!==e.filterData.endDateTo;T("handle-close",D||Y||le||he||F||ne||ue||l||s||b||P||ve||B||ie||_||k||ge||at||ot||rt||nt||st||pt||St||Mt||Rt)};return(D,Y)=>{const ne=I("el-button"),ue=I("el-dialog");return h(),E(ue,{modelValue:u.value,"onUpdate:modelValue":Y[0]||(Y[0]=le=>u.value=le),title:"Filter Data",width:"60%",onClose:Y[1]||(Y[1]=le=>w())},{footer:g(()=>[i("span",$o,[a(ne,{type:"secondary",onClick:O},{default:g(()=>[H("Reset")]),_:1}),a(ne,{type:"primary",onClick:Z},{default:g(()=>[H("Filter")]),_:1})])]),default:g(()=>[i("div",Ho,[a(ee,{"value-from":n.value.cbmType,"value-to":n.value.cbmTypeTo,label:"CBM Type",name:"cbmType",options:o(e).cbmTypeOption,onHandleChangeFrom:V,onHandleChangeTo:$},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.site,"value-to":n.value.siteTo,label:"Site",name:"Site",options:o(e).siteOption,onHandleChangeFrom:r,onHandleChangeTo:v},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.equipmentModel,"value-to":n.value.equipmentModelTo,label:"Equipment Model",name:"EquipmentModel",options:o(e).equipmentModelOption,onHandleChangeFrom:C,onHandleChangeTo:L},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.component,"value-to":n.value.componentTo,label:"Component",name:"Component",options:o(e).componentOption,onHandleChangeFrom:d,onHandleChangeTo:R},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.parameterFrom,"value-to":n.value.parameterFromTo,label:"Parameter From",name:"parameterFrom",options:o(e).parameterFromOption,onHandleChangeFrom:m,onHandleChangeTo:z},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.parameterTo,"value-to":n.value.parameterToTo,label:"Parameter To",name:"parameterTo",options:o(e).parameterToOption,onHandleChangeFrom:W,onHandleChangeTo:G},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.registerNumber,"value-to":n.value.registerNumberTo,label:"Register Number",name:"registerNumber",options:o(e).registerNumberOption,onHandleChangeFrom:S,onHandleChangeTo:p},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.severityLevel,"value-to":n.value.severityLevelTo,label:"Severity Level",name:"severityLevel",options:o(e).severityLevelOption,onHandleChangeFrom:re,onHandleChangeTo:Q},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomFrom,"value-to":n.value.uomFromTo,label:"Uom From",name:"uomFrom",options:o(e).uomFromOption,onHandleChangeFrom:q,onHandleChangeTo:K},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomTo,"value-to":n.value.uomToTo,label:"Uom To",name:"uomTo",options:o(e).uomToOption,onHandleChangeFrom:X,onHandleChangeTo:J},null,8,["value-from","value-to","options"]),a(ee,{"value-from":n.value.uomConvertRatio,"value-to":n.value.uomConvertRatioTo,label:"Uom Convert Ratio",name:"uomConvertRatio",options:o(e).uomConvertRatioOption,onHandleChangeFrom:te,onHandleChangeTo:ce},null,8,["value-from","value-to","options"]),a(Ke,{"value-from":n.value.startDate?n.value.startDate.toString():"","value-to":n.value.startDateTo?n.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:_e,onHandleChangeTo:Se},null,8,["value-from","value-to"]),a(Ke,{"value-from":n.value.endDate?n.value.endDate.toString():"","value-to":n.value.endDateTo?n.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:Me,onHandleChangeTo:U},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),Bo={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Go={class:"d-flex justify-content-between align-items-center ms-auto"},jo={class:"card"},zo={class:"card-body grid-padding"},Ko={class:"my-5"},sn=ye({__name:"Index",setup(t){const y=Et(),e=Be(),c=Ae(),T=Ge(),u=qe(!1),n=qe(!1),O=qe(!1),w=qe(!1),r=A(()=>e.activeTab),v=A(()=>e.displayData),C=A(()=>e.pagination),L=q=>{r.value=="General"?e.setPage(q):e.setPageSpecific(q)},d=async q=>{e.resetState(),c.resetState(),T.resetState(),q.paneName==="General"?await e.setPage(1):await e.setPageSpecific(1),console.log(r.value),await e.getLookup(r.value=="Specific"),await c.getLookup(r.value=="Specific")};Zt(async()=>{y.dispatch(xt.ACTIVE_PAGE,lt().meta.parentMenu),Ut("CBM Parameter Threshold",[{pageName:lt().meta.parentMenu,pageRoute:lt().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-cbmthreshold"},{pageName:"CBM Parameter Threshold",pageRoute:"ironlake-config-cbmthreshold"}]),e.setPage(1),await c.getLookup(),await e.getLookup(!1)}),ea(async()=>{e.resetState(),c.resetState(),T.resetState()});const R=async()=>{r.value=="Specific"?await e.setPageSpecific(1):await e.setPage(1),await e.getLookup(r.value=="Specific"),await c.getLookup(r.value=="Specific")},V=()=>{u.value=!0,c.setErrors([]),c.resetState()},$=()=>{n.value=!0,c.setErrors([])},S=async q=>{u.value=!1,q&&await R()},p=async()=>{n.value=!1,r.value=="General"?await e.setPage(C.value.currentPage):await e.setPageSpecific(C.value.currentPage)},m=()=>{O.value=!0},z=async q=>{O.value=!1,q&&await R()},W=async()=>{const q=await e.export(r.value=="Specific");mt.saveAs(new Blob([q],{type:"application/octet-stream"}),`CBMParameterThreshold${r.value=="Specific"?"Specific":""}.xlsx`)},G=()=>{w.value=!0},re=async q=>{w.value=!1,q&&await R()},Q=()=>{u.value=!0,c.setErrors([])};return(q,K)=>{const X=I("el-tab-pane"),J=I("el-tabs");return h(),N(Ve,null,[i("div",Bo,[i("div",Go,[a(Yt,{onShowDialog:V}),a(Xt,{onShowDialog:m}),a(Qt,{onHandleDownload:W}),a(Wt,{onShowDialog:G})])]),i("div",jo,[i("div",zo,[a(J,{modelValue:r.value,"onUpdate:modelValue":K[0]||(K[0]=te=>r.value=te),type:"card",onTabClick:d},{default:g(()=>[a(X,{label:"General",name:"General"}),a(X,{label:"Specific",name:"Specific"})]),_:1},8,["modelValue"]),r.value==="General"?(h(),E(la,{key:0,"list-data":v.value,page:C.value.currentPage,onDuplicateData:Q,onFetchData:R,onHandleEdit:$},null,8,["list-data","page"])):M("",!0),r.value==="Specific"?(h(),E(to,{key:1,"list-data":v.value,page:C.value.currentPage,onDuplicateData:Q,onFetchData:R,onHandleEdit:$},null,8,["list-data","page"])):M("",!0)])]),i("div",Ko,[o(e).paginationLoading?M("",!0):(h(),E(dt,{key:0,onRaisePageChange:K[1]||(K[1]=te=>L(te)),currentPage:C.value.currentPage,totalPage:C.value.totalPage,totalPageSize:C.value.totalPageSize,startPaginationIndex:C.value.startPaginationIndex,endPaginationIndex:C.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),r.value==="General"?(h(),E(fa,{key:0,visibility:u.value,onHandleClose:S},null,8,["visibility"])):M("",!0),r.value==="General"?(h(),E(qa,{key:1,visibility:n.value,onHandleClose:p},null,8,["visibility"])):M("",!0),r.value==="General"?(h(),E(Xa,{key:2,visibility:O.value,onHandleClose:z},null,8,["visibility"])):M("",!0),r.value==="General"?(h(),E(ja,{key:3,visibility:w.value,onHandleClose:re},null,8,["visibility"])):M("",!0),r.value==="Specific"?(h(),E(ho,{key:4,visibility:u.value,onHandleClose:S},null,8,["visibility"])):M("",!0),r.value==="Specific"?(h(),E(xo,{key:5,visibility:n.value,onHandleClose:p},null,8,["visibility"])):M("",!0),r.value==="Specific"?(h(),E(Vo,{key:6,visibility:O.value,onHandleClose:z},null,8,["visibility"])):M("",!0),r.value==="Specific"?(h(),E(No,{key:7,visibility:w.value,onHandleClose:re},null,8,["visibility"])):M("",!0)],64)}}});export{sn as default};
