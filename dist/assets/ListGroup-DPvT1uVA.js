import{k as Q,r as L,d as H,o as X,R,p as a,aa as o,aB as d,s as q,x,B as y,C as i,A as u,F as m,q as E,$,b4 as p,u as V,P as N}from"./@vue-BypzYtbH.js";import{_ as T}from"./document_download-C1p7j0nJ.js";import{P as Z}from"./Pagination-D-xfdYmn.js";import{P as ee}from"./Pagination-BiobnanQ.js";import{d as te}from"./table-sort-Bpdq_Uwn.js";import{d as b,e as ae}from"./date-format-8-IvfSl3.js";import{_ as se}from"./Index.vue_vue_type_style_index_2_lang-BjFq237h.js";import{e as U,f as ne}from"./helpers-wUOLw-dU.js";import{_ as oe}from"./nw-img-vue-CR837WER.js";class ie{constructor(l=[]){this.pagination=new ee,this.displayData=[],this.data=[],this.isSort=!1,this.sortBy=null,this.sortOrder=null,this.setData(l)}setTotalPage(l){this.pagination.totalPage=l}setDisplayData(){let l=[...this.data];this.isSort&&(l=l.sort(te(this.sortBy,this.sortOrder))),this.displayData=l.slice(this.pagination.startPaginationIndex,this.pagination.endPaginationIndex)}setPage(l){this.pagination.handleCurrentPageChange(l),this.setDisplayData()}setSort(l){this.isSort=l.prop!==null,this.sortBy=l.prop,this.sortOrder=l.order,this.setPage(1)}setData(l){this.data=l,this.setTotalPage(l.length),this.setPage(1)}getDisplayData(){return this.displayData}getPagination(){return this.pagination}}const re={class:"list-group ps-0 mt-5 mb-3"},le={class:"card"},de={key:0,class:"ms-2 count-badge"},ce={class:"d-flex flex-column"},ue=["onClick"],ge={class:"label"},fe={class:"label ms-5"},pe={key:0,class:"label item__timestamp"},ve=["onClick"],ye={class:"label"},me={class:"d-flex flex-column w-100"},he={class:"d-flex justify-content-between"},Se=["onClick"],Pe=["onClick"],De=["onClick"],Ce={key:2,class:"label item__timestamp"},ke=["onClick"],we={key:1,class:"d-flex justify-content-center mt-8"},Le={key:0,style:{color:"#919EAB"}},xe=Q({__name:"ListGroup",props:{dataList:{required:!0,type:Object},loading:{required:!0,type:Boolean},isMonitoring:{required:!1,type:Boolean,default:!1},isClosed:{required:!1,type:Boolean,default:!1},isInProgress:{required:!1,type:Boolean,default:!1},isDefectListPage:{required:!1,type:Boolean,default:!1},selectedHeader:{required:!1,type:String,default:""},pageName:{required:!1,type:String,default:""},showCounting:{default:!0,required:!1}},emits:["onItemClick","handleDownloadPDF","onRetrySync","onRevokeSync"],setup(s,{emit:l}){const n=s,h=l,g=new ie,v=L([]),f=L(g.getPagination());H(()=>n.dataList&&n.dataList.list,t=>{g.setData(t),g.setPage(1),P()});const S=L(""),j=t=>{g.setPage(t),P()},P=()=>{v.value=g.getDisplayData(),f.value=g.getPagination()},I=t=>{if(n.dataList.name=="Component Intervention Forms"){let c="";return n.selectedHeader=="Yet To Start"?t.estimationCompletionDate&&(c=b(t.estimationCompletionDate,"YYYY-MM-DD HH:mm:ss","DD.MM.YYYY")):n.selectedHeader=="In Progress"?t.serviceStart&&(c=b(t.serviceStart.substring(0,8),"DD/MM/YY","DD.MM.YYYY")):(n.selectedHeader=="Under Review"||n.selectedHeader=="Final Review"||n.selectedHeader=="Closed")&&t.serviceEnd&&(c=b(t.serviceEnd.substring(0,8),"DD/MM/YY","DD.MM.YYYY")),c}let r="";return n.selectedHeader=="Yet To Start"?r=t.dateService:n.selectedHeader=="In Progress"?r=t.serviceStart:(n.selectedHeader=="Under Review"||n.selectedHeader=="Final Review"||n.selectedHeader=="Closed")&&(r=t.serviceEnd),ae(r)},Y=t=>{h("onItemClick",{name:n.dataList.name,item:t})},z=t=>{h("onRetrySync",t)},A=t=>{h("onRevokeSync",t)},W=t=>{const r=n.dataList.options.findIndex(c=>c.value==t);r>=0&&g.setData([n.dataList.list[r]]),P()},F=t=>{h("handleDownloadPDF",{name:n.dataList.name,item:t})};X(()=>{g.setData(n.dataList.list),S.value=n.dataList.expand?n.dataList.name:"",P()});const _=t=>t.isDownload&&t.isDownload=="true";H(()=>n.dataList.expand,()=>{S.value=n.dataList.expand?n.dataList.name:""});const D=(t,r,c)=>ne(t,r,c),M=(t,r,c)=>{if(t=="Open")return"Yet to Start";if(t=="On Progress")return`${c}%`;if(t=="Submited")return"Under Review";if(t=="Close"){if(r=="Approved (SPV)")return"Final Review";if(r=="Completed")return"Closed"}return""},G=(t,r)=>{if(t=="Open")return"Yet to Start";if(t=="On Progress")return"In Progress";if(t=="Submited")return"Under Review";if(t=="Close"){if(r=="Approved (SPV)")return"Final Review";if(r=="Completed")return"Closed"}return""},J=t=>t=="Open"?"gray":t=="On Progress"?"blue":t=="Submited"?"soft-yellow":t=="Close"?"green":"",B=t=>t=="Open"?"gray":t=="On Progress"?"blue":t=="Submited"||t=="Close"?"green":"";return(t,r)=>{const c=R("el-collapse-item"),K=R("el-collapse");return a(),o("div",re,[d("div",le,[q(K,{modelValue:S.value,"onUpdate:modelValue":r[1]||(r[1]=e=>S.value=e),class:"task-group e-form-only py-1 px-5 overflow-visible appmon"},{default:x(()=>[q(c,{name:s.dataList.name},{title:x(()=>[y(i(s.dataList.name)+" ",1),s.showCounting?(a(),o("span",de,i(s.dataList.list.length),1)):u("",!0)]),default:x(()=>[d("div",ce,[v.value.length>0&&!s.loading?(a(),o(m,{key:0},[s.dataList.options?(a(),E(se,{key:0,options:s.dataList.options,onHandleSelectFitter:W,"drop-down-placeholder":s.dataList.name=="Digital Service Forms"?"Search Service Sheet":s.dataList.name=="Interim Engine Service Forms"?"Search Interim Engine Service":"Search Component Intervention Forms"},null,8,["options","drop-down-placeholder"])):u("",!0),s.dataList.name=="Digital Service Forms"||s.dataList.name=="Interim Engine Service Forms"?(a(!0),o(m,{key:1},$(v.value,(e,k)=>(a(),o("div",{key:e.dailyScheduleId,class:"item d-flex justify-content-between my-2"},[d("div",{onClick:C=>Y(e)},[d("span",ge,i((f.value.currentPage-1)*10+k+1),1),d("span",fe,i(e.unitNumber)+" - "+i(e.brand)+" "+i(e.equipmentModel)+" - "+i(e.psType)+" Hour Service - "+i(e.workOrder),1),s.pageName=="defect-identified"?(a(),o("span",{key:0,class:p(["status-badge p-1 ms-3",J(e.eFormStatus)])},i(G(e.eFormStatus,e.defectStatus)),3)):s.isDefectListPage?(a(),o("span",{key:1,class:p(["status-badge p-1 ms-3",V(U)(D(e.eFormStatus,e.defectStatus,e.percentage))])},i(D(e.eFormStatus,e.defectStatus,e.percentage)),3)):(a(),o(m,{key:2},[s.isInProgress?(a(),o("span",{key:0,class:p(["status-badge p-1 ms-3",B(e.status)])},i(M(e.status,e.defectStatus,e.percentage)),3)):u("",!0)],64))],8,ue),d("div",null,[s.isMonitoring?(a(),o("span",pe,[y(i(I(e))+" ",1),s.isClosed?(a(),o("img",{key:0,onClick:C=>F(e),class:p(["ms-4 me-2 download-icon",_(e)?"icon-green":"icon-red"]),src:T,style:{height:"18px"},alt:""},null,10,ve)):u("",!0)])):u("",!0)])]))),128)):(a(!0),o(m,{key:2},$(v.value,(e,k)=>{var C,O;return a(),o("div",{key:e.interventionId,class:"item d-flex flex-fill my-2 align-items-center"},[d("span",ye,i((f.value.currentPage-1)*10+k+1),1),d("div",me,[d("div",he,[d("div",null,[d("span",{class:"label ms-5 intervention-label",onClick:w=>Y(e)},[y(i(e.equipment)+" - "+i(e.equipmentDesc)+" - ",1),d("span",{class:p(((C=e.sampleStatus)==null?void 0:C.toLowerCase())=="caution"?"yellow":((O=e.sampleStatus)==null?void 0:O.toLowerCase())=="normal"?"green":"red")},i(e.sampleStatus)+" Intervention",3),y(" - "+i(e.componentSystem)+" - "+i(e.sapWorkOrder),1)],8,Se),s.isDefectListPage?(a(),o("span",{key:0,class:p(["status-badge p-1 ms-3",V(U)(D(e.intFormStatus,e.defectStatus,e.percentage))])},i(D(e.intFormStatus,e.defectStatus,e.percentage)),3)):(a(),o(m,{key:1},[s.isInProgress?(a(),o("span",{key:0,class:p(["status-badge p-1 ms-3",B(e.interventionExecution)])},i(M(e.interventionExecution,e.defectStatus,e.percentage)),3)):u("",!0)],64))]),d("div",null,[e.isPendingSync&&e.isPendingSync==!0?(a(),o("em",{key:0,class:"fa fa-recycle me-5",onClick:N(w=>z(e.sapWorkOrder),["prevent"])},null,8,Pe)):u("",!0),e.isPendingSync&&e.isPendingSync==!0?(a(),o("em",{key:1,class:"fa fa-trash-alt",onClick:N(w=>A(e.sapWorkOrder),["prevent"])},null,8,De)):u("",!0),s.isMonitoring?(a(),o("span",Ce,[y(i(I(e))+" ",1),s.isClosed?(a(),o("img",{key:0,onClick:w=>F(e),class:p(["ms-4 me-2 download-icon",_(e)?"icon-green":"icon-red"]),src:T,style:{height:"18px"},alt:""},null,10,ke)):u("",!0)])):u("",!0)])])])])}),128)),v.value.length>0?(a(),E(Z,{key:3,onRaisePageChange:r[0]||(r[0]=e=>j(e)),currentPage:f.value.currentPage,totalPage:f.value.totalPage,totalPageSize:f.value.totalPageSize,startPaginationIndex:f.value.startPaginationIndex,endPaginationIndex:f.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):u("",!0)],64)):(a(),o("div",we,[s.loading?u("",!0):(a(),o("h5",Le,"No Data Display"))]))])]),_:1},8,["name"])]),_:1},8,["modelValue"])])])}}}),Re=oe(xe,[["__scopeId","data-v-21800f2b"]]);export{Re as L};
