import{_ as V}from"./logo-whitebg-DE6C9hWQ.js";import{k as v,r as h,c as b,p as l,aa as p,aB as i,b4 as f,A as _,C as k,b6 as S,y as x,a5 as H,z as $,F as U,$ as N,R as E,q as R,s as w,a0 as B,o as q,d as D,a7 as P,L as A,bd as z,bb as F}from"./@vue-BypzYtbH.js";import{u as j}from"./vue-router-iNp9kJ0K.js";import{u as O}from"./authentication-handler-B3K6P3Fb.js";import{b as I,s as G}from"./index-BCnwA6yE.js";import{e as g}from"./lodash-Cr9vlq0V.js";import{d as J}from"./pinia-BjOS2_Ao.js";import{_ as M}from"./nw-img-vue-CR837WER.js";import{n as K}from"./navigator-D5io2Cca.js";import{a as Q}from"./element-plus-C5R56mia.js";import"./vuex-BbOKrtVp.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";const W="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/version_history/side_menu",L=J({id:"versionHistory",state:()=>({stateTreeData:{menuName:"IronPortal Version History",icon:"",subMenu:[]},stateListLoading:!1,stateMenuVersionHistory:[],stateSelectedMenu:{},stateSearchString:"",stateDefaultTree:{menuName:"IronPortal Version History",icon:"fa fa-code-merge",subMenu:[]},stateDefaultSelectedMenu:{}}),getters:{selectedMenu:e=>e.stateSelectedMenu,searchString:e=>e.stateSearchString,loading:e=>e.stateListLoading},actions:{async convertResponseToTreeData(e){this.stateTreeData=g.cloneDeep(this.stateDefaultTree),e.forEach((t,s)=>{s==0?t.collapsible=!0:t.collapsible=!1,t.icon="far fa-dot-circle",t.subMenu&&(t.subMenu.forEach(r=>{r.icon="fa fa-circle"}),t.subMenu=t.subMenu.sort((r,a)=>r.sequence-a.sequence)),this.stateTreeData.subMenu&&this.stateTreeData.subMenu.push(t)})},setSelectedMenu(e){this.stateSelectedMenu=e},async getMenuVersionHistory(){this.stateListLoading=!0;const e={ver:"v1"};try{const t=await I.get(W,"",new URLSearchParams(e).toString());await this.convertResponseToTreeData(t.data.result.content),this.stateMenuVersionHistory=this.stateTreeData.subMenu,this.setInit()}catch(t){O(t),G("IRONS",t),console.log(t)}finally{this.stateListLoading=!1}},setInit(){var e;(e=this.stateMenuVersionHistory[0])!=null&&e.subMenu[0]&&this.setSelectedMenu(this.stateMenuVersionHistory[0].subMenu[0])},setCollapse(e){var t;(t=this.stateTreeData.subMenu)==null||t.forEach(s=>{s.menuName==e&&(s.collapsible=!s.collapsible)})},setSearchMenu(e){this.stateSearchString=e,e==""?this.stateTreeData.subMenu=this.stateMenuVersionHistory:this.stateTreeData.subMenu=g.cloneDeep(this.stateMenuVersionHistory).filter(t=>t.menuName.toLowerCase().includes(e.toLowerCase()))},resetInstance(){this.stateTreeData=g.cloneDeep(this.stateDefaultTree),this.stateListLoading=!1,this.stateMenuVersionHistory=[],this.stateSelectedMenu=this.stateDefaultSelectedMenu,this.stateSearchString=""}}}),X={class:"left",style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Y={class:"d-flex justify-content-center"},Z=v({__name:"MenuItem",props:{subMenu:{type:Array,required:!0},data:{type:Object,required:!0},depth:{type:Number,required:!0}},setup(e){j();const t=L(),s=h(!0),r=h(),a=b(()=>t.selectedMenu),u=b({get:()=>t.searchString,set:o=>{t.setSearchMenu(o)}}),c=o=>{if(o.subMenu){t.setCollapse(o.menuName);return}t.setSelectedMenu(o)};return(o,n)=>{const d=E("menu-item",!0);return l(),p("div",{class:f(["menu-item pointer position-relative",{opened:s.value}]),style:S([e.depth==0?"height: calc(100vh - 40px);overflow: auto;":""])},[i("div",{class:f(["label",{link:e.depth==2,active:e.data.menuName==a.value.menuName&&e.data.versionHistoryId==a.value.versionHistoryId}]),onClick:n[0]||(n[0]=m=>c(e.data)),style:S({paddingLeft:e.depth*20+20+"px"})},[i("div",X,[e.data.icon?(l(),p("em",{key:0,class:f(e.data.icon)},null,2)):_("",!0),i("span",{style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},class:f({bold:e.depth==0})},k(e.data.menuName),3)])],6),i("div",Y,[e.depth==0?x((l(),p("input",{key:0,type:"text",style:{width:"90%",background:"white"},class:"form-control form-control-solid rounded search-placeholder-label",placeholder:"Search","onUpdate:modelValue":n[1]||(n[1]=m=>u.value=m)},null,512)),[[H,u.value]]):_("",!0)]),x(i("div",{class:"items-container",style:{height:"fit-content",overflow:"visible"},ref_key:"container",ref:r},[(l(!0),p(U,null,N(e.subMenu,(m,y)=>(l(),R(d,{key:y,subMenu:m.subMenu||[],data:m,depth:e.depth+1},null,8,["subMenu","data","depth"]))),128))],512),[[$,e.depth==0||e.data.collapsible]])],6)}}}),ee=M(Z,[["__scopeId","data-v-87c065b2"]]),te={class:"menu overflow-auto"},se=v({__name:"Menu",props:{dataMenu:{required:!0,type:Object}},setup(e){return(t,s)=>(l(),p("div",te,[w(ee,{data:e.dataMenu,subMenu:e.dataMenu.subMenu,depth:0},null,8,["data","subMenu"])]))}}),ae=M(se,[["__scopeId","data-v-c2d27ea6"]]),oe={class:"version-wrapper overflow-auto"},re=v({__name:"Content",props:{blobUrl:{type:String,required:!0}},setup(e){const t=e,s=h(""),r=h(!0),a=B(t,"blobUrl"),u=h(""),c=h(!1),o=async()=>{if(s.value="",r.value=!0,c.value=!1,a.value){const n=`ver=v1&fileUrl=${a.value}`;try{const d=`https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_url?${n}`,y=(await I.getBlob(d)).data,T=new Blob([y]),C=window.URL||window.webkitURL;s.value=C.createObjectURL(T)}catch(d){console.log("error show pdf",d),c.value=!0,a.value.includes("#")?u.value="PDF not yet attached":u.value=`${d}`}}r.value=!1};return q(async()=>{await o()}),D([a.value],n=>{n&&o()}),D(()=>t.blobUrl,()=>{o()}),(n,d)=>(l(),p("div",oe))}}),ne=M(re,[["__scopeId","data-v-1f9985c2"]]),ie=e=>(z("data-v-8e72fa54"),e=e(),F(),e),le={class:"full-page d-flex overflow-hidden vh-100"},ue={style:{width:"300px","border-right":"1px solid #ECECEC"}},ce=ie(()=>i("img",{style:{cursor:"pointer"},src:V,alt:"",class:"h-40px logo"},null,-1)),de=[ce],pe={class:"d-flex flex-fill p-10"},me=v({__name:"Index",setup(e){const{redirectByName:t}=K(),s=L(),r=b(()=>s.stateTreeData),a=b(()=>s.selectedMenu.fileUrl),u=()=>{t("ironportal")};return P(async()=>{const c=Q.service({lock:!0,text:"Loading the page",background:"rgba(0, 0, 0, 0.7)"});await s.getMenuVersionHistory(),c.close()}),A(()=>{s.resetInstance()}),(c,o)=>(l(),p("div",le,[i("div",ue,[i("div",{class:"logo-wrapper d-flex align-items-center ms-1",onClick:u},de),w(ae,{"data-menu":r.value},null,8,["data-menu"])]),i("div",pe,[w(ne,{"blob-url":a.value},null,8,["blob-url"])])]))}}),Ge=M(me,[["__scopeId","data-v-8e72fa54"]]);export{Ge as default};
