import{a as P}from"./ViewOnlyNAReasonDialog-DR-Uz59p.js";import{f as k}from"./number-format-BdMuQVyW.js";import{_ as U}from"./ImagePreview.vue_vue_type_style_index_0_lang-DrcOCjy4.js";import{e as S}from"./lodash-DrHMlsdo.js";import{r as H,t as V,u as j}from"./date-format-8-IvfSl3.js";import{I as L}from"./helpers-wUOLw-dU.js";import{k as O,r as C,c as m,p as a,aa as r,aB as e,s as p,x as h,F as w,R as I,u as R,A as b,C as i,$ as q,bd as A,bb as F}from"./@vue-BypzYtbH.js";import{_ as Y}from"./nw-img-vue-CR837WER.js";const l=t=>(A("data-v-406800a7"),t=t(),F(),t),$={class:"mt-5 ps-0"},T=l(()=>e("h4",{class:"subtitle ps-3"},"Intervention Labour Personnel",-1)),W={class:"d-flex flex-row justify-content-between"},z={class:"p-2 d-flex flex-row flex-grow-1"},G={class:"d-flex w-100"},J={class:"flex-fill"},K={class:"form-floating mb-3"},Q=["value"],X=l(()=>e("label",{class:"label-font"},"Intervention Start Date",-1)),Z={class:"flex-fill ps-3"},ee={class:"form-floating mb-3"},te=["value"],se=l(()=>e("label",{class:"label-font"},"Serial Number",-1)),oe={class:"flex-fill ps-3"},ne={class:"form-floating mb-3 position-relative"},le=["value"],ie={key:0,class:"ms-2 position-absolute",style:{top:"2px",right:"0"}},ae=l(()=>e("img",{src:P,style:{width:"1.25rem",height:"1.25rem"}},null,-1)),re=[ae],ce=l(()=>e("label",{class:"label-font"},"Machine SMU",-1)),de={key:0,class:"ms-2"},ue={class:"p-3 justify-items-center rounded",style:{background:"#18af4a"}},me={key:0,class:"d-flex flex-row justify-content-end timestamp-task"},fe={class:"d-flex flex-row"},_e={class:"flex-fill ps-3"},ve={class:"form-floating mb-3"},pe=["value"],he=l(()=>e("label",{class:"label-font"},"Hour Meter Offset",-1)),be=l(()=>e("h4",{class:"subtitle ps-3 service-labour"},"Service Labour Personnel",-1)),xe={class:"components-table mx-2"},ye=l(()=>e("thead",null,[e("tr",null,[e("th",{class:"main-col text-center"},"Name"),e("th",{class:"shift-col text-center"},"Shift"),e("th",{class:"date-col text-center"},"Start Date"),e("th",{class:"date-col text-center"},"Finish Date")])],-1)),ge={class:"text-center"},ke={class:"text-center"},Se={class:"text-center"},Ce={class:"text-center"},we=O({__name:"CardPersonnelMonitoring",props:{intervention:{required:!0,type:Object},reRender:{type:Boolean,default:!1},serialNumber:{required:!0,type:String}},emits:["onSMUReviseIconClicked"],setup(t,{emit:D}){const o=t,M=D,f=C(!1),x=C("Intervention Labour Personnel"),d=m(()=>o.intervention.imageEquipment),y=m(()=>o.intervention.smuBy),g=m(()=>o.intervention.smuDate),N=c=>c!="Not Applicable"?k(c):"Not Applicable",B=m(()=>{const c=L(),n=!S.isUndefined(o.intervention.smuBy)&&!S.isUndefined(o.intervention.smuDate),_=o.intervention.interventionExecution=="Close"&&o.intervention.defectStatus=="Completed";let u=!1;const s=o.intervention.statusHistory.filter(v=>v.status=="Completed");if(s.length==1){const v=H(s[0].updatedDate);u=V(void 0,j(v,3,"months","DD/MM/YY HH:mm:ss"))}return c&&n&&_&&u}),E=()=>{M("onSMUReviseIconClicked")};return(c,n)=>{const _=I("el-collapse-item"),u=I("el-collapse");return a(),r(w,null,[e("div",$,[p(u,{modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=s=>x.value=s),class:"general-accordion task-group py-1 px-5 mb-3"},{default:h(()=>[p(_,{name:"Intervention Labour Personnel"},{title:h(()=>[T]),default:h(()=>[e("div",W,[e("div",z,[e("div",G,[e("div",J,[e("div",K,[e("input",{type:"text",class:"form-control",value:t.intervention.serviceStart,disabled:""},null,8,Q),X])]),e("div",Z,[e("div",ee,[e("input",{type:"text",class:"form-control",value:t.serialNumber,disabled:""},null,8,te),se])]),e("div",oe,[e("div",ne,[e("input",{type:"text",class:"form-control",disabled:"",value:R(k)(t.intervention.interventionSMU??"")},null,8,le),B.value?(a(),r("div",ie,[e("button",{class:"btn p-4 justify-items-center rounded cursor-pointer svg-icon svg-icon-btech-primary-500",onClick:E},re)])):b("",!0),ce])]),d.value&&d.value.length>0?(a(),r("div",de,[e("div",ue,[e("span",{style:{"font-weight":"700",color:"white",cursor:"pointer"},onClick:n[0]||(n[0]=()=>f.value=!0)},"+"+i(d.value.length),1)])])):b("",!0)])])]),y.value&&g.value?(a(),r("div",me,i(y.value.name)+", "+i(g.value),1)):b("",!0),e("div",fe,[e("div",_e,[e("div",ve,[e("input",{type:"text",class:"form-control",disabled:"",value:N(t.intervention.hmOffset)},null,8,pe),he])])]),e("div",null,[be,e("table",xe,[ye,e("tbody",null,[(a(!0),r(w,null,q(t.intervention.servicePersonnels,s=>(a(),r("tr",{key:s.key},[e("td",ge,i(s.mechanic.name),1),e("td",ke,i(s.shift),1),e("td",Se,i(s.serviceStart),1),e("td",Ce,i(s.serviceEnd),1)]))),128))])])])]),_:1})]),_:1},8,["modelValue"])]),p(U,{"re-render":t.reRender,images:d.value,"show-delete-button":!1,visibility:f.value,type:"imageEquipment","show-mandatory-caption":!1,"is-monitoring":!0,onOnClose:n[2]||(n[2]=()=>f.value=!1)},null,8,["re-render","images","visibility"])],64)}}}),He=Y(we,[["__scopeId","data-v-406800a7"]]);export{He as C};
