import{u as n}from"./authentication-handler-Pueb_EI7.js";import{c as s,s as c,i as m,f as p}from"./index-BuVmIl8K.js";import{d as S}from"./pinia-BjOS2_Ao.js";import{u as g}from"./useGlobalConnectionStore-DV9B81de.js";import{A as h}from"./date-format-8-IvfSl3.js";const y="https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/attachment/upload",u="https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/attachment/download_by_url",C=S({id:"Attachment",state:()=>({stateLoading:!1,stateCurrentKey:"",stateMode:""}),getters:{globalConnectionStore:()=>g(),currentKey:e=>e.stateCurrentKey,mode:e=>e.stateMode},actions:{async uploadAttachment(e,o,t=void 0){const d={ver:"v1",userAccount:o};let a="",i;try{const r=await s.post(`${y}?${new URLSearchParams(d).toString()}`,e);return a="Sync",r.data.result.content}catch(r){const l=this.globalConnectionStore.checkIsErrorNoNetwork(r);return this.globalConnectionStore.setSubmitConnectionError(l),n(r),console.log(r),a="Failed",i=typeof r=="object"?r.message:r,c("IRONS",r),!1}finally{t&&(t.errorMessage=i,t.syncStatus=a,t.syncDate=h(),await m(p,"pendingTaskFile",t))}},async downloadAttachment(e){const o={ver:"v1",fileUrl:e};try{return(await s.get(u,"",new URLSearchParams(o).toString())).data}catch(t){n(t),c("IRONS",t),console.log(t)}return""},async downloadAttachmentPDF(e){const o={ver:"v1",fileUrl:e};try{return(await s.getBlob(u,"",new URLSearchParams(o).toString())).data}catch(t){n(t),c("IRONS",t),console.log(t)}return""},setCurrentKey(e){this.stateCurrentKey=e},setMode(e){this.stateMode=e}}});export{C as u};
