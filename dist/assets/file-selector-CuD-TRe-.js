import{_ as u,a as f,b as w}from"./tslib-DTLQ5SHO.js";var E=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function c(r,e){var n=P(r);if(typeof n.path!="string"){var t=r.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof t=="string"&&t.length>0?t:r.name,writable:!1,configurable:!1,enumerable:!0})}return n}function P(r){var e=r.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!r.type){var t=e.split(".").pop().toLowerCase(),i=E.get(t);i&&Object.defineProperty(r,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return r}var _=[".DS_Store","Thumbs.db"];function k(r){return u(this,void 0,void 0,function(){return f(this,function(e){return[2,F(r)&&r.dataTransfer?I(r.dataTransfer,r.type):T(r)]})})}function F(r){return!!r.dataTransfer}function T(r){var e=x(r.target)?r.target.files?l(r.target.files):[]:[];return e.map(function(n){return c(n)})}function x(r){return r!==null}function I(r,e){return u(this,void 0,void 0,function(){var n,t;return f(this,function(i){switch(i.label){case 0:return r.items?(n=l(r.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(O))]):[3,2];case 1:return t=i.sent(),[2,v(h(t))];case 2:return[2,v(l(r.files).map(function(a){return c(a)}))]}})})}function v(r){return r.filter(function(e){return _.indexOf(e.name)===-1})}function l(r){for(var e=[],n=0;n<r.length;n++){var t=r[n];e.push(t)}return e}function O(r){if(typeof r.webkitGetAsEntry!="function")return g(r);var e=r.webkitGetAsEntry();return e&&e.isDirectory?y(e):g(r)}function h(r){return r.reduce(function(e,n){return w(e,Array.isArray(n)?h(n):[n])},[])}function g(r){var e=r.getAsFile();if(!e)return Promise.reject(r+" is not a File");var n=c(e);return Promise.resolve(n)}function D(r){return u(this,void 0,void 0,function(){return f(this,function(e){return[2,r.isDirectory?y(r):j(r)]})})}function y(r){var e=r.createReader();return new Promise(function(n,t){var i=[];function a(){var b=this;e.readEntries(function(s){return u(b,void 0,void 0,function(){var p,m,d;return f(this,function(o){switch(o.label){case 0:if(s.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return p=o.sent(),n(p),[3,4];case 3:return m=o.sent(),t(m),[3,4];case 4:return[3,6];case 5:d=Promise.all(s.map(D)),i.push(d),a(),o.label=6;case 6:return[2]}})})},function(s){t(s)})}a()})}function j(r){return u(this,void 0,void 0,function(){return f(this,function(e){return[2,new Promise(function(n,t){r.file(function(i){var a=c(i,r.fullPath);n(a)},function(i){t(i)})})]})})}export{k as f};
