import{u as Zt}from"./vuex-BbOKrtVp.js";import{b as vt}from"./vue-router-iNp9kJ0K.js";import{a as ta}from"./breadcrumb-D-Q4Tk9w.js";import{b as X,u as q,s as J,i as nt,h as ft,j as lt,A as aa}from"./index-BCnwA6yE.js";import{P as bt}from"./Pagination-CVDIvnOM.js";import{F as ea}from"./FilterIconButton-Bj0WTbms.js";import{h as sa,A as ia,U as oa}from"./excel-generator-CRLIz6fw.js";import{D as la}from"./DownloadIconButton-CIQp-YG7.js";import{_ as R,b as _t}from"./element-plus-C5R56mia.js";import{f as z,n as V,a as dt,b as ra}from"./date-format-BASVuupi.js";import{P as mt,b as H,a as na,d as da}from"./table-sort-VnBD5Hfa.js";import{d as yt}from"./pinia-BjOS2_Ao.js";import{a as B}from"./mapOption-sP4IrA4W.js";import{k as Q,c as L,r as at,u as s,y as et,p as b,aa as rt,q as A,x as h,Y as pt,R as $,s as e,aB as k,C as Y,a0 as ht,B as M,A as kt,T as Et,bd as ma,bb as ua,a7 as ca,L as pa,F as ha}from"./@vue-BypzYtbH.js";import{a as xt}from"./vee-validate-C_msoaAA.js";import{c as wt,a as F,b as ut,d as Ot}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as Pt}from"./ErrorAlert-CMKGfwAi.js";import{_ as C}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as Ut}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{_ as ct}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{e as ka}from"./lodash-Cr9vlq0V.js";import{_ as Ra}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as ga}from"./map-anything-abi6NY2Z.js";import{_ as va}from"./nw-img-vue-CR837WER.js";import{_ as N}from"./AutoComplete.vue_vue_type_style_index_0_lang-CRR6Z--K.js";import{_ as Ft}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{F as Da}from"./file-saver-DhbZvGod.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const W="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_risk_rank_interval",fa=`${W}`,ya=`${W}/risk_rank_interval_bulk`,Sa=`${W}/validate_upload`,Ta=`${W}/export`,Ia=`${W}/lookup`,Fa=`${W}/risk_rank_interval`,Ca=`${W}/risk_rank_interval/update`,Dt={maxRiskRank:"",maxRiskRankTo:"",revisedRisk:"",revisedRiskTo:"",overallRisk:"",overallRiskTo:"",failureTiming:"",failureTimingTo:"",systemImpact:"",systemImpactTo:"",opsImpact:"",opsImpactTo:"",supplyRisk:"",supplyRiskTo:"",failureCost:"",failureCostTo:"",comments:"",commentsTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},St=yt({id:"riskRankMaterialList",state:()=>({stateFilterData:{...Dt},stateLastUsedFilterData:{...Dt},statePageName:"riskRankMaterial",stateDisplayData:[],statePagination:new mt,stateLoading:!1,statePaginationLoading:!1,stateMaxRiskRankOption:[],stateRevisedRiskOption:[],stateOverallRiskOption:[],stateFailureTimingOption:[],stateSystemImpactOption:[],stateOpsImpactOption:[],stateSupplyRiskOption:[],stateFailureCostOption:[],stateCommentsOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,maxRiskRankOption:t=>t.stateMaxRiskRankOption,revisedRiskOption:t=>t.stateRevisedRiskOption,overallRiskOption:t=>t.stateOverallRiskOption,failureTimingOption:t=>t.stateFailureTimingOption,systemImpactOption:t=>t.stateSystemImpactOption,opsImpactOption:t=>t.stateOpsImpactOption,supplyRiskOption:t=>t.stateSupplyRiskOption,failureCostOption:t=>t.stateFailureCostOption,commentsOption:t=>t.stateCommentsOption},actions:{async getData(t=!0){const l={maxRiskRank:this.stateFilterData.maxRiskRank,maxRiskRankTo:this.stateFilterData.maxRiskRankTo,revisedRisk:this.stateFilterData.revisedRisk,revisedRiskTo:this.stateFilterData.revisedRiskTo,overallRisk:this.stateFilterData.overallRisk,overallRiskTo:this.stateFilterData.overallRiskTo,failureTiming:this.stateFilterData.failureTiming,failureTimingTo:this.stateFilterData.failureTimingTo,systemImpact:this.stateFilterData.systemImpact,systemImpactTo:this.stateFilterData.systemImpactTo,opsImpact:this.stateFilterData.opsImpact,opsImpactTo:this.stateFilterData.opsImpactTo,supplyRisk:this.stateFilterData.supplyRisk,supplyRiskTo:this.stateFilterData.supplyRiskTo,failureCost:this.stateFilterData.failureCost,failureCostTo:this.stateFilterData.failureCostTo,comments:this.stateFilterData.comments,commentsTo:this.stateFilterData.commentsTo,startDate:this.stateFilterData.startDate?z(V(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?z(V(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?z(V(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?z(V(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const a=await X.get(fa,"risk_rank_interval",new URLSearchParams(l).toString());this.stateDisplayData=a.data.result.content,this.setTotalPage(a.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(a){a.response.data.statusCode==401&&q().setLoggedIn(!1),J("IRONS",a),console.log(a)}this.stateLoading=!1},async getLookup(){const t={ver:this.stateFilterData.ver};try{const l=await X.get(Ia,"",new URLSearchParams(t).toString());this.stateMaxRiskRankOption=B(l.data.result.content.maxRiskRank),this.stateRevisedRiskOption=B(l.data.result.content.revisedRisk),this.stateOverallRiskOption=B(l.data.result.content.overallRisk),this.stateFailureTimingOption=B(l.data.result.content.failureTiming),this.stateSystemImpactOption=B(l.data.result.content.systemImpact),this.stateOpsImpactOption=B(l.data.result.content.opsImpact),this.stateSupplyRiskOption=B(l.data.result.content.supplyRisk),this.stateFailureCostOption=B(l.data.result.content.failureCost),this.stateCommentsOption=B(l.data.result.content.comments)}catch(l){l.response.data.statusCode==401&&q().setLoggedIn(!1),J("IRONS",l),console.log(l)}},async export(){const t={ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await X.getBlob(Ta,"",new URLSearchParams(t).toString())).data}catch(l){J("IRONS",l),console.log(l)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:l}){if(!t&&!l)this.stateFilterData.order="";else{const a=l=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${a}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setMaxRiskRank(t){this.stateFilterData.maxRiskRank=t},setMaxRiskRankTo(t){this.stateFilterData.maxRiskRankTo=t},setRevisedRisk(t){this.stateFilterData.revisedRisk=t},setRevisedRiskTo(t){this.stateFilterData.revisedRiskTo=t},setOverallRisk(t){this.stateFilterData.overallRisk=t},setOverallRiskTo(t){this.stateFilterData.overallRiskTo=t},setFailureTiming(t){this.stateFilterData.failureTiming=t},setFailureTimingTo(t){this.stateFilterData.failureTimingTo=t},setSystemImpact(t){this.stateFilterData.systemImpact=t},setSystemImpactTo(t){this.stateFilterData.systemImpactTo=t},setOpsImpact(t){this.stateFilterData.opsImpact=t},setOpsImpactTo(t){this.stateFilterData.opsImpactTo=t},setSupplyRisk(t){this.stateFilterData.supplyRisk=t},setSupplyRiskTo(t){this.stateFilterData.supplyRiskTo=t},setFailureCost(t){this.stateFilterData.failureCost=t},setFailureCostTo(t){this.stateFilterData.failureCostTo=t},setComments(t){this.stateFilterData.comments=t},setCommentsTo(t){this.stateFilterData.commentsTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},async resetFilter(){this.stateFilterData.maxRiskRank="",this.stateFilterData.maxRiskRankTo="",this.stateFilterData.revisedRisk="",this.stateFilterData.revisedRiskTo="",this.stateFilterData.overallRisk="",this.stateFilterData.overallRiskTo="",this.stateFilterData.failureTiming="",this.stateFilterData.failureTimingTo="",this.stateFilterData.systemImpact="",this.stateFilterData.systemImpactTo="",this.stateFilterData.opsImpact="",this.stateFilterData.opsImpactTo="",this.stateFilterData.supplyRisk="",this.stateFilterData.supplyRiskTo="",this.stateFilterData.failureCost="",this.stateFilterData.failureCostTo="",this.stateFilterData.comments="",this.stateFilterData.commentsTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const t=this.stateLastUsedFilterData.maxRiskRank!=="",l=this.stateLastUsedFilterData.maxRiskRankTo!=="",a=this.stateLastUsedFilterData.revisedRisk!=="",v=this.stateLastUsedFilterData.revisedRiskTo!=="",n=this.stateLastUsedFilterData.overallRisk!=="",u=this.stateLastUsedFilterData.overallRiskTo!=="",r=this.stateLastUsedFilterData.failureTiming!=="",i=this.stateLastUsedFilterData.failureTimingTo!=="",S=this.stateLastUsedFilterData.systemImpact!=="",f=this.stateLastUsedFilterData.systemImpactTo!=="",d=this.stateLastUsedFilterData.opsImpact!=="",c=this.stateLastUsedFilterData.opsImpactTo!=="",T=this.stateLastUsedFilterData.supplyRisk!=="",E=this.stateLastUsedFilterData.supplyRiskTo!=="",_=this.stateLastUsedFilterData.failureCost!=="",D=this.stateLastUsedFilterData.failureCostTo!=="",g=this.stateLastUsedFilterData.comments!=="",y=this.stateLastUsedFilterData.commentsTo!=="",p=this.stateLastUsedFilterData.startDate!=="",w=this.stateLastUsedFilterData.startDateTo!=="",O=this.stateLastUsedFilterData.endDate!=="",x=this.stateLastUsedFilterData.endDateTo!=="";(t||l||a||v||n||u||r||i||S||f||d||c||T||E||_||D||g||y||p||w||O||x)&&await this.getData()},resetState(){this.stateFilterData={...Dt},this.stateDisplayData=[],this.statePagination=new mt,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Ct={riskRankIntervalId:0,maxRiskRank:"",revisedRisk:"",overallRisk:"",failureTiming:"",systemImpact:"",opsImpact:"",supplyRisk:"",failureCost:"",comments:"",startDate:V(new Date),endDate:V(new Date("12/31/9999"))},Rt=yt({id:"riskRankMaterialForm",state:()=>({stateFormData:{...Ct},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading},actions:{async insertData(t){try{this.stateLoading=!0;const l={userAccount:t,ver:"v1"},a={riskRankIntervalId:0,maxRiskRank:this.formData.maxRiskRank,revisedRisk:this.formData.revisedRisk,overallRisk:this.formData.overallRisk,failureTiming:this.formData.failureTiming,systemImpact:this.formData.systemImpact,opsImpact:this.formData.opsImpact,supplyRisk:this.formData.supplyRisk,failureCost:this.formData.failureCost,comments:this.formData.comments,startDate:z(V(new Date(this.stateFormData.startDate))),endDate:z(V(new Date(this.stateFormData.endDate)))},v=await X.post(`${Fa}?${new URLSearchParams(l).toString()}`,a);v.data.title==="Error"?(this.stateErrors.push(v.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(l){l.response.data.statusCode==401&&q().setLoggedIn(!1),this.stateError=l,this.stateErrors.push(l.response.data.result.message),this.stateIsError=!0,J("IRONS",l)}this.stateLoading=!1},async updateData(t){try{this.stateLoading=!0;const l={userAccount:t,ver:"v1"},a={riskRankIntervalId:this.formData.riskRankIntervalId,maxRiskRank:this.formData.maxRiskRank,revisedRisk:this.formData.revisedRisk,overallRisk:this.formData.overallRisk,failureTiming:this.formData.failureTiming,systemImpact:this.formData.systemImpact,opsImpact:this.formData.opsImpact,supplyRisk:this.formData.supplyRisk,failureCost:this.formData.failureCost,comments:this.formData.comments,startDate:z(V(new Date(this.stateFormData.startDate))),endDate:z(V(new Date(this.stateFormData.endDate)))},v=await X.post(`${Ca}?${new URLSearchParams(l).toString()}`,a);v.data.title==="Error"?(this.stateErrors.push(v.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(l){l.response.data.statusCode==401&&q().setLoggedIn(!1),this.stateError=l,this.stateErrors.push(l.response.data.result.message),this.stateIsError=!0,J("IRONS",l)}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.riskRankIntervalId=t.RiskRankIntervalId,this.stateFormData.maxRiskRank=t.MaxRiskRank,this.stateFormData.revisedRisk=t.RevisedRisk,this.stateFormData.overallRisk=t.OverallRisk,this.stateFormData.failureTiming=t.FailureTiming,this.stateFormData.systemImpact=t.SystemImpact,this.stateFormData.opsImpact=t.OpsImpact,this.stateFormData.supplyRisk=t.SupplyRisk,this.stateFormData.failureCost=t.FailureCost,this.stateFormData.comments=t.Comments,this.stateFormData.startDate=t.StartDate,this.stateFormData.endDate=t.EndDate},resetState(){this.stateFormData={...Ct},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),ba={key:0,style:{height:"100px"}},_a={key:0,class:"row justify-content-center"},Ea={key:1,class:"row justify-content-center"},xa={class:"row justify-content-center"},wa=["disabled","onClick"],Oa=Q({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(t,{emit:l}){const a=t,v=St(),n=Rt(),u=l,r=L(()=>(a.page-1)*10+1),i=at(""),S=d=>{i.value=d.order;const c={prop:d.prop,order:d.order};v.setSort(c)},f=d=>{n.setFormData(d),u("show-dialog",null)};return(d,c)=>{const T=$("inline-svg"),E=$("el-tooltip"),_=pt("loading");return s(v).loading?et((b(),rt("div",ba,null,512)),[[_,s(v).loading]]):et((b(),A(s(_t),{key:1,data:a.listData,style:{width:"100%"},onSortChange:S,"empty-text":"No Data"},{default:h(()=>[e(s(R),{label:"No",width:"90",align:"center"},{default:h(D=>[k("span",null,Y(r.value+D.$index),1)]),_:1}),e(s(R),{prop:"MaxRiskRank",label:"Max Risk Ranked Interval","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"RevisedRisk",label:"Revised Risk Rating","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"OverallRisk",label:"Overall Risk Rating","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"FailureTiming",label:"Failure Timing Risk","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"SystemImpact",label:"SystemImpact Risk","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"OpsImpact",label:"OPS Impact Risk","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"SupplyRisk",label:"Supply Risk","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"FailureCost",label:"Failure Cost Risk","min-width":"170",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"Comments",label:"Comments","min-width":"300",sortable:"","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{prop:"StartDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:h(D=>[k("span",null,Y(s(dt)(D.row.StartDate)),1)]),_:1}),e(s(R),{prop:"EndDate",label:"End Date",align:"center",width:"170",sortable:""},{default:h(D=>[k("span",null,Y(s(dt)(D.row.EndDate)),1)]),_:1}),e(s(R),{prop:"IsActive",label:"Is Active",width:"100",sortable:""},{default:h(D=>[D.row.IsActive?(b(),rt("div",_a,[e(T,{src:"/media/svg/tables/rows/check.svg"})])):(b(),rt("div",Ea,[e(T,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),e(s(R),{prop:"ChangedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:h(D=>[k("span",null,Y(s(ra)(D.row.ChangedOn)),1)]),_:1}),e(s(R),{prop:"ChangedBy",label:"Changed by",sortable:"",width:"300","sort-method":()=>s(H)(i.value)},null,8,["sort-method"]),e(s(R),{label:"",width:"80"},{default:h(D=>[e(E,{class:"box-item",effect:"dark",content:D.row.IsActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:h(()=>[k("div",xa,[k("button",{disabled:!D.row.IsActive,class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:g=>f(D.row)},[e(T,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,wa)])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])),[[_,s(v).loading]])}}}),Pa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ua={class:"col-md-6 fv-row fv-plugins-icon-container"},La={class:"dialog-footer"},Aa=Q({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:l}){const a=t,v=l,n=Rt(),u=q(),r=ht(a,"visibility"),i=L(()=>n.formData),S=L(()=>n.errors),f=L(()=>n.isError),d=wt().shape({maxRiskRank:F().required("max Risk Ranked Interval is mandatory"),revisedRisk:F().required("Revised Risk Rating is mandatory"),overallRisk:F().required("Overall Risk Rating is mandatory"),failureTiming:F().required("Failure Timing Risk is mandatory"),systemImpact:F().required("System Impact Risk is mandatory"),opsImpact:F().required("OPS Impact Risk is mandatory"),supplyRisk:F().required("Supply Risk is mandatory"),failureCost:F().required("Failure Cost Risk is mandatory"),comments:F().required("Comments is mandatory"),startDate:ut().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:ut().required("End Date is mandatory").min(Ot("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),c=(o=!1)=>{P(),n.resetState(),v("handle-close",o)},T=o=>{i.value.maxRiskRank=o},E=o=>{i.value.revisedRisk=o},_=o=>{i.value.overallRisk=o},D=o=>{i.value.failureTiming=o},g=o=>{i.value.systemImpact=o},y=o=>{i.value.opsImpact=o},p=o=>{i.value.supplyRisk=o},w=o=>{i.value.failureCost=o},O=o=>{i.value.comments=o},x=o=>{i.value.startDate=o},I=o=>{i.value.endDate=o},K=async()=>{P(),await d.validate(i.value,{abortEarly:!1}).catch(o=>{n.setErrors(o.errors)}),!f.value&&nt("Are you sure you want to submit ?").then(async o=>{o.isConfirmed&&n.insertData(u.user.Name).then(()=>{n.isError||ft("Form has been successfully submitted!","Ok").then(()=>{c(!0)})})})},P=()=>{n.setErrors([])};return(o,U)=>{const j=$("el-button"),st=$("el-dialog"),Z=pt("loading");return et((b(),A(st,{modelValue:r.value,"onUpdate:modelValue":U[0]||(U[0]=G=>r.value=G),title:"New Data",width:"40%",onClose:U[1]||(U[1]=G=>c())},{footer:h(()=>[k("span",La,[e(j,{type:"primary",onClick:K,disabled:s(n).loading},{default:h(()=>[M("Submit")]),_:1},8,["disabled"]),e(j,{type:"secondary",onClick:c,disabled:s(n).loading},{default:h(()=>[M("Close")]),_:1},8,["disabled"])])]),default:h(()=>[e(Et,{name:"fade"},{default:h(()=>[f.value?(b(),A(Pt,{key:0,errorMessages:S.value,onResetForm:P},null,8,["errorMessages"])):kt("",!0)]),_:1}),et((b(),A(s(xt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:h(()=>[e(Ut,{value:i.value.maxRiskRank,margin:!1,placeholder:"Add Max Risk Ranked Interval",label:"Max Risk Ranked Interval",name:"MaxRiskRankedInterval",max:20,onHandleChange:T},null,8,["value"]),e(C,{value:i.value.revisedRisk,margin:!1,placeholder:"Add Revised Risk Rating",label:"Revised Risk Rating",name:"RevisedRiskRating",max:20,onHandleChange:E},null,8,["value"]),e(C,{value:i.value.overallRisk,margin:!1,placeholder:"Add Overall Risk Rating",label:"Overall Risk Rating",name:"OverallRiskRating",max:20,onHandleChange:_},null,8,["value"]),e(C,{value:i.value.failureTiming,margin:!1,placeholder:"Add Failure Timing Risk",label:"Failure Timing Risk",name:"FailureTimingRisk",max:20,onHandleChange:D},null,8,["value"]),e(C,{value:i.value.systemImpact,margin:!1,placeholder:"Add System Impact Risk",label:"System Impact Risk",name:"SystemImpactRisk",max:20,onHandleChange:g},null,8,["value"]),e(C,{value:i.value.opsImpact,margin:!1,placeholder:"Add OPS Impact Risk",label:"OPS Impact Risk",name:"OpsImpactRisk",max:20,onHandleChange:y},null,8,["value"]),e(C,{value:i.value.supplyRisk,margin:!1,placeholder:"Add Supply Risk",label:"Supply Risk",name:"SupplyRisk",max:20,onHandleChange:p},null,8,["value"]),e(C,{value:i.value.failureCost,margin:!1,placeholder:"Add Failure Cost Risk",label:"Failure Cost Risk",name:"FailureCostRisk",max:20,onHandleChange:w},null,8,["value"]),e(C,{value:i.value.comments,margin:!1,placeholder:"Add Comments",label:"Comments",name:"Comments",max:225,onHandleChange:O},null,8,["value"]),k("div",Pa,[e(ct,{value:i.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:x},null,8,["value"])]),k("div",Ua,[e(ct,{value:i.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:I},null,8,["value"])])]),_:1})),[[Z,s(n).loading]])]),_:1},8,["modelValue"])),[[Z,s(n).loading]])}}}),Ma={class:"col-md-6 fv-row fv-plugins-icon-container"},$a={class:"col-md-6 fv-row fv-plugins-icon-container"},Ha={class:"dialog-footer"},Va=Q({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:l}){const a=t,v=l,n=Rt(),u=q(),r=ht(a,"visibility"),i=L(()=>n.formData),S=L(()=>n.errors),f=L(()=>n.isError),d=wt().shape({maxRiskRank:F().required("max Risk Ranked Interval is mandatory"),revisedRisk:F().required("Revised Risk Rating is mandatory"),overallRisk:F().required("Overall Risk Rating is mandatory"),failureTiming:F().required("Failure Timing Risk is mandatory"),systemImpact:F().required("System Impact Risk is mandatory"),opsImpact:F().required("OPS Impact Risk is mandatory"),supplyRisk:F().required("Supply Risk is mandatory"),failureCost:F().required("Failure Cost Risk is mandatory"),comments:F().required("Comments is mandatory"),startDate:ut().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:ut().required("End Date is mandatory").min(Ot("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),c=(o=!1)=>{n.resetState(),P(),v("handle-close",o)},T=o=>{i.value.maxRiskRank=o},E=o=>{i.value.revisedRisk=o},_=o=>{i.value.overallRisk=o},D=o=>{i.value.failureTiming=o},g=o=>{i.value.systemImpact=o},y=o=>{i.value.opsImpact=o},p=o=>{i.value.supplyRisk=o},w=o=>{i.value.failureCost=o},O=o=>{i.value.comments=o},x=o=>{i.value.startDate=o},I=o=>{i.value.endDate=o},K=async()=>{P(),await d.validate(i.value,{abortEarly:!1}).catch(o=>{n.setErrors(o.errors)}),!f.value&&nt("Are you sure you want to submit ?").then(async o=>{o.isConfirmed&&n.updateData(u.user.Name).then(()=>{n.isError||ft("Form has been successfully submitted!","Ok").then(()=>{c(!0)})})})},P=()=>{n.setErrors([])};return(o,U)=>{const j=$("el-button"),st=$("el-dialog"),Z=pt("loading");return et((b(),A(st,{modelValue:r.value,"onUpdate:modelValue":U[0]||(U[0]=G=>r.value=G),title:"Update Data",width:"40%",onClose:U[1]||(U[1]=G=>c())},{footer:h(()=>[k("span",Ha,[e(j,{type:"primary",onClick:K,disabled:s(n).loading},{default:h(()=>[M("Submit")]),_:1},8,["disabled"]),e(j,{type:"secondary",onClick:c,disabled:s(n).loading},{default:h(()=>[M("Close")]),_:1},8,["disabled"])])]),default:h(()=>[e(Et,{name:"fade"},{default:h(()=>[f.value?(b(),A(Pt,{key:0,errorMessages:S.value,onResetForm:P},null,8,["errorMessages"])):kt("",!0)]),_:1}),e(s(xt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:h(()=>[e(Ut,{value:i.value.maxRiskRank,margin:!1,placeholder:"Add Max Risk Ranked Interval",label:"Max Risk Ranked Interval",name:"MaxRiskRankedInterval",max:20,onHandleChange:T},null,8,["value"]),e(C,{value:i.value.revisedRisk,margin:!1,placeholder:"Add Revised Risk Rating",label:"Revised Risk Rating",name:"RevisedRiskRating",max:20,onHandleChange:E},null,8,["value"]),e(C,{value:i.value.overallRisk,margin:!1,placeholder:"Add Overall Risk Rating",label:"Overall Risk Rating",name:"OverallRiskRating",max:20,onHandleChange:_},null,8,["value"]),e(C,{value:i.value.failureTiming,margin:!1,placeholder:"Add Failure Timing Risk",label:"Failure Timing Risk",name:"FailureTimingRisk",max:20,onHandleChange:D},null,8,["value"]),e(C,{value:i.value.systemImpact,margin:!1,placeholder:"Add System Impact Risk",label:"System Impact Risk",name:"SystemImpactRisk",max:20,onHandleChange:g},null,8,["value"]),e(C,{value:i.value.opsImpact,margin:!1,placeholder:"Add OPS Impact Risk",label:"OPS Impact Risk",name:"OpsImpactRisk",max:20,onHandleChange:y},null,8,["value"]),e(C,{value:i.value.supplyRisk,margin:!1,placeholder:"Add Supply Risk",label:"Supply Risk",name:"SupplyRisk",max:20,onHandleChange:p},null,8,["value"]),e(C,{value:i.value.failureCost,margin:!1,placeholder:"Add Failure Cost Risk",label:"Failure Cost Risk",name:"FailureCostRisk",max:20,onHandleChange:w},null,8,["value"]),e(C,{value:i.value.comments,margin:!1,placeholder:"Add Comments",label:"Comments",name:"Comments",max:225,onHandleChange:O},null,8,["value"]),k("div",Ma,[e(ct,{value:i.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:x},null,8,["value"])]),k("div",$a,[e(ct,{value:i.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:I},null,8,["value"])])]),_:1})]),_:1},8,["modelValue"])),[[Z,s(n).loading]])}}}),Tt=yt({id:"riskRankMaterialBulk",state:()=>({statePagination:new mt,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const l={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const a=await X.post(`${ya}?${new URLSearchParams(l).toString()}`,this.stateBulkData);this.stateError=a.data.result.isError?a.data.result.message:"",this.stateIsError=a.data.result.isError}catch(a){a.response.data.statusCode==401&&q().setLoggedIn(!1),J("IRONS",a),console.log(a)}this.stateLoading=!1},async upload({userAccount:t,excelFile:l}){const a={userAccount:t,ver:"v1"},v=`${Sa}?${new URLSearchParams(a).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const n=await X.postImages(v,l);n.data.statusCode==200?n.data.result.isError?(this.stateIsError=!0,this.stateError=n.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=n.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=ka.some(this.stateValidatedData,{IsValid:!1}),this.setPage(1)):(this.stateIsError=n.data.result.isError,this.stateError=n.data.result.message)}catch(n){n.response.data.statusCode==401&&q().setLoggedIn(!1),console.log(n),this.stateIsError=!0,this.stateError=n.response.data.result.message,J("IRONS",n)}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(na(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new mt,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),Ba={class:"icon"},Na=Q({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const l=t,a=Tt(),v=L(()=>(l.page-1)*10+1),n=at(""),u=i=>{n.value=i.order;const S={prop:i.prop,order:i.order};a.setSort(S)},r=(i,S,f)=>da(i[f],S[f],n.value);return(i,S)=>{const f=$("inline-svg");return b(),A(s(_t),{data:l.listData,style:{width:"100%"},onSortChange:u,"empty-text":"No Data"},{default:h(()=>[e(s(R),{label:"No",width:"60",align:"center"},{default:h(d=>[k("span",null,Y(v.value+d.$index),1)]),_:1}),e(s(R),{prop:"MaxRiskRank",label:"Max Risk Ranked Interval",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"MaxRiskRank")},null,8,["sort-method"]),e(s(R),{prop:"RevisedRisk",label:"RevisedRisk Rating",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"RevisedRisk")},null,8,["sort-method"]),e(s(R),{prop:"OverallRisk",label:"OverallRisk Rating",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"OverallRisk")},null,8,["sort-method"]),e(s(R),{prop:"FailureTiming",label:"Failure Timing Risk",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"FailureTiming")},null,8,["sort-method"]),e(s(R),{prop:"SystemImpact",label:"System Impact Risk",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"SystemImpact")},null,8,["sort-method"]),e(s(R),{prop:"OpsImpact",label:"OPS Impact Risk",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"OpsImpact")},null,8,["sort-method"]),e(s(R),{prop:"SupplyRisk",label:"Supply Risk",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"SupplyRisk")},null,8,["sort-method"]),e(s(R),{prop:"FailureCost",label:"Failure Cost Risk",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"FailureCost")},null,8,["sort-method"]),e(s(R),{prop:"Comments",label:"Comments",width:"300",sortable:"","sort-method":(d,c)=>r(d,c,"Comments")},null,8,["sort-method"]),e(s(R),{prop:"StartDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:h(d=>[k("span",null,Y(s(dt)(d.row.StartDate)),1)]),_:1}),e(s(R),{prop:"EndDate",label:"End Date",align:"center",width:"170",sortable:""},{default:h(d=>[k("span",null,Y(s(dt)(d.row.EndDate)),1)]),_:1}),e(s(R),{prop:"ValidationReason",label:"Remark","min-width":"300",sortable:"","sort-method":(d,c)=>r(d,c,"ValidationReason")},null,8,["sort-method"]),e(s(R),{prop:"IsValid",label:"Status",width:"100",sortable:""},{default:h(d=>[k("div",Ba,[e(f,{src:d.row.IsValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),It=t=>(ma("data-v-efa0b5f3"),t=t(),ua(),t),qa=It(()=>k("div",{class:"text-center"},null,-1)),Ka=It(()=>k("div",{class:"mb-3"},[k("span",null,[M(" Download template "),k("a",{href:"documents/MasterDataRiskRankMaterial.xlsx",target:"_blank",id:"link-download"},"here"),M(" before uploading file ")])],-1)),za=It(()=>k("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[k("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),ja={class:"card"},Ga={class:"card-body grid-padding"},Ya={class:"dialog-footer"},Xa=Q({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:l}){const a=t,v=l,n=q(),u=Tt(),r=ht(a,"visibility"),i=()=>{const g=ga(u.validatedData,y=>{const p=y;return{riskRankIntervalId:0,maxRiskRank:p.MaxRiskRank,revisedRisk:p.RevisedRisk,overallRisk:p.OverallRisk,failureTiming:p.FailureTiming,systemImpact:p.SystemImpact,opsImpact:p.OpsImpact,supplyRisk:p.SupplyRisk,failureCost:p.FailureCost,comments:p.Comments,startDate:p.StartDate,endDate:p.EndDate}});return Object.values(g)},S=()=>{const g=document.getElementById("link-download");g&&g.click()},f=()=>{u.validatedData.length>0?nt("Cancel Upload Data?","Confirm").then(y=>{y.isConfirmed&&c()}):c()},d=async g=>{await u.upload({userAccount:n.user.Name,excelFile:g}),u.stateError&&lt(u.error)},c=(g=!1)=>{u.resetState(),v("handle-close",g)},T=g=>{u.setIsUploadedState(g)},E=g=>{u.setPage(g)},_=()=>{if(u.validatedData.length<1){S();return}const g=["MAX RISK RANKED INTERVAL","REVISED RISK RATING","OVERALL RISK RATING","FAILURE TIME RISK","SYSTEM IMPACT RISK","OPS IMPACT RISK","SUPPLY RISK","FAILURE COST RISK","COMMENTS","START DATE","END DATE","REMARK","STATUS"],y=u.validatedData.map(p=>({maxRiskRank:p.MaxRiskRank,revisedRisk:p.RevisedRisk,overallRisk:p.OverallRisk,failureTiming:p.FailureTiming,systemImpact:p.SystemImpact,opsImpact:p.OpsImpact,supplyRisk:p.SupplyRisk,failureCost:p.FailureCost,comments:p.Comments,startDate:p.StartDate,endDate:p.EndDate,remark:p.ValidationReason,status:p.IsValid?"OK":"Error"}));sa("Rating",g,y)},D=async()=>{if(u.displayData.length<1){lt("There is no data to submit");return}if(u.isError){lt("There is still invalid row(s)");return}nt("Are you sure you want to submit ?").then(async g=>{if(g.isConfirmed){const y=i();if(u.setBulkData(y),await u.bulkInsert(n.user.Name),u.isError){lt(u.stateError);return}ft("Form has been successfully submitted!","Ok").then(()=>{c(!0)})}})};return(g,y)=>{const p=$("el-button"),w=$("el-dialog"),O=pt("loading");return b(),A(w,{title:"Upload Bulk Data",modelValue:r.value,"onUpdate:modelValue":y[1]||(y[1]=x=>r.value=x),"before-close":f,width:"70%","custom-class":"upload-modal"},{footer:h(()=>[k("div",null,[k("span",Ya,[e(p,{type:"success",onClick:_},{default:h(()=>[M("Download")]),_:1}),e(p,{type:"primary",onClick:D},{default:h(()=>[M("Upload")]),_:1}),e(p,{type:"success",onClick:f},{default:h(()=>[M("Cancel")]),_:1})])])]),default:h(()=>[qa,Ka,et(e(Ra,{isSubmissionUploadSuccess:s(u).isUploaded,onHandleCloseUploadedFile:f,onHandleUpload:d,onHandleSetIsExcelFileUploaded:T},null,8,["isSubmissionUploadSuccess"]),[[O,s(u).uploadLoading]]),za,k("div",ja,[k("div",Ga,[e(Na,{"list-data":s(u).displayData,page:s(u).pagination.currentPage},null,8,["list-data","page"])])]),s(u).displayData.length>0?(b(),A(bt,{key:0,onRaisePageChange:y[0]||(y[0]=x=>E(x)),currentPage:s(u).pagination.currentPage,totalPage:s(u).pagination.totalPage,totalPageSize:s(u).pagination.totalPageSize,startPaginationIndex:s(u).pagination.startPaginationIndex,endPaginationIndex:s(u).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):kt("",!0)]),_:1},8,["modelValue"])}}}),Ja=va(Xa,[["__scopeId","data-v-efa0b5f3"]]),Qa={class:"row g-9 my-4"},Wa={class:"dialog-footer"},Za=Q({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:l}){const a=St(),v=t,n=l,u=ht(v,"visibility"),r=L(()=>a.filterData),i=()=>{S(),a.resetFilter()},S=()=>{n("handle-close",!1)},f=m=>{a.setMaxRiskRank(m)},d=m=>{a.setMaxRiskRankTo(m)},c=m=>{a.setRevisedRisk(m)},T=m=>{a.setRevisedRiskTo(m)},E=m=>{a.setOverallRisk(m)},_=m=>{a.setOverallRiskTo(m)},D=m=>{a.setFailureTiming(m)},g=m=>{a.setFailureTimingTo(m)},y=m=>{a.setSystemImpact(m)},p=m=>{a.setSystemImpactTo(m)},w=m=>{a.setOpsImpact(m)},O=m=>{a.setOpsImpactTo(m)},x=m=>{a.setSupplyRisk(m)},I=m=>{a.setSupplyRiskTo(m)},K=m=>{a.setFailureCost(m)},P=m=>{a.setFailureCostTo(m)},o=m=>{a.setComments(m)},U=m=>{a.setCommentsTo(m)},j=m=>{a.setStartDate(m)},st=m=>{a.setStartDateTo(m)},Z=m=>{a.setEndDate(m)},G=m=>{a.setEndDateTo(m)},Lt=()=>{const m=a.lastUsedFilterData.maxRiskRank!==a.filterData.maxRiskRank,tt=a.lastUsedFilterData.maxRiskRankTo!==a.filterData.maxRiskRankTo,it=a.lastUsedFilterData.revisedRisk!==a.filterData.revisedRisk,gt=a.lastUsedFilterData.revisedRiskTo!==a.filterData.revisedRiskTo,ot=a.lastUsedFilterData.overallRisk!==a.filterData.overallRisk,At=a.lastUsedFilterData.overallRiskTo!==a.filterData.overallRiskTo,Mt=a.lastUsedFilterData.failureTiming!==a.filterData.failureTiming,$t=a.lastUsedFilterData.failureTimingTo!==a.filterData.failureTimingTo,Ht=a.lastUsedFilterData.systemImpact!==a.filterData.systemImpact,Vt=a.lastUsedFilterData.systemImpactTo!==a.filterData.systemImpactTo,Bt=a.lastUsedFilterData.opsImpact!==a.filterData.opsImpact,Nt=a.lastUsedFilterData.opsImpactTo!==a.filterData.opsImpactTo,qt=a.lastUsedFilterData.supplyRisk!==a.filterData.supplyRisk,Kt=a.lastUsedFilterData.supplyRiskTo!==a.filterData.supplyRiskTo,zt=a.lastUsedFilterData.failureCost!==a.filterData.failureCost,jt=a.lastUsedFilterData.failureCostTo!==a.filterData.failureCostTo,Gt=a.lastUsedFilterData.comments!==a.filterData.comments,Yt=a.lastUsedFilterData.commentsTo!==a.filterData.commentsTo,Xt=a.lastUsedFilterData.startDate!==a.filterData.startDate,Jt=a.lastUsedFilterData.startDateTo!==a.filterData.startDateTo,Qt=a.lastUsedFilterData.endDate!==a.filterData.endDate,Wt=a.lastUsedFilterData.endDateTo!==a.filterData.endDateTo;n("handle-close",m||tt||it||gt||ot||At||Mt||$t||Ht||Vt||Bt||Nt||qt||Kt||zt||jt||Gt||Yt||Xt||Jt||Qt||Wt)};return(m,tt)=>{const it=$("el-button"),gt=$("el-dialog");return b(),A(gt,{modelValue:u.value,"onUpdate:modelValue":tt[0]||(tt[0]=ot=>u.value=ot),title:"Filter",width:"60%",onClose:tt[1]||(tt[1]=ot=>S())},{footer:h(()=>[k("span",Wa,[e(it,{type:"secondary",onClick:i},{default:h(()=>[M("Reset")]),_:1}),e(it,{type:"primary",onClick:Lt},{default:h(()=>[M("Filter")]),_:1})])]),default:h(()=>[k("div",Qa,[e(N,{"value-from":r.value.maxRiskRank,"value-to":r.value.maxRiskRankTo,label:"Max Risk Ranked Interval",name:"MaxRiskRank",options:s(a).maxRiskRankOption,onHandleChangeFrom:f,onHandleChangeTo:d},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.revisedRisk,"value-to":r.value.revisedRiskTo,label:"Revised Risk Rating",name:"RevisedRiskRating",options:s(a).revisedRiskOption,onHandleChangeFrom:c,onHandleChangeTo:T},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.overallRisk,"value-to":r.value.overallRiskTo,label:"Overall Risk Rating",name:"OverallRiskRating",options:s(a).overallRiskOption,onHandleChangeFrom:E,onHandleChangeTo:_},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.failureTiming,"value-to":r.value.failureTimingTo,label:"Failure Timing Risk",name:"FailureTimingRisk",options:s(a).failureTimingOption,onHandleChangeFrom:D,onHandleChangeTo:g},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.systemImpact,"value-to":r.value.systemImpactTo,label:"System Impact Risk",name:"SystemImpactRisk",options:s(a).systemImpactOption,onHandleChangeFrom:y,onHandleChangeTo:p},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.opsImpact,"value-to":r.value.opsImpactTo,label:"Ops Impact Risk",name:"OpsImpactRisk",options:s(a).opsImpactOption,onHandleChangeFrom:w,onHandleChangeTo:O},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.supplyRisk,"value-to":r.value.supplyRiskTo,label:"Supply Risk",name:"SupplyRisk",options:s(a).supplyRiskOption,onHandleChangeFrom:x,onHandleChangeTo:I},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.failureCost,"value-to":r.value.failureCostTo,label:"Failure Cost Risk",name:"FailureCostRisk",options:s(a).failureCostOption,onHandleChangeFrom:K,onHandleChangeTo:P},null,8,["value-from","value-to","options"]),e(N,{"value-from":r.value.comments,"value-to":r.value.commentsTo,label:"Comments",name:"Comments",options:s(a).commentsOption,onHandleChangeFrom:o,onHandleChangeTo:U},null,8,["value-from","value-to","options"]),e(Ft,{"value-from":r.value.startDate?r.value.startDate.toString():"","value-to":r.value.startDateTo?r.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:j,onHandleChangeTo:st},null,8,["value-from","value-to"]),e(Ft,{"value-from":r.value.endDate?r.value.endDate.toString():"","value-to":r.value.endDateTo?r.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:Z,onHandleChangeTo:G},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),te={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},ae=k("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),ee={class:"d-flex justify-content-between align-items-center"},se={class:"card"},ie={class:"card-body grid-padding"},oe={class:"my-5"},cs=Q({__name:"Index",setup(t){const l=Zt(),a=St(),v=Rt(),n=Tt(),u=at(!1),r=at(!1),i=at(!1),S=at(!1),f=L(()=>a.displayData),d=L(()=>a.pagination),c=I=>{a.setPage(I)};ca(async()=>{l.dispatch(aa.ACTIVE_PAGE,vt().meta.parentMenu),ta("Risk Rank Material",[{pageName:vt().meta.parentMenu,pageRoute:vt().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-riskrankmaterial"},{pageName:"Risk Rank Material",pageRoute:"ironlake-config-riskrankmaterial"}]),a.setPage(1),await a.getLookup()}),pa(async()=>{a.resetState(),v.resetState(),n.resetState()});const T=async()=>{await a.setPage(1),await a.getLookup()},E=()=>{u.value=!0},_=async I=>{u.value=!1,I&&await T()},D=()=>{r.value=!0},g=async I=>{r.value=!1,I&&await T()},y=()=>{i.value=!0},p=async I=>{i.value=!1,I&&await T()},w=async()=>{const I=await a.export();Da.saveAs(new Blob([I],{type:"application/octet-stream"}),"RiskRankMaterial.xlsx")},O=()=>{S.value=!0},x=async I=>{S.value=!1,I&&await T()};return(I,K)=>(b(),rt(ha,null,[k("div",te,[ae,k("div",ee,[e(ia,{onShowDialog:E}),e(ea,{onShowDialog:y}),e(la,{onHandleDownload:w}),e(oa,{onShowDialog:O})])]),k("div",se,[k("div",ie,[e(Oa,{"list-data":f.value,page:d.value.currentPage,onShowDialog:D},null,8,["list-data","page"])])]),k("div",oe,[s(a).paginationLoading?kt("",!0):(b(),A(bt,{key:0,onRaisePageChange:K[0]||(K[0]=P=>c(P)),currentPage:d.value.currentPage,totalPage:d.value.totalPage,totalPageSize:d.value.totalPageSize,startPaginationIndex:d.value.startPaginationIndex,endPaginationIndex:d.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),e(Aa,{visibility:u.value,onHandleClose:_},null,8,["visibility"]),e(Va,{visibility:r.value,onHandleClose:g},null,8,["visibility"]),e(Za,{visibility:i.value,onHandleClose:p},null,8,["visibility"]),e(Ja,{visibility:S.value,onHandleClose:x},null,8,["visibility"])],64))}});export{cs as default};
