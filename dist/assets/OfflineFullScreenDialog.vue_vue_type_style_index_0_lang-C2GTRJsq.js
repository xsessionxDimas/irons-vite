import{a as H}from"./@vueuse-DFoNmIyu.js";import{k as O,r as i,a0 as U,d as W,p as x,q as k,x as y,R as h,aB as v,s as I,aa as A,$ as L,F as M,C as T}from"./@vue-BypzYtbH.js";const P={class:"row fullscreen-dialog-image-preview"},Q=v("div",{class:"bg-secondary"},null,-1),j=["src","alt"],G={class:"image-carousel-description"},J=v("div",{class:"description-title"},"Description",-1),K={class:"description-text"},X={style:{"font-family":"'Public sans' !important","font-size":"12px","text-wrap":"unset"}},ee=O({__name:"OfflineFullScreenDialog",props:{visibility:{type:Boolean,default:!1},image:{type:String,required:!0},images:{required:!0,type:Array},newVersion:{type:Boolean,default:!1}},emits:["handle-close"],setup(f,{emit:V}){const r=f,N=V,n=H("(min-width: 1000px)"),p=i(),m=i(""),w=U(r,"visibility"),_=i([]),a=i(),o=i(0),B=i(!1),t=i("0px"),R=i(0),g=i(0),s=i(0),l=i(0),C=i(0),$=async()=>{o.value=0,_.value=[],!(r.images.length<1)&&(B.value=!0,t.value="300px",window.setTimeout(()=>{B.value=!1;const e=r.images.findIndex(c=>c.url==r.image),u=e<0?0:e;C.value=u;do window.setTimeout(()=>{p.value&&p.value.setActiveItem(u)},500);while(!p.value);m.value=decodeURI(r.images[u].description),a.value=document.getElementsByClassName("carousel-image")[u],s.value=a.value.height,l.value=a.value.width,R.value=600,g.value=600,t.value=n.value?"600px":"450px",l.value<500&&s.value<250?(a.value.style.width=l.value+"px",a.value.style.height=s.value+"px",t.value="300px"):l.value>600&&s.value<250?(a.value.style.width=l.value+"px",a.value.style.height="auto",t.value="300px"):(a.value.style.height=n.value?"600px":"450px",a.value.style.width="auto",t.value=n.value?"600px":"450px")},500))},D=e=>{var c;o.value=0,(c=r.images[e])!=null&&c.imgBlob&&(m.value=decodeURI(r.images[e].description),a.value=document.getElementsByClassName("carousel-image")[e],a.value.style.transform=`rotate(${o.value}deg)`,l.value<500&&s.value<250?(a.value.style.width=l.value+"px",a.value.style.height=s.value+"px",t.value="300px"):l.value>600&&s.value<250?(a.value.style.width=l.value+"px",a.value.style.height="auto",t.value="300px"):(a.value.style.height=n.value?"600px":"450px",a.value.style.width="auto",t.value=n.value?"600px":"450px"))},E=()=>{_.value=[],N("handle-close")},S=()=>{o.value==360&&(o.value=0),o.value=o.value+90;const e=a.value;o.value==90||o.value==270?b(e):l.value<500&&s.value<250?(e.style.width=l.value+"px",e.style.height=s.value+"px",t.value="300px"):l.value>600&&s.value<250?(e.style.width=l.value+"px",e.style.height="auto",t.value="300px"):(e.style.height=n.value?"600px":"450px",e.style.width="auto",t.value=n.value?"600px":"450px"),e.style.transform=`rotate(${o.value}deg)`},b=e=>{const u=g.value/l.value;e.style.width=`${g.value}px`,e.style.height=`${s.value*u+300}px`,t.value=`${l.value*u+50}px`};return W(n,()=>{const e=document.getElementsByClassName("carousel-image")[C.value];if(o.value==90||o.value==270)b(e);else{if(!e)return;l.value<500&&s.value<250?(e.style.width=l.value+"px",e.style.height=s.value+"px",t.value="300px"):l.value>600&&s.value<250?(e.style.width=l.value+"px",e.style.height="auto",t.value="300px"):(e.style.height=n.value?"600px":"450px",e.style.width="auto",t.value=n.value?"600px":"450px")}}),(e,u)=>{const c=h("el-carousel-item"),q=h("el-carousel"),z=h("NwImg"),F=h("el-dialog");return x(),k(F,{modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=d=>w.value=d),title:"Detailed picture",width:"90%",onClosed:u[1]||(u[1]=d=>E()),top:"2vh",onOpened:$,"destroy-on-close":""},{default:y(()=>[v("div",P,[Q,I(q,{ref_key:"carousel",ref:p,"indicator-position":"none",trigger:"click",height:t.value,interval:2147483647,arrow:"always",onChange:D,loop:"false"},{default:y(()=>[(x(!0),A(M,null,L(f.images,d=>(x(),k(c,{key:d.imgBlob},{default:y(()=>[v("img",{src:d.url,class:"carousel-image",alt:d.imgBlob},null,8,j)]),_:2},1024))),128))]),_:1},8,["height"]),v("div",{class:"rotate-button",onClick:S},[I(z,{src:"/media/icons/bumaau/rotate.png",width:"60"})]),v("div",G,[J,v("div",K,[v("pre",X,T(m.value),1)])])])]),_:1},8,["modelValue"])}}});export{ee as _};
