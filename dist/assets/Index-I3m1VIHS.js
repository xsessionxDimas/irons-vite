import{u as De}from"./vuex-BbOKrtVp.js";import{a as ve}from"./breadcrumb-D-Q4Tk9w.js";import{b as C,u as Pt,i as mt,h as yt,j as ct,A as Te}from"./index-BCnwA6yE.js";import{P as Lt}from"./Pagination-CVDIvnOM.js";import{F as qe}from"./FilterIconButton-Bj0WTbms.js";import{h as Ee,A as be,U as fe}from"./excel-generator-CRLIz6fw.js";import{D as Pe}from"./DownloadIconButton-CIQp-YG7.js";import{_ as g,b as Ot}from"./element-plus-C5R56mia.js";import{f as W,n as w,a as ot,b as ye}from"./date-format-BASVuupi.js";import{P as ht,d as Ce,a as Se}from"./table-sort-VnBD5Hfa.js";import{C as Ut,E as Fe,U as _e,B as we,a as ke}from"./urls-CJuEKIR0.js";import{d as Ct}from"./pinia-BjOS2_Ao.js";import{L as Le}from"./urls-BkQ91qOg.js";import{L as Oe}from"./urls-DyJLbgyr.js";import{L as Ue}from"./urls-DRfhKgLJ.js";import{L as Me}from"./urls-CauVTD0N.js";import{L as Ge}from"./urls-DcAJ9LzM.js";import{L as Ae}from"./urls-CWQmf-Uk.js";import{L as We}from"./urls-D3IEU0l7.js";import{L as Ie}from"./urls-D3Alc2B2.js";import{L as je}from"./urls-DBLs_wGY.js";import{L as $e}from"./urls-Bxsn_WiM.js";import{L as He}from"./urls-DzqKjzQ_.js";import{a as Re}from"./urls-SoFki2RW.js";import{a as xe}from"./urls-Co2bUkFd.js";import{L as Ne}from"./urls-BxuIRpRW.js";import{m as x,a as _t,b as wt}from"./mapOption-sP4IrA4W.js";import{k as at,bL as Be,r as lt,u as n,y as et,p as k,aa as dt,q as I,x as D,Y as vt,R,s as a,aB as u,C as tt,a0 as Tt,c as N,B as H,A as qt,T as Mt,bd as Ve,bb as Ke,a7 as ze,L as Qe,F as Ye}from"./@vue-BypzYtbH.js";import{a as Gt}from"./vee-validate-C_msoaAA.js";import{c as At,a as T,b as gt,d as Wt}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as It}from"./ErrorAlert-CMKGfwAi.js";import{_ as Dt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as q}from"./AutoComplete.vue_vue_type_script_setup_true_lang-D4CTLiQF.js";import{e as Je}from"./lodash-Cr9vlq0V.js";import{_ as Xe}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as Ze}from"./map-anything-abi6NY2Z.js";import{_ as ta}from"./nw-img-vue-CR837WER.js";import{_ as U}from"./AutoComplete.vue_vue_type_style_index_0_lang-CRR6Z--K.js";import{_ as kt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{F as ea}from"./file-saver-DhbZvGod.js";import"./vue-router-iNp9kJ0K.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const ft={equipment:"",equipmentTo:"",objectType:"",objectTypeTo:"",plannerGroup:"",plannerGroupTo:"",maintenanceWorkCenter:"",maintenanceWorkCenterTo:"",costCenter:"",costCenterTo:"",wbsElement:"",wbsElementTo:"",level:"",levelTo:"",equipmentType:"",equipmentTypeTo:"",equipmentGroup:"",equipmentGroupTo:"",equipmentModel:"",equipmentModelTo:"",equipmentStatus:"",equipmentStatusTo:"",site:"",siteTo:"",planningPlant:"",planningPlantTo:"",maintenancePlant:"",maintenancePlantTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",page:1,pageSize:10,order:"",ver:"v1"},rt=Ct({id:"equipmentAssignmentList",state:()=>({stateFilterData:{...ft},stateLastUsedFilterData:{...ft},statePageName:"equipmentAssignment",stateDisplayData:[],statePagination:new ht,stateLoading:!1,statePaginationLoading:!1,stateEquipmentOption:[],stateObjectTypeOption:[],statePlannerGroupOption:[],stateCostCenterOption:[],stateWbsElementOption:[],stateLevelOption:[],stateEquipmentTypeOption:[],stateEquipmentGroupOption:[],stateEquipmentModelOption:[],stateEquipmentStatusOption:[],stateSiteOption:[],statePlanningPlantOption:[],stateMaintenancePlantOption:[],stateMaintenanceWorkCenterOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,equipmentOption:t=>t.stateEquipmentOption,objectTypeOption:t=>t.stateObjectTypeOption,plannerGroupOption:t=>t.statePlannerGroupOption,costCenterOption:t=>t.stateCostCenterOption,wbsElementOption:t=>t.stateWbsElementOption,levelOption:t=>t.stateLevelOption,equipmentTypeOption:t=>t.stateEquipmentTypeOption,equipmentGroupOption:t=>t.stateEquipmentGroupOption,equipmentModelOption:t=>t.stateEquipmentModelOption,equipmentStatusOption:t=>t.stateEquipmentStatusOption,siteOption:t=>t.stateSiteOption,planningPlantOption:t=>t.statePlanningPlantOption,maintenancePlantOption:t=>t.stateMaintenancePlantOption,maintenanceWorkCenterOption:t=>t.stateMaintenanceWorkCenterOption},actions:{async getData(t=!0){const o={Equipment:this.stateFilterData.equipment,EquipmentTo:this.stateFilterData.equipmentTo,ObjectType:this.stateFilterData.objectType,ObjectTypeTo:this.stateFilterData.objectTypeTo,PlannerGroup:this.stateFilterData.plannerGroup,PlannerGroupTo:this.stateFilterData.plannerGroupTo,CostCenter:this.stateFilterData.costCenter,CostCenterTo:this.stateFilterData.costCenterTo,WbsElement:this.stateFilterData.wbsElement,WbsElementTo:this.stateFilterData.wbsElementTo,Level:this.stateFilterData.level,LevelTo:this.stateFilterData.levelTo,EquipmentType:this.stateFilterData.equipmentType,EquipmentTypeTo:this.stateFilterData.equipmentTypeTo,EquipmentGroup:this.stateFilterData.equipmentGroup,EquipmentGroupTo:this.stateFilterData.equipmentGroupTo,EquipmentModel:this.stateFilterData.equipmentModel,EquipmentModelTo:this.stateFilterData.equipmentModelTo,EquipmentStatus:this.stateFilterData.equipmentStatus,EquipmentStatusTo:this.stateFilterData.equipmentStatusTo,Site:this.stateFilterData.site,SiteTo:this.stateFilterData.siteTo,PlanningPlant:this.stateFilterData.planningPlant,PlanningPlantTo:this.stateFilterData.planningPlantTo,MaintenancePlant:this.stateFilterData.maintenancePlant,MaintenancePlantTo:this.stateFilterData.maintenancePlantTo,MaintenanceWorkCenter:this.stateFilterData.maintenanceWorkCenter,MaintenanceWorkCenterTo:this.stateFilterData.maintenanceWorkCenterTo,StartDate:this.stateFilterData.startDate?W(w(new Date(this.stateFilterData.startDate))):"",StartDateTo:this.stateFilterData.startDateTo?W(w(new Date(this.stateFilterData.startDateTo))):"",EndDate:this.stateFilterData.endDate?W(w(new Date(this.stateFilterData.endDate))):"",EndDateTo:this.stateFilterData.endDateTo?W(w(new Date(this.stateFilterData.endDateTo))):"",Page:this.stateFilterData.page.toString(),PageSize:this.stateFilterData.pageSize.toString(),Order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await C.get(Ut,"",new URLSearchParams(o).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){console.log(e)}this.stateLoading=!1},async getLookupEquipment(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Le,"",new URLSearchParams(t).toString());this.stateEquipmentOption=x(o.data.result.content,"equipmentNumber","equipmentNumberDescription")}catch(o){console.log(o)}},async getLookupMaintenanceWorkCenter(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Ne,"",new URLSearchParams(t).toString());this.stateMaintenanceWorkCenterOption=x(o.data.result.content,"maintenanceWorkCenter","maintenanceWorkCenterDescription")}catch(o){console.log(o)}},async getLookupObjectType(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Oe,"",new URLSearchParams(t).toString());this.stateObjectTypeOption=x(o.data.result.content,"objectType","objectTypeDescription")}catch(o){console.log(o)}},async getLookupPlannerGroup(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Ue,"",new URLSearchParams(t).toString());this.statePlannerGroupOption=x(o.data.result.content,"plannerGroup","plannerGroupDescription")}catch(o){console.log(o)}},async getLookupCostCenter(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Me,"",new URLSearchParams(t).toString());this.stateCostCenterOption=x(o.data.result.content,"costCenter","costCenterDescription")}catch(o){console.log(o)}},async getLookupWbsElement(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Ge,"",new URLSearchParams(t).toString());this.stateWbsElementOption=x(o.data.result.content,"wbsElement","wbsElementDescription")}catch(o){console.log(o)}},async getLookupLevel(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Ae,"",new URLSearchParams(t).toString());this.stateLevelOption=_t(o.data.result.content.level)}catch(o){console.log(o)}},async getLookupEquipmentType(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(We,"",new URLSearchParams(t).toString());this.stateEquipmentTypeOption=x(o.data.result.content,"equipmentType","equipmentTypeDescription")}catch(o){console.log(o)}},async getLookupEquipmentGroup(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Ie,"",new URLSearchParams(t).toString());this.stateEquipmentGroupOption=x(o.data.result.content,"equipmentGroup","equipmentGroupDescription")}catch(o){console.log(o)}},async getLookupEquipmentModel(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(je,"",new URLSearchParams(t).toString());this.stateEquipmentModelOption=x(o.data.result.content,"equipmentModel","equipmentModelDescription")}catch(o){console.log(o)}},async getLookupEquipmentStatus(){const t={ver:this.stateFilterData.ver};try{const o=await C.get($e,"",new URLSearchParams(t).toString());this.stateEquipmentStatusOption=_t(o.data.result.content.status)}catch(o){console.log(o)}},async getLookupSite(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(He,"",new URLSearchParams(t).toString());this.stateSiteOption=wt(o.data.result.content,"siteId","siteCode","siteDescription")}catch(o){console.log(o)}},async getLookupPlanningPlant(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(Re.getLookup,"",new URLSearchParams(t).toString());this.statePlanningPlantOption=wt(o.data.result.content,"planningPlantId","planningPlantCode","planningPlantDescription")}catch(o){console.log(o)}},async getLookupMaintenancePlant(){const t={ver:this.stateFilterData.ver};try{const o=await C.get(xe.getLookup,"",new URLSearchParams(t).toString());this.stateMaintenancePlantOption=x(o.data.result.content,"maintenancePlant","maintenancePlantDescription")}catch(o){console.log(o)}},async export(){const t={Equipment:this.stateFilterData.equipment,EquipmentTo:this.stateFilterData.equipmentTo,ObjectType:this.stateFilterData.objectType,ObjectTypeTo:this.stateFilterData.objectTypeTo,PlannerGroup:this.stateFilterData.plannerGroup,PlannerGroupTo:this.stateFilterData.plannerGroupTo,CostCenter:this.stateFilterData.costCenter,CostCenterTo:this.stateFilterData.costCenterTo,WbsElement:this.stateFilterData.wbsElement,WbsElementTo:this.stateFilterData.wbsElementTo,Level:this.stateFilterData.level,LevelTo:this.stateFilterData.levelTo,EquipmentType:this.stateFilterData.equipmentType,EquipmentTypeTo:this.stateFilterData.equipmentTypeTo,EquipmentGroup:this.stateFilterData.equipmentGroup,EquipmentGroupTo:this.stateFilterData.equipmentGroupTo,EquipmentModel:this.stateFilterData.equipmentModel,EquipmentModelTo:this.stateFilterData.equipmentModelTo,EquipmentStatus:this.stateFilterData.equipmentStatus,EquipmentStatusTo:this.stateFilterData.equipmentStatusTo,Site:this.stateFilterData.site,SiteTo:this.stateFilterData.siteTo,PlanningPlant:this.stateFilterData.planningPlant,PlanningPlantTo:this.stateFilterData.planningPlantTo,MaintenancePlant:this.stateFilterData.maintenancePlant,MaintenancePlantTo:this.stateFilterData.maintenancePlantTo,MaintenanceWorkCenterOption:this.stateFilterData.maintenanceWorkCenter,MaintenanceWorkCenterOptionTo:this.stateFilterData.maintenanceWorkCenterTo,StartDate:this.stateFilterData.startDate?W(w(new Date(this.stateFilterData.startDate))):"",StartDateTo:this.stateFilterData.startDateTo?W(w(new Date(this.stateFilterData.startDateTo))):"",EndDate:this.stateFilterData.endDate?W(w(new Date(this.stateFilterData.endDate))):"",EndDateTo:this.stateFilterData.endDateTo?W(w(new Date(this.stateFilterData.endDateTo))):"",ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await C.getBlob(Fe,"",new URLSearchParams(t).toString())).data}catch(o){console.log(o)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:o}){if(!t&&!o)this.stateFilterData.order="";else{const e=o=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setEquipment(t){this.stateFilterData.equipment=t},setEquipmentTo(t){this.stateFilterData.equipmentTo=t},setMaintenanceWorkCenter(t){this.stateFilterData.maintenanceWorkCenter=t},setMaintenanceWorkCenterTo(t){this.stateFilterData.maintenanceWorkCenterTo=t},setObjectType(t){this.stateFilterData.objectType=t},setObjectTypeTo(t){this.stateFilterData.objectTypeTo=t},setPlannerGroup(t){this.stateFilterData.plannerGroup=t},setPlannerGroupTo(t){this.stateFilterData.plannerGroupTo=t},setCostCenter(t){this.stateFilterData.costCenter=t},setCostCenterTo(t){this.stateFilterData.costCenterTo=t},setWbsElement(t){this.stateFilterData.wbsElement=t},setWbsElementTo(t){this.stateFilterData.wbsElementTo=t},setLevel(t){this.stateFilterData.level=t},setLevelTo(t){this.stateFilterData.levelTo=t},setEquipmentType(t){this.stateFilterData.equipmentType=t},setEquipmentTypeTo(t){this.stateFilterData.equipmentTypeTo=t},setEquipmentGroup(t){this.stateFilterData.equipmentGroup=t},setEquipmentGroupTo(t){this.stateFilterData.equipmentGroupTo=t},setEquipmentModel(t){this.stateFilterData.equipmentModel=t},setEquipmentModelTo(t){this.stateFilterData.equipmentModelTo=t},setEquipmentStatus(t){this.stateFilterData.equipmentStatus=t},setEquipmentStatusTo(t){this.stateFilterData.equipmentStatusTo=t},setSite(t){this.stateFilterData.site=t},setSiteTo(t){this.stateFilterData.siteTo=t},setPlanningPlant(t){this.stateFilterData.planningPlant=t},setPlanningPlantTo(t){this.stateFilterData.planningPlantTo=t},setMaintenancePlant(t){this.stateFilterData.maintenancePlant=t},setMaintenancePlantTo(t){this.stateFilterData.maintenancePlantTo=t},setStartDate(t){this.stateFilterData.startDate=t},setStartDateTo(t){this.stateFilterData.startDateTo=t},setEndDate(t){this.stateFilterData.endDate=t},setEndDateTo(t){this.stateFilterData.endDateTo=t},async resetFilter(){this.stateFilterData.equipment="",this.stateFilterData.equipmentTo="",this.stateFilterData.objectType="",this.stateFilterData.objectTypeTo="",this.stateFilterData.plannerGroup="",this.stateFilterData.plannerGroupTo="",this.stateFilterData.costCenter="",this.stateFilterData.costCenterTo="",this.stateFilterData.wbsElement="",this.stateFilterData.wbsElementTo="",this.stateFilterData.level="",this.stateFilterData.levelTo="",this.stateFilterData.equipmentType="",this.stateFilterData.equipmentTypeTo="",this.stateFilterData.equipmentGroup="",this.stateFilterData.equipmentGroupTo="",this.stateFilterData.equipmentModel="",this.stateFilterData.equipmentModelTo="",this.stateFilterData.equipmentStatus="",this.stateFilterData.equipmentStatusTo="",this.stateFilterData.site="",this.stateFilterData.siteTo="",this.stateFilterData.planningPlant="",this.stateFilterData.planningPlantTo="",this.stateFilterData.maintenancePlant="",this.stateFilterData.maintenancePlantTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const t=this.stateLastUsedFilterData.equipment!=="",o=this.stateLastUsedFilterData.equipment!=="",e=this.stateLastUsedFilterData.objectType!=="",F=this.stateLastUsedFilterData.objectType!=="",m=this.stateLastUsedFilterData.plannerGroup!=="",h=this.stateLastUsedFilterData.plannerGroup!=="",i=this.stateLastUsedFilterData.costCenter!=="",P=this.stateLastUsedFilterData.costCenter!=="",s=this.stateLastUsedFilterData.wbsElement!=="",v=this.stateLastUsedFilterData.wbsElement!=="",y=this.stateLastUsedFilterData.level!=="",E=this.stateLastUsedFilterData.level!=="",S=this.stateLastUsedFilterData.equipmentType!=="",b=this.stateLastUsedFilterData.equipmentType!=="",L=this.stateLastUsedFilterData.equipmentGroup!=="",_=this.stateLastUsedFilterData.equipmentGroup!=="",r=this.stateLastUsedFilterData.equipmentModel!=="",c=this.stateLastUsedFilterData.equipmentModel!=="",d=this.stateLastUsedFilterData.equipmentStatus!=="",M=this.stateLastUsedFilterData.equipmentStatus!=="",G=this.stateLastUsedFilterData.site!=="",O=this.stateLastUsedFilterData.site!=="",f=this.stateLastUsedFilterData.planningPlant!=="",A=this.stateLastUsedFilterData.planningPlant!=="",j=this.stateLastUsedFilterData.maintenancePlant!=="",B=this.stateLastUsedFilterData.maintenancePlant!=="",V=this.stateLastUsedFilterData.startDate!=="",K=this.stateLastUsedFilterData.startDate!=="",z=this.stateLastUsedFilterData.endDate!=="",Q=this.stateLastUsedFilterData.endDate!=="";(t||o||e||F||m||h||i||P||s||v||y||E||S||b||L||_||r||c||d||M||G||O||f||A||j||B||V||K||z||Q)&&await this.getData()},resetState(){this.stateFilterData={...ft},this.stateDisplayData=[],this.statePagination=new ht,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Et=Ct({id:"equipmentAssignmentForm",state:()=>({stateFormData:{equipmentAssignmentId:0,endDate:w(new Date("12/31/9999")),startDate:w(new Date)},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading},actions:{async insertData(t){this.stateFormData.startDate=W(w(new Date(this.stateFormData.startDate))),this.stateFormData.endDate=W(w(new Date(this.stateFormData.endDate)));try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},e=await C.post(`${Ut}?${new URLSearchParams(o).toString()}`,this.stateFormData);e.data.title==="Error"?(this.stateErrors.push(e.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){this.stateError=o,this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateData(t){this.stateFormData.startDate=W(w(new Date(this.stateFormData.startDate))),this.stateFormData.endDate=W(w(new Date(this.stateFormData.endDate)));try{this.stateLoading=!0;const o={userAccount:t,ver:"v1"},e=await C.post(`${_e}?${new URLSearchParams(o).toString()}`,this.stateFormData);e.data.title==="Error"?(this.stateErrors.push(e.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(o){this.stateError=o,this.stateErrors.push(o.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.equipmentAssignmentId=t.equipmentAssignmentId||0,this.stateFormData.equipment=t.equipment||"",this.stateFormData.objectType=t.objectType||"",this.stateFormData.plannerGroup=t.plannerGroup||"",this.stateFormData.costCenter=t.costCenter||"",this.stateFormData.wbsElement=t.wbsElement||"",this.stateFormData.level=t.level||"",this.stateFormData.equipmentType=t.equipmentType||"",this.stateFormData.equipmentGroup=t.equipmentGroup||"",this.stateFormData.equipmentModel=t.equipmentModel||"",this.stateFormData.equipmentStatus=t.equipmentStatus||"",this.stateFormData.site=t.site||"",this.stateFormData.planningPlant=t.planningPlant||"",this.stateFormData.maintenancePlant=t.maintenancePlant||"",this.stateFormData.maintenanceWorkCenter=t.maintenanceWorkCenter||"",this.stateFormData.startDate=t.startDate||"",this.stateFormData.endDate=t.endDate||""},resetState(){this.stateFormData={equipmentAssignmentId:0,endDate:w(new Date("12/31/9999")),startDate:w(new Date)},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}}),aa={key:0,style:{height:"100px"}},na={key:0,class:"row justify-content-center"},oa={key:1,class:"row justify-content-center"},sa={class:"row justify-content-center"},ia=["onClick"],la=at({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(t,{emit:o}){const e=t,F=o,m=rt(),h=Et(),i=Be(()=>(e.page-1)*10+1),P=lt(""),s=E=>{P.value=E.order;const S={prop:E.prop,order:E.order};m.setSort(S)},v=(E,S,b)=>Ce(E[b],S[b],P.value),y=E=>{h.setFormData(E),F("show-dialog",null)};return(E,S)=>{const b=R("inline-svg"),L=R("el-tooltip"),_=vt("loading");return n(m).loading?et((k(),dt("div",aa,null,512)),[[_,n(m).loading]]):et((k(),I(n(Ot),{key:1,data:e.listData,style:{width:"100%"},onSortChange:s,"empty-text":"No Data"},{default:D(()=>[a(n(g),{label:"No",width:"90",align:"center"},{default:D(r=>[u("span",null,tt(n(i)+r.$index),1)]),_:1}),a(n(g),{prop:"equipment",label:"Equipment Number",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"equipment")},null,8,["sort-method"]),a(n(g),{prop:"objectType",label:"Object Type",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"objectType")},null,8,["sort-method"]),a(n(g),{prop:"plannerGroup",label:"Planner Group",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"plannerGroup")},null,8,["sort-method"]),a(n(g),{prop:"maintenanceWorkCenter",label:"Maintenance Work Center",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"maintenanceWorkCenter")},null,8,["sort-method"]),a(n(g),{prop:"costCenter",label:"Cost Center",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"costCenter")},null,8,["sort-method"]),a(n(g),{prop:"wbsElement",label:"WBS Element",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"wbsElement")},null,8,["sort-method"]),a(n(g),{prop:"level",label:"Level",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"level")},null,8,["sort-method"]),a(n(g),{prop:"equipmentType",label:"Equipment Type",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"equipmentType")},null,8,["sort-method"]),a(n(g),{prop:"equipmentGroup",label:"Equipment Group",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"equipmentGroup")},null,8,["sort-method"]),a(n(g),{prop:"equipmentModel",label:"Equipment Model",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"equipmentModel")},null,8,["sort-method"]),a(n(g),{prop:"equipmentStatus",label:"Equipment Status",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"equipmentStatus")},null,8,["sort-method"]),a(n(g),{prop:"site",label:"Site",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"site")},null,8,["sort-method"]),a(n(g),{prop:"planningPlant",label:"Planning Plant",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"planningPlant")},null,8,["sort-method"]),a(n(g),{prop:"maintenancePlant",label:"Maintenance Plant",width:"170",sortable:"","sort-method":(r,c)=>v(r,c,"maintenancePlant")},null,8,["sort-method"]),a(n(g),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:D(r=>[u("span",null,tt(n(ot)(r.row.startDate)),1)]),_:1}),a(n(g),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:D(r=>[u("span",null,tt(n(ot)(r.row.endDate)),1)]),_:1}),a(n(g),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:D(r=>[r.row.isActive?(k(),dt("div",na,[a(b,{src:"/media/svg/tables/rows/check.svg"})])):(k(),dt("div",oa,[a(b,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),a(n(g),{prop:"changedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:D(r=>[u("span",null,tt(n(ye)(r.row.changedOn)),1)]),_:1}),a(n(g),{prop:"changedBy",label:"Changed by",sortable:"",width:"300","sort-method":(r,c)=>v(r,c,"changedBy")},null,8,["sort-method"]),a(n(g),{label:"",width:"80"},{default:D(r=>[u("div",sa,[a(L,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:D(()=>[u("button",{class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:c=>y(r.row)},[a(b,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,ia)]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[_,n(m).loading]])}}}),ra={class:"col-md-6 fv-row fv-plugins-icon-container"},pa={class:"col-md-6 fv-row fv-plugins-icon-container"},ua={class:"col-md-6 fv-row fv-plugins-icon-container"},ca={class:"col-md-6 fv-row fv-plugins-icon-container"},da={class:"col-md-6 fv-row fv-plugins-icon-container"},ma={class:"col-md-6 fv-row fv-plugins-icon-container"},ha={class:"col-md-6 fv-row fv-plugins-icon-container"},ga={class:"col-md-6 fv-row fv-plugins-icon-container"},Da={class:"col-md-6 fv-row fv-plugins-icon-container"},va={class:"col-md-6 fv-row fv-plugins-icon-container"},Ta={class:"col-md-6 fv-row fv-plugins-icon-container"},qa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ea={class:"col-md-6 fv-row fv-plugins-icon-container"},ba={class:"col-md-6 fv-row fv-plugins-icon-container"},fa={class:"col-md-6 fv-row fv-plugins-icon-container"},Pa={class:"col-md-6 fv-row fv-plugins-icon-container"},ya={class:"dialog-footer"},Ca=at({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const e=t,F=o,m=Et(),h=Pt(),i=rt(),P=Tt(e,"visibility"),s=N(()=>m.formData),v=N(()=>m.errors),y=N(()=>m.isError),E=At().shape({equipment:T().required("Equipment Number is mandatory"),objectType:T().required("Object Type is mandatory"),plannerGroup:T().required("Planner Group is mandatory"),costCenter:T().required("Cost Center is mandatory"),wbsElement:T().required("WBS Element is mandatory"),level:T().required("Level is mandatory"),equipmentType:T().required("Equipment Type is mandatory"),equipmentGroup:T().required("Equipment Group is mandatory"),equipmentModel:T().required("Equipment Model is mandatory"),equipmentStatus:T().required("Equipment Status is mandatory"),site:T().required("Site is mandatory"),planningPlant:T().required("Planning Plant is mandatory"),maintenancePlant:T().required("Maintenance Plant is mandatory"),maintenanceWorkCenter:T().required("Maintenance Work Center is mandatory"),startDate:gt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:gt().required("End Date is mandatory").min(Wt("startDate"),"End date must be later than start date").typeError("End Date is mandatory")}),S=()=>{L(""),_(""),r(""),c(""),d(""),M(""),G(""),O(""),f(""),A(""),j(""),B(""),V(""),K(""),z(""),Q("")},b=(l=!1)=>{Y(),S(),m.resetState(),F("handle-close",l)},L=l=>{s.value.equipment=l},_=l=>{s.value.objectType=l},r=l=>{s.value.plannerGroup=l},c=l=>{s.value.maintenanceWorkCenter=l},d=l=>{s.value.costCenter=l},M=l=>{s.value.wbsElement=l},G=l=>{s.value.level=l},O=l=>{s.value.equipmentType=l},f=l=>{s.value.equipmentGroup=l},A=l=>{s.value.equipmentModel=l},j=l=>{s.value.equipmentStatus=l},B=l=>{s.value.site=l},V=l=>{s.value.planningPlant=l},K=l=>{s.value.maintenancePlant=l},z=l=>{s.value.startDate=l},Q=l=>{s.value.endDate=l},st=async()=>{Y(),await E.validate(s.value,{abortEarly:!1}).catch(l=>{m.setErrors(l.errors)}),!y.value&&mt("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&m.insertData(h.user.Name).then(()=>{m.isError||yt("Form has been successfully submitted!","Ok").then(()=>{b(!0)})})})},Y=()=>{m.setErrors([])};return(l,$)=>{const J=R("el-button"),it=R("el-dialog"),X=vt("loading");return et((k(),I(it,{modelValue:P.value,"onUpdate:modelValue":$[0]||($[0]=Z=>P.value=Z),title:"New Data",width:"60%",onClose:$[1]||($[1]=Z=>b())},{footer:D(()=>[u("span",ya,[a(J,{type:"primary",onClick:st,disabled:n(m).loading},{default:D(()=>[H("Submit")]),_:1},8,["disabled"]),a(J,{type:"secondary",onClick:b,disabled:n(m).loading},{default:D(()=>[H("Close")]),_:1},8,["disabled"])])]),default:D(()=>[a(Mt,{name:"fade"},{default:D(()=>[y.value?(k(),I(It,{key:0,errorMessages:v.value,onResetForm:Y},null,8,["errorMessages"])):qt("",!0)]),_:1}),et((k(),I(n(Gt),{id:"kt_filter_form",class:"row g-4 my-4"},{default:D(()=>[u("div",ra,[a(q,{value:s.value.equipment,placeholder:"Add Equipment Number",label:"Equipment Number",name:"equipment",options:n(i).equipmentOption,onHandleChange:L},null,8,["value","options"])]),u("div",pa,[a(q,{value:s.value.objectType,placeholder:"Add Object Type",label:"Object Type",name:"objectType",options:n(i).objectTypeOption,onHandleChange:_},null,8,["value","options"])]),u("div",ua,[a(q,{value:s.value.plannerGroup,placeholder:"Add Planner Group",label:"Planner Group",name:"plannerGroup",options:n(i).plannerGroupOption,onHandleChange:r},null,8,["value","options"])]),u("div",ca,[a(q,{value:s.value.maintenanceWorkCenter,placeholder:"Add Maintenance Work Center",label:"Maintenance Work Center",name:"maintenanceWorkCenter",options:n(i).maintenanceWorkCenterOption,onHandleChange:c},null,8,["value","options"])]),u("div",da,[a(q,{value:s.value.costCenter,placeholder:"Add Cost Center",label:"Cost Center",name:"costCenter",options:n(i).costCenterOption,onHandleChange:d},null,8,["value","options"])]),u("div",ma,[a(q,{value:s.value.wbsElement,placeholder:"Add WBS Element",label:"WBS Element",name:"wbsElement",options:n(i).wbsElementOption,onHandleChange:M},null,8,["value","options"])]),u("div",ha,[a(q,{value:s.value.level,placeholder:"Add Level",label:"Level",name:"level",options:n(i).levelOption,onHandleChange:G},null,8,["value","options"])]),u("div",ga,[a(q,{value:s.value.equipmentType,placeholder:"Add Equipment Type",label:"Equipment Type",name:"equipmentType",options:n(i).equipmentTypeOption,onHandleChange:O},null,8,["value","options"])]),u("div",Da,[a(q,{value:s.value.equipmentGroup,placeholder:"Add Equipment Group",label:"Equipment Group",name:"equipmentGroup",options:n(i).equipmentGroupOption,onHandleChange:f},null,8,["value","options"])]),u("div",va,[a(q,{value:s.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"equipmentModel",options:n(i).equipmentModelOption,onHandleChange:A},null,8,["value","options"])]),u("div",Ta,[a(q,{value:s.value.equipmentStatus,placeholder:"Add Equipment Status",label:"Equipment Status",name:"equipmentStatus",options:n(i).equipmentStatusOption,onHandleChange:j},null,8,["value","options"])]),u("div",qa,[a(q,{value:s.value.site,placeholder:"Add Site",label:"Site",name:"site",options:n(i).siteOption,onHandleChange:B},null,8,["value","options"])]),u("div",Ea,[a(q,{value:s.value.planningPlant,placeholder:"Add Planning Plant",label:"Planning Plant",name:"planningPlant",options:n(i).planningPlantOption,onHandleChange:V},null,8,["value","options"])]),u("div",ba,[a(q,{value:s.value.maintenancePlant,placeholder:"Add Maintenance Plant",label:"Maintenance Plant",name:"maintenancePlant",options:n(i).maintenancePlantOption,onHandleChange:K},null,8,["value","options"])]),u("div",fa,[a(Dt,{value:s.value.startDate?s.value.startDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"startDate",onHandleChange:z},null,8,["value"])]),u("div",Pa,[a(Dt,{value:s.value.endDate?s.value.endDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"endDate",onHandleChange:Q},null,8,["value"])])]),_:1})),[[X,n(m).loading]])]),_:1},8,["modelValue"])),[[X,n(m).loading]])}}}),St=Ct({id:"equipmentAssignmentBulk",state:()=>({statePagination:new ht,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const o={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await C.post(`${we}?${new URLSearchParams(o).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){console.log(e)}this.stateLoading=!1},async upload({userAccount:t,excelFile:o}){const e={userAccount:t,ver:"v1"},F=`${ke}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const m=await C.postImages(F,o);m.data.statusCode==200?m.data.result.isError?(this.stateIsError=!0,this.stateError=m.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=m.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Je.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=m.data.result.isError,this.stateError=m.data.result.message)}catch(m){console.log(m),this.stateIsError=!0,this.stateError=m.response.data.result.message}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Se(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new ht,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),Sa={class:"icon"},Fa=at({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const o=t,e=St(),F=N(()=>(o.page-1)*10+1),m=h=>{const i={prop:h.prop,order:h.order};e.setSort(i)};return(h,i)=>{const P=R("inline-svg");return k(),I(n(Ot),{data:o.listData,style:{width:"100%"},onSortChange:m,"empty-text":"No Data"},{default:D(()=>[a(n(g),{label:"No",width:"60",align:"center"},{default:D(s=>[u("span",null,tt(F.value+s.$index),1)]),_:1}),a(n(g),{prop:"equipment",label:"Equipment Number",width:"170",sortable:""}),a(n(g),{prop:"objectType",label:"Object Type",width:"170",sortable:""}),a(n(g),{prop:"plannerGroup",label:"Planner Group",width:"170",sortable:""}),a(n(g),{prop:"maintenanceWorkCenter",label:"Maintenance Work Center",width:"170",sortable:""}),a(n(g),{prop:"costCenter",label:"Cost Center",width:"170",sortable:""}),a(n(g),{prop:"wbsElement",label:"WBS Element",width:"170",sortable:""}),a(n(g),{prop:"level",label:"Level",width:"170",sortable:""}),a(n(g),{prop:"equipmentType",label:"Equipment Type",width:"170",sortable:""}),a(n(g),{prop:"equipmentGroup",label:"Equipment Group",width:"170",sortable:""}),a(n(g),{prop:"equipmentModel",label:"Equipment Model",width:"170",sortable:""}),a(n(g),{prop:"equipmentStatus",label:"Equipment Status",width:"170",sortable:""}),a(n(g),{prop:"site",label:"Site",width:"170",sortable:""}),a(n(g),{prop:"planningPlant",label:"Planning Plant",width:"170",sortable:""}),a(n(g),{prop:"maintenancePlant",label:"Maintenance Plant",width:"170",sortable:""}),a(n(g),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:D(s=>[u("span",null,tt(n(ot)(s.row.startDate)),1)]),_:1}),a(n(g),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:D(s=>[u("span",null,tt(n(ot)(s.row.endDate)),1)]),_:1}),a(n(g),{prop:"validationReason",label:"Remark","min-width":"100",sortable:""}),a(n(g),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:D(s=>[u("div",Sa,[a(P,{src:s.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Ft=t=>(Ve("data-v-842a3ae9"),t=t(),Ke(),t),_a=Ft(()=>u("div",{class:"text-center"},null,-1)),wa=Ft(()=>u("div",{class:"mb-3"},[u("span",null,[H(" Download template "),u("a",{href:"documents/MasterEquipmentAssignment.xlsx",target:"_blank",id:"link-download"},"here"),H(" before uploading file ")])],-1)),ka=Ft(()=>u("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[u("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),La={class:"card"},Oa={class:"card-body grid-padding"},Ua={class:"dialog-footer"},Ma=at({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:o}){const e=t,F=o,m=Pt(),h=St(),i=Tt(e,"visibility"),P=()=>{const r=Ze(h.validatedData,c=>{const d=c;return{equipment:d.equipment,objectType:d.objectType,plannerGroup:d.plannerGroup,costCenter:d.costCenter,wbsElement:d.wbsElement,level:d.level,equipmentType:d.equipmentType,equipmentGroup:d.equipmentGroup,equipmentModel:d.equipmentModel,equipmentStatus:d.equipmentStatus,site:d.site,planningPlant:d.planningPlant,maintenancePlant:d.maintenancePlant,maintenanceWorkCenter:d.maintenanceWorkCenter,startDate:d.startDate,endDate:d.endDate}});return Object.values(r)},s=()=>{const r=document.getElementById("link-download");r&&r.click()},v=()=>{h.validatedData.length>0?mt("Cancel Upload Data?","Confirm").then(c=>{c.isConfirmed&&E()}):E()},y=async r=>{await h.upload({userAccount:m.user.Name,excelFile:r}),h.stateError&&ct(h.error)},E=(r=!1)=>{h.resetState(),F("handle-close",r)},S=r=>{h.setIsUploadedState(r)},b=r=>{h.setPage(r)},L=()=>{if(h.validatedData.length<1){s();return}const r=["EQUIPMENT NUMBER","OBJECT TYPE","PLANNER GROUP","MAINTENANCE WORK CENTER","COST CENTER","WBS ELEMENT","LEVEL","EQUIPMENT TYPE","EQUIPMENT GROUP","EQUIPMENT MODEL","EQUIPMENT STATUS","SITE","PLANNING PLANT","MAINTENANCE PLANT","START DATE","END DATE","REMARK","STATUS"],c=h.validatedData.map(d=>({equipment:d.equipment,objectType:d.objectType,plannerGroup:d.plannerGroup,maintenanceWorkCenter:d.maintenanceWorkCenter,costCenter:d.costCenter,wbsElement:d.wbsElement,level:d.level,equipmentType:d.equipmentType,equipmentGroup:d.equipmentGroup,equipmentModel:d.equipmentModel,equipmentStatus:d.equipmentStatus,site:d.site,planningPlant:d.planningPlant,maintenancePlant:d.maintenancePlant,startDate:ot(d.startDate?d.startDate.toString():""),endDate:ot(d.endDate?d.endDate.toString():""),remark:d.validationReason,status:d.isValid?"OK":"Error"}));Ee("Equipment Assignment",r,c)},_=async()=>{if(h.displayData.length<1){ct("There is no data to submit");return}if(h.isError){ct("There is still invalid row(s)");return}mt("Are you sure you want to submit ?").then(async r=>{if(r.isConfirmed){const c=P();if(h.setBulkData(c),await h.bulkInsert(m.user.Name),h.isError){ct(h.stateError);return}yt("Form has been successfully submitted!","Ok").then(()=>{E(!0)})}})};return(r,c)=>{const d=R("el-button"),M=R("el-dialog"),G=vt("loading");return k(),I(M,{title:"Upload Bulk Data",modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=O=>i.value=O),"before-close":v,width:"70%","custom-class":"upload-modal"},{footer:D(()=>[u("div",null,[u("span",Ua,[a(d,{type:"success",onClick:L},{default:D(()=>[H("Download")]),_:1}),a(d,{type:"primary",onClick:_},{default:D(()=>[H("Upload")]),_:1}),a(d,{type:"success",onClick:v},{default:D(()=>[H("Cancel")]),_:1})])])]),default:D(()=>[_a,wa,et(a(Xe,{isSubmissionUploadSuccess:n(h).isUploaded,onHandleCloseUploadedFile:v,onHandleUpload:y,onHandleSetIsExcelFileUploaded:S},null,8,["isSubmissionUploadSuccess"]),[[G,n(h).uploadLoading]]),ka,u("div",La,[u("div",Oa,[a(Fa,{"list-data":n(h).displayData,page:n(h).pagination.currentPage},null,8,["list-data","page"])])]),n(h).displayData.length>0?(k(),I(Lt,{key:0,onRaisePageChange:c[0]||(c[0]=O=>b(O)),currentPage:n(h).pagination.currentPage,totalPage:n(h).pagination.totalPage,totalPageSize:n(h).pagination.totalPageSize,startPaginationIndex:n(h).pagination.startPaginationIndex,endPaginationIndex:n(h).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):qt("",!0)]),_:1},8,["modelValue"])}}}),Ga=ta(Ma,[["__scopeId","data-v-842a3ae9"]]),Aa={class:"row g-4 my-4"},Wa={class:"dialog-footer"},Ia=at({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const e=rt(),F=t,m=o,h=Tt(F,"visibility"),i=N(()=>e.filterData),P=()=>{s(),e.resetFilter()},s=()=>{m("handle-close",!1)},v=p=>{e.setEquipment(p)},y=p=>{e.setEquipmentTo(p)},E=p=>{e.setObjectType(p)},S=p=>{e.setObjectTypeTo(p)},b=p=>{e.setPlannerGroup(p)},L=p=>{e.setPlannerGroupTo(p)},_=p=>{e.setCostCenter(p)},r=p=>{e.setCostCenterTo(p)},c=p=>{e.setStartDate(p)},d=p=>{e.setStartDateTo(p)},M=p=>{e.setMaintenanceWorkCenter(p)},G=p=>{e.setMaintenanceWorkCenterTo(p)},O=p=>{e.setWbsElement(p)},f=p=>{e.setWbsElementTo(p)},A=p=>{e.setLevel(p)},j=p=>{e.setLevelTo(p)},B=p=>{e.setEquipmentType(p)},V=p=>{e.setEquipmentTypeTo(p)},K=p=>{e.setEquipmentGroup(p)},z=p=>{e.setEquipmentGroupTo(p)},Q=p=>{e.setEquipmentModel(p)},st=p=>{e.setEquipmentModelTo(p)},Y=p=>{e.setEquipmentStatus(p)},l=p=>{e.setEquipmentStatusTo(p)},$=p=>{e.setSite(p)},J=p=>{e.setSiteTo(p)},it=p=>{e.setPlanningPlant(p)},X=p=>{e.setPlanningPlantTo(p)},Z=p=>{e.setMaintenancePlant(p)},jt=p=>{e.setMaintenancePlantTo(p)},$t=p=>{e.setEndDate(p)},Ht=p=>{e.setEndDateTo(p)},Rt=()=>{const p=e.lastUsedFilterData.equipment!==e.filterData.equipment,nt=e.lastUsedFilterData.equipmentTo!==e.filterData.equipmentTo,pt=e.lastUsedFilterData.maintenanceWorkCenter!==e.filterData.maintenanceWorkCenter,bt=e.lastUsedFilterData.maintenanceWorkCenterTo!==e.filterData.maintenanceWorkCenterTo,ut=e.lastUsedFilterData.objectType!==e.filterData.objectType,xt=e.lastUsedFilterData.objectTypeTo!==e.filterData.objectTypeTo,Nt=e.lastUsedFilterData.plannerGroup!==e.filterData.plannerGroup,Bt=e.lastUsedFilterData.plannerGroupTo!==e.filterData.plannerGroupTo,Vt=e.lastUsedFilterData.costCenter!==e.filterData.costCenter,Kt=e.lastUsedFilterData.costCenterTo!==e.filterData.costCenterTo,zt=e.lastUsedFilterData.wbsElement!==e.filterData.wbsElement,Qt=e.lastUsedFilterData.wbsElementTo!==e.filterData.wbsElementTo,Yt=e.lastUsedFilterData.level!==e.filterData.level,Jt=e.lastUsedFilterData.levelTo!==e.filterData.levelTo,Xt=e.lastUsedFilterData.equipmentType!==e.filterData.equipmentType,Zt=e.lastUsedFilterData.equipmentTypeTo!==e.filterData.equipmentTypeTo,te=e.lastUsedFilterData.equipmentGroup!==e.filterData.equipmentGroup,ee=e.lastUsedFilterData.equipmentGroupTo!==e.filterData.equipmentGroupTo,ae=e.lastUsedFilterData.equipmentModel!==e.filterData.equipmentModel,ne=e.lastUsedFilterData.equipmentModelTo!==e.filterData.equipmentModelTo,oe=e.lastUsedFilterData.equipmentStatus!==e.filterData.equipmentStatus,se=e.lastUsedFilterData.equipmentStatusTo!==e.filterData.equipmentStatusTo,ie=e.lastUsedFilterData.site!==e.filterData.site,le=e.lastUsedFilterData.siteTo!==e.filterData.siteTo,re=e.lastUsedFilterData.planningPlant!==e.filterData.planningPlant,pe=e.lastUsedFilterData.planningPlantTo!==e.filterData.planningPlantTo,ue=e.lastUsedFilterData.maintenancePlant!==e.filterData.maintenancePlant,ce=e.lastUsedFilterData.maintenancePlantTo!==e.filterData.maintenancePlantTo,de=e.lastUsedFilterData.startDate!==e.filterData.startDate,me=e.lastUsedFilterData.startDateTo!==e.filterData.startDateTo,he=e.lastUsedFilterData.endDate!==e.filterData.endDate,ge=e.lastUsedFilterData.endDateTo!==e.filterData.endDateTo;m("handle-close",p||nt||pt||bt||ut||xt||Nt||Bt||Vt||Kt||de||me||he||ge||zt||Qt||Yt||Jt||Xt||Zt||te||ee||ae||ne||oe||se||ie||le||re||pe||ue||ce)};return(p,nt)=>{const pt=R("el-button"),bt=R("el-dialog");return k(),I(bt,{modelValue:h.value,"onUpdate:modelValue":nt[0]||(nt[0]=ut=>h.value=ut),title:"Filter",width:"60%",onClose:nt[1]||(nt[1]=ut=>s())},{footer:D(()=>[u("span",Wa,[a(pt,{type:"secondary",onClick:P},{default:D(()=>[H("Reset")]),_:1}),a(pt,{type:"primary",onClick:Rt},{default:D(()=>[H("Filter")]),_:1})])]),default:D(()=>[u("div",Aa,[a(U,{"value-from":i.value.equipment,"value-to":i.value.equipmentTo,label:"Equipment",name:"Equipment",options:n(e).equipmentOption,onHandleChangeFrom:v,onHandleChangeTo:y},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.objectType,"value-to":i.value.objectTypeTo,label:"Object Type",name:"ObjectType",options:n(e).objectTypeOption,onHandleChangeFrom:E,onHandleChangeTo:S},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.plannerGroup,"value-to":i.value.plannerGroupTo,label:"Planner Group",name:"PlannerGroup",options:n(e).plannerGroupOption,onHandleChangeFrom:b,onHandleChangeTo:L},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.maintenanceWorkCenter,"value-to":i.value.maintenanceWorkCenterTo,label:"Maintenance Work Center",name:"MaintenanceWorkCenter",options:n(e).maintenanceWorkCenterOption,onHandleChangeFrom:M,onHandleChangeTo:G},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.costCenter,"value-to":i.value.costCenterTo,label:"Cost Center",name:"CostCenter",options:n(e).costCenterOption,onHandleChangeFrom:_,onHandleChangeTo:r},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.wbsElement,"value-to":i.value.wbsElementTo,label:"WBS Element",name:"WbsElement",options:n(e).wbsElementOption,onHandleChangeFrom:O,onHandleChangeTo:f},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.level,"value-to":i.value.levelTo,label:"Level",name:"Level",options:n(e).levelOption,onHandleChangeFrom:A,onHandleChangeTo:j},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.equipmentType,"value-to":i.value.equipmentTypeTo,label:"Equipment Type",name:"EquipmentType",options:n(e).equipmentTypeOption,onHandleChangeFrom:B,onHandleChangeTo:V},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.equipmentGroup,"value-to":i.value.equipmentGroupTo,label:"Equipment Group",name:"EquipmentGroup",options:n(e).equipmentGroupOption,onHandleChangeFrom:K,onHandleChangeTo:z},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.equipmentModel,"value-to":i.value.equipmentModelTo,label:"Equipment Model",name:"EquipmentModel",options:n(e).equipmentModelOption,onHandleChangeFrom:Q,onHandleChangeTo:st},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.equipmentStatus,"value-to":i.value.equipmentStatusTo,label:"Equipment Status",name:"EquipmentStatus",options:n(e).equipmentStatusOption,onHandleChangeFrom:Y,onHandleChangeTo:l},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.site,"value-to":i.value.siteTo,label:"Site",name:"Site",options:n(e).siteOption,onHandleChangeFrom:$,onHandleChangeTo:J},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.planningPlant,"value-to":i.value.planningPlantTo,label:"PlanningPlant",name:"PlanningPlant",options:n(e).planningPlantOption,onHandleChangeFrom:it,onHandleChangeTo:X},null,8,["value-from","value-to","options"]),a(U,{"value-from":i.value.maintenancePlant,"value-to":i.value.maintenancePlantTo,label:"MaintenancePlant",name:"MaintenancePlant",options:n(e).maintenancePlantOption,onHandleChangeFrom:Z,onHandleChangeTo:jt},null,8,["value-from","value-to","options"]),a(kt,{"value-from":i.value.startDate?i.value.startDate.toString():"","value-to":i.value.startDateTo?i.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:c,onHandleChangeTo:d},null,8,["value-from","value-to"]),a(kt,{"value-from":i.value.endDate?i.value.endDate.toString():"","value-to":i.value.endDateTo?i.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:$t,onHandleChangeTo:Ht},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),ja={class:"col-md-6 fv-row fv-plugins-icon-container"},$a={class:"col-md-6 fv-row fv-plugins-icon-container"},Ha={class:"col-md-6 fv-row fv-plugins-icon-container"},Ra={class:"col-md-6 fv-row fv-plugins-icon-container"},xa={class:"col-md-6 fv-row fv-plugins-icon-container"},Na={class:"col-md-6 fv-row fv-plugins-icon-container"},Ba={class:"col-md-6 fv-row fv-plugins-icon-container"},Va={class:"col-md-6 fv-row fv-plugins-icon-container"},Ka={class:"col-md-6 fv-row fv-plugins-icon-container"},za={class:"col-md-6 fv-row fv-plugins-icon-container"},Qa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ya={class:"col-md-6 fv-row fv-plugins-icon-container"},Ja={class:"col-md-6 fv-row fv-plugins-icon-container"},Xa={class:"col-md-6 fv-row fv-plugins-icon-container"},Za={class:"col-md-6 fv-row fv-plugins-icon-container"},tn={class:"col-md-6 fv-row fv-plugins-icon-container"},en={class:"dialog-footer"},an=at({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:o}){const e=t,F=o,m=Et(),h=Pt(),i=rt(),P=Tt(e,"visibility"),s=N(()=>m.formData),v=N(()=>m.errors),y=N(()=>m.isError),E=At().shape({equipment:T().required("Equipment Number is mandatory"),objectType:T().required("Object Type is mandatory"),plannerGroup:T().required("Planner Group is mandatory"),costCenter:T().required("Cost Center is mandatory"),wbsElement:T().required("WBS Element is mandatory"),level:T().required("Level is mandatory"),equipmentType:T().required("Equipment Type is mandatory"),equipmentGroup:T().required("Equipment Group is mandatory"),equipmentModel:T().required("Equipment Model is mandatory"),equipmentStatus:T().required("Equipment Status is mandatory"),site:T().required("Site is mandatory"),planningPlant:T().required("Planning Plant is mandatory"),maintenancePlant:T().required("Maintenance Plant is mandatory"),maintenanceWorkCenter:T().required("Maintenance Work Center is mandatory"),startDate:gt().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:gt().required("End Date is mandatory").min(Wt("startDate"),"End date must be later than start date").typeError("End Date is mandatory")}),S=()=>{s.value.equipmentAssignmentId=0,L(""),_(""),r(""),c(""),d(""),M(""),G(""),O(""),f(""),A(""),j(""),B(""),V(""),K(""),z(""),Q("")},b=(l=!1)=>{S(),Y(),m.resetState(),F("handle-close",l)},L=l=>{s.value.equipment=l},_=l=>{s.value.objectType=l},r=l=>{s.value.plannerGroup=l},c=l=>{s.value.maintenanceWorkCenter=l},d=l=>{s.value.costCenter=l},M=l=>{s.value.wbsElement=l},G=l=>{s.value.level=l},O=l=>{s.value.equipmentType=l},f=l=>{s.value.equipmentGroup=l},A=l=>{s.value.equipmentModel=l},j=l=>{s.value.equipmentStatus=l},B=l=>{s.value.site=l},V=l=>{s.value.planningPlant=l},K=l=>{s.value.maintenancePlant=l},z=l=>{s.value.startDate=l},Q=l=>{s.value.endDate=l},st=async()=>{Y(),await E.validate(s.value,{abortEarly:!1}).catch(l=>{m.setErrors(l.errors)}),!y.value&&mt("Are you sure you want to submit ?").then(async l=>{l.isConfirmed&&m.updateData(h.user.Name).then(()=>{m.isError||yt("Form has been successfully submitted!","Ok").then(()=>{b(!0)})})})},Y=()=>{m.setErrors([])};return(l,$)=>{const J=R("el-button"),it=R("el-dialog"),X=vt("loading");return et((k(),I(it,{modelValue:P.value,"onUpdate:modelValue":$[0]||($[0]=Z=>P.value=Z),title:"Update Data",width:"60%",onClose:$[1]||($[1]=Z=>b())},{footer:D(()=>[u("span",en,[a(J,{type:"primary",onClick:st,disabled:n(m).loading},{default:D(()=>[H("Submit")]),_:1},8,["disabled"]),a(J,{type:"secondary",onClick:b,disabled:n(m).loading},{default:D(()=>[H("Close")]),_:1},8,["disabled"])])]),default:D(()=>[a(Mt,{name:"fade"},{default:D(()=>[y.value?(k(),I(It,{key:0,errorMessages:v.value,onResetForm:Y},null,8,["errorMessages"])):qt("",!0)]),_:1}),et((k(),I(n(Gt),{id:"kt_filter_form",class:"row g-4 my-4"},{default:D(()=>[u("div",ja,[a(q,{value:s.value.equipment,label:"Equipment Number",name:"equipment",options:n(i).equipmentOption,onHandleChange:L},null,8,["value","options"])]),u("div",$a,[a(q,{value:s.value.objectType,label:"Object Type",name:"objectType",options:n(i).objectTypeOption,onHandleChange:_},null,8,["value","options"])]),u("div",Ha,[a(q,{value:s.value.plannerGroup,label:"Planner Group",name:"plannerGroup",options:n(i).plannerGroupOption,onHandleChange:r},null,8,["value","options"])]),u("div",Ra,[a(q,{value:s.value.maintenanceWorkCenter,label:"Maintenance Work Center",name:"maintenanceWorkCenter",options:n(i).maintenanceWorkCenterOption,onHandleChange:c},null,8,["value","options"])]),u("div",xa,[a(q,{value:s.value.costCenter,label:"Cost Center",name:"costCenter",options:n(i).costCenterOption,onHandleChange:d},null,8,["value","options"])]),u("div",Na,[a(q,{value:s.value.wbsElement,label:"WBS Element",name:"wbsElement",options:n(i).wbsElementOption,onHandleChange:M},null,8,["value","options"])]),u("div",Ba,[a(q,{value:s.value.level,label:"Level",name:"level",options:n(i).levelOption,onHandleChange:G},null,8,["value","options"])]),u("div",Va,[a(q,{value:s.value.equipmentType,label:"Equipment Type",name:"equipmentType",options:n(i).equipmentTypeOption,onHandleChange:O},null,8,["value","options"])]),u("div",Ka,[a(q,{value:s.value.equipmentGroup,label:"Equipment Group",name:"equipmentGroup",options:n(i).equipmentGroupOption,onHandleChange:f},null,8,["value","options"])]),u("div",za,[a(q,{value:s.value.equipmentModel,label:"Equipment Model",name:"equipmentModel",options:n(i).equipmentModelOption,onHandleChange:A},null,8,["value","options"])]),u("div",Qa,[a(q,{value:s.value.equipmentStatus,label:"Equipment Status",name:"equipmentStatus",options:n(i).equipmentStatusOption,onHandleChange:j},null,8,["value","options"])]),u("div",Ya,[a(q,{value:s.value.site,label:"Site",name:"site",options:n(i).siteOption,onHandleChange:B},null,8,["value","options"])]),u("div",Ja,[a(q,{value:s.value.planningPlant,label:"Planning Plant",name:"planningPlant",options:n(i).planningPlantOption,onHandleChange:V},null,8,["value","options"])]),u("div",Xa,[a(q,{value:s.value.maintenancePlant,label:"Maintenance Plant",name:"maintenancePlant",options:n(i).maintenancePlantOption,onHandleChange:K},null,8,["value","options"])]),u("div",Za,[a(Dt,{value:s.value.startDate?s.value.startDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"startDate",onHandleChange:z},null,8,["value"])]),u("div",tn,[a(Dt,{value:s.value.endDate?s.value.endDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"endDate",onHandleChange:Q},null,8,["value"])])]),_:1})),[[X,n(m).loading]])]),_:1},8,["modelValue"])),[[X,n(m).loading]])}}}),nn={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},on=u("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),sn={class:"d-flex justify-content-between align-items-center"},ln={class:"card"},rn={class:"card-body grid-padding"},pn={class:"my-5"},Lo=at({__name:"Index",setup(t){const o=De(),e=rt(),F=Et(),m=St(),h=lt(!1),i=lt(!1),P=lt(!1),s=lt(!1),v=N(()=>e.displayData),y=N(()=>e.pagination),E=f=>{e.setPage(f)};ze(async()=>{o.dispatch(Te.ACTIVE_PAGE,"IronLake"),ve("Equipment Assignment",[{pageName:"Iron Lake",pageRoute:"ironlake"},{pageName:"Equipment",pageRoute:"equipmentassignment"},{pageName:"Equipment Assignment",pageRoute:"equipmentassignment"}]),e.setPage(1),e.getLookupCostCenter(),e.getLookupEquipmentGroup(),e.getLookupEquipmentModel(),e.getLookupEquipment(),e.getLookupEquipmentStatus(),e.getLookupEquipmentType(),e.getLookupLevel(),e.getLookupMaintenancePlant(),e.getLookupMaintenanceWorkCenter(),e.getLookupObjectType(),e.getLookupPlannerGroup(),e.getLookupPlanningPlant(),e.getLookupSite(),e.getLookupWbsElement()}),Qe(()=>{e.resetState(),F.resetState(),m.resetState()});const S=async()=>{await e.setPage(1),e.getLookupCostCenter(),e.getLookupEquipmentGroup(),e.getLookupEquipmentModel(),e.getLookupEquipment(),e.getLookupEquipmentStatus(),e.getLookupEquipmentType(),e.getLookupLevel(),e.getLookupMaintenancePlant(),e.getLookupMaintenanceWorkCenter(),e.getLookupObjectType(),e.getLookupPlannerGroup(),e.getLookupPlanningPlant(),e.getLookupSite(),e.getLookupWbsElement()},b=()=>{h.value=!0},L=async f=>{h.value=!1,f&&await S()},_=()=>{i.value=!0},r=async f=>{i.value=!1,f&&await S()},c=async()=>{const f=await e.export();ea.saveAs(new Blob([f],{type:"application/octet-stream"}),"Master Data Equipment Assignment.xlsx")},d=()=>{P.value=!0},M=async f=>{P.value=!1,f&&await S()},G=()=>{s.value=!0},O=async f=>{s.value=!1,f&&await S()};return(f,A)=>(k(),dt(Ye,null,[u("div",nn,[on,u("div",sn,[a(be,{onShowDialog:b}),a(qe,{onShowDialog:_}),a(Pe,{onHandleDownload:c}),a(fe,{onShowDialog:d})])]),u("div",ln,[u("div",rn,[a(la,{"list-data":v.value,page:y.value.currentPage,onShowDialog:G},null,8,["list-data","page"])])]),u("div",pn,[n(e).paginationLoading?qt("",!0):(k(),I(Lt,{key:0,onRaisePageChange:A[0]||(A[0]=j=>E(j)),currentPage:y.value.currentPage,totalPage:y.value.totalPage,totalPageSize:y.value.totalPageSize,startPaginationIndex:y.value.startPaginationIndex,endPaginationIndex:y.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),a(Ca,{visibility:h.value,onHandleClose:L},null,8,["visibility"]),a(an,{visibility:s.value,onHandleClose:O},null,8,["visibility"]),a(Ia,{visibility:i.value,onHandleClose:r},null,8,["visibility"]),a(Ga,{visibility:P.value,onHandleClose:M},null,8,["visibility"])],64))}});export{Lo as default};
