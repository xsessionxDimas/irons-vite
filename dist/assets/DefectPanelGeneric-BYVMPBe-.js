import{u as Lt}from"./useDefectsStore-7BpSnT1n.js";import{u as gt}from"./useCameraStore-BwXVJhPe.js";import{b as Jt,u as et,a as ss,U as Vl,c as Il,G as Pl}from"./useDefectsFormStore-41UTMhiG.js";import{d as Yt,a as ls,f as Rl,b as Ul,c as Al}from"./manipulate-html-string-DqTEGh-F.js";import{e as a}from"./lodash-DrHMlsdo.js";import{S as Bl}from"./SMUDetailDialog-Bs-98WGo.js";import{l as os,n as Is,p as Ps,A as ga,o as ct,B as zs,t as Js,d as Tl,C as Ll,k as Qs}from"./helpers-wUOLw-dU.js";import{b as Nl}from"./vue-router-iNp9kJ0K.js";import{k as Ue,r as v,c as b,p as i,aa as d,aB as e,s as p,x as O,u as E,F as ne,R as he,$ as Pe,C as M,b4 as se,bd as vt,bb as pt,a0 as Fe,A as D,P as Ae,B as be,y as Ge,a2 as wt,q as ue,a5 as Rt,z as Xs,n as Rs,bL as ze,a7 as Ol,Y as Zs,b6 as De,d as Xe,o as Nt,_ as rs,L as Ml,a1 as jl,K as qa,ac as El,S as Fl,aG as ns}from"./@vue-BypzYtbH.js";import{_ as tt}from"./nw-img-vue-CR837WER.js";import{_ as xa}from"./Repair-zyV2di4A.js";import{_ as Us}from"./document_download-C1p7j0nJ.js";import{_ as As}from"./ImagePreviews.vue_vue_type_style_index_0_lang-BJGkhvcB.js";import{u as Ga}from"./useDefectSheetStore-85RM-z1z.js";import{p as es,G as Qa,c as qs,d as Ds,a as Ks}from"./cbm-helper-BxJZ9NTc.js";import{u as $s,s as sa,C as Hl,T as Kt,J as ql}from"./prev-val-handler-DvA3D_kF.js";import{g as el,h as ka,i as Kl}from"./date-format-8-IvfSl3.js";import{c as Dt,s as Gt,a as Ut}from"./index-BuVmIl8K.js";import{d as Bs}from"./pinia-BjOS2_Ao.js";import{v as Gl,w as Wl,x as Yl}from"./urls-CvqtYZA-.js";import{u as Wa}from"./useHistoricalEformDmaStore-Fo4tKNgB.js";import{D as tl,_ as zl,N as Jl}from"./NAForm-BdrJ0TGj.js";import{_ as Ts,a as al}from"./defect-CAkPobhd.js";import{u as ya}from"./authentication-handler-Pueb_EI7.js";import{h as Ka,s as Wt,a as ts,i as Fa,U as Ql,j as Gs}from"./urls-CPQ2HRXU.js";import{u as Tt}from"./useGlobalConnectionStore-DV9B81de.js";import{u as Xl}from"./usePreviewNaFormStore-C1MJT2RQ.js";import{f as is,r as ft,N as la,S as ba,m as Zl,v as eo,b as to}from"./number-format-BdMuQVyW.js";import{a as St}from"./element-plus-BeWdvTRa.js";import{_ as sl,a as ll,S as ol}from"./ImageListModal.vue_vue_type_style_index_0_lang-djt6-PkA.js";import{a as ao}from"./UploadImageFailureDialog.vue_vue_type_style_index_0_lang-DVBJv3c1.js";import{s as qt}from"./string-to-imageinfo-converter-Cdr1iOkP.js";import{_ as rl}from"./Check-CTArJpdm.js";import{I as nl}from"./DefectForm-eu6l4STx.js";import{s as so}from"./@progress-DBKeVTWA.js";import{v as us}from"./uuid-SoommWqA.js";import{p as Ls,c as Ns,a as lo}from"./helpers-BS1ZZpAr.js";import{_ as zt}from"./Confirmation.vue_vue_type_style_index_0_lang-HchphDdZ.js";import{_ as ds}from"./ErrorBox.vue_vue_type_style_index_0_lang-Bysg_zE3.js";import{D as il,_ as ul,P as dl,C as cl,a as vl,I as oo}from"./CrackForm-CIiKEd4n.js";import{u as Os}from"./usePositionListStore-BsprGHwA.js";import{u as Ms}from"./useMasterStore-CzSO06fn.js";import{L as js}from"./LargeCamera-BnWfLFAm.js";import{_ as _a}from"./MessageBox.vue_vue_type_style_index_0_lang-DfpcTVNJ.js";import{_ as ht}from"./Textarea.vue_vue_type_style_index_0_lang-v94SEJmi.js";import{C as Ws}from"./CrackNoClass-0DSU7BAn.js";import{u as ro}from"./useAttachmentStore-DqM3autD.js";import{C as Ys}from"./CrackYesClass-COntz77m.js";import{_ as Es}from"./ToastWithIcon.vue_vue_type_style_index_0_lang-wfM94fOM.js";import{_ as Fs,a as Hs}from"./manipulate-file-oif_A7gg.js";import{s as $t}from"./methods-bliey5hF.js";import{_ as no}from"./FullScreenDialog.vue_vue_type_style_index_0_lang-DXRDt27h.js";import{_ as pl}from"./ImagePreview.vue_vue_type_style_index_0_lang-DrcOCjy4.js";import{C as Ss}from"./list-pcxkCnQg.js";import{I as io}from"./IronformConfig-BWypCgSI.js";const ml=s=>(vt("data-v-c136040b"),s=s(),pt(),s),uo={class:"mt-0 ps-0"},co=ml(()=>e("div",{class:"row px-2 item mx-1 w-100 defect-panel-header"},[e("div",{class:"col align-items-center d-flex text-break"},"Task Description"),e("div",{class:"col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center"},"Status"),e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},"Review Status")],-1)),vo={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},po=ml(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),mo=[po],fo={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},yo={class:"col align-items-center d-flex text-break"},bo=["innerHTML"],ho={class:"col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center"},go={class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},ko=["onClick"],_o={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},xo=Ue({__name:"DefectSMUPanel",props:{viewOnly:{required:!1,type:Boolean,default:!1},supervisor:{required:!1,type:Boolean,default:!0},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1}},emits:["onRefreshData","onGetPositionY"],setup(s,{emit:n}){const t=s,u=Nl(),l=Lt(),o=gt(),w=Jt(),S=n,x=v("SMU Machine Acknowledgement"),_=v(""),y=v(!1),T=b(()=>l.ApprovalData.SMUDefectHeaders),I=b(()=>l.DefectSMUHeader),g=b(()=>l.DefectSMUDetail),N=b(()=>({isError:l.stateErrorMessage!="",messages:l.stateErrorMessage})),h=b(()=>{if(I.value){const{plannerStatus:K,updatedBy:oe,updatedDate:m}=I.value;return{plannerStatus:K,updatedBy:oe,updatedDate:m}}}),H=b(()=>{if(I.value){const{approvedBy:K,approvedDate:oe,status:m}=I.value;return{approvedBy:K,approvedDate:oe,status:m}}}),P=b(()=>{const K=w.Ownership;return os(K)}),R=K=>!K.toLowerCase().includes("not"),$=(K,oe)=>{let m="light-yellow color-dark-yellow";const f=oe==null?void 0:oe.find(ve=>ve.id===K);if(t.supervisor){if(f)switch(f.status){case"Submited":m="light-yellow color-dark-yellow";break;case"Acknowledge":m="light-green color-dark-green";break}}else!a.isUndefined(f.plannerStatus)&&f.plannerStatus&&(m="light-green color-dark-green");return m},V=async K=>{S("onGetPositionY"),o.setCurrent("defect");const oe=l.setSMUDefectData(K);t.plannerApprove&&l.HeaderStatus!="Decline"&&l.updateHeaderDefectSMU(K),_.value=K,oe&&(y.value=!0)},L=()=>{S("onRefreshData")},A=async K=>{await l.updateDefectDetailSMU(K.newDetail),K.callback()},te=async K=>{await l.updatePlannerDefectAcknowledge({newTitle:K.newTitle,smu:!0}),K.callback()},Z=async K=>{await l.updateDefectAcknowledge({newTitle:K.newTitle,smu:!0}),K.callback()},ee=()=>{l.resetErrorStatus()},W=b(()=>{var K;if(T.value.length>0){const oe=l.ApprovalData.SMUDefectDetails.find(m=>m.defectHeaderId==T.value[0].id)??null;if(oe)return`${((K=oe.updatedBy)==null?void 0:K.name)||oe.createdBy.name}, ${oe.updatedDate!=""?oe.updatedDate:oe.createdDate}`}return""});return(K,oe)=>{var ve,Ve;const m=he("el-collapse-item"),f=he("el-collapse");return i(),d(ne,null,[e("div",uo,[p(f,{class:"task-group general-accordion py-1 px-5 testing",modelValue:x.value,"onUpdate:modelValue":oe[0]||(oe[0]=_e=>x.value=_e)},{default:O(()=>[p(m,{title:"SMU Machine Acknowledgement",name:"SMU Machine Acknowledgement"},{default:O(()=>[co,T.value.length<1?(i(),d("div",vo,mo)):(i(!0),d(ne,{key:1},Pe(T.value,_e=>(i(),d("div",{key:_e.id,class:"item px-2 my-2 mx-1"},[e("div",fo,[e("div",yo,[e("span",{class:"text-break defect-identified-task",innerHTML:E(Yt)(_e.taskDesc)},null,8,bo)]),e("div",ho,M(R(_e.taskDesc)?"In Range":"Out of Range"),1),e("div",go,[e("div",{class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",$(_e.id,T.value)]),onClick:Ce=>V(_e.id)}," Detailed Information ",10,ko)])]),e("div",_o,M(W.value),1)]))),128))]),_:1})]),_:1},8,["modelValue"])]),p(Bl,{show:y.value,"onUpdate:show":oe[1]||(oe[1]=_e=>y.value=_e),detailDefect:g.value,ownership:P.value,"view-only":!s.plannerApprove&&((ve=I.value)==null?void 0:ve.status)=="Acknowledge"||s.plannerApprove&&((Ve=I.value)==null?void 0:Ve.plannerStatus)=="Acknowledge"||E(u).path=="/ironforms/e-form"||E(u).path=="/ironforms/monitoring-status/preview",plannerApprove:s.plannerApprove,"error-status":N.value,"planner-data":h.value,"approval-s-p-v-data":H.value,onOnRefreshData:L,onUpdateDefectDetailSMU:A,onUpdatePlannerDefectAcknowledge:te,onUpdateDefectAcknowledge:Z,onResetErrorStatus:ee},null,8,["show","detailDefect","ownership","view-only","plannerApprove","error-status","planner-data","approval-s-p-v-data"])],64)}}}),fx=tt(xo,[["__scopeId","data-v-c136040b"]]),Ee=s=>(vt("data-v-9fd9325f"),s=s(),pt(),s),Co={class:"d-flex justify-content-between"},wo=Ee(()=>e("span",{class:"el-dialog__title"},"Detailed Information for Defect Identification",-1)),Do=["innerHTML"],$o={class:"d-flex",style:{"margin-right":"3rem"}},So={key:0,class:"rounded d-flex justify-content-center align-items-center header-badge red-bg text-dark-red mx-2"},Vo=Ee(()=>e("div",null,"Declined",-1)),Io=[Vo],Po={key:1,class:"rounded d-flex justify-content-center align-items-center approved-badge header-badge green mx-2"},Ro=Ee(()=>e("div",null,"Approved",-1)),Uo=[Ro],Ao=Ee(()=>e("div",null,[e("img",{src:xa,alt:""})],-1)),Bo={style:{margin:"6px 0 4px 5px"}},To={class:"history-wrapper"},Lo=Ee(()=>e("hr",null,null,-1)),No=Ee(()=>e("div",{class:"mt-1 p-2"},null,-1)),Oo={class:"d-flex flex-row justify-content-between"},Mo={class:"py-2 d-flex flex-row flex-grow-1"},jo={class:"flex-fill"},Eo={class:"form-floating"},Fo=["innerHTML"],Ho=Ee(()=>e("label",{for:"floatingInput"},"Asset Number",-1)),qo={class:"flex-fill ps-3"},Ko={class:"form-floating"},Go=["innerHTML"],Wo=Ee(()=>e("label",{for:"floatingInput"},"Serial Number",-1)),Yo={class:"flex-fill ps-3"},zo={class:"form-floating"},Jo=["innerHTML"],Qo=Ee(()=>e("label",{for:"floatingInput"},"Ownership",-1)),Xo={class:"d-flex flex-row justify-content-between"},Zo={class:"mt-1 py-2"},er={class:"mt-1 py-2"},tr={class:"row"},ar={class:"col pe-0"},sr={class:"form-floating"},lr=["value"],or=Ee(()=>e("label",null,"Raised By",-1)),rr={class:"mt-1 py-2"},nr={class:"row"},ir={class:"col-4 pe-0 date"},ur={class:"form-floating"},dr=["value"],cr=Ee(()=>e("label",null,"Date Raised",-1)),vr={class:"col pe-0 d-flex"},pr={class:"d-flex flex-column flex-fill"},mr={class:"form-floating"},fr=["value","disabled"],yr=Ee(()=>e("label",{class:"text-nowrap"},"How long will this defect repair take?",-1)),br={key:0,class:"mt-2"},hr={class:"ms-2 d-flex align-items-center"},gr={class:"mt-1 py-2"},kr=Ee(()=>e("div",{class:"mt-2"},null,-1)),_r=Ee(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Priority"),e("div",{class:"col-6"},"Action"),e("div",{class:"col-3 text-break"},"Person Responsible")],-1)),xr={class:"row p-3 m-1 priority-container"},Cr={class:"col-3"},wr={class:"form-check"},Dr=["disabled"],$r=Ee(()=>e("label",{class:"form-check-label text-nowrap"}," (P1) Immediate ",-1)),Sr=Ee(()=>e("div",{class:"col-6 word-breaker"},"Shall shut machine down and undertake repairs.",-1)),Vr=Ee(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),Ir={class:"row p-3 m-1 priority-container"},Pr={class:"col-3"},Rr={class:"form-check"},Ur=["disabled"],Ar=Ee(()=>e("label",{class:"form-check-label text-nowrap"}," (P2) Urgent ",-1)),Br=Ee(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 7 days.",-1)),Tr=Ee(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),Lr={class:"row p-3 m-1 priority-container"},Nr={class:"col-3"},Or={class:"form-check"},Mr=["disabled"],jr=Ee(()=>e("label",{class:"form-check-label text-nowrap"}," (P3) Routine ",-1)),Er=Ee(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 60 days.",-1)),Fr=Ee(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),Hr={class:"row p-3 m-1 priority-container"},qr={class:"col-3"},Kr={class:"form-check"},Gr=["disabled"],Wr=Ee(()=>e("label",{class:"form-check-label text-nowrap"}," (P4) Monitor ",-1)),Yr=Ee(()=>e("div",{class:"col-6 word-breaker"},"Shall continue to inspect and monitor for 90 days.",-1)),zr=Ee(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),Jr=Ee(()=>e("div",{class:"mt-2"},null,-1)),Qr=Ee(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Part Number"),e("div",{class:"col-5"},"Part Description"),e("div",{class:"col-1"},"Qty"),e("div",{class:"col"}),e("div",{class:"col"})],-1)),Xr={class:"col-3 ps-0"},Zr={class:"d-flex flex-column"},en=["onUpdate:modelValue","disabled"],tn={key:0,class:"mt-2"},an={class:"col-5"},sn={class:"d-flex flex-column"},ln=["value","onChange","disabled"],on={key:0,class:"mt-2"},rn={class:"col-1 px-1 d-flex flex-column justify-content-start"},nn={class:"row p-0 m-0 h-50 w-100"},un={class:"p-0 col-12 d-flex"},dn=["value","onInput","disabled"],cn={key:0,class:"mt-2 flex-fill"},vn={class:"col px-1 d-flex flex-column justify-content-start"},pn={class:"row p-0 m-0 h-100 w-100 align-items-center"},mn={class:"col px-1 d-flex flex-column justify-content-start position-relative"},fn={class:"row p-0 m-0 h-100 w-100 align-items-center"},yn=["onClick"],bn={class:"d-flex justify-content-between align-items-center flex-row-reverse"},hn={class:"fw-bolder"},gn=["href"],kn=Ee(()=>e("img",{src:vl},null,-1)),_n=Ee(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),xn=Ee(()=>e("div",{class:"mt-2"},null,-1)),Cn=Ee(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-6"},"Labour Activity"),e("div",{class:"col-2"},"Qty"),e("div",{class:"col-2"},"Hours Each"),e("div",{class:"col-2"},"Total Hours")],-1)),wn={class:"col-6 px-0"},Dn={class:"d-flex flex-column"},$n={key:0,class:"mt-2"},Sn={class:"col-2 d-flex justify-content-start"},Vn={class:"d-flex flex-column"},In=["value","onInput","disabled"],Pn={key:0,class:"mt-2"},Rn={class:"col-2 d-flex justify-content-start"},Un={class:"d-flex flex-column"},An=["value","onInput","disabled"],Bn={key:0,class:"mt-2"},Tn={class:"col-2 d-flex justify-content-start"},Ln={class:"row p-0 m-0 h-50 w-100"},Nn={class:"p-0 col-12 d-flex"},On=["value"],Mn=["onClick"],jn={key:0,class:"mt-2 flex-fill"},En=Ee(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),Fn=Ee(()=>e("div",{class:"mt-2"},null,-1)),Hn={class:"d-flex flex-fill flex-column"},qn={class:"d-flex flex-row"},Kn=["value","placeholder","onChange","disabled"],Gn=["onClick"],Wn={key:0,class:"mt-2"},Yn=Ee(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),zn=Ee(()=>e("div",{class:"mt-2"},null,-1)),Jn={class:"d-flex flex-row"},Qn={class:"d-flex flex-fill flex-column"},Xn={key:0,class:"mt-2"},Zn=["onClick"],ei={key:0,class:"mt-2"},ti=Ee(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),ai=Ee(()=>e("div",{class:"mt-2"},null,-1)),si={class:"d-flex flex-row"},li={class:"d-flex flex-fill flex-column"},oi={key:0,class:"mt-2"},ri=["onClick"],ni={key:0,class:"mt-2"},ii=Ee(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),ui={key:0,class:"my-5 w-100 d-flex justify-content-around"},di=Ue({__name:"DefectForm",props:{visibility:{required:!0,type:Boolean},defectData:{required:!0,type:Object},workOrder:{required:!1,type:String},headerId:{required:!1,type:String},status:{required:!0,type:String},statusSpv:{required:!0,type:String},viewOnly:{required:!1,type:Boolean,default:!1},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1},generic:{required:!1,type:Boolean,default:!1},isComplete:{required:!0,type:Boolean,default:!1}},emits:["closeForm","onRefreshData"],setup(s,{emit:n}){const t=s,u=n,l=gt(),o=Lt(),w=Jt(),S=Os(),x=Ms(),_=Ga(),y=v(""),T=v("Priority"),I=v("Parts"),g=v("Labour"),N=v("Other Resource (optional)"),h=v("Symptom"),H=v("Cause"),P=v(!1),R=v(!1),$=v(us()),V=v(),L=v(!0),A=v(!0),te=v(!1),Z=v(!1),ee=v(!1),W=v(""),K=v(!1),oe=v(!1),m=Fe(t,"visibility"),f=Fe(t,"defectData"),ve=v(),Ve=v(""),_e=v([""]),Ce=v([""]),xe=v([""]),me=v([""]),we=v([!0]),$e=v([""]),Ie=v([!0]),Me=v(!1),qe=v(!1),at=v(!1),Qe=v(!1),We=v(!1),F=v(""),le=v(""),J=v(),G=v(""),fe=v([""]),ge=v([""]),je=v([""]),Q=v([""]),de=v([!0]),Se=v([""]),B=v([!0]),C=v(),ye=v(""),Re=["images","description","priority","instruction","plannedDuration","parts","labours","resources","symptoms","causes"],Ne=b(()=>{var ce;const r=ea()=="Decline"?"Declined":"Approved",c=((ce=st.value[0])==null?void 0:ce.role)??" ";return`Are you sure want to modify this defect that has already ${r} by the ${c}`}),Ke=b(()=>window.location.href.includes("monitoring-status")),Je=b(()=>{if(Ke.value)return!1;let r;return t.generic?r=o.ApprovalData.DefectGenericHeaders.find(c=>c.defectHeaderId==t.headerId):r=o.ApprovalData.DefectHeaders.find(c=>c.defectHeaderId==t.headerId),r?r.plannerStatus=="Acknowledge"||r.plannerStatus=="Decline"?!1:(t.plannerApprove?r.plannerStatus!="Acknowledge":r.status!="Acknowledge")&&r.generalStatus!="Decline":!1}),nt=b(()=>a.isUndefined(w.images)?[]:w.images.ImageInfos),it=()=>{var r,c;return((c=(r=o.SelectedDefectDetailVersion)==null?void 0:r.detail)==null?void 0:c.isComplete)??!0},st=b(()=>o.SelectedDefectHeaderHistory),rt=b(()=>o.VersionDate),lt=b(()=>t.defectData.DefectRequirement!="Less than 30 minutes labour and less than $250 in parts"&&f.value.Parts.length==0),k=b(()=>({images:nt.value,description:t.defectData.Description.value,priority:t.defectData.Priority,instruction:t.defectData.Instruction.value,plannedDuration:t.defectData.PlannedDuration.value,parts:t.defectData.Parts,labours:t.defectData.Labours,resources:t.defectData.Resources,symptoms:t.defectData.Symptoms,causes:t.defectData.Causes})),j=b(()=>A.value?!1:Is(Re,C.value,k.value)),X=()=>{J.value=a.cloneDeep(ve.value),G.value=a.cloneDeep(Ve.value),fe.value=a.cloneDeep(_e.value),ge.value=a.cloneDeep(Ce.value),je.value=a.cloneDeep(xe.value),Q.value=a.cloneDeep(me.value),de.value=a.cloneDeep(we.value),Se.value=a.cloneDeep($e.value),B.value=a.cloneDeep(Ie.value),le.value=F.value},pe=v(!1),Y=r=>{pe.value=r},ae=b(()=>w.SerialNumber),ot=b(()=>{const r=w.Ownership;return os(r)}),Pt=async r=>{Ot.value=!0;const c=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});if(t.plannerApprove?await o.updatePlannerDefectDecline(r,t.generic):await o.updateDefectDecline(r,t.generic),c.close(),Y(!1),o.IsError){W.value=o.stateErrorMessage,ee.value=!0;return}kt()},kt=()=>{te.value=!0,setTimeout(()=>{te.value=!1,Ot.value=!1,Na()},1e3)},_t=r=>{r==="partsSection"?ts("partsSection"):Ka($.value),R.value=!0,X(),va(),C.value={images:a.cloneDeep(nt.value),description:a.cloneDeep(t.defectData.Description.value),priority:a.cloneDeep(t.defectData.Priority),instruction:a.cloneDeep(t.defectData.Instruction.value),plannedDuration:a.cloneDeep(t.defectData.PlannedDuration.value),parts:a.cloneDeep(t.defectData.Parts),labours:a.cloneDeep(t.defectData.Labours),resources:a.cloneDeep(t.defectData.Resources),symptoms:a.cloneDeep(t.defectData.Symptoms),causes:a.cloneDeep(t.defectData.Causes)}},ra=()=>{var r;Qe.value=!1,R.value=!1,(r=V.value)==null||r.resetToLatest(),A.value=!0,Ta()},na=r=>A.value||r==0?"hidden":"";let Ot=v(!1);const Mt=b(()=>{let r="Defect Information Successfully Submitted";return t.status=="Decline"?(r="Defect Identified Successfully Declined",r):P.value?r:Ot.value?(r="Defect Declined",r):(r="Defect Approved",r)}),xt=r=>is(ft(r)),mt=b(()=>o.IsError),jt=b(()=>"Defect Identified Description"),Da=b(()=>"Defect Repair Instructions / Actions"),ia=(r=!1)=>{ma.value=ea(),L.value=r?t.isComplete:it()},Et=r=>{f.value.setDescription(r.value),f.value.validateDescription()},$a=r=>{r.preventDefault(),r.target.value=ct(r.target.value),f.value.setPlannedDuration(ft(r.target.value)),f.value.validatePlannedDuration()},ua=r=>{f.value.setInstruction(r.value),f.value.validateInstruction()},Ft=r=>{r.preventDefault(),f.value.Priority!=r.target.value&&(Me.value=!0),f.value.setPriority(r.target.value)},At=(r,c)=>{r.preventDefault(),f.value.setPartDescription(c,r.target.value),f.value.validatePartDescription(f.value.Parts[c])},Sa=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),f.value.setPartQty(c,ft(r.target.value)),f.value.validatePartQty(f.value.Parts[c])},da=r=>{const{value:c,index:ce}=r;f.value.setPartImage(ce,c)},Va=r=>{const{value:c,index:ce}=r;f.value.setPartAttachment(ce,c)},Ia=()=>{K.value=!1,Qe.value=!0,Rs(()=>{_t("partsSection")}),ts("partsSection")},Pa=()=>{if(f.value.Parts.every(c=>c.partDescription!==""&&c.qty!=="")){for(const c in f.value.Parts)if(Object.hasOwn(f.value.Parts,c)){const ce=f.value.Parts[c];if(!ce.partNumberValidation.isValid||!ce.descriptionValidation.isValid||!ce.qtyValidation.isValid)return}}else{f.value.validateParts();return}f.value.addPart({partNumber:"",partDescription:"",qty:""})},Ra=r=>{f.value.removeParts(r)},Ua=r=>{f.value.setLabourActivity(r,_e.value[r]),f.value.validateLaboursActivity(f.value.Labours[r])},Aa=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),f.value.setLabourQty(c,ft(r.target.value)),f.value.validateLaboursQty(f.value.Labours[c]),z(c)},U=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),f.value.setLabourHireEach(c,ft(r.target.value)),f.value.validateLaboursHireEach(f.value.Labours[c]),z(c)},z=r=>{if(!f.value.Labours[r].qty||!f.value.Labours[r].hireEach)return;f.value.Labours[r].totalHoursValidation.message="",f.value.Labours[r].totalHoursValidation.isValid=!0;const c=+f.value.Labours[r].qty,ce=+f.value.Labours[r].hireEach,Ye=c*ce;f.value.Labours[r].qty.includes(".")||f.value.Labours[r].hireEach.includes(".")?f.value.setLabourTotalHours(r,Ye.toFixed(2).toString()):f.value.setLabourTotalHours(r,Ye.toString())},Be=()=>{if(f.value.Labours.every(c=>c.position!==""&&c.qty!==""&&c.hireEach!==""&&c.totalHours!=="")){for(const c in f.value.Labours)if(Object.hasOwn(f.value.Labours,c)){const ce=f.value.Labours[c];if(!ce.positionValidation.isValid||!ce.qtyValidation.isValid||!ce.hireEachValidation.isValid)return}}else{f.value.validateLabours();return}f.value.addLabour({position:"",qty:"",hireEach:"",totalHours:""})},dt=r=>{_e.value.splice(r,1),f.value.removeLabours(r)},Ct=r=>{let c=r.keyCode?r.keyCode:r.which;(c<48||c>57)&&c!=46&&r.preventDefault()},Xt=(r,c)=>{r.preventDefault(),f.value.setResources(c,r.target.value),!(f.value.Resources.length==1&&f.value.Resources[c].value=="")&&f.value.validateResource(f.value.Resources[c])},Zt=()=>{if(!f.value.Resources.every(c=>c.value!=="")){f.value.validateResourcesAdd();return}f.value.addResource("")},Ba=r=>{f.value.removeResource(r),f.value.validateResourcesRemove()},Ht=r=>{$e.value[r]="",Ie.value[r]=!0,f.value.setCauses(r,xe.value[r]),f.value.validateCause(f.value.Causes[r])},ca=r=>{const c=r.index;typeof c>"u"||c<0||(Ie.value[c]=r.value!="",$e.value[c]=r.value)},ke=()=>{for(const ce in f.value.Causes)if(Object.hasOwn(f.value.Causes,ce)&&!f.value.Causes[ce].isValid)return;if(!f.value.Causes.every(ce=>ce.value!=="")){f.value.validateCauses();return}const c=xe.value.length-1;if(xe.value[c]==="Other")if($e.value[c])Ie.value[c]=!0;else{Ie.value[c]=!1;return}f.value.addCauses(""),xe.value.push(""),$e.value.push(""),Ie.value.push(!0)},Te=r=>{xe.value.splice(r,1),$e.value.splice(r,1),Ie.value.splice(r,1),f.value.removeCauses(r)},Le=(r,c)=>{me.value[c]="",we.value[c]=!0,f.value.setSymptom(c,Ce.value[c]),f.value.validateSymptom(f.value.Symptoms[c])},cs=r=>{const c=r.index;typeof c>"u"||c<0||(we.value[c]=r.value!="",me.value[c]=r.value)},vs=()=>{for(const ce in f.value.Symptoms)if(Object.hasOwn(f.value.Symptoms,ce)&&!f.value.Symptoms[ce].isValid)return;if(!f.value.Symptoms.every(ce=>ce.value!=="")){f.value.validateSymptoms();return}const c=Ce.value.length-1;if(Ce.value[c]==="Other")if(me.value[c])we.value[c]=!0;else{we.value[c]=!1;return}f.value.addSymptom(""),Ce.value.push(""),me.value.push(""),we.value.push(!0)},ps=r=>{Ce.value.splice(r,1),me.value.splice(r,1),we.value.splice(r,1),f.value.removeSymptom(r)},va=()=>{var r;(r=V.value)==null||r.resetToLatest(),A.value=!1,f.value.Resources.length==0&&f.value.addResource("")},Ta=()=>{f.value.Resources.length==1&&f.value.Resources[0].value==""&&f.value.removeResource(0)},ms=async()=>{f.value.setAssetNumber(o.SelectedDefectDetailVersion.detail.assetNumber),f.value.setPriority(o.SelectedDefectDetailVersion.detail.priority),f.value.setRaisedBy(o.SelectedDefectDetailVersion.detail.raisedBy),f.value.setDate(o.SelectedDefectDetailVersion.detail.date),f.value.setTitle(o.SelectedDefectDetailVersion.detail.title),f.value.setDescription(o.SelectedDefectDetailVersion.detail.description),f.value.importParts(...$t(o.SelectedDefectDetailVersion.detail.parts)),f.value.importLabours(...$t(o.SelectedDefectDetailVersion.detail.labours)),f.value.importResources(...$t(o.SelectedDefectDetailVersion.detail.resources)),f.value.importSymptoms(...$t(o.SelectedDefectDetailVersion.detail.symptoms)),f.value.importCauses(...$t(o.SelectedDefectDetailVersion.detail.causes)),f.value.setPlannedDuration(o.SelectedDefectDetailVersion.detail.plannedDuration??""),f.value.setInstruction(o.SelectedDefectDetailVersion.detail.instruction),Ve.value=o.SelectedDefectDetailVersion.detail.priority,_e.value=f.value.Labours.map(r=>r.position),Ce.value=[],me.value=[],we.value=[],f.value.Symptoms.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");Ce.value.push(c[0]),me.value.push(Wt(r.value)),we.value.push(!0)}else Ce.value.push(r.value),me.value.push(""),we.value.push(!0)}),xe.value=[],$e.value=[],Ie.value=[],f.value.Causes.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");xe.value.push(c[0]),$e.value.push(Wt(r.value)),Ie.value.push(!0)}else xe.value.push(r.value),$e.value.push(""),Ie.value.push(!0)}),await o.setDefectImages(o.SelectedDefectDetailVersion.detail.images)},fs=async r=>{o.setDetailVersion(r.versionDate)&&(ye.value=r.versionDate,ia(),await ms())},ys=()=>{for(const c in f.value.Symptoms)if(Object.hasOwn(f.value.Symptoms,c)&&!f.value.Symptoms[c].isValid)return!1;const r=Ce.value.length-1;return Ce.value[r]==="Other"?me.value[r]?we.value[r]=!0:we.value[r]=!1:we.value[r]=!0,we.value[r]},bs=()=>{for(const c in f.value.Causes)if(Object.hasOwn(f.value.Causes,c)&&!f.value.Causes[c].isValid)return!1;const r=xe.value.length-1;return xe.value[r]==="Other"?$e.value[r]?Ie.value[r]=!0:Ie.value[r]=!1:Ie.value[r]=!0,Ie.value[r]},hs=async()=>{var r;if(A.value){K.value=!0;return}f.value.validateDefectForm(),t.defectData.Type=="YES"&&(a.isUndefined(w.images)||w.images.ImageInfos.length<1)&&(We.value=!0),(r=f.value)!=null&&r.IsValid&&ys()&&bs()&&!We.value?K.value=!0:Fa()},gs=()=>{f.value.Symptoms.forEach((r,c)=>{r.value=r.value.includes("Other")?`Other:${me.value[c]}`:r.value})},ks=()=>{f.value.Causes.forEach((r,c)=>{r.value=r.value.includes("Other")?`Other:${$e.value[c]}`:r.value})},La=async()=>{const r=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});if(!P.value)if(_.SelectedFitter.name){if(R.value){const c=await o.updateDefectFitter(JSON.stringify(_.SelectedFitter),t.generic,"");if(mt.value){W.value=c,r.close(),ee.value=!0;return}}}else if(t.plannerApprove){const c=await o.updateDefectDetail(t.generic);if(mt.value){W.value=c,r.close(),ee.value=!0;return}o.setCurrentUserGroup("Planner"),await o.updatePlannerDefectAcknowledge({generic:t.generic})}else{const c=await o.updateDefectDetail(t.generic);if(mt.value){W.value=c,r.close(),ee.value=!0;return}o.setCurrentUserGroup("Supervisor"),await o.updateDefectAcknowledge({generic:t.generic})}if(o.IsError){r.close(),W.value=o.stateErrorMessage,ee.value=!0;return}if(mt.value){r.close();return}Me.value===!0?(o.setDefectData(t.headerId??""),o.setNewDefectKey()):o.setDefectNewData(!P.value),await o.getDefectsData(t.workOrder??""),r.close(),kt()},pa=async r=>{K.value=!1,oe.value=!1,gs(),ks(),f.value.setIsComplete(r.isComplete),await La()},za=()=>{var r;K.value=!1,oe.value=!1,(r=V.value)==null||r.resetToLatest(),A.value=!0},Na=()=>{Z.value=!1,ee.value=!1,W.value!=la.NO_NETWORK_VIEW&&(Oa(),u("onRefreshData"))},Oa=()=>{o.setDetailVersion(""),R.value=!1,ye.value="",ma.value="",L.value=!0,l.clearCurrent(),Ve.value="",_e.value=[""],Ce.value=[""],xe.value=[""],me.value=[""],we.value=[!0],$e.value=[""],Ie.value=[!0],A.value=!0,Qe.value=!1,Ta(),u("closeForm")},Ja=v(""),ea=()=>{var r;return ye.value?(r=st.value.find(c=>c.createdDate==ye.value))==null?void 0:r.action:t.status},ma=v(ea()),_s=()=>{ia(!0),l.setShowCloseButton(!0),Ka($.value),Ve.value=t.defectData.Priority,F.value=t.defectData.PlannedDuration.value,_e.value=t.defectData.Labours.map(r=>r.position),Ta(),Ce.value=[],me.value=[],we.value=[],t.defectData.Symptoms.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");Ce.value.push(c[0]),me.value.push(Wt(r.value)),we.value.push(!0)}else Ce.value.push(r.value),me.value.push(""),we.value.push(!0)}),xe.value=[],$e.value=[],Ie.value=[],t.defectData.Causes.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");xe.value.push(c[0]),$e.value.push(Wt(r.value)),Ie.value.push(!0)}else xe.value.push(r.value),$e.value.push(""),Ie.value.push(!0)}),Ps(ve.value),f.value.validatePlannedDuration(),t.plannerApprove&&(Ja.value=Ve.value)},xs=()=>{o.resetDetailVersion(),l.setShowCloseButton(!1),A.value?u("closeForm"):j.value?qe.value=!0:u("closeForm")},Cs=()=>{qe.value=!1},ws=()=>{qe.value=!1,u("closeForm")};return(r,c)=>{const ce=he("el-collapse-item"),Ye=he("el-collapse"),yt=he("Label"),ut=he("el-option"),ta=he("el-select"),Ma=he("el-dialog");return i(),d(ne,null,[p(Ma,{modelValue:m.value,"onUpdate:modelValue":c[14]||(c[14]=fa=>m.value=fa),"custom-class":`defectform el-defect-crack-form-custom edit-form-defect-yes ${$.value}`,width:"90%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,onClosed:Oa,onOpened:_s,"destroy-on-close":!0,"before-close":xs},{title:O(()=>[e("div",Co,[e("div",null,[wo,e("span",{class:"el-dialog__title task-title",innerHTML:E(Yt)(f.value.Title),ref_key:"defectDetailRef",ref:ve},null,8,Do)]),e("div",$o,[ma.value=="Decline"?(i(),d("div",So,Io)):ma.value=="Acknowledge"?(i(),d("div",Po,Uo)):D("",!0),e("div",{class:se(["rounded d-flex justify-content-center align-items-center header-badge",L.value?"green":"red"])},[Ao,e("div",Bo,M(L.value?"Completed":"Incomplete"),1)],2)])])]),default:O(()=>{var fa,aa,ja;return[e("div",null,[p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:y.value,"onUpdate:modelValue":c[0]||(c[0]=q=>y.value=q)},{default:O(()=>[p(ce,{title:"Changes and Approval History",name:"History"},{default:O(()=>[e("div",To,[p(il,{activities:st.value},null,8,["activities"]),Lo,p(ul,{"version-dates":rt.value,onChangeVersion:fs,ref_key:"defectVersion",ref:V},null,8,["version-dates"])])]),_:1})]),_:1},8,["modelValue"]),No,e("div",Oo,[e("div",Mo,[e("div",jo,[e("div",Eo,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:f.value.AssetNumber},null,8,Fo),Ho])]),e("div",qo,[e("div",Ko,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:ae.value},null,8,Go),Wo])]),e("div",Yo,[e("div",zo,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:ot.value},null,8,Jo),Qo])])])]),e("div",Xo,[p(js,{id:"defect",disabled:A.value,"allow-delete":!0,"is-mandatory":!1,"is-monitoring":A.value},null,8,["disabled","is-monitoring"])]),e("div",Zo,[p(ht,{value:(aa=(fa=f.value)==null?void 0:fa.Description)==null?void 0:aa.value,label:jt.value,name:"defectPlaceholder",errorMessage:f.value.Description.errorMessage,"is-valid":f.value.Description.isValid,disabled:A.value,onHandleChange:Et},null,8,["value","label","errorMessage","is-valid","disabled"])]),e("div",er,[e("div",tr,[e("div",ar,[e("div",sr,[e("input",{type:"text",class:"form-control",disabled:"",value:f.value.RaisedBy},null,8,lr),or])])])]),e("div",rr,[e("div",nr,[e("div",ir,[e("div",ur,[e("input",{type:"text",class:"form-control",disabled:"",value:f.value.Date},null,8,dr),cr])]),e("div",vr,[e("div",pr,[e("div",mr,[e("input",{type:"text",class:"form-control",onInput:Ae($a,["prevent"]),onKeypress:Ct,value:xt(f.value.PlannedDuration.value),disabled:A.value,pattern:"[0-9]*",inputmode:"numeric"},null,40,fr),yr]),f.value.PlannedDuration.isValid?D("",!0):(i(),d("div",br,[p(yt,{class:"error-label"},{default:O(()=>[be(M(f.value.PlannedDuration.errorMessage),1)]),_:1})]))]),e("div",hr,[p(yt,null,{default:O(()=>[be("Hours")]),_:1})])])])]),e("div",gr,[p(ht,{value:f.value.Instruction.value,label:Da.value,name:"InstructionPlaceholder",errorMessage:f.value.Instruction.errorMessage,"is-valid":f.value.Instruction.isValid,disabled:A.value,onHandleChange:ua},null,8,["value","label","errorMessage","is-valid","disabled"])]),kr,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:T.value,"onUpdate:modelValue":c[5]||(c[5]=q=>T.value=q)},{default:O(()=>[p(ce,{title:"Priority",name:"Priority"},{default:O(()=>[_r,e("div",xr,[e("div",Cr,[e("div",wr,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[1]||(c[1]=q=>Ve.value=q),value:"P1",onChange:Ae(Ft,["prevent"]),disabled:A.value},null,40,Dr),[[wt,Ve.value]]),$r])]),Sr,Vr]),e("div",Ir,[e("div",Pr,[e("div",Rr,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[2]||(c[2]=q=>Ve.value=q),value:"P2",onChange:Ae(Ft,["prevent"]),disabled:A.value},null,40,Ur),[[wt,Ve.value]]),Ar])]),Br,Tr]),e("div",Lr,[e("div",Nr,[e("div",Or,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[3]||(c[3]=q=>Ve.value=q),value:"P3",onChange:Ae(Ft,["prevent"]),disabled:A.value},null,40,Mr),[[wt,Ve.value]]),jr])]),Er,Fr]),e("div",Hr,[e("div",qr,[e("div",Kr,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[4]||(c[4]=q=>Ve.value=q),value:"P4",onChange:Ae(Ft,["prevent"]),disabled:A.value},null,40,Gr),[[wt,Ve.value]]),Wr])]),Yr,zr])]),_:1})]),_:1},8,["modelValue"]),Jr,p(Ye,{class:"task-group general-accordion py-1 px-5 parts-collapse",modelValue:I.value,"onUpdate:modelValue":c[6]||(c[6]=q=>I.value=q)},{default:O(()=>[p(ce,{title:"Parts",name:"Parts",id:"partsSection"},{default:O(()=>[Qe.value?(i(),ue(dl,{key:0})):D("",!0),Qr,(i(!0),d(ne,null,Pe(f.value.Parts,(q,re)=>(i(),d("div",{key:q,class:"row p-3 m-1 priority-container px-0"},[e("div",Xr,[e("div",Zr,[Ge(e("input",{type:"text",class:"form-control","onUpdate:modelValue":ie=>f.value.Parts[re].partNumber=ie,disabled:A.value},null,8,en),[[Rt,f.value.Parts[re].partNumber]]),q.partNumberValidation.isValid?D("",!0):(i(),d("div",tn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.partNumberValidation.message),1)]),_:2},1024)]))])]),e("div",an,[e("div",sn,[e("input",{type:"text",class:"form-control",value:q.partDescription,onChange:ie=>At(ie,re),disabled:A.value},null,40,ln),q.descriptionValidation.isValid?D("",!0):(i(),d("div",on,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.descriptionValidation.message),1)]),_:2},1024)]))])]),e("div",rn,[e("div",nn,[e("div",un,[e("input",{class:"form-control",value:xt(q.qty),onInput:ie=>Sa(ie,re),disabled:A.value,pattern:"[0-9]*",inputmode:"numeric",onKeypress:Ct},null,40,dn)])]),q.qtyValidation.isValid?D("",!0):(i(),d("div",cn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.qtyValidation.message),1)]),_:2},1024)]))]),e("div",vn,[e("div",pn,[p(Fs,{index:re,"item-value":q.images||[],onHandleChangeImage:da,"is-disabled":A.value},null,8,["index","item-value","is-disabled"])])]),e("div",mn,[e("div",fn,[p(Hs,{index:re,"item-value":q.attachment||[],onHandleChangeAttachment:Va,"is-disabled":A.value},null,8,["index","item-value","is-disabled"])]),e("div",{class:se(["position-absolute",A.value?"hidden":""]),style:{top:"10px",right:"0px"}},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>Ra(re),["prevent"])},null,8,yn)],2)])]))),128)),e("div",bn,[e("div",hn,[be(" Check Partbook "),e("a",{href:E(w).statePartReference.linkAddress,target:"_blank",class:"fw-bolder",style:{color:"#18AF4A"}},[kn,be(" "+M(E(w).statePartReference.brand),1)],8,gn)]),Ge(e("button",{class:"my-3 btn-add-new",onClick:Pa},[_n,be(" Add more parts ")],512),[[Xs,!A.value]])])]),_:1})]),_:1},8,["modelValue"]),xn,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:g.value,"onUpdate:modelValue":c[8]||(c[8]=q=>g.value=q)},{default:O(()=>[p(ce,{title:"Labour",name:"Labour"},{default:O(()=>[Cn,(i(!0),d(ne,null,Pe(f.value.Labours,(q,re)=>(i(),d("div",{key:q,class:"row p-3 m-1 priority-container px-0"},[e("div",wn,[e("div",Dn,[p(ta,{modelValue:_e.value[re],"onUpdate:modelValue":ie=>_e.value[re]=ie,filterable:"",placeholder:"Select Labour",onChange:ie=>Ua(re),class:"w-100",disabled:A.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(S).positionOption,ie=>(i(),ue(ut,{key:ie.value,label:ie.label,value:ie.label},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),q.positionValidation.isValid?D("",!0):(i(),d("div",$n,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.positionValidation.message),1)]),_:2},1024)]))])]),e("div",Sn,[e("div",Vn,[e("input",{class:"form-control",value:xt(q.qty),pattern:"[0-9]*",inputmode:"numeric",onKeypress:c[7]||(c[7]=(...ie)=>E(ga)&&E(ga)(...ie)),onInput:ie=>Aa(ie,re),disabled:A.value},null,40,In),q.qtyValidation.isValid?D("",!0):(i(),d("div",Pn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.qtyValidation.message),1)]),_:2},1024)]))])]),e("div",Rn,[e("div",Un,[e("input",{class:"form-control",value:xt(q.hireEach),pattern:"[0-9]*",inputmode:"numeric",onKeypress:Ct,onInput:ie=>U(ie,re),disabled:A.value},null,40,An),q.hireEachValidation.isValid?D("",!0):(i(),d("div",Bn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.hireEachValidation.message),1)]),_:2},1024)]))])]),e("div",Tn,[e("div",Ln,[e("div",Nn,[e("input",{class:"form-control",value:xt(q.totalHours),disabled:""},null,8,On),e("div",{class:se(["ms-4 d-flex align-items-center",na(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>dt(re),["prevent"])},null,8,Mn)],2)])]),q.totalHoursValidation.isValid?D("",!0):(i(),d("div",jn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.totalHoursValidation.message),1)]),_:2},1024)]))])]))),128)),A.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Be},[En,be(" Add more labour ")]))]),_:1})]),_:1},8,["modelValue"]),Fn,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:N.value,"onUpdate:modelValue":c[9]||(c[9]=q=>N.value=q)},{default:O(()=>[p(ce,{title:"Other Resource (optional)",name:"Other Resource (optional)"},{default:O(()=>[(i(!0),d(ne,null,Pe(f.value.Resources,(q,re)=>(i(),d("div",{class:"p-2 d-flex",key:q.value},[e("div",Hn,[e("div",qn,[e("input",{type:"text",class:"form-control",value:q.value,placeholder:`Resource ${re+1}`,onChange:ie=>Xt(ie,re),disabled:A.value},null,40,Kn),e("div",{class:se(["ms-4 d-flex align-items-center",na(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>Ba(re),["prevent"])},null,8,Gn)],2)]),q.isValid?D("",!0):(i(),d("div",Wn,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))])]))),128)),A.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Zt},[Yn,be(" Add new resource ")]))]),_:1})]),_:1},8,["modelValue"]),zn,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:h.value,"onUpdate:modelValue":c[10]||(c[10]=q=>h.value=q)},{default:O(()=>[p(ce,{title:"Symptom",name:"Symptom"},{default:O(()=>[(i(!0),d(ne,null,Pe(f.value.Symptoms,(q,re)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:q.value},[e("div",Jn,[e("div",Qn,[p(ta,{modelValue:Ce.value[re],"onUpdate:modelValue":ie=>Ce.value[re]=ie,placeholder:"Select Symptom",filterable:"",onChange:ie=>Le(ie,re),class:"w-100",disabled:A.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(x).Symptoms,ie=>(i(),ue(ut,{key:ie.id,label:ie.symptom,value:ie.symptom},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),Ce.value[re]==="Other"?(i(),d("div",Xn,[p(ht,{class:"form-control h-100px",value:me.value[re],label:"Description",name:"Description",errorMessage:"Required","is-valid":we.value[re],index:re,onHandleChange:cs,disabled:A.value},null,8,["value","is-valid","index","disabled"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",re===0||A.value?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>ps(re),["prevent"])},null,8,Zn)],2)]),q.isValid?D("",!0):(i(),d("div",ei,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))]))),128)),A.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Ae(vs,["prevent"])},[ti,be(" Add another symptom ")]))]),_:1})]),_:1},8,["modelValue"]),ai,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:H.value,"onUpdate:modelValue":c[11]||(c[11]=q=>H.value=q)},{default:O(()=>[p(ce,{title:"Cause",name:"Cause"},{default:O(()=>[(i(!0),d(ne,null,Pe(f.value.Causes,(q,re)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:q.value},[e("div",si,[e("div",li,[p(ta,{modelValue:xe.value[re],"onUpdate:modelValue":ie=>xe.value[re]=ie,placeholder:"Select Cause",filterable:"",onChange:ie=>Ht(re),class:"w-100",disabled:A.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(x).Causes,ie=>(i(),ue(ut,{key:ie.id,label:ie.causes,value:ie.causes},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),xe.value[re]==="Other"?(i(),d("div",oi,[p(ht,{value:$e.value[re],label:"Description",name:"Description",errorMessage:"Required","is-valid":Ie.value[re],index:re,onHandleChange:ca,disabled:A.value},null,8,["value","is-valid","index","disabled"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",re===0||A.value?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>Te(re),["prevent"])},null,8,ri)],2)]),q.isValid?D("",!0):(i(),d("div",ni,[p(yt,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))]))),128)),A.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:ke},[ii,be(" Add another cause ")]))]),_:1})]),_:1},8,["modelValue"]),Je.value?(i(),d("div",ui,[R.value?D("",!0):(i(),d("button",{key:0,class:"btn btn-outline w-100",onClick:c[12]||(c[12]=Ae(()=>Y(!0),["prevent"])),style:{border:"1px solid #FF4842",background:"white","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"#FF4842"}},"Decline")),R.value?(i(),d("button",{key:2,class:"btn btn-light w-100",onClick:Ae(ra,["prevent"]),style:{background:"#FFFFFF",border:"1px solid rgba(145, 158, 171, 0.24)","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"black"}},"Cancel")):(i(),d("button",{key:1,class:"ms-3 btn btn-warning w-100 modify-button",onClick:Ae(_t,["prevent"]),style:{background:"#FFC107","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"black"}},"Modify")),e("button",{class:"ms-3 btn btn-success w-100",onClick:Ae(hs,["prevent"]),style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white"}},"Approve")])):D("",!0)]),p(cl,{show:K.value,"parts-warning":lt.value,onAddParts:Ia,onClose:za,onSubmit:pa},null,8,["show","parts-warning"]),p(zt,{visibility:qe.value,caption:"Are you sure want to close the defect form? <br /> Note: By closing the defect form, you will lose your defect data that you have already inputted.",onOnNoConfirm:Cs,onOnYesConfirm:ws},null,8,["visibility"]),p(zt,{visibility:at.value,caption:Ne.value,onOnNoConfirm:c[13]||(c[13]=()=>{at.value=!1}),onOnYesConfirm:_t},null,8,["visibility","caption"]),p(_a,{show:Z.value,onClose:Na,message:Mt.value},null,8,["show","message"]),p(_a,{show:ee.value,onClose:Na,message:W.value,icon:"/media/svg/dma/alert.svg"},null,8,["show","message"]),p(tl,{visibility:pe.value,formTitle:"Are you sure want to decline this defect information?","task-title":(ja=f.value)==null?void 0:ja.Title,onCloseForm:Y,onSubmitDecline:Pt,isGeneric:s.generic},null,8,["visibility","task-title","isGeneric"])]}),_:1},8,["modelValue","custom-class"]),p(Es,{show:te.value,message:Mt.value},null,8,["show","message"])],64)}}}),fl=tt(di,[["__scopeId","data-v-9fd9325f"]]),Ca=Bs({id:"suspensionCylinderForm",state:()=>({stateShowSuspensionCylinderHeightForm:!1,stateShowPreviewSuspensionCylinderHeightForm:!1,stateSCCalibration:{},stateSCHeader:{},stateupdateParams:[],stateValidation:[]}),getters:{ShowSuspensionCylinderHeightForm:s=>s.stateShowSuspensionCylinderHeightForm,ShowPreviewSuspensionCylinderHeightForm:s=>s.stateShowPreviewSuspensionCylinderHeightForm,eformStore:()=>et(),generalFormStore:()=>ss(),SCCalibration:s=>s.stateSCCalibration,SCHeader:s=>s.stateSCHeader},actions:{toggleShowPreviewSuspensionCylinderHeightForm(s){this.stateShowPreviewSuspensionCylinderHeightForm=s},toggleShowSuspensionCylinderHeightForm(s){this.stateShowSuspensionCylinderHeightForm=s,s||(this.stateupdateParams=[],this.stateValidation=[])},async getSuspensionCalibrationTemplate(s){try{const n=await Dt.post(`${Gl}?${new URLSearchParams($s).toString()}`,s);return this.stateSCCalibration=n.data.result.content.detail,this.stateSCHeader=n.data.result.content.header,!0}catch(n){return Gt("IRONS",n),console.log("error getSuspensionCalibrationTemplate",n),!1}},generatePreAnsweredInput(){const s=(n,t)=>({keyValue:t,propertyParams:[{propertyName:"value",propertyValue:n},{propertyName:"updatedBy",propertyValue:JSON.stringify(this.eformStore.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]});this.stateSCCalibration.subGroup.forEach(n=>{n.taskGroup.forEach(t=>{t.task.forEach(u=>{u.items.forEach(l=>{if(l.itemType=="inputWithPlaceholder"&&!a.isUndefined(l.style)&&!a.isUndefined(l.style.placeholder))switch(l.style.placeholder){case"Truck ID Number":l.value=this.stateSCHeader.equipment,this.addUpdateParams(s(l.value,l.key));break;case"Machine SMU":l.value=this.generalFormStore.generalForm.smu,this.addUpdateParams(s(l.value,l.key));break;case"Truck Serial Number":l.value=this.stateSCHeader.serialNumber,this.addUpdateParams(s(l.value,l.key));break;case"Calibration Date":l.value=`${el(this.generalFormStore.stateTimeZone)} ${this.generalFormStore.stateTimeZoneDesc}`;break}})})})})},addUpdateParams(s){let n=this.stateupdateParams.find(t=>t.keyValue==s.keyValue);a.isUndefined(n)?this.stateupdateParams.push(s):(n=s,this.stateupdateParams.forEach(t=>{t.keyValue==s.keyValue&&(t.propertyParams=s.propertyParams)}))},deleteParams(s){this.stateupdateParams=this.stateupdateParams.filter(n=>n.keyValue!=s)},generateValidateInput(){this.stateSCCalibration.subGroup.forEach(s=>{s.taskGroup.forEach(n=>{n.task.forEach(t=>{t.items.forEach(u=>{if(u.isTaskValue){const l={key:u.key,value:u.value};this.stateValidation.push(l)}})})})})},updateValidationValue(s){this.stateValidation.forEach(n=>{n.key==s.key&&(n.value=s.value)})},async submitForm(){this.stateSCCalibration.subGroup.forEach(t=>{t.taskGroup.forEach(u=>{u.task.forEach(l=>{l.items.forEach(o=>{if(o.itemType=="inputWithPlaceholder"&&!a.isUndefined(o.style)&&!a.isUndefined(o.style.placeholder)&&o.style.placeholder=="Calibration Date"){const w={keyValue:o.key,propertyParams:[{propertyName:"value",propertyValue:"<<ServerDateTime>>"},{propertyName:"updatedBy",propertyValue:JSON.stringify(this.eformStore.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};this.addUpdateParams(w)}})})})});const s={headerId:this.stateSCCalibration.headerId,workorder:this.stateSCHeader.workOrder,id:this.stateSCCalibration.id,updateParams:this.stateupdateParams,employee:this.eformStore.employee};await Dt.post(`${Wl}?${new URLSearchParams($s).toString()}`,s);const n={id:this.stateSCHeader.id,updateParams:[{propertyParams:[{propertyName:"status",propertyValue:"Submitted"}]}],employee:this.eformStore.employee};await Dt.post(`${Yl}?${new URLSearchParams($s).toString()}`,n)}}}),ci=["innerHTML"],ha=Ue({__name:"Label",props:{value:{type:String,required:!0}},setup(s){return(n,t)=>(i(),d("span",{innerHTML:s.value},null,8,ci))}}),as=Ue({__name:"Input",props:{value:{type:String,required:!0}},setup(s){return(n,t)=>{const u=he("el-input");return i(),ue(u,{class:"px-2 pt-2 input-eform-status",disabled:"","model-value":s.value,style:{"margin-bottom":"10px"}},null,8,["model-value"])}}}),vi={lass:"px-2 pt-2 d-flex flex-column"},pi={class:"px-0 py-0 mx-0 my-0 d-flex justify-content-start align-items-center"},mi={class:"legend-label mx-3 my-0"},fi={class:"d-flex justify-content-start pb-1 timestamp-task col-12 offset-0"},yi=Ue({__name:"StatusInfo",props:{value:{type:String,required:!0},updatedBy:{type:Object,required:!0},updatedDate:{type:String,required:!0,default:"asdasdasd"}},setup(s){const n=s,t=b(()=>{let u="";switch(n.value){case"Out Spec":u="red";break;case"Out of spec":u="red";break;case"In spec":u="green";break}return u});return(u,l)=>{var o;return i(),d("div",vi,[e("div",pi,[e("div",{class:se(["little-box d-flex p-3 justify-content-center align-items-center",[t.value]])},null,2),e("p",mi,M(s.value),1)]),e("div",fi,M((o=n.updatedBy)==null?void 0:o.name)+", "+M(n.updatedDate),1)])}}}),bi=tt(yi,[["__scopeId","data-v-bc29980c"]]),hi={class:"row px-2 my-2"},gi={class:"silinder-title"},ki={style:{"margin-top":"10px",width:"99%",border:"1px solid rgba(145, 158, 171, 0.24)",background:"#f9fafb",height:"40px"}},_i=e("thead",{style:{padding:"5px",height:"40px","text-align":"left"},class:"prevent-split"},[e("th",{style:{"text-align":"center"}},"Item"),e("th",null,"Measurement Location"),e("th",null,"Comment"),e("th",{style:{width:"200px"}},"Measurement Value"),e("th",null,"UoM"),e("th",{style:{width:"250px"}},"Status")],-1),xi={style:{background:"white",padding:"5px",height:"40px","text-align":"left"}},Ci={style:{"text-align":"center"}},wi={style:{width:"250px"}},Xa=Ue({__name:"TransactionTable",props:{title:{type:String,required:!0},tasks:{type:Array,required:!0}},setup(s){const n=s,t=b(()=>zs(n.tasks));return(u,l)=>(i(),d("div",hi,[e("div",gi,M(s.title),1),e("table",ki,[_i,e("tbody",xi,[(i(!0),d(ne,null,Pe(t.value,o=>{var w;return i(),d("tr",{key:o.key,class:"prevent-split"},[e("td",Ci,[p(ha,{value:o.items[1].value},null,8,["value"])]),e("td",null,[p(ha,{value:o.items[2].value},null,8,["value"])]),e("td",null,[p(as,{value:((w=o.items[3])==null?void 0:w.value)??""},null,8,["value"])]),e("td",null,[p(as,{value:o.items[4].value},null,8,["value"])]),e("td",null,[p(ha,{value:o.items[5].value},null,8,["value"])]),e("td",wi,[p(bi,{value:o.items[6].value,"updated-by":o.items[6].updatedBy,"updated-date":o.items[6].updatedDate},null,8,["value","updated-by","updated-date"])])])}),128))])])]))}}),Di=["src"],yl=Ue({__name:"Image",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(s){const n=s,t=v("/media/svg/dma/warning.svg"),u=v(!0),l=Fe(n,"item"),o=ze(()=>!a.isUndefined(l.value.style)&&l.value.style.breakPoint!="none"?`col-${l.value.style.breakPoint}`:"col"),w=ze(()=>{let y="";return n.generalStyle&&!a.isUndefined(l.value.style)&&(!a.isUndefined(l.value.style.potraitBreakPoint)&&l.value.style.breakPoint!="none"?(y=`col-md-${l.value.style.potraitBreakPoint}`,y=`${y} col-lg-${l.value.style.breakPoint}`):(y=`col-md-${l.value.style.potraitBreakPoint}`,y=`${y} col-lg-${l.value.style.breakPoint}`)),y}),S=ze(()=>{var V,L,A,te;const y=!a.isUndefined(l.value.style)&&l.value.style.bgColor!="none"?`background-color: ${l.value.style.bgColor}; `:"",T=!a.isUndefined(l.value.style)&&l.value.style.fontColor!="none"?`color: ${l.value.style.fontColor}; `:"",I=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.top!="none"?`border-top: ${l.value.style.border.top}; `:"",g=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.right!="none"?`border-right: ${l.value.style.border.right}; `:"";let N=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.bottom!="none"?`border-bottom: ${l.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((V=n.task)==null?void 0:V.isShowAdjustmentRow)&&((L=n.task)!=null&&L.isShowAdjustmentRow))N="";else{let Z=0;(A=n.task)==null||A.items.forEach(ee=>{var W;a.isUndefined(ee.style)||(a.isUndefined(ee.style.border)?a.isUndefined(ee.style.border)&&(Z=Z+Number(ee.style.breakPoint)):((ee.style.border.right=="none"||a.isUndefined(ee.style.border.right))&&(Z=Z+Number(ee.style.breakPoint)),a.isEqual(ee,a.last((W=n.task)==null?void 0:W.items))&&(Z=Z+Number(ee.style.breakPoint))))}),Z==12&&(N=!((te=n.task.updatedBy)!=null&&te.name)&&!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.bottom!="none"?`border-bottom: ${l.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const h=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.left!="none"?`border-left: ${l.value.style.border.left}; `:"",H=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${l.value.style.borderRadius.topRight}; `:"",P=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${l.value.style.borderRadius.bottomRight}; `:"",R=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${l.value.style.borderRadius.topLeft}; `:"",$=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${l.value.style.borderRadius.bottomLeft}; `:"";return`${y}${T}${I}${g}${N}${h}${H}${P}${R}${$}`}),x=ze(()=>!a.isUndefined(l.value.style)&&l.value.style.breakPoint=="1"?"width: 20px; height: 20px":"");Ol(async()=>{const y={id:l.value.value.toString(),ver:"v1"};try{const g=(await Dt.getBlob("https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_id","",new URLSearchParams(y).toString())).data,N=new Blob([g]),h=window.URL||window.webkitURL;t.value=h.createObjectURL(N),u.value=!1}catch{u.value=!1}});const _=ze(()=>{let y="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(y=""),y});return(y,T)=>{const I=Zs("loading");return Ge((i(),d("div",{class:se([[E(o),E(w),E(_)],"pt-2 px-2 d-flex d-flex justify-content-center prevent-split"]),style:De(E(S))},[e("img",{src:t.value,class:"img-fluid",style:De(E(x))},null,12,Di)],6)),[[I,u.value]])}}}),$i=["innerHTML"],bl=Ue({__name:"Label",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(s){const n=s,t=Fe(n,"item"),u=b(()=>ls(n.item.value)),l=b(()=>{var y,T;return((y=n.task)==null?void 0:y.taskType)==="table"||((T=n.task)==null?void 0:T.taskType)==="collapsibleTable"?"col":n.generalStyle?!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col":""}),o=b(()=>{var T,I;if(((T=n.task)==null?void 0:T.taskType)==="table"||((I=n.task)==null?void 0:I.taskType)==="collapsibleTable")return"col";let y="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(y=`col-md-${t.value.style.potraitBreakPoint}`,y=`${y} col-lg-${t.value.style.breakPoint}`):(y=`col-md-${t.value.style.potraitBreakPoint}`,y=`${y} col-lg-${t.value.style.breakPoint}`)),y}),w=b(()=>a.isUndefined(t.value.style)?"":t.value.style.textAlign=="left"?"text-start":t.value.style.textAlign=="right"?"text-end":"text-center"),S=b(()=>{var V,L,A,te;const y=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",T=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",I=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",g=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let N=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((V=n.task)==null?void 0:V.isShowAdjustmentRow)&&((L=n.task)!=null&&L.isShowAdjustmentRow))N="";else{let Z=0;(A=n.task)==null||A.items.forEach(ee=>{var W;a.isUndefined(ee.style)||(a.isUndefined(ee.style.border)?a.isUndefined(ee.style.border)&&(Z=Z+Number(ee.style.breakPoint)):((ee.style.border.right=="none"||a.isUndefined(ee.style.border.right))&&(Z=Z+Number(ee.style.breakPoint)),a.isEqual(ee,a.last((W=n.task)==null?void 0:W.items))&&(Z=Z+Number(ee.style.breakPoint))))}),Z==12&&(N=!((te=n.task.updatedBy)!=null&&te.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"")}const h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",H=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",P=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",R=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",$=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${y}${T}${I}${g}${N}${h}${H}${P}${R}${$}`}),x=b(()=>`${!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.fontWeight)&&t.value.style.fontWeight!="normal"?`font-weight: ${t.value.style.fontWeight}; `:""}`),_=b(()=>{let y="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(y=""),y});return(y,T)=>(i(),d("div",{class:se([[l.value,w.value,o.value,_.value],"px-2 pt-2"]),style:De(S.value)},[!E(a.isUndefined)(s.item.style)&&s.item.style.visibility!="hidden"?(i(),d("label",{key:0,style:De(x.value),innerHTML:u.value},null,12,$i)):D("",!0)],6))}}),Si=Bs({id:"na",state:()=>({stateLoading:!1,stateCancelled:!1,stateVisible:!1,stateViewVisible:!1,stateIsValid:!0,stateItemKey:"",stateReason:"",stateTitle:"",stateTask:{},statePayload:{updateParams:[]},stateItem:{},stateSuccessUpdateItemKey:""}),getters:{Loading:s=>s.stateLoading,Cancelled:s=>s.stateCancelled,Reason:s=>s.stateReason,Visible:s=>s.stateVisible,ViewVisible:s=>s.stateViewVisible,ItemKey:s=>s.stateItemKey,isValid:s=>s.stateIsValid,selectedGroup:()=>et().selectedGroup,selectedFitter:()=>et().employee,supervisor:()=>{const s=Ut();return{id:s.user.EmployeeId,name:s.user.Name}},globalConnectionStore:()=>Tt()},actions:{setItem(s){this.stateItem=s},setReason(s){this.stateReason=s},setCancelledState(s){this.stateCancelled=s},setItemKey(s){this.stateItemKey=s,this.stateSuccessUpdateItemKey=""},setTask(s){this.stateTask=s},toggleIsVisible(s){this.stateVisible=s,this.stateCancelled=!1},toggleIsViewVisible(s){this.stateViewVisible=s},createPayload(){const s=et();this.statePayload.id=this.selectedGroup.id,this.statePayload.workorder=this.selectedGroup.workOrder,this.statePayload.headerId=this.selectedGroup.headerId,this.statePayload.updateParams=[],this.statePayload.updateParams.push({keyValue:this.stateTask.key,propertyParams:[{propertyName:"taskValue",propertyValue:this.stateTask.category==="NORMAL"||this.stateTask.category==="CBM"?"3":"4"},{propertyName:"updatedBy",propertyValue:JSON.stringify(this.selectedFitter)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"},{propertyName:"reason",propertyValue:""}]}),this.statePayload.employee=this.selectedFitter,this.statePayload.defectHeader={workorder:s.generalForm.workOrder,form:this.selectedGroup.modelId,serviceSheetDetailId:this.selectedGroup.id,category:this.stateTask.category,taskId:this.stateTask.key,taskNo:this.stateTask.description!=""?this.stateTask.description.split(";")[0]:this.stateTask.items[0].value,taskDesc:this.stateTask.description!=""?this.stateTask.description:this.stateTask.items[1].value,defectWorkorder:"",formDefect:"DM-PL-F55",defectType:"",cbmMeasurement:"",cbmUom:"",cbmImageKey:"",cbmImageProp:"",isCbmAdjusment:"",taskValue:this.stateTask.category==="NORMAL"||this.stateTask.category==="CBM"?"3":"4",repairedStatus:"Not-Repaired",cbmNAStatus:"Not-Confirm",supervisor:this.supervisor,status:"Submited",defectStatus:"Submited"},this.statePayload.defectDetail={type:"N/A",reason:this.Reason,title:this.stateTask.description!=""?this.stateTask.description:this.stateTask.items[1].value}},async createNA(){this.stateLoading=!0;const s={ver:"v1"};try{this.createPayload();const n=await Dt.post(`${Ql}?${new URLSearchParams(s).toString()}`,this.statePayload);this.stateLoading=!1;const t=et();switch(n.data.result.message){case ba.TASK_UPDATED_BY_OTHER:return t.toggleTaskAlreadyUpdatedStatus(!0),!1;case ba.SUBMITTED:return t.toggleFormAlreadySubmitted(!0),!1;case ba.CLOSE:return t.toggleFormAlreadyClose(!0),!1;default:if(n.data.statusCode==400)return t.toogleTaskErrorDialog(!0),t.stateErrorMessageTaskErrorDialog=n.data.result.message,!1;break}return!0}catch(n){sa("fe_event_error_post_na",{errorMessage:n});const t=this.globalConnectionStore.checkIsErrorNoNetwork(n);this.globalConnectionStore.setSubmitConnectionError(t),ya(n),Gt("IRONS",n),console.log(n)}},async getNADetailValue(s,n){this.stateLoading=!0;const t={ver:"v1"},u={servicesheetDetailId:s,taskId:n};try{return(await Dt.post(`${Gs}?${new URLSearchParams(t).toString()}`,u)).data.result.content.detail}catch(l){sa("fe_event_error_get_na_detail",{errorMessage:l}),l.message.includes("Network Error")&&Tt().setSubmitConnectionError(!0),ya(l),Gt("IRONS",l),console.log(l)}this.stateLoading=!1},async getNADetail(s,n){this.stateLoading=!0;const t={ver:"v1"},u={servicesheetDetailId:s,taskId:n};try{const o=(await Dt.post(`${Gs}?${new URLSearchParams(t).toString()}`,u)).data.result.content.detail;Xl().setNAInfo(o),this.setReason(o.reason),this.stateTitle=o.title,this.stateLoading=!1,this.toggleIsViewVisible(!0)}catch(l){sa("fe_event_error_get_na_detail",{errorMessage:l}),l.message.includes("Network Error")&&Tt().setSubmitConnectionError(!0),ya(l),Gt("IRONS",l),console.log(l)}this.stateLoading=!1},setSuccesItem(s){this.stateSuccessUpdateItemKey=s},resetInstance(){this.stateLoading=!1,this.stateReason="",this.stateVisible=!1,this.stateViewVisible=!1,this.stateIsValid=!0,this.stateTask={},this.statePayload={updateParams:[]}}}}),hl=Bs({id:"crack",state:()=>({stateLoading:!1,stateCancelled:!1,stateIsYes:void 0,stateCrackYesVisible:!1,stateCrackNoVisible:!1,stateViewYesVisible:!1,stateViewtNoVisible:!1,stateIsValid:!0,stateItemKey:"",stateTask:{},stateCrackInfo:{},stateReferencePhoto:{title:"",blob:"",id:""},statePayload:{updateParams:[]},statePreviousCrack:[]}),getters:{Loading:s=>s.stateLoading,Cancelled:s=>s.stateCancelled,CrackYesVisible:s=>s.stateCrackYesVisible,CrackNoVisible:s=>s.stateCrackNoVisible,ViewYesVisible:s=>s.stateViewYesVisible,ViewNoVisible:s=>s.stateViewtNoVisible,ItemKey:s=>s.stateItemKey,isValid:s=>s.stateIsValid,IsYes:s=>s.stateIsYes,crackInfo:s=>s.stateCrackInfo,selectedGroup:()=>et().selectedGroup,selectedFitter:()=>et().employee,supervisor:()=>{const s=Ut();return{id:s.user.EmployeeId,name:s.user.Name}},images:()=>gt().ImageObjects.find(n=>n.Id==="crack"),globalConnectionStore:()=>Tt(),referencePhoto:s=>s.stateReferencePhoto,eformStore:()=>et()},actions:{setItemKey(s){this.stateItemKey=s},setCancelledState(s){this.stateCancelled=s},cretateInstance(s=!0){this.stateCrackInfo=s?new Ys:new Ws,this.stateIsYes=s},setTask(s){this.stateTask=s},toggleYesVisible(s){this.stateCrackYesVisible=s,this.stateCrackNoVisible=!1,this.stateCancelled=!1},toggleNoVisible(s){this.stateCrackNoVisible=s,this.stateCrackYesVisible=!1,this.stateCancelled=!1},toggleViewNoVisible(s){this.stateViewtNoVisible=s,this.stateViewYesVisible=!1},toggleViewYesVisible(s){this.stateViewYesVisible=s,this.stateViewtNoVisible=!1},createCrackYesPayload(s){var S;const n=this.stateCrackInfo,t=((S=this.images)==null?void 0:S.ImageInfos)??[],u=n.Resources.filter(x=>x.value!==""),l=n.Parts.map(x=>{const _=x.qty?String(parseFloat(x.qty)):x.qty;return{...x,qty:_}}),o=n.Labours.map(x=>{const _=x.qty?String(parseFloat(x.qty)):x.qty,y=x.hireEach?String(parseFloat(x.hireEach)):x.hireEach;return{...x,qty:_,hireEach:y}}),w=n.CrackLength.map(x=>{const _=x.currentCrack?String(parseFloat(x.currentCrack)):x.currentCrack;return{...x,currentCrack:_}});this.statePayload.defectDetail={type:"YES",title:s,assetNumber:n.AssetNumber,description:n.Description.value,raisedBy:this.selectedFitter.name,date:"<<ServerDateTime>>",plannedDuration:n.PlannedDuration.value,instruction:n.Instruction.value,priority:n.Priority,parts:JSON.stringify(l),labours:JSON.stringify(o),resources:JSON.stringify(u.map(x=>x.value)),symptoms:JSON.stringify(n.Symptoms.map(x=>x.value)),causes:JSON.stringify(n.Causes.map(x=>x.value)),images:JSON.stringify(t),previousCracks:JSON.stringify(w),referencePhoto:this.stateReferencePhoto.id,referenceSection:this.stateReferencePhoto.title}},createCrackNoPayload(s){var l;const n=this.stateCrackInfo,t=((l=this.images)==null?void 0:l.ImageInfos)??[],u=n.CrackLength.map(o=>{const w=o.currentCrack?String(parseFloat(o.currentCrack)):o.currentCrack;return{...o,currentCrack:w}});this.statePayload.defectDetail={type:"NO",title:s,assetNumber:this.crackInfo.AssetNumber,description:this.crackInfo.Description.value,raisedBy:this.selectedFitter.name,instruction:n.Instruction.value,date:"<<ServerDateTime>>",images:JSON.stringify(t),previousCracks:JSON.stringify(u),referencePhoto:this.stateReferencePhoto.id,referenceSection:this.stateReferencePhoto.title}},createPayloadCrack(){const s=et();this.statePayload.id=this.selectedGroup.id,this.statePayload.workorder=this.selectedGroup.workOrder,this.statePayload.headerId=this.selectedGroup.headerId,this.statePayload.updateParams=[],this.statePayload.updateParams.push({keyValue:this.stateTask.key,propertyParams:[{propertyName:"taskValue",propertyValue:this.stateIsYes?"3":"2"},{propertyName:"updatedBy",propertyValue:JSON.stringify(this.selectedFitter)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"},{propertyName:"reason",propertyValue:s.reasonNA}]}),this.statePayload.employee=this.selectedFitter,this.statePayload.defectHeader={workorder:s.generalForm.workOrder,form:this.selectedGroup.modelId,serviceSheetDetailId:this.selectedGroup.id,category:this.stateTask.category,taskId:this.stateTask.key,taskNo:this.stateTask.description!=""?this.stateTask.description.split(";")[0]:this.stateTask.items[0].value,taskDesc:this.stateTask.description!=""?this.stateTask.description:this.stateTask.items[1].value,crackWorkorder:"",formCrack:"BA-PL-F55",crackType:this.stateIsYes?"YES":"NO",taskValue:this.stateIsYes?"3":"2",repairedStatus:"Not-Repaired",cbmNAStatus:"Not-Confirm",supervisor:this.supervisor,status:"Submited",defectStatus:"Submited",pic:this.selectedFitter.name,role:"Fitter",declineReason:"",approveReason:"",action:"Submitted"};const n=Js(this.stateTask);this.stateIsYes?this.createCrackYesPayload(n):this.createCrackNoPayload(n)},async createCrack(){this.stateLoading=!0;const s={ver:"v1"};try{const n=et();this.createPayloadCrack(),n.reasonNA!=""&&n.setReasonNA("");const t=await Dt.post(`${Vl}?${new URLSearchParams(s).toString()}`,this.statePayload);switch(this.stateLoading=!1,t.data.result.message){case ba.TASK_UPDATED_BY_OTHER:return n.toggleTaskAlreadyUpdatedStatus(!0),!1;case ba.SUBMITTED:return n.toggleFormAlreadySubmitted(!0),!1;case ba.CLOSE:return n.toggleFormAlreadyClose(!0),!1;default:if(t.data.statusCode==400)return n.toogleTaskErrorDialog(!0),n.stateErrorMessageTaskErrorDialog=t.data.result.message,!1;break}return!0}catch(n){sa("fe_event_error_post_crack",{errorMessage:n});const t=this.globalConnectionStore.checkIsErrorNoNetwork(n);return this.globalConnectionStore.setSubmitConnectionError(t),ya(n),console.log(n),this.stateLoading=!1,Gt("IRONS",n),!1}},getPreviousCrackFromState(s){const n=[],t=this.eformStore.statePreviousCrackArr.find(u=>u.taskId==s);t&&(t.previousCrack.forEach(u=>{const l={currentCrack:u.currentCrack,locationDesc:u.locationDesc,locationId:u.locationId,previousCrack:u.previousCrack,isValid:!0,message:""};n.push(l)}),this.stateCrackInfo.importPreviousCrack(...n))},async getPreviousCrack(s,n,t,u){this.stateLoading=!0;const l={ver:"v1"},o={workorder:s,modelId:n,psTypeId:t,taskId:u};try{const w=await Dt.post(`${Il}?${new URLSearchParams(l).toString()}`,o),S=[];w.data.result.content.forEach(x=>{const _={currentCrack:x.currentCrack,locationDesc:x.locationDesc,locationId:x.locationId,previousCrack:x.previousCrack,isValid:!0,message:""};S.push(_)}),this.stateCrackInfo.importPreviousCrack(...S)}catch(w){sa("fe_event_error_get_previous_crack",{errorMessage:w}),ya(w),Gt("IRONS",w),console.log(w)}this.stateLoading=!1},async getReferencePhoto(s){const n={id:s,ver:"v1"};try{const l=(await Dt.getBlob("https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_id","",new URLSearchParams(n).toString())).data,o=new Blob([l]);return(window.URL||window.webkitURL).createObjectURL(o)}catch(t){return sa("fe_event_error_get_reference_photo_crack",{errorMessage:t}),console.log(t),Gt("IRONS",t),""}},async setReferencePhoto(s,n){this.stateReferencePhoto.title=s,this.stateReferencePhoto.id=n,this.stateReferencePhoto.blob=await this.getReferencePhoto(n)},async getCrackDetail(s,n){this.stateLoading=!0;const t={ver:"v1"},u={servicesheetDetailId:s,taskId:n};try{const o=(await Dt.post(`${Pl}?${new URLSearchParams(t).toString()}`,u)).data.result.content.detail,w=gt(),S=ro();if(w.setCurrent("crack"),w.clearCurrent(),o.type==="YES"){this.stateIsYes=!0;const x=new Ys;x.setAssetNumber(o.assetNumber),x.setDescription(o.description),x.setPriority(o.priority),x.setRaisedBy(o.raisedBy),x.setDate(o.date),x.setPlannedDuration(o.plannedDuration),x.setInstruction(o.instruction),x.setTitle(o.title),x.importParts(...JSON.parse(o.parts)),x.importLabours(...JSON.parse(o.labours)),x.importResources(...JSON.parse(o.resources)),x.importSymptoms(...JSON.parse(o.symptoms)),x.importCauses(...JSON.parse(o.causes)),x.importPreviousCrack(...JSON.parse(o.previousCracks)),this.images.ImageInfos.push(...JSON.parse(o.images));const _=[];this.images.ImageInfos.forEach(y=>{let T="";typeof y=="string"?T=y:T=y.filename,_.push(S.downloadAttachment(T))}),Promise.all(_).then(y=>{y.forEach(T=>{const I=new Blob([T],{type:"image/png"});this.images.ImageBlobs.push(I)}),this.stateCrackInfo=x,this.toggleViewYesVisible(!0)})}else{this.stateIsYes=!1,this.stateCrackInfo=new Ws,this.stateCrackInfo.setAssetNumber(o.assetNumber),this.stateCrackInfo.setDescription(o.description),this.stateCrackInfo.setRaisedBy(o.raisedBy),this.stateCrackInfo.setDate(o.date),this.stateCrackInfo.setInstruction(o.instruction),this.stateCrackInfo.setTitle(o.title),this.stateCrackInfo.importPreviousCrack(...JSON.parse(o.previousCracks)),this.images.ImageInfos.push(...JSON.parse(o.images));const x=[];this.images.ImageInfos.forEach(_=>{let y="";typeof _=="string"?y=_:y=_.filename,x.push(S.downloadAttachment(y))}),Promise.all(x).then(_=>{_.forEach(y=>{const T=new Blob([y],{type:"image/png"});this.images.ImageBlobs.push(T)}),this.toggleViewNoVisible(!0)})}await this.setReferencePhoto(o.referenceSection,o.referencePhoto)}catch(l){sa("fe_event_error_get_crack_detail",{errorMessage:l}),ya(l),Gt("IRONS",l),console.log(l)}this.stateLoading=!1},resetInstance(){this.stateLoading=!1,this.stateCrackInfo={},this.stateCrackNoVisible=!1,this.stateCrackYesVisible=!1,this.stateViewYesVisible=!1,this.stateViewtNoVisible=!1,this.stateIsValid=!0,this.stateItemKey="",this.stateTask={},this.stateIsYes=void 0,this.stateReferencePhoto={title:"",blob:"",id:""},this.statePayload={updateParams:[]}}}}),wa=s=>(vt("data-v-1189cbab"),s=s(),pt(),s),Vi={class:"px-0 mx-0 d-flex"},Ii=["innerHTML"],Pi=["innerHTML"],Ri={key:0,class:"ms-2"},Ui=wa(()=>e("img",{src:al,alt:"na",class:"d-icon"},null,-1)),Ai=[Ui],Bi=wa(()=>e("img",{src:Ts,alt:"defect",class:"d-icon"},null,-1)),Ti=[Bi],Li=wa(()=>e("img",{src:Ts,alt:"defect",class:"d-icon"},null,-1)),Ni=[Li],Oi=wa(()=>e("img",{src:al,alt:"na",class:"d-icon"},null,-1)),Mi=[Oi],ji={key:0,class:"ms-1 d-flex align-items-center"},Ei=wa(()=>e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Updating...")],-1)),Fi=wa(()=>e("span",null,"Updating...",-1)),Hi=[Ei,Fi],qi=Ue({__name:"Dropdown",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0},itemLoading:{type:Boolean,default:!1}},emits:["setLoading"],setup(s,{emit:n}){const t=s,u=n,l=Fe(t,"item"),o=Fe(t,"task"),w=Ut(),S=et(),x=Jt(),_=hl(),y=Si(),T=Tt(),I=v(!1),g=v(!1),N=v(""),h=v(""),H=v(!1),P=gt(),R=v([]),$=B=>{R.value=B},V=()=>{R.value.length<1?le():F(),R.value=[]},L=b(()=>g),A=b(()=>x.Cancelled),te=b(()=>_.Cancelled),Z=b(()=>y.Cancelled),ee=v(!1),W=v(!1),K=v(!1),oe=()=>{var B;(B=t.task)==null||B.items.forEach(C=>{C.itemType==="smallCamera"&&(P.toggleIsVisible(!0,C.key),P.setShowCloseButton(!1),P.setShowCloseButton(!1))}),K.value=!1},m=b(()=>{let B="Choose One";return!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.placeholder)&&(B=l.value.style.placeholder),B});Xe(A,B=>{var C,ye,Re;if(u("setLoading",!1),B===!0){if(((C=l.value)==null?void 0:C.categoryItemType)=="resultRating")return;const Ne=localStorage.getItem("taskKey");console.log((ye=o.value)==null?void 0:ye.key),Ne===((Re=o.value)==null?void 0:Re.key)&&(l.value.value=N.value,g.value=!g.value,x.setCancelledState(!1),H.value=!1)}}),Xe(te,B=>{var C,ye;if(u("setLoading",!1),B===!0){if(((C=l.value)==null?void 0:C.categoryItemType)=="resultRating")return;localStorage.getItem("taskKey")===((ye=o.value)==null?void 0:ye.key)&&(l.value.value=N.value,g.value=!g.value,_.setCancelledState(!1),H.value=!1)}}),Xe(Z,B=>{var C,ye;if(u("setLoading",!1),B===!0){if(((C=l.value)==null?void 0:C.categoryItemType)=="resultRating")return;localStorage.getItem("taskKey")===((ye=o.value)==null?void 0:ye.key)&&(l.value.value=N.value,g.value=!g.value,y.setCancelledState(!1),H.value=!1)}});const f=b(()=>t.generalStyle?!a.isUndefined(l.value.style)&&l.value.style.breakPoint!="none"?`col-${l.value.style.breakPoint}`:"col":""),ve=b(()=>{let B="";return t.generalStyle&&!a.isUndefined(l.value.style)&&(!a.isUndefined(l.value.style.potraitBreakPoint)&&l.value.style.breakPoint!="none"?(B=`col-md-${l.value.style.potraitBreakPoint}`,B=`${B} col-lg-${l.value.style.breakPoint}`):(B=`col-md-${l.value.style.potraitBreakPoint}`,B=`${B} col-lg-${l.value.style.breakPoint}`)),B}),Ve=b(()=>{var B;return me.value?(B=Me.value.find(C=>C.value==String(me.value)))==null?void 0:B.label:me.value}),_e=b(()=>{var ye,Re;const B=l.value.value.toString().replaceAll("'","");let C;return B=="1"?C="green":B=="2"||B=="3"&&((ye=o.value)==null?void 0:ye.category)=="CRACK"?C="red":B=="3"&&(((Re=o.value)==null?void 0:Re.category)=="NORMAL"||l.value.categoryItemType=="resultStatus")||B=="4"?C="yellow":B=="A"?C="a":B=="B"?C="b":B=="C"?C="c":B=="X"&&(C="x"),C}),Ce=B=>{xe(B,!0)},xe=async(B,C,ye=!1)=>{var Re,Ne,Ke,Je,nt,it,st,rt,lt,k,j,X,pe;if(a.isUndefined((Ne=(Re=t.task)==null?void 0:Re.updatedBy)==null?void 0:Ne.id)||u("setLoading",!0),S.setStateItemKey(l.value.key),t.item.categoryItemType=="dropdownTool")if(T.stateConnectionStatus)H.value=!0,N.value=me.value,l.value.value=B,await S.updateToolUom(t.task,l.value),H.value=!1;else{T.setSubmitConnectionError(!0),l.value.value=N.value,localStorage.removeItem("taskKey");return}else{if(me.value===B||B===((Ke=t.task)==null?void 0:Ke.taskValue)&&!(A.value||te.value||Z.value))return;if(Ie(),A.value||te.value||Z.value){N.value="",localStorage.removeItem("taskKey");return}else if(T.stateConnectionStatus){if(u("setLoading",!0),H.value=!0,localStorage.setItem("taskKey",(Je=o.value)==null?void 0:Je.key),N.value=me.value,h.value=(nt=o.value)==null?void 0:nt.key,l.value.value=B,B==="2"&&((it=t.task)==null?void 0:it.category)==="NORMAL")x.setTask(t.task),x.setItemKey(l.value.key),I.value=!0,x.setItem(l.value);else if(B==="3"&&((st=t.task)==null?void 0:st.category)==="CRACK")_.setTask(t.task),_.setItemKey(l.value.key),_.cretateInstance(!0),await _.getPreviousCrack(S.generalForm.workOrder,S.generalForm.modelId,S.generalForm.psTypeId,t.task.key),_.toggleYesVisible(!0);else if(B==="2"&&((rt=t.task)==null?void 0:rt.category)==="CRACK")_.setTask(t.task),_.setItemKey(l.value.key),_.cretateInstance(!1),await _.getPreviousCrack(S.generalForm.workOrder,S.generalForm.modelId,S.generalForm.psTypeId,t.task.key),_.toggleNoVisible(!0);else if(B==="3"&&((lt=t.task)==null?void 0:lt.category)==="NORMAL"||B=="3"&&l.value.categoryItemType=="resultStatus"||B==="4"&&((k=t.task)==null?void 0:k.category)==="CRACK")y.setTask(t.task),y.setItemKey(l.value.key),y.toggleIsVisible(!0),y.setItem(l.value);else if(B=="C"||B=="X"){const Y=t.task.items.find(ot=>ot.itemType==="smallCamera");Y&&S.setMeasurementValueAndUOM("","",Y.key),await S.updateDefect(t.task,B,l.value)&&(B=="C"||B=="X")&&C&&(S.setInputCameraMandatoryKey(l.value.key),K.value=!0)}else{N.value&&(((j=t.task)==null?void 0:j.category)==="CBM"||((X=t.task)==null?void 0:X.category)==="NORMAL")&&await S.deleteDefect(t.task);const Y={keyValue:(pe=o.value)==null?void 0:pe.key,propertyParams:[{propertyName:"taskValue",propertyValue:l.value.value.toString()??"1"},{propertyName:"updatedBy",propertyValue:B===""?"":JSON.stringify(S.employee)},{propertyName:"updatedDate",propertyValue:B===""?"":"<<ServerDateTime>>"}]};let ae={},ot={};l.value.categoryItemType=="resultRating"&&((t.task.taskValue=="3"||t.task.taskValue=="4")&&await S.deleteDefect(t.task),ot={keyValue:t.task.key,propertyParams:[{propertyName:"taskNormalValue",propertyValue:""}]},t.task.items.forEach(kt=>{kt.categoryItemType=="resultStatus"&&(ae={keyValue:kt.key,propertyParams:[{propertyName:"value",propertyValue:""},{propertyName:"updatedBy",propertyValue:""},{propertyName:"updatedDate",propertyValue:""}]})}));const Pt=[{keyValue:l.value.key,propertyParams:[{propertyName:"value",propertyValue:B},{propertyName:"updatedBy",propertyValue:B===""?"":JSON.stringify(S.employee)},{propertyName:"updatedDate",propertyValue:B===""?"":"<<ServerDateTime>>"}]}];!a.isUndefined(l.value.isTaskValue)&&l.value.isTaskValue&&Pt.push(Y),l.value.categoryItemType=="resultRating"&&(Pt.push(ae),Pt.push(ot)),await S.updateServiceSheetTaskValue(Pt,w.user.EmployeeId,w.user.Name).then(kt=>{var _t;S.setStateItemKey(""),kt?(((_t=t.task)==null?void 0:_t.category)==="CBM"&&(B=="A"||B=="B")&&(S.setInputCameraMandatoryKey(l.value.key),!a.isUndefined(l.value.customValidation)&&l.value.customValidation.includes("cbmTakePhotoAllRating")&&(K.value=!0)),B=="1"&&N.value==""&&(S.setInputCameraMandatoryKey(l.value.key),!a.isUndefined(l.value.customValidation)&&l.value.customValidation.includes("normalTakePhoto")&&(K.value=!0),!a.isUndefined(l.value.customValidation)&&l.value.customValidation.includes("cbmTakePhoto")&&(K.value=!0))):l.value.value=N.value})}H.value=!1,u("setLoading",!1)}else{T.setSubmitConnectionError(!0),localStorage.removeItem("taskKey"),l.value.value=N.value;return}}},me=b(()=>t.item.value.toString().replaceAll("'",""));Nt(()=>{N.value=l.value.value});const we=v(!1);Xe(me,async(B,C)=>{var ye;if(!a.isUndefined(l.value.disabledByItemKey)){let Re=S.stateStoredDisableKeyValue.find(Ne=>Ne.key==l.value.disabledByItemKey);if(a.isUndefined(Re)){const Ne=await S.getValueFromItemKey(l.value.disabledByItemKey);S.pushStoredDisabledItems({key:l.value.disabledByItemKey,value:Ne})}Re=S.stateStoredDisableKeyValue.find(Ne=>Ne.key==l.value.disabledByItemKey),(Re==null?void 0:Re.value)=="3"?(we.value=!0,((ye=t.task)==null?void 0:ye.taskType)=="inline"&&l.value.value&&xe("",!1)):we.value=!1}B=="3"&&S.stateStoredDisableKeyValue.forEach(Re=>{Re.key==l.value.disabledByItemKey&&(Re.value=B)})},{deep:!0});const $e=b(()=>t.itemLoading);Xe($e,B=>{H.value=B});const Ie=()=>{x.toggleYesVisible(!1),x.toggleNoVisible(!1),x.toggleViewNoVisible(!1),x.toggleViewYesVisible(!1),_.toggleYesVisible(!1),_.toggleNoVisible(!1),_.toggleViewNoVisible(!1),_.toggleViewYesVisible(!1),y.toggleIsVisible(!1),y.toggleIsViewVisible(!1)},Me=b(()=>{const B=t.item.caption.replace("[","").replace("]","").split("; "),C=t.item.itemValue.replace("[","").replace("]","").split(", ");return B.map((Re,Ne)=>({label:Re.replaceAll("'",""),value:C[Ne].replaceAll("'","")}))}),qe=b(()=>{var rt,lt,k,j;const B=!a.isUndefined(l.value.style)&&l.value.style.bgColor!="none"?`background-color: ${l.value.style.bgColor}; `:"",C=!a.isUndefined(l.value.style)&&l.value.style.fontColor!="none"?`color: ${l.value.style.fontColor}; `:"",ye=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.top!="none"?`border-top: ${l.value.style.border.top}; `:"",Re=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.right!="none"?`border-right: ${l.value.style.border.right}; `:"";let Ne=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.bottom!="none"?`border-bottom: ${l.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((rt=t.task)==null?void 0:rt.isShowAdjustmentRow)&&((lt=t.task)!=null&&lt.isShowAdjustmentRow))Ne="";else{let X=0;(k=t.task)==null||k.items.forEach(pe=>{var Y;a.isUndefined(pe.style)||(a.isUndefined(pe.style.border)?a.isUndefined(pe.style.border)&&(X=X+Number(pe.style.breakPoint)):((pe.style.border.right=="none"||a.isUndefined(pe.style.border.right))&&(X=X+Number(pe.style.breakPoint)),a.isEqual(pe,a.last((Y=t.task)==null?void 0:Y.items))&&(X=X+Number(pe.style.breakPoint))))}),X==12&&(Ne=!((j=t.task.updatedBy)!=null&&j.name)&&!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.bottom!="none"?`border-bottom: ${l.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const Ke=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.border)&&l.value.style.border.left!="none"?`border-left: ${l.value.style.border.left}; `:"",Je=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${l.value.style.borderRadius.topRight}; `:"",nt=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${l.value.style.borderRadius.bottomRight}; `:"",it=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${l.value.style.borderRadius.topLeft}; `:"",st=!a.isUndefined(l.value.style)&&!a.isUndefined(l.value.style.borderRadius)&&l.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${l.value.style.borderRadius.bottomLeft}; `:"";return`${B}${C}${ye}${Re}${Ne}${Ke}${Je}${nt}${it}${st}`}),at=async()=>{var C,ye;const B=St.service({lock:!0,text:"Opening Form",background:"rgba(0, 0, 0, 0.7)"});await x.getDefectDetail((C=S.selectedGroup)==null?void 0:C.id,(ye=o.value)==null?void 0:ye.key),B.close()},Qe=async()=>{var C,ye;const B=St.service({lock:!0,text:"Opening Form",background:"rgba(0, 0, 0, 0.7)"});await _.getCrackDetail((C=S.selectedGroup)==null?void 0:C.id,(ye=o.value)==null?void 0:ye.key),B.close()},We=async()=>{var C,ye;const B=St.service({lock:!0,text:"Opening Form",background:"rgba(0, 0, 0, 0.7)"});await y.getNADetail((C=S.selectedGroup)==null?void 0:C.id,(ye=o.value)==null?void 0:ye.key),B.close()},F=async()=>{I.value=!1,x.cretateInstance(!0),x.toggleYesVisible(!0)},le=()=>{I.value=!1,x.cretateInstance(!1),x.toggleNoVisible(!0)},J=()=>{R.value=[],I.value=!1,l.value.value=N.value},G=()=>{ee.value=!1},fe=()=>{W.value=!1},ge=b(()=>{var ye;let B=!0;!a.isUndefined(o.value.updatedBy)&&!a.isUndefined(o.value.updatedBy.id)&&((ye=o.value)==null?void 0:ye.updatedBy.toString())!=""&&S.employee.id!=o.value.updatedBy.id&&(B=!1);let C=!1;return(me.value=="2"||me.value=="3"||me.value=="4")&&(C=!0),!B||C||we.value||H.value}),je=B=>ls(B),Q=b(()=>{let B="pb-2";return!a.isUndefined(t.task.updatedBy.name)&&t.task.updatedBy.name&&(B=""),B}),de=b(()=>y.stateSuccessUpdateItemKey);Xe(de,B=>{B==l.value.key&&!a.isUndefined(l.value.customValidation)&&l.value.customValidation.includes("normalTakePhoto")&&(S.setInputCameraMandatoryKey(l.value.key),K.value=!0)});const Se=b(()=>P.stateIsCameraError);return Xe(Se,async B=>{B&&S.stateInputCameraMandatoryKey==l.value.key&&(await xe("",!1,!0),S.setInputCameraMandatoryKey(""))}),(B,C)=>{var it,st,rt,lt,k;const ye=he("el-option"),Re=he("el-select"),Ne=he("CBMDefectC"),Ke=he("CBMDefectX"),Je=he("DefectConfirmationDialog"),nt=he("TakePhoto");return i(),d(ne,null,[e("div",{class:se([[ve.value,f.value,Q.value],"px-2 pt-2 dropdown-eform-status prevent-split"]),style:De(qe.value)},[e("div",Vi,[(i(),ue(Re,{modelValue:me.value,"onUpdate:modelValue":C[0]||(C[0]=j=>me.value=j),placeholder:m.value,size:"small",class:se(["w-100",_e.value]),disabled:ge.value,onChange:Ce,key:L.value},rs({default:O(()=>[(i(!0),d(ne,null,Pe(Me.value,j=>(i(),ue(ye,{key:j,value:j.value},{default:O(()=>[e("span",{innerHTML:j&&j.label?je(j&&j.label):""},null,8,Ii)]),_:2},1032,["value"]))),128))]),_:2},[me.value?{name:"prefix",fn:O(()=>[e("span",{class:"el-input__custom-option",innerHTML:Ve.value},null,8,Pi)]),key:"0"}:void 0]),1032,["modelValue","placeholder","disabled","class"])),l.value.value==="2"&&((it=s.task)==null?void 0:it.category)=="NORMAL"?(i(),d("div",Ri,[e("img",{src:Ts,alt:"defect",class:"d-icon",onClick:at})])):D("",!0),l.value.value==="3"&&(((st=s.task)==null?void 0:st.category)=="NORMAL"||((rt=s.task)==null?void 0:rt.category)=="CBM")?(i(),d("div",{key:1,class:"ms-2",onClick:We},Ai)):D("",!0),l.value.value==="2"&&((lt=s.task)==null?void 0:lt.category)=="CRACK"?(i(),d("div",{key:2,class:"ms-2",onClick:Qe},Ti)):D("",!0),l.value.value==="3"&&((k=s.task)==null?void 0:k.category)=="CRACK"?(i(),d("div",{key:3,class:"ms-2",onClick:Qe},Ni)):D("",!0),l.value.value==="4"?(i(),d("div",{key:4,class:"ms-2",onClick:We},Mi)):D("",!0)]),H.value?(i(),d("div",ji,Hi)):D("",!0)],6),p(Ne,{show:ee.value,onClose:G},null,8,["show"]),p(Ke,{show:W.value,onClose:fe},null,8,["show"]),I.value?(i(),ue(Je,{key:0,show:I.value,"check-list-arr":R.value,onUpdateCheckList:$,onSubmit:V,onClose:J},null,8,["show","check-list-arr"])):D("",!0),p(nt,{show:K.value,onClose:oe},null,8,["show"])],64)}}}),gl=tt(qi,[["__scopeId","data-v-1189cbab"]]),Ki={key:0,class:"text-danger ps-2 font-weight-bold"},Gi={key:1,class:"d-flex align-items-center"},Wi=e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),Yi=e("span",null,"Calculating...",-1),zi=[Wi,Yi],Ji={key:2,class:"d-flex align-items-center"},Qi=e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Updating...")],-1),Xi=e("span",null,"Updating...",-1),Zi=[Qi,Xi],kl=Ue({__name:"Input",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0},itemLoading:{type:Boolean,default:!1}},setup(s){const n=s,t=Fe(n,"item"),u=Fe(n,"task"),l=et(),o=Ut(),w=Ca(),S=v(!1),x=v("");let _;const y=v(!1),T=v(!1),I=v(!1),g=gt();Tt(),v("");const N=b(()=>{let F="";return!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.suffix)&&(F=t.value.style.suffix),F}),h=b(()=>{let F="Please Input";return(t.value.categoryItemType=="targetRating"||t.value.categoryItemType=="resultParamRating")&&(F=""),!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.placeholder)&&(F=t.value.style.placeholder),F});v(!1),v(!1);const H=v(!1),P=b(()=>n.generalStyle?!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col":""),R=b(()=>{let F="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(F=`col-md-${t.value.style.potraitBreakPoint}`,F=`${F} col-lg-${t.value.style.breakPoint}`):(F=`col-md-${t.value.style.potraitBreakPoint}`,F=`${F} col-lg-${t.value.style.breakPoint}`)),F}),$=b(()=>{let F=!1;const le=t.value.categoryItemType;(le=="targetRating"||le=="resultParamRating")&&(F=!0);let J=!1;return t.value.categoryItemType=="paramRatingDynamic"&&u.value.items.forEach(G=>{G.itemType=="dropDown"&&G.categoryItemType=="dropdownTool"&&G.value==""&&(J=!0)}),F||n.task.isShowAdjustmentRow||J||V.value}),V=v(!1),L=b(()=>{var le;let F="text";return(t.value.valueType=="int"||(le=t.value.customValidation)!=null&&le.toLowerCase().includes("percentage"))&&(F="numeric"),F}),A=b(()=>t.value.valueType=="int"),te=b(()=>{var F;return(F=t.value.customValidation)==null?void 0:F.toLowerCase().includes("percentage")}),Z=b(()=>t.value.categoryItemType=="paramRating"||t.value.categoryItemType=="paramRatingDynamic"),ee=b(()=>!a.isUndefined(t.value.mappingKeyId)&&!a.isArray(t.value.mappingKeyId)),W=b({get:()=>t.value.value,set:async F=>{if(A.value||Z.value||ee.value){if(F.length>8)return;if((`${F}`.split(".")||[]).length-1>1)return;if(F.includes(".")){if(`${F}`.split(".")[1].length>2)return;t.value.value=F}if(F.length>5){if(F.length>=6&&F.length<=6){if(F[5]!=".")return;t.value.value=F}}else t.value.value}t.value.value=F,K()}}),K=()=>{if(!t.value.value)w.deleteParams(t.value.key);else{const F={keyValue:t.value.key,propertyParams:[{propertyName:"value",propertyValue:t.value.value},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};w.addUpdateParams(F)}},oe=()=>{var F;if(n.task.category=="CBM"&&t.value.categoryItemType=="paramRating"||t.value.categoryItemType=="resultParamRating"||t.value.categoryItemType=="paramRatingDynamic"){if(!a.isUndefined(t.value.disabledByItemKey&&t.value.value=="")||a.isUndefined(t.value.customValidation)||!((F=t.value.customValidation)!=null&&F.toLowerCase().includes("required")))return!0;if(!Zl(t.value.value))return x.value="max. 2 decimal digits",!1}return!0},m=async F=>{if(F!=Ie.value){clearTimeout(_),t.value.value=F;let le=f();le&&(le=oe()),le&&(x.value="",_=setTimeout(async()=>{if(n.task.category=="CBM"&&(t.value.categoryItemType=="paramRating"||t.value.categoryItemType=="resultParamRating"||t.value.categoryItemType=="paramRatingDynamic")?y.value=!0:(!a.isUndefined(t.value.mappingKeyId)&&a.isArray(t.value.mappingKeyId),I.value=!0),Me(F)){const G={keyValue:u.value.key,propertyParams:[{propertyName:"taskValue",propertyValue:F},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};if(ee.value)F!==""?await we(F):await Ve(G,F);else{let fe=!0;(n.task.category=="CBM"&&t.value.categoryItemType=="paramRating"||t.value.categoryItemType=="resultParamRating"||t.value.categoryItemType=="paramRatingDynamic")&&await _e().then(ge=>{fe=ge,!ge&&l.ratingNotMapped}),fe&&(await Ve(G,F),Ie.value=F,t.value.category=="cbmCalculateAvg"&&(l.setAvgTargetKey(t.value.targetCalculateKeyId),ve()))}}y.value=!1,I.value=!1,t.value.isCalculatingTrue=!1},0))}else x.value=""},f=()=>{var F;if((F=t.value.customValidation)!=null&&F.toLowerCase().includes("percentage")){const le=parseFloat(t.value.value);return isNaN(le)||le<0||le>100?(x.value="must be between 0 - 100",!1):(x.value=="must be between 0 - 100"&&(x.value=""),!0)}return x.value=="must be between 0 - 100"&&(x.value=""),!0},ve=async F=>{const le=t.value.mappingKeyId,J=[];let G;if(l.stateSelectedSubGroups.find(fe=>fe.taskGroup.some(ge=>ge.task.some(je=>je.items.some(Q=>(Q.key==t.value.targetCalculateKeyId&&(G=Q),Q.key==t.value.targetCalculateKeyId))))),G.isCalculatingTrue=!0,a.isArray(le)){for(let ge=0;ge<le.length;ge++){const je=await l.getValueFromItemKey(le[ge]);J.push(Number(je))}let fe=0;J.forEach(ge=>{fe=fe+ge}),fe=a.round(fe/J.length,2),l.stateSelectedSubGroups.find(ge=>ge.taskGroup.some(je=>je.task.some(Q=>Q.items.some(de=>(de.key==t.value.targetCalculateKeyId&&(G=de),de.key==t.value.targetCalculateKeyId))))),G.value=fe}},Ve=async(F,le)=>{const J=[{keyValue:t.value.key,propertyParams:[{propertyName:"value",propertyValue:le},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];!a.isUndefined(t.value.isTaskValue)&&t.value.isTaskValue&&J.push(F),await l.updateServiceSheetTaskValue(J,o.user.EmployeeId,o.user.Name)},_e=async()=>{let F=!0;const le=n.task,J=le.items.findIndex(ge=>ge.key==t.value.key)+1,G=le.items[J],fe=le.items.find(ge=>ge.itemType==="smallCamera");return G&&fe&&l.setMeasurementValueAndUOM(t.value.value,G.value,fe.key),await l.getCBMResult(le,t.value).then(ge=>{F=ge.status,ge.status&&(ge.value&&!a.isUndefined(t.value.customValidation)&&t.value.customValidation.includes("cbmTakePhoto")&&(l.setInputCameraMandatoryKey(t.value.key),H.value=!0),(ge.value=="A"||ge.value=="B")&&!a.isUndefined(t.value.customValidation)&&t.value.customValidation.includes("cbmTakePhotoAllRating")&&(l.setInputCameraMandatoryKey(t.value.key),H.value=!0),(ge.value=="C"||ge.value=="X")&&(!a.isUndefined(t.value.customValidation)&&t.value.customValidation.includes("cbmDefectTakePhoto")||!a.isUndefined(t.value.customValidation)&&t.value.customValidation.includes("cbmTakePhotoAllRating"))&&(l.setInputCameraMandatoryKey(t.value.key),H.value=!0))}),F},Ce=b(()=>g.stateIsCameraError);Xe(Ce,async F=>{F&&l.stateInputCameraMandatoryKey==t.value.key&&(await m(""),l.setInputCameraMandatoryKey(""))});const xe=b(()=>{const F=t.value.value.toString().replaceAll("'","");let le;return t.value.categoryItemType=="targetRating"&&(F=="A"?le="a":F=="B"?le="b":F=="C"?le="c":F=="X"&&(le="x")),le}),me=b(()=>{var B,C,ye,Re;const F=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",le=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",J=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",G=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let fe=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((B=n.task)==null?void 0:B.isShowAdjustmentRow)&&((C=n.task)!=null&&C.isShowAdjustmentRow))fe="";else{let Ne=0;(ye=n.task)==null||ye.items.forEach(Ke=>{var Je;a.isUndefined(Ke.style)||(a.isUndefined(Ke.style.border)?a.isUndefined(Ke.style.border)&&(Ne=Ne+Number(Ke.style.breakPoint)):((Ke.style.border.right=="none"||a.isUndefined(Ke.style.border.right))&&(Ne=Ne+Number(Ke.style.breakPoint)),a.isEqual(Ke,a.last((Je=n.task)==null?void 0:Je.items))&&(Ne=Ne+Number(Ke.style.breakPoint))))}),Ne==12&&(fe=!((Re=n.task.updatedBy)!=null&&Re.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"")}const ge=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",je=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",Q=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",de=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",Se=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${F}${le}${J}${G}${fe}${ge}${je}${Q}${de}${Se}`});b(()=>{const F=t.value.categoryItemType=="targetRating";let le=!0;!a.isUndefined(u.value.updatedBy)&&!a.isUndefined(u.value.updatedBy.id)&&(l.employee.id==u.value.updatedBy.id?le=!0:le=!1);let J=!0;!a.isUndefined(t.value.updatedBy)&&!a.isUndefined(t.value.updatedBy.id)&&(l.employee.id==t.value.updatedBy.id?J=!0:J=!1);let G=!1;!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.visibility)&&t.value.style.visibility=="readonly"&&(G=!0);let fe=!0,ge;return t.value.category=="cbmCalculateAvg"&&(l.stateSelectedSubGroups.find(je=>je.taskGroup.some(Q=>Q.task.some(de=>de.items.some(Se=>(Se.key==t.value.targetCalculateKeyId&&(ge=Se),Se.key==t.value.targetCalculateKeyId))))),!a.isUndefined(ge.updatedBy)&&!a.isUndefined(ge.updatedBy.id)&&(l.employee.id==ge.updatedBy.id?fe=!0:fe=!1)),F||!le||G||!J||!fe});const we=async F=>{l.stateOilToleranceNotMapped?(T.value=!0,t.value.value=Ie.value):await l.getValueFromItemKey(t.value.mappingKeyId).then(async le=>{if(le!=""){const J=l.oilTolerance;let G=J.min,fe=J.max;J.uom=="%"&&(G=Number(le)*(G/100),fe=Number(le)*(fe/100));const je=Number(le)+Number(G),Q=Number(le)+Number(fe),de=F>=je,Se=F<=Q,B=parseFloat(je.toString()).toFixed(2),C=parseFloat(Q.toString()).toFixed(2);if(de&&Se){const ye={keyValue:u.value.key,propertyParams:[{propertyName:"taskValue",propertyValue:F},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};I.value=!1,await Ve(ye,F),Ie.value=F}else x.value=`Range refill capacity is between ${B} until ${C}`,I.value=!1,S.value=!0,t.value.value=Ie.value}})},$e=F=>{if(A.value||te.value||Z.value||ee.value){let le=F.keyCode?F.keyCode:F.which;te.value&&(F.target.value>100&&F.preventDefault(),F.target.value.includes(".")?F.target.value.split(".")[1].length>=2&&F.preventDefault():F.target.value.length>=3&&F.preventDefault()),(le<48||le>57)&&le!=46&&F.preventDefault()}},Ie=v("");Nt(async()=>{Ie.value=t.value.value,W.value=t.value.value,await at()}),Ml(()=>{t.value={}});const Me=F=>{if(t.value.valueType=="int"){const le=F.split(".");let J=!1,G=le[0].length>5;return le[1]&&(J=le[1].length>2),G||J?(x.value="max input length is 5 digits and 2 number after .",!1):!0}else return!0},qe=b(()=>t.value.isCalculatingTrue);Xe(qe,(F,le)=>{F&&(y.value=!0)});const at=async()=>{var F;if(!a.isUndefined(t.value.disabledByItemKey)){let le=l.stateStoredDisableKeyValue.find(J=>J.key==t.value.disabledByItemKey);if(a.isUndefined(le)){const J=await l.getValueFromItemKey(t.value.disabledByItemKey);l.pushStoredDisabledItems({key:t.value.disabledByItemKey,value:J})}le=l.stateStoredDisableKeyValue.find(J=>J.key==t.value.disabledByItemKey),(le==null?void 0:le.value)=="3"?(V.value=!0,t.value.value&&((F=n.task)==null?void 0:F.taskType)=="inline"&&await m("")):V.value=!1}},Qe=b(()=>n.itemLoading);Xe(Qe,F=>{I.value=F}),Xe(W,async(F,le)=>{F==""&&(Ie.value=""),t.value.categoryItemType&&t.value.categoryItemType=="resultParamRating"&&t.value.key==l.stateAvgTargetKey&&F!=le&&m(F),await at()},{deep:!0}),Xe(n.item,(F,le)=>{t.value=F},{deep:!0});const We=b(()=>{let F="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(F=""),F});return(F,le)=>{const J=he("el-input");return i(),d("div",{class:se([[P.value,R.value,We.value],"px-2 pt-2 input-eform-status prevent-split"]),style:De(me.value)},[p(J,{class:se([xe.value,N.value!=""?"service-sheet-input":""]),modelValue:W.value,"onUpdate:modelValue":le[0]||(le[0]=G=>W.value=G),size:"small",placeholder:h.value,readonly:!0,onKeypress:$e,inputmode:L.value,disabled:$.value},rs({_:2},[N.value!=""?{name:"append",fn:O(()=>[be(M(N.value),1)]),key:"0"}:void 0]),1032,["class","modelValue","placeholder","inputmode","disabled"]),x.value!=""?(i(),d("label",Ki,M(x.value),1)):D("",!0),y.value?(i(),d("div",Gi,zi)):D("",!0),I.value?(i(),d("div",Ji,Zi)):D("",!0)],6)}}}),eu=["disabled"],tu=["src"],au={key:0,class:"col-6 ps-0 pe-1 d-flex justify-content-center"},su={class:"text-white"},_l=Ue({__name:"SmallCamera",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(s){const n=s,t=Fe(n,"item"),u=v(!1),l=Fe(n,"task"),o=et(),w=gt(),S=Ut(),x=ze(()=>n.generalStyle?!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col":""),_=ze(()=>{let W="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(W=`col-md-${t.value.style.potraitBreakPoint} col-lg-${t.value.style.breakPoint}`),W}),y=ze(()=>t.value.value?qt(t.value.value):[]),T=()=>{w.toggleIsVisible(!0,t.value.key)},I=ze(()=>a.cloneDeep(w.ImageObjects.find(W=>W.Id===t.value.key))),g=()=>{var K;let W="/media/svg/dma/camera/e-form/png/cam-active.png";return(K=n.task)!=null&&K.updatedBy&&t.value.updatedBy&&(n.task.updatedBy.id==o.employee.id?y.value.length>0&&(W="/media/svg/dma/camera/e-form/png/cam-user.png"):W="/media/svg/dma/camera/e-form/png/cam-read.png"),W},N=ze(()=>{let W=!1;return y.value.length==1&&(W=!0),!Z.value&&!W}),h=()=>{u.value=!0},H=()=>{u.value=!1},P=ze(()=>{var me,we,$e;const W=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",K=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",oe=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",m=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let f=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((me=n.task)==null?void 0:me.isShowAdjustmentRow)&&((we=n.task)!=null&&we.isShowAdjustmentRow))f="";else{let Ie=0;($e=n.task)==null||$e.items.forEach(Me=>{var qe;a.isUndefined(Me.style)||(a.isUndefined(Me.style.border)?a.isUndefined(Me.style.border)&&(Ie=Ie+Number(Me.style.breakPoint)):((Me.style.border.right=="none"||a.isUndefined(Me.style.border.right))&&(Ie=Ie+Number(Me.style.breakPoint)),a.isEqual(Me,a.last((qe=n.task)==null?void 0:qe.items))&&(Ie=Ie+Number(Me.style.breakPoint))))}),Ie==12&&(f=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const ve=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",Ve=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",_e=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",Ce=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",xe=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${W}${K}${oe}${m}${f}${ve}${Ve}${_e}${Ce}${xe}`}),R=async W=>{t.value.value=qt(t.value.value);const K=t.value.value;t.value.value=K.filter(oe=>oe.filename!=W),w.setCurrent(t.value.key),await $(),t.value.value.length==0&&H(),w.clearCurrent()},$=async()=>{const W={keyValue:l.value.key,propertyParams:[{propertyName:"updatedBy",propertyValue:JSON.stringify(o.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]},K=[{keyValue:t.value.key,propertyParams:[{propertyName:"value",propertyValue:JSON.stringify(t.value.value)},{propertyName:"updatedBy",propertyValue:JSON.stringify(o.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];!a.isUndefined(t.value.isTaskValue)&&t.value.isTaskValue&&K.push(W),o.updateServiceSheetTaskValue(K,S.user.EmployeeId,S.user.Name)},V=v(!1),L=()=>{V.value=!1},A=()=>{V.value=!1,T()},te=async()=>{t.value.value==""&&(t.value.value=[]);let W=[];I.value&&(W=qt(I.value.ImageInfos));const K=qt(t.value.value),oe=W.filter(m=>!K.includes(m));t.value.value=qt(t.value.value),t.value.value=[...t.value.value,...oe],await $(),V.value=!0},Z=ze(()=>{var K;let W=!0;return(K=l.value)!=null&&K.updatedBy&&o.employee.id!=l.value.updatedBy.id&&(W=!1),!W});Xe(I,async(W,K)=>{!a.isUndefined(W)&&W.ImageInfos.length>0&&W.ImageInfos.length!=(K==null?void 0:K.ImageInfos.length)&&await te()},{deep:!0});const ee=ze(()=>{var K;let W="pb-2";return(K=n.task)!=null&&K.updatedBy&&n.task.updatedBy.name&&(W=""),W});return(W,K)=>(i(),d("div",{class:se([[E(x),E(_),E(ee)],"pt-2"]),style:De(E(P))},[e("div",{class:se(["row",!E(a.isUndefined)(t.value.value)&&t.value.value.length>0?"justify-content-around":"justify-content-center"])},[e("div",{class:se(["d-flex justify-content-center",!E(a.isUndefined)(t.value.value)&&t.value.value.length>0?"col-6 pe-0 ps-1":"col-6 px-0"])},[e("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:T,disabled:E(Z)},[e("img",{src:g(),style:{height:"12px",width:"14px"},alt:"photo"},null,8,tu)],8,eu)],2),E(y)&&E(y).length>0?(i(),d("div",au,[e("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:h,style:{"background-color":"#18AF4A"}},[e("label",su,"+"+M(E(y).length),1)])])):D("",!0)],2),u.value?(i(),ue(sl,{key:0,images:E(y),visibility:u.value,showDeleteButton:E(N),onHandleClose:H,onHandleDelete:R,showRemainingPhotosMessage:!0},null,8,["images","visibility","showDeleteButton"])):D("",!0),p(ao,{visibility:V.value,caption:"The photo successfully taken, would you like to take another photo?",onOnNoConfirm:L,onOnYesConfirm:A},null,8,["visibility"])],6))}}),lu={class:"p-2"},ou={class:"form-check checkbox-success item-checkbox"},xl=Ue({__name:"CheckBox",props:{item:{type:Object,required:!0},task:{type:Object},generalStyle:{type:Boolean,default:!0}},setup(s){const n=s,t=Fe(n,"item"),u=Fe(n,"task"),l=et(),o=Ut(),w=b({get:()=>JSON.parse(n.item.value),set:async T=>{var N;const I={keyValue:(N=u.value)==null?void 0:N.key,propertyParams:[{propertyName:"taskValue",propertyValue:t.value.value.toString()},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]},g=[{keyValue:t.value.key,propertyParams:[{propertyName:"value",propertyValue:T.toString()},{propertyName:"updatedBy",propertyValue:JSON.stringify(l.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];!a.isUndefined(t.value.isTaskValue)&&t.value.isTaskValue&&g.push(I),await l.updateServiceSheetTaskValue(g,o.user.EmployeeId,o.user.Name)}}),S=b(()=>!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col"),x=b(()=>{let T="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(T=`col-md-${t.value.style.potraitBreakPoint}`,T=`${T} col-lg-${t.value.style.breakPoint}`):(T=`col-md-${t.value.style.potraitBreakPoint}`,T=`${T} col-lg-${t.value.style.breakPoint}`)),T}),_=b(()=>{var L,A,te,Z;const T=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",I=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",g=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",N=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((L=n.task)==null?void 0:L.isShowAdjustmentRow)&&((A=n.task)!=null&&A.isShowAdjustmentRow))h="";else{let ee=0;(te=n.task)==null||te.items.forEach(W=>{var K;a.isUndefined(W.style)||(a.isUndefined(W.style.border)?a.isUndefined(W.style.border)&&(ee=ee+Number(W.style.breakPoint)):((W.style.border.right=="none"||a.isUndefined(W.style.border.right))&&(ee=ee+Number(W.style.breakPoint)),a.isEqual(W,a.last((K=n.task)==null?void 0:K.items))&&(ee=ee+Number(W.style.breakPoint))))}),ee==12&&(h=!((Z=n.task.updatedBy)!=null&&Z.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const H=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",P=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",R=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",$=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",V=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${T}${I}${g}${N}${h}${H}${P}${R}${$}${V}`}),y=b(()=>{let T="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(T=""),T});return(T,I)=>(i(),d("div",{class:se([[x.value,S.value,y.value],"pt-2 px-2 d-flex align-items-center d-flex justify-content-center prevent-split"]),style:De(_.value)},[e("div",lu,[e("div",ou,[Ge(e("input",{disabled:!0,class:"form-check-input",type:"checkbox","onUpdate:modelValue":I[0]||(I[0]=g=>w.value=g)},null,512),[[jl,w.value]])])])],6))}}),Cl=Ue({__name:"InteractiveButton",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(s){const n=s,t=Fe(n,"item"),u=Fe(n,"task"),l=b(()=>n.generalStyle?!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col":""),o=b(()=>!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:""),w=b(()=>!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; border-color: ${t.value.style.bgColor};`:""),S=et(),x=b(()=>{let h="";return n.task.isShowAdjustmentRow&&(h="opacity: 50%;"),_.value&&(h="opacity: 50%;"),h}),_=b(()=>{const h=n.task.taskValue=="",H=n.task.taskValue=="A"||n.task.taskValue=="B";let P=!0;return!a.isUndefined(n.task.updatedBy)&&!a.isUndefined(n.task.updatedBy.id)&&(S.employee.id==n.task.updatedBy.id?P=!0:P=!1),h||H||n.task.isShowAdjustmentRow||!P}),y=b(()=>{let h="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(h=`col-md-${t.value.style.potraitBreakPoint}`,h=`${h} col-lg-${t.value.style.breakPoint}`):(h=`col-md-${t.value.style.potraitBreakPoint}`,h=`${h} col-lg-${t.value.style.breakPoint}`)),h}),T=b(()=>a.isUndefined(t.value.style)?"":t.value.style.textAlign=="left"?"text-start":t.value.style.textAlign=="right"?"text-end":"text-center"),I=b(()=>{var te,Z,ee,W;const h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",H=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let P=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((te=n.task)==null?void 0:te.isShowAdjustmentRow)&&((Z=n.task)!=null&&Z.isShowAdjustmentRow))P="";else{let K=0;(ee=n.task)==null||ee.items.forEach(oe=>{var m;a.isUndefined(oe.style)||(a.isUndefined(oe.style.border)?a.isUndefined(oe.style.border)&&(K=K+Number(oe.style.breakPoint)):((oe.style.border.right=="none"||a.isUndefined(oe.style.border.right))&&(K=K+Number(oe.style.breakPoint)),a.isEqual(oe,a.last((m=n.task)==null?void 0:m.items))&&(K=K+Number(oe.style.breakPoint))))}),K==12&&(P=!((W=n.task.updatedBy)!=null&&W.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const R=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",$=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",V=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",L=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",A=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${h}${H}${P}${R}${$}${V}${L}${A}`}),g=()=>{t.value.value=="Adjustment"&&(u.value.isShowAdjustmentRow=!0)},N=b(()=>{let h="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(h=""),h});return(h,H)=>{const P=he("el-button");return i(),d("div",{class:se([[l.value,T.value,y.value,N.value],"px-2 pt-2 prevent-split"]),style:De(I.value)},[!E(a.isUndefined)(s.item.style)&&s.item.style.visibility!="hidden"?(i(),ue(P,{key:0,style:De([o.value,w.value,x.value]),size:"small",type:"success",onClick:g,class:"item-button w-100",disabled:_.value},{default:O(()=>[be(M(s.item.value),1)]),_:1},8,["style","disabled"])):D("",!0)],6)}}}),ru={class:"row w-100"},nu=e("div",{class:"col-1 pb-1 px-2"},null,-1),iu={key:0,class:"d-flex align-items-center"},uu=e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),du=e("span",null,"Loading...",-1),cu=[uu,du],vu={class:"row justify-content-center"},pu={class:"px-0 col-6 d-flex justify-content-center"},mu=["disabled"],fu=["src"],yu={key:0,class:"col-6 ps-0 pe-1 d-flex justify-content-center"},bu={class:"text-white"},hu={key:0,class:"row w-100"},gu=Ue({__name:"TaskAdjustment",props:{task:{type:Object,required:!0}},setup(s){const n=s,t=async m=>{const f=u.value.adjustment.pictures;u.value.adjustment.pictures=f.filter(ve=>ve!=m),P.setCurrent(`${u.value.key}-adjustment`),P.clearCurrent(),await h.addCBMAdjustmentPictures(u.value),u.value.adjustment.pictures.length==0&&_()},u=Fe(n,"task"),l=v(!1),o=Tt(),w=b({get:()=>u.value.adjustment.measurement,set:m=>{eo(m)&&(u.value.adjustment.measurement=to(m))}}),S=b(()=>u.value.adjustment.pictures),x=b(()=>{var f;let m=!0;return(f=u.value)!=null&&f.updatedBy&&h.employee.id!=u.value.updatedBy.id&&(m=!1),!m}),_=()=>{l.value=!1},y=()=>{l.value=!0},T=b(()=>{let m="";return n.task.items.forEach(f=>{!a.isUndefined(f.style)&&!a.isUndefined(f.style.border)&&f.style.border.left!="none"&&(m=f.style.border.left)}),m}),I=b(()=>{let m="",f=!1;return u.value.items.forEach(ve=>{!a.isUndefined(ve.style)&&!a.isUndefined(ve.style.border)&&ve.style.border.bottom!="none"&&(f=!0)}),(u.value.adjustment.updatedBy.name==""||a.isUndefined(u.value.adjustment.updatedBy.name)&&f)&&(m=`border-bottom: ${T.value}`),m}),g=b(()=>{let m=!1;u.value.items.forEach(ve=>{!a.isUndefined(ve.style)&&!a.isUndefined(ve.style.border)&&ve.style.border.bottom!="none"&&(m=!0)});let f="";return u.value.adjustment.updatedBy.name!=""&&m&&(f=`border-bottom: ${T.value}`),f}),N=m=>{let f=m.keyCode?m.keyCode:m.which;(f<48||f>57)&&f!=46&&m.preventDefault()},h=et(),H=v(!1),P=gt(),R=v(!1),$=()=>{var f,ve;let m="/media/svg/dma/camera/e-form/png/cam-active.png";return a.isUndefined((f=n.task.adjustment.updatedBy)==null?void 0:f.id)||((ve=n.task.adjustment.updatedBy)==null?void 0:ve.id)==h.employee.id&&u.value.adjustment.pictures.length>0&&(m="/media/svg/dma/camera/e-form/png/cam-user.png"),x.value&&(m="/media/svg/dma/camera/e-form/png/cam-read.png"),m},V=async m=>{let f=m.target.value;if(!x.value){if(!o.stateConnectionStatus){o.setSubmitConnectionError(!0),u.value.adjustment.measurement=K.value;return}if(console.log("val",f,"value old",K.value),f&&f!=K.value){R.value=!0,u.value.adjustment.measurement=f;const ve=await h.getAdjusmentRating(u.value);R.value=!1,(ve=="C"||ve=="X")&&(H.value=!0),K.value=f}}},L=()=>{P.toggleIsVisible(!0,`${u.value.key}-adjustment`),H.value=!1},A=async()=>{if(u.value.adjustment.measurement){const m=St.service({lock:!0,text:"Deleting Adjustment",background:"rgba(0, 0, 0, 0.7)"});await h.deleteAdjusmentTask(u.value),m.close(),P.setCurrent(`${u.value.key}-adjustment`),P.clearCurrent()}u.value.isShowAdjustmentRow=!1},te=b(()=>{const m=u.value.adjustment.rating;let f;return m=="A"?f="a":m=="B"?f="b":m=="C"?f="c":m=="X"&&(f="x"),f}),Z=b(()=>a.cloneDeep(P.ImageObjects.find(m=>m.Id===`${u.value.key}-adjustment`))),ee=v(!1),W=()=>{const m=Z.value.ImageInfos,f=u.value.adjustment.pictures,ve=m.filter(Ve=>!f.includes(Ve));u.value.adjustment.pictures=[...u.value.adjustment.pictures,...ve],h.addCBMAdjustmentPictures(u.value),ee.value=!0};Xe(Z,(m,f)=>{!a.isUndefined(m)&&m.ImageInfos.length>0&&m.ImageInfos.length!=(f==null?void 0:f.ImageInfos.length)&&W()},{deep:!0});const K=v(""),oe=v("");return Nt(()=>{K.value=u.value.adjustment.measurement,oe.value=u.value.adjustment.measurement}),(m,f)=>{const ve=he("el-input"),Ve=he("el-button");return i(),d(ne,null,[e("div",ru,[nu,e("div",{class:"col-1 pb-1 px-2",style:De([`border-left: ${T.value}`,I.value])},null,4),e("div",{class:"col-4 col-md-3 pb-1 px-2",style:De([I.value])},M(s.task.adjustment.description),5),e("div",{class:"col-2 pb-1 px-2",style:De([I.value])},[p(ve,{modelValue:w.value,"onUpdate:modelValue":f[0]||(f[0]=_e=>w.value=_e),size:"small",placeholder:"Please Input",onKeypress:N,onFocusout:V,inputmode:"numeric",readonly:x.value},null,8,["modelValue","readonly"]),R.value?(i(),d("div",iu,cu)):D("",!0)],4),e("div",{class:"col-1 pb-1 px-2",style:De([I.value])},M(s.task.adjustment.uom),5),e("div",{class:"col-1 col-md-1 pb-1 px-2 input-eform-status",style:De([I.value])},[p(ve,{modelValue:u.value.adjustment.rating,"onUpdate:modelValue":f[1]||(f[1]=_e=>u.value.adjustment.rating=_e),modelModifiers:{lazy:!0},size:"small",disabled:"",class:se(te.value)},null,8,["modelValue","class"])],4),e("div",{class:"col-1 col-md-1 pb-1 px-2",style:De([I.value])},[e("div",vu,[e("div",pu,[e("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:L,disabled:x.value},[e("img",{src:$(),style:{height:"12px",width:"14px"},alt:"photo"},null,8,fu)],8,mu)]),u.value.adjustment.pictures.length>0?(i(),d("div",yu,[e("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:y,style:{"background-color":"#18AF4A"}},[e("label",bu,"+"+M(u.value.adjustment.pictures.length),1)])])):D("",!0)])],4),e("div",{class:"col-2 pb-1 px-2",style:De([`border-right: ${T.value}`,I.value])},[p(Ve,{disabled:x.value,type:"danger",size:"small",class:"item-button w-100",onClick:A},{default:O(()=>[be("Delete")]),_:1},8,["disabled"])],4)]),s.task.adjustment.updatedBy.name?(i(),d("div",hu,[e("div",{class:"d-flex justify-content-end py-1 col-11 offset-1 timestamp-task",style:De([`border-left: ${T.value}; border-right: ${T.value}`,g.value])},M(s.task.adjustment.updatedBy.name)+", "+M(s.task.adjustment.updatedDate),5)])):D("",!0),l.value?(i(),ue(sl,{key:1,images:S.value,visibility:l.value,showDeleteButton:!x.value,onHandleClose:_,onHandleDelete:t},null,8,["images","visibility","showDeleteButton"])):D("",!0)],64)}}}),ku=s=>(vt("data-v-5ee02201"),s=s(),pt(),s),_u={class:"px-2 w-100"},xu={class:"form-check checkbox-success item-checkbox w-100 ps-0 d-flex"},Cu={key:0,class:"little-dot"},wu={key:1,src:rl,style:{width:"28px"},alt:""},Du={class:"ms-1 d-flex align-items-center"},$u={key:0,class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},Su=ku(()=>e("span",{class:"sr-only"},"Loading...",-1)),Vu=[Su],Iu={key:1},Pu={class:"ms-2 flex-fill text-start"},Ru=Ue({__name:"RadioButtonWithStatus",props:{item:{type:Object,required:!0},task:{type:Object},generalStyle:{type:Boolean,default:!0}},setup(s){const n=s;Ca(),et();const t=Fe(n,"item");Fe(n,"task");const u=v(!1),l=b(()=>!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col"),o=b(()=>{let _="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(_=`col-md-${t.value.style.potraitBreakPoint}`,_=`${_} col-lg-${t.value.style.breakPoint}`):(_=`col-md-${t.value.style.potraitBreakPoint}`,_=`${_} col-lg-${t.value.style.breakPoint}`)),_}),w=b(()=>{var $,V,L,A;const _=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",y=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",T=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",I=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let g=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined(($=n.task)==null?void 0:$.isShowAdjustmentRow)&&((V=n.task)!=null&&V.isShowAdjustmentRow))g="";else{let te=0;(L=n.task)==null||L.items.forEach(Z=>{var ee;a.isUndefined(Z.style)||(a.isUndefined(Z.style.border)?a.isUndefined(Z.style.border)&&(te=te+Number(Z.style.breakPoint)):((Z.style.border.right=="none"||a.isUndefined(Z.style.border.right))&&(te=te+Number(Z.style.breakPoint)),a.isEqual(Z,a.last((ee=n.task)==null?void 0:ee.items))&&(te=te+Number(Z.style.breakPoint))))}),te==12&&(g=!((A=n.task.updatedBy)!=null&&A.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const N=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",H=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",P=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",R=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${_}${y}${T}${I}${g}${N}${h}${H}${P}${R}`}),S=b(()=>{let _="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(_=""),_}),x=b(()=>{let _="Not Complete";return t.value.value=="true"&&(_="Complete"),_});return(_,y)=>(i(),d("div",{class:se([[o.value,l.value,S.value],"pt-2 px-2 d-flex d-flex justify-content-center prevent-split"]),style:De(w.value)},[e("div",_u,[e("div",xu,[e("div",{class:se(["little-box rounded-circle d-flex flex-column justify-content-center cbm-confirm-checkbox","dot"])},[t.value.value?(i(),d("img",wu)):(i(),d("div",Cu)),e("div",Du,[u.value?(i(),d("div",$u,Vu)):D("",!0),u.value?(i(),d("span",Iu,"Loading...")):D("",!0)])]),e("span",Pu,M(x.value),1)])])],6))}}),Uu=tt(Ru,[["__scopeId","data-v-5ee02201"]]),Au=Ue({__name:"TextAreaInput",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0},itemLoading:{type:Boolean,default:!1}},setup(s){const n=s,t=Tt(),u=et(),l=Ca(),o=Fe(n,"item"),w=Fe(n,"task"),S=v(""),x=b({get:()=>o.value.value,set:async H=>{console.log("input",H),o.value.value=H,console.log("itemref",o.value.value),_()}}),_=()=>{if(!o.value.value)l.deleteParams(o.value.key);else{const H={keyValue:o.value.key,propertyParams:[{propertyName:"value",propertyValue:o.value.value},{propertyName:"updatedBy",propertyValue:JSON.stringify(u.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};l.addUpdateParams(H)}},y=b(()=>{let H="";return n.generalStyle&&!a.isUndefined(o.value.style)&&(!a.isUndefined(o.value.style.potraitBreakPoint)&&o.value.style.breakPoint!="none"?(H=`col-md-${o.value.style.potraitBreakPoint}`,H=`${H} col-lg-${o.value.style.breakPoint}`):(H=`col-md-${o.value.style.potraitBreakPoint}`,H=`${H} col-lg-${o.value.style.breakPoint}`)),H}),T=b(()=>{const H=o.value.categoryItemType=="targetRating";let P=!0;!a.isUndefined(w.value.updatedBy)&&!a.isUndefined(w.value.updatedBy.id)&&(u.employee.id==w.value.updatedBy.id?P=!0:P=!1);let R=!0;!a.isUndefined(o.value.updatedBy)&&!a.isUndefined(o.value.updatedBy.id)&&(u.employee.id==o.value.updatedBy.id?R=!0:R=!1);let $=!1;!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.visibility)&&o.value.style.visibility=="readonly"&&($=!0);let V=!0,L;return o.value.category=="cbmCalculateAvg"&&(u.stateSelectedSubGroups.find(A=>A.taskGroup.some(te=>te.task.some(Z=>Z.items.some(ee=>(ee.key==o.value.targetCalculateKeyId&&(L=ee),ee.key==o.value.targetCalculateKeyId))))),!a.isUndefined(L.updatedBy)&&!a.isUndefined(L.updatedBy.id)&&(u.employee.id==L.updatedBy.id?V=!0:V=!1)),H||!P||$||!R||!V}),I=b(()=>n.generalStyle?!a.isUndefined(o.value.style)&&o.value.style.breakPoint!="none"?`col-${o.value.style.breakPoint}`:"col":""),g=b(()=>{let H="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(H=""),H}),N=b(()=>{var W,K,oe,m;const H=!a.isUndefined(o.value.style)&&o.value.style.bgColor!="none"?`background-color: ${o.value.style.bgColor}; `:"",P=!a.isUndefined(o.value.style)&&o.value.style.fontColor!="none"?`color: ${o.value.style.fontColor}; `:"",R=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.border)&&o.value.style.border.top!="none"?`border-top: ${o.value.style.border.top}; `:"",$=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.border)&&o.value.style.border.right!="none"?`border-right: ${o.value.style.border.right}; `:"";let V=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.border)&&o.value.style.border.bottom!="none"?`border-bottom: ${o.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((W=n.task)==null?void 0:W.isShowAdjustmentRow)&&((K=n.task)!=null&&K.isShowAdjustmentRow))V="";else{let f=0;(oe=n.task)==null||oe.items.forEach(ve=>{var Ve;a.isUndefined(ve.style)||(a.isUndefined(ve.style.border)?a.isUndefined(ve.style.border)&&(f=f+Number(ve.style.breakPoint)):((ve.style.border.right=="none"||a.isUndefined(ve.style.border.right))&&(f=f+Number(ve.style.breakPoint)),a.isEqual(ve,a.last((Ve=n.task)==null?void 0:Ve.items))&&(f=f+Number(ve.style.breakPoint))))}),f==12&&(V=!((m=n.task.updatedBy)!=null&&m.name)&&!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.border)&&o.value.style.border.bottom!="none"?`border-bottom: ${o.value.style.border.bottom}; margin-bottom: 1rem;`:"")}const L=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.border)&&o.value.style.border.left!="none"?`border-left: ${o.value.style.border.left}; `:"",A=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.borderRadius)&&o.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${o.value.style.borderRadius.topRight}; `:"",te=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.borderRadius)&&o.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${o.value.style.borderRadius.bottomRight}; `:"",Z=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.borderRadius)&&o.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${o.value.style.borderRadius.topLeft}; `:"",ee=!a.isUndefined(o.value.style)&&!a.isUndefined(o.value.style.borderRadius)&&o.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${o.value.style.borderRadius.bottomLeft}; `:"";return`${H}${P}${R}${$}${V}${L}${A}${te}${Z}${ee}`}),h=H=>{if(!t.stateConnectionStatus)t.setSubmitConnectionError(!0),o.value.value=S.value;else{if(T.value)return;const P=H.target.value;o.value.value=P}};return Nt(async()=>{S.value=o.value.value,x.value=o.value.value}),(H,P)=>{const R=he("el-input");return i(),d("div",{class:se([[I.value,y.value,g.value],"px-2 pt-2 input-eform-status prevent-split"]),style:De(N.value)},[p(R,{modelValue:x.value,"onUpdate:modelValue":P[0]||(P[0]=$=>x.value=$),rows:5,type:"textarea",placeholder:"Please input",onFocusout:h,readonly:!0},null,8,["modelValue"])],6)}}}),Bu={class:"desc-wrapper"},Tu={class:"desc-wrapper-content"},Lu={class:"desc-wrapper-content-pre"},Nu=Ue({__name:"TextAreaInputPrint",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0}},setup(s){const n=s,t=Fe(n,"item"),u=b(()=>!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col"),l=b(()=>{let w="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(w=`col-md-${t.value.style.potraitBreakPoint}`,w=`${w} col-lg-${t.value.style.breakPoint}`):(w=`col-md-${t.value.style.potraitBreakPoint}`,w=`${w} col-lg-${t.value.style.breakPoint}`)),w}),o=b(()=>{const w=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",S=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",x=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",_=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let y=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";const T=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",I=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",g=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",N=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${w}${S}${x}${_}${y}${T}${I}${g}${N}${h}`});return(w,S)=>(i(),d("div",{class:se([[l.value,u.value],"pt-2 px-2 d-flex align-items-center d-flex justify-content-center prevent-split"]),style:De(o.value)},[e("div",Bu,[e("div",Tu,[e("pre",Lu,M(t.value.value),1)])])],6))}}),Ou=tt(Nu,[["__scopeId","data-v-2dfa3cd3"]]),Mu=["innerHTML"],ju=Ue({__name:"LabelPrint",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(s){const n=s,t=Fe(n,"item"),u=b(()=>Rl(n.item.value)),l=b(()=>{var y,T;return((y=n.task)==null?void 0:y.taskType)==="table"||((T=n.task)==null?void 0:T.taskType)==="collapsibleTable"?"col":n.generalStyle?!a.isUndefined(t.value.style)&&t.value.style.breakPoint!="none"?`col-${t.value.style.breakPoint}`:"col":""}),o=b(()=>{var T,I;if(((T=n.task)==null?void 0:T.taskType)==="table"||((I=n.task)==null?void 0:I.taskType)==="collapsibleTable")return"col";let y="";return n.generalStyle&&!a.isUndefined(t.value.style)&&(!a.isUndefined(t.value.style.potraitBreakPoint)&&t.value.style.breakPoint!="none"?(y=`col-md-${t.value.style.potraitBreakPoint}`,y=`${y} col-lg-${t.value.style.breakPoint}`):(y=`col-md-${t.value.style.potraitBreakPoint}`,y=`${y} col-lg-${t.value.style.breakPoint}`)),y}),w=b(()=>a.isUndefined(t.value.style)?"":t.value.style.textAlign=="left"?"text-start":t.value.style.textAlign=="right"?"text-end":"text-center"),S=b(()=>{var V,L,A,te;const y=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",T=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"",I=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.top!="none"?`border-top: ${t.value.style.border.top}; `:"",g=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.right!="none"?`border-right: ${t.value.style.border.right}; `:"";let N=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((V=n.task)==null?void 0:V.isShowAdjustmentRow)&&((L=n.task)!=null&&L.isShowAdjustmentRow))N="";else{let Z=0;(A=n.task)==null||A.items.forEach(ee=>{var W;a.isUndefined(ee.style)||(a.isUndefined(ee.style.border)?a.isUndefined(ee.style.border)&&(Z=Z+Number(ee.style.breakPoint)):((ee.style.border.right=="none"||a.isUndefined(ee.style.border.right))&&(Z=Z+Number(ee.style.breakPoint)),a.isEqual(ee,a.last((W=n.task)==null?void 0:W.items))&&(Z=Z+Number(ee.style.breakPoint))))}),Z==12&&(N=!((te=n.task.updatedBy)!=null&&te.name)&&!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.bottom!="none"?`border-bottom: ${t.value.style.border.bottom}; margin-bottom: 1rem;`:"")}const h=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.border)&&t.value.style.border.left!="none"?`border-left: ${t.value.style.border.left}; `:"",H=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${t.value.style.borderRadius.topRight}; `:"",P=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${t.value.style.borderRadius.bottomRight}; `:"",R=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${t.value.style.borderRadius.topLeft}; `:"",$=!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.borderRadius)&&t.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${t.value.style.borderRadius.bottomLeft}; `:"";return`${y}${T}${I}${g}${N}${h}${H}${P}${R}${$}`}),x=b(()=>`${!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.fontWeight)&&t.value.style.fontWeight!="normal"?`font-weight: ${t.value.style.fontWeight}; `:""}`),_=b(()=>{let y="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(y=""),y});return(y,T)=>(i(),d("div",{class:se([[l.value,w.value,o.value,_.value],"px-2 pt-2 prevent-split"]),style:De(S.value)},[!E(a.isUndefined)(s.item.style)&&s.item.style.visibility!="hidden"?(i(),d("label",{key:0,style:De(x.value),innerHTML:u.value},null,12,Mu)):D("",!0)],6))}}),Eu={class:"form-floating"},Fu=Ue({__name:"InputWithPlaceholder",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0},itemLoading:{type:Boolean,default:!1}},setup(s){const n=s;Tt();const t=et(),u=Fe(n,"item"),l=Fe(n,"task"),o=v(""),w=b({get:()=>u.value.value,set:async I=>{u.value.value=I}}),S=b(()=>{let I="";return n.generalStyle&&!a.isUndefined(u.value.style)&&(!a.isUndefined(u.value.style.potraitBreakPoint)&&u.value.style.breakPoint!="none"?(I=`col-md-${u.value.style.potraitBreakPoint}`,I=`${I} col-lg-${u.value.style.breakPoint}`):(I=`col-md-${u.value.style.potraitBreakPoint}`,I=`${I} col-lg-${u.value.style.breakPoint}`)),I});b(()=>{const I=u.value.categoryItemType=="targetRating";let g=!0;!a.isUndefined(l.value.updatedBy)&&!a.isUndefined(l.value.updatedBy.id)&&(t.employee.id==l.value.updatedBy.id?g=!0:g=!1);let N=!0;!a.isUndefined(u.value.updatedBy)&&!a.isUndefined(u.value.updatedBy.id)&&(t.employee.id==u.value.updatedBy.id?N=!0:N=!1);let h=!1;!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.visibility)&&u.value.style.visibility=="readonly"&&(h=!0);let H=!0,P;return u.value.category=="cbmCalculateAvg"&&(t.stateSelectedSubGroups.find(R=>R.taskGroup.some($=>$.task.some(V=>V.items.some(L=>(L.key==u.value.targetCalculateKeyId&&(P=L),L.key==u.value.targetCalculateKeyId))))),!a.isUndefined(P.updatedBy)&&!a.isUndefined(P.updatedBy.id)&&(t.employee.id==P.updatedBy.id?H=!0:H=!1)),I||!g||h||!N||!H});const x=b(()=>n.generalStyle?!a.isUndefined(u.value.style)&&u.value.style.breakPoint!="none"?`col-${u.value.style.breakPoint}`:"col":""),_=b(()=>{let I="pb-2";return!a.isUndefined(n.task.updatedBy.name)&&n.task.updatedBy.name&&(I=""),I}),y=b(()=>{var A,te,Z,ee;const I=!a.isUndefined(u.value.style)&&u.value.style.bgColor!="none"?`background-color: ${u.value.style.bgColor}; `:"",g=!a.isUndefined(u.value.style)&&u.value.style.fontColor!="none"?`color: ${u.value.style.fontColor}; `:"",N=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.border)&&u.value.style.border.top!="none"?`border-top: ${u.value.style.border.top}; `:"",h=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.border)&&u.value.style.border.right!="none"?`border-right: ${u.value.style.border.right}; `:"";let H=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.border)&&u.value.style.border.bottom!="none"?`border-bottom: ${u.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!a.isUndefined((A=n.task)==null?void 0:A.isShowAdjustmentRow)&&((te=n.task)!=null&&te.isShowAdjustmentRow))H="";else{let W=0;(Z=n.task)==null||Z.items.forEach(K=>{var oe;a.isUndefined(K.style)||(a.isUndefined(K.style.border)?a.isUndefined(K.style.border)&&(W=W+Number(K.style.breakPoint)):((K.style.border.right=="none"||a.isUndefined(K.style.border.right))&&(W=W+Number(K.style.breakPoint)),a.isEqual(K,a.last((oe=n.task)==null?void 0:oe.items))&&(W=W+Number(K.style.breakPoint))))}),W==12&&(H=!((ee=n.task.updatedBy)!=null&&ee.name)&&!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.border)&&u.value.style.border.bottom!="none"?`border-bottom: ${u.value.style.border.bottom}; margin-bottom: 1rem;`:"")}const P=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.border)&&u.value.style.border.left!="none"?`border-left: ${u.value.style.border.left}; `:"",R=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.borderRadius)&&u.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${u.value.style.borderRadius.topRight}; `:"",$=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.borderRadius)&&u.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${u.value.style.borderRadius.bottomRight}; `:"",V=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.borderRadius)&&u.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${u.value.style.borderRadius.topLeft}; `:"",L=!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.borderRadius)&&u.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${u.value.style.borderRadius.bottomLeft}; `:"";return`${I}${g}${N}${h}${H}${P}${R}${$}${V}${L}`}),T=b(()=>{let I="Please Input";return!a.isUndefined(u.value.style)&&!a.isUndefined(u.value.style.placeholder)&&(I=u.value.style.placeholder),I});return Nt(async()=>{o.value=u.value.value,w.value=u.value.value}),(I,g)=>(i(),d("div",{class:se([[x.value,S.value,_.value],"px-2 pt-2 input-eform-status prevent-split"]),style:De(y.value)},[e("div",Eu,[Ge(e("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":g[0]||(g[0]=N=>w.value=N)},null,512),[[Rt,w.value]]),e("label",null,M(T.value),1)])],6))}}),Hu={key:1,class:"row w-100",style:{height:"25px"}},qu=e("div",{class:"col-1"},null,-1),Ku=Ue({__name:"InlineTask",props:{task:{type:Object,required:!0},taskIndex:{type:Number,required:!0},taskGroup:{type:Array,required:!0}},setup(s){const n=s,t=Wa(),u=b(()=>t.IsDownloadPDF),l=b(()=>{let P=12,R=0;return n.task.items.every($=>!a.isUndefined($.style)&&$.style.visibility=="hidden"?(P=Number(P)-Number($.style.breakPoint),R=Number(R)+Number($.style.breakPoint),!0):!1),`col-${P} offset-${R}`}),o=v(""),w=v(""),S=b(()=>{let P=0;return n.task.items.forEach((R,$)=>{if($+1==n.task.items.length&&R.itemType=="dropDown"){const V=n.task.items[$-1];!a.isUndefined(V.style)&&!a.isUndefined(V.style.border)&&V.style.border.right!="none"&&(n.task.items.length==3?P=Number(V.style.breakPoint)-1:n.task.items.forEach((L,A)=>{if(A>1&&A<=$-1){let te=0;if(!a.isUndefined(L.style.potraitBreakPoint))te=L.style.potraitBreakPoint;else{let Z=0;L.style.breakPoint=="none"?(n.task.items.forEach((ee,W)=>{ee.style.breakPoint!="none"&&(Z+=Number(ee.style.breakPoint))}),te=12-Z):te=L.style.breakPoint-Z}P+=Number(te)}}))}}),P}),x=b(()=>{let P=0;return n.task.items.forEach((R,$)=>{if($+1==n.task.items.length&&R.itemType=="dropDown"){const V=n.task.items[$-1];!a.isUndefined(V.style)&&!a.isUndefined(V.style.border)&&V.style.border.right!="none"&&(n.task.items.length==3?P=Number(V.style.breakPoint)-1:n.task.items.forEach((L,A)=>{if(A>1&&A<=$-1){let te=0,Z=0;L.style.breakPoint=="none"?(n.task.items.forEach((ee,W)=>{ee.style.breakPoint!="none"&&(Z+=Number(ee.style.breakPoint))}),te=12-Z):te=L.style.breakPoint-Z,P+=Number(te)}}))}}),P}),_=b(()=>{let P=!1,R=!1,$=!1;return n.task.items.forEach((V,L)=>{if(L==1&&!a.isUndefined(V.style)&&!a.isUndefined(V.style.border)&&V.style.border.left!="none"&&(P=!0,o.value=V.style.border.left,!a.isUndefined(V.style)&&!a.isUndefined(V.style.border)&&V.style.border.bottom!="none"&&($=!0)),L+1==n.task.items.length&&V.itemType=="dropDown"){const A=n.task.items[L-1];!a.isUndefined(A.style)&&!a.isUndefined(A.style.border)&&A.style.border.right!="none"&&(R=!0,w.value=A.style.border.right)}}),P&&R&&!$}),y=v(!1),T=P=>{y.value=P},I=b(()=>{let P=40;return y.value&&(P=60),P}),g=b(()=>{const P=n.task.items.find(A=>A.style.visibility!="hidden"),R=a.last(n.task.items),$=!a.isUndefined(R.style)&&!a.isUndefined(R.style.border)&&R.style.border.right!="none"?`border-right: ${R.style.border.right}; `:"",V=!a.isUndefined(P.style)&&!a.isUndefined(P.style.border)&&P.style.border.left!="none"?`border-left: ${P.style.border.left}; `:"",L=n.task.updatedBy.name&&!a.isUndefined(R.style)&&!a.isUndefined(R.style.border)&&R.style.border.bottom!="none"?"margin-bottom: 1rem; ":"";return $?`${$}${V}${L}`:`${L}`}),N=b(()=>{var $,V;let P="";const R=a.last(n.task.items);return!a.isUndefined(($=n.task)==null?void 0:$.isShowAdjustmentRow)&&((V=n.task)!=null&&V.isShowAdjustmentRow)?P="":P=n.task.updatedBy.name&&!a.isUndefined(R.style)&&!a.isUndefined(R.style.border)&&R.style.border.bottom!="none"?`border-bottom: ${R.style.border.bottom}; `:"",P}),h=b(()=>{let P="";return a.isUndefined(n.task.generalStyle)||(P=n.task.generalStyle),P}),H=b(()=>{let P="";const R=n.task.customStyle;return a.isUndefined(R)||R.split(" | ").forEach(V=>{V.includes("noteStyle")&&!a.isUndefined(n.taskGroup[n.taskIndex-1].updatedBy.name)&&n.taskGroup[n.taskIndex-1].updatedBy.name&&(P=`${P} ${V.split(" = ")[1]}`)}),P});return(P,R)=>(i(),d(ne,null,[e("div",{class:"row w-100",style:De([h.value,H.value])},[(i(!0),d(ne,null,Pe(n.task.items,$=>(i(),d(ne,{key:$.key},[$.itemType==="image"?(i(),ue(yl,{key:0,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="dropDown"?(i(),ue(gl,{key:1,item:$,task:s.task,onSetLoading:T},null,8,["item","task"])):D("",!0),$.itemType==="input"?(i(),ue(kl,{key:2,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="smallCamera"?(i(),ue(_l,{key:3,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="checkbox"?(i(),ue(xl,{key:4,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="html"?(i(),ue(ll,{key:5,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="button"?(i(),ue(Cl,{key:6,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="statusInfo"?(i(),ue(ol,{key:7,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="radioButtonWithStatus"?(i(),ue(Uu,{key:8,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="inputWithPlaceholder"?(i(),ue(Fu,{key:9,item:$,task:s.task},null,8,["item","task"])):D("",!0),$.itemType==="textAreaInput"?(i(),d(ne,{key:10},[u.value?(i(),ue(Ou,{key:0,item:$},null,8,["item"])):(i(),ue(Au,{key:1,item:$,task:s.task},null,8,["item","task"]))],64)):D("",!0),$.itemType==="label"?(i(),d(ne,{key:11},[u.value?(i(),ue(ju,{key:0,item:$,task:s.task},null,8,["item","task"])):(i(),ue(bl,{key:1,item:$,task:s.task},null,8,["item","task"]))],64)):D("",!0)],64))),128))],4),s.task.updatedBy.name?(i(),d("div",{key:0,class:"row w-100 position-absolute pe-3",style:De(`top: ${I.value}px;`)},[e("div",{class:se(["d-flex justify-content-end pb-1 my-0 timestamp-task",l.value]),style:De([g.value,N.value])},null,6)],4)):D("",!0),s.task.updatedBy.name?(i(),d("div",Hu,[_.value?(i(),d(ne,{key:1},[qu,e("div",{class:"col-1",style:De(`border-left: ${o.value}`)},null,4),e("div",{class:se(`col-md-${S.value} col-lg-${x.value}`),style:De(`border-right: ${w.value}`)},null,6)],64)):(i(),d("div",{key:0,style:De(g.value),class:se(l.value)},null,6))])):D("",!0),s.task.isShowAdjustmentRow?(i(),ue(gu,{key:2,task:s.task},null,8,["task"])):D("",!0)],64))}}),Gu=Ue({__name:"TableRow",props:{item:{type:Object,required:!0},task:{type:Object},itemLoading:{type:Boolean,default:!1}},setup(s){const n=s,t=b(l=>{const o=[];for(const w in n.item)o.push(n.item[w]);return o}),u=l=>{let o="";return!a.isUndefined(l.style)&&!a.isUndefined(l.style.textvAlign)&&(o=`align-self-${l.style.textvAlign}`),o};return(l,o)=>(i(!0),d(ne,null,Pe(t.value,w=>(i(),d("div",{class:se([u(w),"eform-table-row col px-0 prevent-split"]),key:w.key},[w.itemType==="image"?(i(),ue(yl,{key:0,item:w,task:s.task},null,8,["item","task"])):D("",!0),w.itemType==="label"?(i(),ue(bl,{key:1,item:w,task:s.task},null,8,["item","task"])):D("",!0),w.itemType==="input"?(i(),ue(kl,{key:2,item:w,task:s.task,"item-loading":s.itemLoading},null,8,["item","task","item-loading"])):D("",!0),w.itemType==="dropDown"?(i(),ue(gl,{key:3,item:w,task:s.task,"item-loading":s.itemLoading},null,8,["item","task","item-loading"])):D("",!0),w.itemType==="smallCamera"?(i(),ue(_l,{key:4,item:s.item,task:s.task},null,8,["item","task"])):D("",!0),s.item.itemType==="checkbox"?(i(),ue(xl,{key:5,item:s.item,task:s.task},null,8,["item","task"])):D("",!0),w.itemType==="html"?(i(),ue(ll,{key:6,item:w,task:s.task},null,8,["item","task"])):D("",!0),s.item.itemType==="button"?(i(),ue(Cl,{key:7,item:s.item,task:s.task},null,8,["item","task"])):D("",!0),s.item.itemType==="statusInfo"?(i(),ue(ol,{key:8,item:s.item,task:s.task},null,8,["item","task"])):D("",!0)],2))),128))}}),Wu={class:"row w-100 mx-0 mb-5"},Yu={key:0,class:"col-1 px-2"},zu={class:"row text-center task-table__header py-2 w-100"},Ju=Ue({__name:"TableTask",props:{task:{type:Object,required:!0}},setup(s){const n=s,t=b(()=>n.task.header.replaceAll("'","").replace("[","").replace("]","").split(", ")),u=_=>{let y="";return!a.isUndefined(n.task.style)&&!a.isUndefined(n.task.style.borderBottom)&&n.task.style.borderBottom=="none"?y="":y="border-bottom-table",_+1==n.task.items.length&&(y="border-bottom-table"),y},l=et(),o=b(()=>n.task),w=v(!1),S=b(()=>{let _="";if(a.isUndefined(n.task.disabledByItemKey))return _;const y=l.stateStoredDisableKeyValue.find(T=>T.key==n.task.disabledByItemKey);return a.isUndefined(y)||(_=y.value),_});Xe(S,async _=>{_=="3"&&x()},{deep:!0});const x=async()=>{if(!a.isUndefined(n.task.disabledByItemKey)){let _=l.stateStoredDisableKeyValue.find(y=>y.key==n.task.disabledByItemKey);if(a.isUndefined(_)){const y=await l.getValueFromItemKey(n.task.disabledByItemKey);l.pushStoredDisabledItems({key:n.task.disabledByItemKey,value:y})}if(_=l.stateStoredDisableKeyValue.find(y=>y.key==n.task.disabledByItemKey),(_==null?void 0:_.value)=="3"){const y=[];n.task.items.forEach(T=>{for(var I in T){const g=T[I];if(!a.isUndefined(g.disabledByItemKey)&&g.value){const N={keyValue:g.key,propertyParams:[{propertyName:"value",propertyValue:""},{propertyName:"updatedBy",propertyValue:""},{propertyName:"updatedDate",propertyValue:""}]};y.push(N)}}}),y.length>0&&(w.value=!0,await l.updateItemFromTask(y),w.value=!1)}}};return(_,y)=>(i(),d("div",Wu,[!E(a.isUndefined)(o.value.style)&&o.value.style.category=="taskTable"?(i(),d("div",Yu)):D("",!0),e("div",{class:se(["task-table",!E(a.isUndefined)(o.value.style)&&o.value.style.category=="taskTable"?"col-11 px-0":"col-12 pe-0"])},[e("label",null,M(o.value.description),1),e("div",zu,[(i(!0),d(ne,null,Pe(t.value,T=>(i(),d("div",{class:"col font-weight-normal task-table__header__item",key:T},M(T),1))),128))]),(i(!0),d(ne,null,Pe(o.value.items,(T,I)=>(i(),d("div",{key:T.key,class:se(["row w-100 task-table__body d-flex align-items-start",u(I)])},[p(Gu,{item:T,task:o.value,"item-loading":w.value},null,8,["item","task","item-loading"])],2))),128))],2)]))}}),wl=tt(Ju,[["__scopeId","data-v-04cb00c1"]]),Qu={class:"row w-100 mt-3 mb-3"},Xu={key:0,class:"col-1 px-2"},Zu={class:"small-hyperlink-text-style"},ed=Ue({__name:"CollapsibleTableTask",props:{task:{type:Object,required:!0}},setup(s){const n=s,t=v("open"),u=b(()=>{let l="";return!a.isUndefined(n.task.style)&&!a.isUndefined(n.task.style.defaultCollapse)&&(l=n.task.style.defaultCollapse),l});return(l,o)=>{const w=he("el-collapse-item"),S=he("el-collapse");return i(),d("div",Qu,[!E(a.isUndefined)(s.task.style)&&s.task.style.collapseCategory=="taskTable"?(i(),d("div",Xu)):D("",!0),e("div",{class:se(["task-table collapsible-table-container",!E(a.isUndefined)(s.task.style)&&s.task.style.collapseCategory=="taskTable"?"col-11 px-0":"col-12 pe-0"])},[p(S,{class:"task-group general-accordion py-1 px-5",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=x=>t.value=x)},{default:O(()=>[p(w,{name:u.value},{title:O(()=>[e("span",Zu,M(s.task.triggerCaption),1)]),default:O(()=>[p(wl,{task:s.task},null,8,["task"])]),_:1},8,["name"])]),_:1},8,["modelValue"])],2)])}}}),td=Ue({__name:"TaskGroup",props:{taskGroup:{type:Object,required:!0}},setup(s){const n=s,t=ze(()=>n.taskGroup.key);return(u,l)=>{const o=he("el-collapse-item"),w=he("el-collapse");return i(),ue(w,{modelValue:E(t),"onUpdate:modelValue":l[0]||(l[0]=S=>qa(t)?t.value=S:null),class:"task-group e-form-only py-1 px-5 mb-3"},{default:O(()=>[p(o,{title:s.taskGroup.name,name:s.taskGroup.key},{default:O(()=>[(i(!0),d(ne,null,Pe(n.taskGroup.task,(S,x)=>(i(),d("div",{key:S.key,class:"ps-3 position-relative"},[S.taskType=="inline"?(i(),ue(Ku,{key:0,task:S,"task-index":x,"task-group":s.taskGroup.task},null,8,["task","task-index","task-group"])):D("",!0),S.taskType==="table"?(i(),ue(wl,{key:1,task:S},null,8,["task"])):D("",!0),S.taskType=="collapsibleTable"?(i(),ue(ed,{key:2,task:S},null,8,["task"])):D("",!0)]))),128))]),_:1},8,["title","name"])]),_:1},8,["modelValue"])}}}),ad={class:"ps-0 mt-5"},sd={class:"card"},Dl=Ue({__name:"SubGroup",props:{subGroup:{type:Object,required:!0}},setup(s){const n=s;return(t,u)=>(i(),d("div",ad,[e("div",sd,[(i(!0),d(ne,null,Pe(n.subGroup.taskGroup,l=>(i(),ue(td,{key:l.key,"task-group":l},null,8,["task-group"]))),128))])]))}}),oa=s=>(vt("data-v-13fae363"),s=s(),pt(),s),ld=oa(()=>e("span",{class:"el-dialog__title"},"Digital Payload Calibration",-1)),od={class:"row text-center pt-5 justify-content-end",style:{"word-break":"normal"}},rd={class:"ps-0 mt-1"},nd={class:"card"},id={class:"ps-3 position-relative"},ud={class:"row w-100"},dd={class:"px-2 pt-2 input-eform-status col-4"},cd={class:"form-floating"},vd=oa(()=>e("label",null,"Unit Number",-1)),pd={class:"px-2 pt-2 input-eform-status col-4"},md={class:"form-floating"},fd=oa(()=>e("label",null,"Calibration Date",-1)),yd={class:"px-2 pt-2 input-eform-status col-4"},bd={class:"form-floating"},hd=oa(()=>e("label",null,"Machine SMU",-1)),gd=oa(()=>e("div",{class:"row w-100"},[e("div",{class:"text-start text-bold px-2 pt-2 input-eform-status col-12"},[e("label",null,"Service Labour Personnel")])],-1)),kd={class:"row w-100"},_d={class:"px-2 pt-2 input-eform-status col-12"},xd={class:"form-floating"},Cd=oa(()=>e("label",null,"Service Labour Personnel",-1)),wd=oa(()=>e("div",{class:"ps-5 my-3 pe-0"},[e("div",{class:"row w-100"},[e("div",{class:"text-center d-flex align-items-center justify-content-start light-green color-dark-green rounded py-4 px-2"},[e("img",{class:"mx-2",src:zl,alt:""}),be(" Payload Calibrated Successfully ")])])],-1)),Dd={class:"ps-0 mt-5"},$d={class:"card"},Sd={class:"ps-3 position-relative"},Vd={class:"row w-100"},Id={class:"px-2 pt-2 input-eform-status col-12"},Pd={class:"row px-2"},Rd=Ue({__name:"Index",props:{show:{type:Boolean,required:!0}},emits:["close"],setup(s,{emit:n}){const t=s,u=n,l=Ca(),o=v("Equipment Information"),w=v("Additional Information"),S=ze(()=>t.show);ze(()=>{let g=!1;return l.stateValidation.forEach(N=>{if(!N.value||N.value=="false"){console.log("item",N),g=!0;return}}),g});const x=ze(()=>l.stateSCCalibration.transactionCalibration.filter(N=>N.rating&&N.rating=="CALIBRATION")??[]),_=ze(()=>l.stateSCCalibration.transactionCalibration.filter(N=>N.showParameter&&N.showParameter=="cylinderHeightNeedAdjustment"&&N.items.length>3&&N.items.find(h=>h.itemType==="statusInfo")!=null)??[]),y=ze(()=>{let g="";return l.stateSCCalibration.subGroup.forEach(N=>{N.taskGroup.forEach(h=>{h.key=="ADDITIONAL_INFORMATION"&&(g=h.task[0].items[0].value)})}),g}),T=()=>{console.log(l.stateSCCalibration)},I=()=>{u("close")};return(g,N)=>{const h=he("el-collapse-item"),H=he("el-collapse"),P=he("el-input"),R=he("el-dialog");return i(),ue(R,{modelValue:E(S),"onUpdate:modelValue":N[7]||(N[7]=$=>qa(S)?S.value=$:null),width:"90%","custom-class":"el-defect-crack-form-custom",onOpen:T,onClosed:I,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},{title:O(()=>[ld]),default:O(()=>[e("div",od,[E(l).stateSCHeader.modelId.includes("CAT")?(i(),d(ne,{key:0},[e("div",rd,[e("div",nd,[p(H,{modelValue:o.value,"onUpdate:modelValue":N[4]||(N[4]=$=>o.value=$),class:"task-group e-form-only py-1 px-5 mb-3"},{default:O(()=>[p(h,{title:"Equipment Information",name:"Equipment Information",class:"calibration-preview-title"},{default:O(()=>[e("div",id,[e("div",ud,[e("div",dd,[e("div",cd,[Ge(e("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":N[0]||(N[0]=$=>E(l).stateSCHeader.equipment=$)},null,512),[[Rt,E(l).stateSCHeader.equipment]]),vd])]),e("div",pd,[e("div",md,[Ge(e("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":N[1]||(N[1]=$=>E(l).stateSCHeader.updatedDate=$)},null,512),[[Rt,E(l).stateSCHeader.updatedDate]]),fd])]),e("div",yd,[e("div",bd,[Ge(e("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":N[2]||(N[2]=$=>E(l).stateSCHeader.smu=$)},null,512),[[Rt,E(l).stateSCHeader.smu]]),hd])])]),gd,e("div",kd,[e("div",_d,[e("div",xd,[Ge(e("input",{type:"text",class:"form-control",disabled:"","onUpdate:modelValue":N[3]||(N[3]=$=>E(l).stateSCHeader.updatedBy.name=$)},null,512),[[Rt,E(l).stateSCHeader.updatedBy.name]]),Cd])])])])]),_:1})]),_:1},8,["modelValue"])])]),wd,E(x)?(i(),ue(Xa,{key:0,tasks:E(x),title:"Cylinder Height Initial Measurement"},null,8,["tasks"])):D("",!0),E(x)?(i(),d(ne,{key:1},[E(_)?(i(),ue(Xa,{key:0,tasks:E(_),title:"Cylinder Height Adjustment"},null,8,["tasks"])):D("",!0)],64)):D("",!0),e("div",Dd,[e("div",$d,[p(H,{modelValue:w.value,"onUpdate:modelValue":N[6]||(N[6]=$=>w.value=$),class:"task-group e-form-only py-1 px-5 mb-3"},{default:O(()=>[p(h,{title:"Additional Information",name:"Additional Information",class:"calibration-preview-title"},{default:O(()=>[e("div",Sd,[e("div",Vd,[e("div",Id,[p(P,{modelValue:E(y),"onUpdate:modelValue":N[5]||(N[5]=$=>qa(y)?y.value=$:null),rows:5,type:"textarea",placeholder:"Please input",readonly:!0},null,8,["modelValue"])])])])]),_:1})]),_:1},8,["modelValue"])])])],64)):(i(),d(ne,{key:1},[E(x)?(i(),ue(Xa,{key:0,tasks:E(x),title:"Cylinder Height Initial Measurement"},null,8,["tasks"])):D("",!0),E(x)?(i(),d(ne,{key:1},[E(_)?(i(),ue(Xa,{key:0,tasks:E(_),title:"Cylinder Height Adjustment"},null,8,["tasks"])):D("",!0)],64)):D("",!0),e("div",Pd,[(i(!0),d(ne,null,Pe(E(l).stateSCCalibration.subGroup,$=>(i(),ue(Dl,{key:$.key,subGroup:$},null,8,["subGroup"]))),128))])],64))])]),_:1},8,["modelValue"])}}}),Ud=tt(Rd,[["__scopeId","data-v-13fae363"]]),Ad={lass:"px-2 pt-2 d-flex flex-column"},Bd={class:"px-0 py-0 mx-0 my-0 d-flex justify-content-start align-items-center"},Td={class:"legend-label mx-3 my-0"},Ld=Ue({__name:"StatusInfo",props:{value:{type:String,required:!0}},setup(s){const n=s,t=b(()=>{let u="";switch(n.value){case"Out Spec":u="red";break;case"Out of spec":u="red";break;case"In spec":u="green";break}return u});return(u,l)=>(i(),d("div",Ad,[e("div",Bd,[e("div",{class:se(["little-box d-flex p-3 justify-content-center align-items-center",[t.value]])},null,2),e("p",Td,M(s.value),1)])]))}}),Nd=tt(Ld,[["__scopeId","data-v-f8ae93d5"]]),Od=s=>(vt("data-v-8fa33c2f"),s=s(),pt(),s),Md={class:"row px-2 my-2"},jd={class:"silinder-title"},Ed={style:{"margin-top":"10px",width:"99%",background:"#f9fafb",height:"40px"}},Fd=Od(()=>e("tr",{class:"prevent-split table-header"},[e("th",{style:{"text-align":"center"}},"Item"),e("th",null,"Measurement Location"),e("th",null,"Comment"),e("th",{style:{width:"200px"}},"Measurement Value"),e("th",null,"UoM"),e("th",null,"Status")],-1)),Hd={class:"prevent-split table-body"},qd={style:{"text-align":"center"}},Kd={key:0,class:"prevent-split timestamp",style:{}},Gd={colspan:"6"},Wd={class:"d-flex justify-content-end pb-1 timestamp-task col-12 offset-0 pe-3"},Yd=Ue({__name:"TransactionTable",props:{title:{type:String,required:!0},tasks:{type:Array,required:!0}},setup(s){const n=s,t=b(()=>zs(n.tasks));return(u,l)=>(i(),d("div",Md,[e("div",jd,M(s.title),1),e("table",Ed,[Fd,(i(!0),d(ne,null,Pe(t.value,o=>{var w;return i(),d(ne,{key:o.key},[e("tr",Hd,[e("td",qd,[p(ha,{value:o.items[1].value},null,8,["value"])]),e("td",null,[p(ha,{value:o.items[2].value},null,8,["value"])]),e("td",null,[p(as,{value:((w=o.items[3])==null?void 0:w.value)??""},null,8,["value"])]),e("td",null,[p(as,{value:o.items[4].value},null,8,["value"])]),e("td",null,[p(ha,{value:o.items[5].value},null,8,["value"])]),e("td",null,[p(Nd,{value:o.items[6].value,"updated-by":o.items[6].updatedBy,"updated-date":o.items[6].updatedDate},null,8,["value","updated-by","updated-date"])])]),o.items[6].value&&o.items[6].updatedBy?(i(),d("tr",Kd,[e("td",Gd,[e("div",Wd,M(o.items[6].updatedBy.name)+", "+M(o.items[6].updatedDate),1)])])):D("",!0)],64)}),128))])]))}}),Za=tt(Yd,[["__scopeId","data-v-8fa33c2f"]]),Qt=s=>(vt("data-v-38c54a92"),s=s(),pt(),s),zd={key:0,class:"hiddenContainer"},Jd=["id"],Qd={class:"report-header mb-2"},Xd=Qt(()=>e("div",{class:"el-dialog__title avoid prevent-split"}," Digital Payload Calibration ",-1)),Zd={class:"el-dialog__title task-title download-by avoid prevent-split"},ec={class:"report",style:{"border-color":"transparent"}},tc={class:"report mb-4"},ac=Qt(()=>e("div",{class:"report_section_header prevent-split"},[e("h4",{class:"title ps-3"},"Equipment Information")],-1)),sc={class:"d-flex flex-row justify-content-between pb-5 prevent-split"},lc={class:"d-flex flex-row flex-grow-1 prevent-split"},oc={class:"flex-fill"},rc={class:"form-floating"},nc=["innerHTML"],ic=Qt(()=>e("label",{for:"floatingInput"},"Unit Number",-1)),uc={class:"flex-fill ps-3"},dc={class:"form-floating"},cc=["innerHTML"],vc=Qt(()=>e("label",{for:"floatingInput"},"Calibration Date",-1)),pc={class:"flex-fill ps-3"},mc={class:"form-floating"},fc=["innerHTML"],yc=Qt(()=>e("label",{for:"floatingInput"},"Machine SMU",-1)),bc=Qt(()=>e("div",{class:"report_section_header prevent-split"},[e("h4",{class:"title ps-3"},"Service Labour Personnel")],-1)),hc={class:"d-flex flex-row justify-content-between pb-5 prevent-split"},gc={class:"d-flex flex-row flex-grow-1 prevent-split"},kc={class:"flex-fill"},_c={class:"form-floating"},xc=["innerHTML"],Cc=Qt(()=>e("label",{for:"floatingInput"},"Service Labour Personnel",-1)),wc={class:"report mb-4 prevent-split"},Dc=Qt(()=>e("div",{class:"report_section_header"},[e("h4",{class:"title ps-3"},"Additional Information")],-1)),$c={class:"desc-wrapper"},Sc={class:"desc-wrapper-content"},Vc={class:"desc-wrapper-content-pre"},Ic={key:1,class:"report",style:{"border-color":"transparent"}},Pc={class:"row"},Rc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHnSURBVHgB3VVLUsJAEO0exmLhBk9g3GmMiidQT2AsscqdcAM9AXgC8QTgzgVoPIHcgJQJbIUbsNWCtD3hl5gAAVb6FtTM9KRf03mvA/DXgfOCZlPLyPRmHgFP+GqWgDQ/QGAjQmfgeW8vRru6EsHlx56JMlXhZQbmgEk75NH9LKJYglz74IEfvYVlQFCq7bv3CwlyLaPIpyVYCVSu6a27mQRXrp4nISqwBqiPF/VDxxrvRSgqsAhrAlNUMZvZTITArx5Qg4QgDx5russdwKcwA2TExrcZISBEExKCC+nUDXcoAs+LxEUg17RFiNvx6bD3ez/A1Jla5dz9W852EykA4ShKAJCNXsRqTXe2VDvGZ1zwnbVnd66bu9qsd8bG1OIIohdp6NxROxrcGzaUU1UOH6RT77DAhGECgm5M/NT3BUOiLLCRSv56Y7O8QBB2lADIjr3Kpss5xukzt0VtfcKYvodANClWBhI1+Pc89gEBr2Zz91hKqSVxuUfCmqYdQZlDpvufkKCv8+BLWHd2prWNYB3bPQ4WYE2w4kIDL6QiZraCklw++1BlwaP4cd0yShxZai6pwibuXkSgcOUe5Pn/FSdfsZnAHvWhEJygiQiCRISeqXSP0xHQZSnaPDob/S9RVe8P/i1+AL4YslyBfy7HAAAAAElFTkSuQmCC",Uc=Ue({__name:"SuspensionForm",emits:["onDownloadFinish"],setup(s,{expose:n,emit:t}){const u=t,l=Wa(),o=Ca(),w=v(),S=v(),x=us(),_=b(()=>o.SCCalibration),y=b(()=>o.SCHeader),T=b(()=>_.value.transactionCalibration.filter($=>$.rating&&$.rating=="CALIBRATION")??[]),I=b(()=>_.value.transactionCalibration.filter($=>$.showParameter&&$.showParameter=="cylinderHeightNeedAdjustment"&&$.items.length>3&&$.items.find(V=>V.itemType==="statusInfo")!=null)??[]),g=b(()=>{let R="";return _.value.subGroup.forEach($=>{$.taskGroup.forEach(V=>{V.key=="ADDITIONAL_INFORMATION"&&(R=V.task[0].items[0].value)})}),R}),N=b(()=>l.TimeStamp),h=async()=>{S.value=St.service({lock:!0,text:"Generating PDF",background:"rgba(0, 0, 0, 0.7)"}),await Rs(),P()},H=El({render:function(){return Fl("div",{style:{position:"absolute",bottom:"10px",right:"15px"}})}}),P=async()=>{so(w.value,{forcePageBreak:".page-break",paperSize:"A4",scale:.6,margin:{top:"1cm",right:"1cm",bottom:"1cm",left:"1cm"},fileName:`Digital Payload Calibration ${y.value.equipment} - ${y.value.modelId} - ${y.value.updatedDate}`,pageTemplate:H,keepTogether:".prevent-split"},()=>{var R;l.resetAfterDownload(),u("onDownloadFinish"),(R=S.value)==null||R.close()})};return n({handleDataFetch:h}),(R,$)=>{const V=he("pdfexport");return E(a.isEmpty)(_.value)?D("",!0):(i(),d("div",zd,[p(V,{ref_key:"contentToExport",ref:w},{default:O(()=>[e("div",{id:E(x),class:"defect-review-eform",style:{width:"100%"}},[e("div",Qd,[Xd,e("div",Zd,"Downloaded by "+M(N.value),1)]),e("div",ec,[y.value.modelId.includes("CAT")?(i(),d(ne,{key:0},[e("div",tc,[ac,e("div",sc,[e("div",lc,[e("div",oc,[e("div",rc,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:y.value.equipment},null,8,nc),ic])]),e("div",uc,[e("div",dc,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:y.value.updatedDate},null,8,cc),vc])]),e("div",pc,[e("div",mc,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:y.value.smu},null,8,fc),yc])])])]),bc,e("div",hc,[e("div",gc,[e("div",kc,[e("div",_c,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:y.value.updatedBy.name},null,8,xc),Cc])])])])]),e("div",{class:"d-flex flex-row pb-5 prevent-split"},[e("div",{class:"text-center d-flex align-items-center justify-content-start light-green color-dark-green rounded py-4 px-2 w-100"},[e("img",{class:"mx-2",src:Rc,alt:""}),be(" Payload Calibrated Successfully ")])]),T.value?(i(),ue(Za,{key:0,tasks:T.value,title:"Cylinder Height Initial Measurement"},null,8,["tasks"])):D("",!0),T.value&&I.value?(i(),ue(Za,{key:1,tasks:I.value,title:"Cylinder Height Adjustment"},null,8,["tasks"])):D("",!0),e("div",wc,[Dc,e("div",$c,[e("div",Sc,[e("pre",Vc,M(g.value),1)])])])],64)):(i(),d("div",Ic,[T.value?(i(),ue(Za,{key:0,class:"prevent-split",tasks:T.value,title:"Cylinder Height Initial Measurement"},null,8,["tasks"])):D("",!0),T.value&&I.value?(i(),ue(Za,{key:1,class:"prevent-split",tasks:I.value,title:"Cylinder Height Adjustment"},null,8,["tasks"])):D("",!0),e("div",Pc,[(i(!0),d(ne,null,Pe(_.value.subGroup,L=>(i(),ue(Dl,{key:L.key,subGroup:L},null,8,["subGroup"]))),128))])]))])],8,Jd)]),_:1},512)]))}}}),Ac=tt(Uc,[["__scopeId","data-v-38c54a92"]]),bt=s=>(vt("data-v-7bc02898"),s=s(),pt(),s),Bc={class:"mt-5 ps-0"},Tc={class:"row px-2 item mx-1 w-100 defect-panel-header"},Lc=bt(()=>e("div",{class:"col-1 column-sm-12-percent column-md-7-percent column-lg-10-percent column-xl-6-percent text-center align-items-center d-flex justify-content-center"},"Task",-1)),Nc=bt(()=>e("div",{class:"col align-items-center d-flex text-break"},"Task Description  Defect Description",-1)),Oc=bt(()=>e("div",{class:"text-break col-1 text-center column-sm-11-percent column-md-10-percent column-lg-5-percent align-items-center d-flex justify-content-center flex-basis-80"},"Priority",-1)),Mc=bt(()=>e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},"Review Status",-1)),jc=bt(()=>e("div",{class:"col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center"},"Work Order",-1)),Ec=bt(()=>e("div",{class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},"Repair Status",-1)),Fc={key:0,class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},Hc={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},qc=bt(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),Kc=[qc],Gc={class:"row mt-2 flex-nowrap px-2 my-2 mx-1 w-100"},Wc={key:0,class:"col-1 column-sm-12-percent column-md-7-percent column-xl-6-percent align-items-center d-flex text-break justify-content-center"},Yc=["innerHTML"],zc={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},Jc=bt(()=>e("div",{class:"col-1 column-sm-12-percent column-md-7-percent column-xl-6-percent align-items-center d-flex text-break justify-content-center"},null,-1)),Qc={class:"col align-items-center d-flex text-break defect-description"},Xc=["innerHTML"],Zc={class:"text-center",style:{"font-weight":"600",color:"white"}},ev={class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},tv=["onClick"],av=["onClick"],sv={class:"row"},lv={class:"col-8 col-md-8 d-flex flex-column pe-0"},ov=["value","onChange","disabled"],rv={key:0,class:"ms-1 d-flex align-items-center"},nv=bt(()=>e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),iv=bt(()=>e("span",null,"Loading...",-1)),uv=[nv,iv],dv={class:"col-4 col-md-3 ps-0 pe-1"},cv=["disabled","onClick"],vv=bt(()=>e("i",{class:"fa fa-save"},null,-1)),pv=[vv],mv=bt(()=>e("img",{src:xa,alt:""},null,-1)),fv=[mv],yv={class:"mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center mx-auto",style:{"margin-top":"6px",cursor:"initial"}},bv=["onClick"],hv={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},gv={key:1},kv={class:"item header-collapse px-2 my-2 mx-1"},_v={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},xv={class:"col-1 column-sm-12-percent column-md-7-percent column-xl-6-percent align-items-center d-flex text-break justify-content-center"},Cv={class:"col align-items-center d-flex text-break defect-description"},wv=["innerHTML"],Dv={class:"col-1 justify-content-center column-sm-11-percent column-md-11-percent column-xl-5-percent align-items-center d-flex flex-basis-80"},$v={class:"text-center",style:{"font-weight":"600",color:"white"}},Sv=bt(()=>e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},null,-1)),Vv={class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex"},Iv=bt(()=>e("img",{src:xa,alt:""},null,-1)),Pv=[Iv],Rv={key:0,class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex"},Uv={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},Av=Ue({__name:"DefectPanel",props:{viewOnly:{required:!1,type:Boolean,default:!1},supervisor:{required:!0,type:Boolean,default:!0},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1},viewIsDownload:{required:!1,type:Boolean,default:!1},isApproval:{type:Boolean,default:!1},title:{default:"Repairs Completed"},isIdentifiedDefectMenu:{required:!1,type:Boolean,default:!1}},emits:["onRefreshData","onGetPositionY"],setup(s,{emit:n}){const t=s,u=Lt(),l=gt(),o=Ga(),w=Ca(),S=Ut(),x=ss(),_=Jt(),y=Wa(),T=n,I=v("Defect Identified"),g=v(!1),N=v(!0),h=v([]),H=v(""),P=v(""),R=v(""),$=v(!1),V=v(!1),L=v(!1),A=v(),te=v(),Z=v(),ee=v(""),W=k=>k?Ns(k):!1,K=k=>k=="Acknowledge",oe=v(!1),m=()=>{oe.value=!0,f.value=!1,u.stateErrorMessage!=la.NO_NETWORK_VIEW&&(oe.value=!1,u.resetErrorStatus(),lt())},f=v(!1),ve=v([""]),Ve=k=>{var j;return(j=h.value.find(X=>X.id==k))==null?void 0:j.wo},_e=k=>{var j;return(j=h.value.find(X=>X.id==k))==null?void 0:j.load},Ce=k=>{k.preventDefault();const j=k.target,X=ct(j.value).replaceAll(".","");j.value=X},xe=(k,j)=>{h.value.every(X=>X.id==j?(X.wo=k.target.value,!1):!0)},me=k=>{let j="red  ";return k.defectType=="CALIBRATION"?!a.isUndefined(w.stateSCHeader)&&!a.isUndefined(w.stateSCHeader.status)&&w.stateSCHeader.status=="Submitted"?j="green":j="red":j=u.getCompleteStatus(k.id)?"green":"red",j},we=k=>{let j="";return k.isRevised=="true"&&(j="soft-yellow-background"),j},$e=k=>k.plannerStatus=="Decline"||k.status=="Decline"||k.priority===void 0?"invisible":"",Ie=k=>k.plannerStatus=="Decline"||k.status=="Decline"?"invisible":"",Me=()=>{L.value=!1},qe=()=>{y.setIsAttachmentIncludeDownload(!1),Me(),We()},at=()=>{y.setIsAttachmentIncludeDownload(!0),Me(),We()},Qe=async(k,j,X)=>{if(X=="CALIBRATION"){ee.value=k,y.setIsDownloadPDF(!0);const pe=await lo();y.setTimeStamp(pe),Z.value.handleDataFetch()}else L.value=!0,A.value={headerId:k,taskDesc:j}},We=()=>{ee.value="";const k=a.cloneDeep(nt(A.value.headerId)),j=u.getDefectHeader(A.value.headerId);k&&j&&Ls({header:j,detail:k.detail,serialNumber:_.SerialNumber,approvalData:{approvedBy:j.approvedBy,approvedDate:j.approvedDate},ownership:_.Ownership,unitNumber:o.SelectedDefectSheet.unitNumber,taskDesc:A.value.taskDesc})&&(ee.value=A.value.headerId,te.value.handleDataFetch())},F=()=>{u.updateDownloadHistory(ee.value,"defect")},le=b(()=>{const k=["P3","P4"];return u.ApprovalData.DefectHeaders.filter(X=>u.ApprovalData.DefectDetails.find(Y=>X.id==Y.defectHeaderId&&(Y.detail.isComplete??!0)==(t.title=="Repairs Completed")&&(t.supervisor||t.viewOnly?!0:k.includes(Y.detail.priority)))!=null)}),J=b(()=>{const k=le.value;return u.ApprovalData.DefectDetails.forEach(X=>{const pe=le.value.findIndex(Y=>Y.id===X.defectHeaderId);pe>=0&&(k[pe].descriptionDefect=X.detail.description)}),k.forEach(X=>{X.taskDesc&&X.taskDesc.split(";")[1]&&X.taskDesc.split(";")[1]!=""&&(X.taskNo=X.taskDesc.split(";")[0]+";"+X.taskDesc.split(";")[1])}),k.filter(X=>X.defectType!=="machineSMU").reduce((X,pe)=>{const Y=X[pe.taskNo]||[];return Y.push(pe),X[pe.taskNo]=Y,X},{})}),G=k=>k&&k.length>=30?k.substring(0,30)+"...":k,fe=b(()=>u.DataFetched),ge=b(()=>{var k;return(k=u.DefectPictures[H.value])==null?void 0:k.map(j=>({fileName:j,url:""}))}),je=k=>J.value[k].length==1&&J.value[k][0].cbmRatingType=="SERVICE_CLEANED_AND_REPLACED",Q=(k,j,X="",pe)=>{let Y=!0;const ae=j==null?void 0:j.find(ot=>ot.id===k);if(ae){if(X)return!0;if(Y=!1,t.plannerApprove){if((ae.priority=="P3"||ae.priority=="P4")&&ae.generalStatus=="Acknowledge"&&(Y=!1),(ae.priority=="P1"||ae.priority=="P2")&&ae.defectWorkorder)return!0;if((ae.priority=="P1"||ae.priority=="P2")&&!ae.defectWorkorder)return!1}else{if((ae.priority=="P3"||ae.priority=="P4")&&ae.defectWorkorder!="")return!0;if((ae.priority=="P3"||ae.priority=="P4")&&!ae.defectWorkorder)return!1;(ae.priority=="P1"||ae.priority=="P2")&&ae.generalStatus=="Acknowledge"&&(Y=!1)}if(Y||(Y=t.plannerApprove?ae.plannerStatus!="Acknowledge":ae.status!="Acknowledge",Y))return Y;Y=!(!ae.defectWorkorder||ae.defectWorkorder=="")}return Y},de=(k,j)=>{let X="light-yellow color-dark-yellow";const pe=j==null?void 0:j.find(Y=>Y.id===k);if(t.supervisor){if(pe){if(["P3","P4"].includes((pe==null?void 0:pe.priority)??"")&&!t.isIdentifiedDefectMenu)return"light-green color-dark-green";X=pe.generalStatus==="Acknowledge"?"light-green color-dark-green":"light-yellow color-dark-yellow",pe.priority===void 0&&pe.defectType!=="machineSMU"&&(X="light-green color-dark-green")}}else if(pe){switch(pe.generalStatus){case"Submited":X="light-yellow color-dark-yellow";break;case"Acknowledge":X="light-green color-dark-green";break}pe.priority===void 0&&(X="light-green color-dark-green")}return X},Se=b(()=>{let k=!1;return le.value.forEach(j=>{j.defectType=="CALIBRATION"&&(k=!0)}),k}),B=k=>{k.target.value.length>=15&&k.preventDefault();let j=k.keyCode?k.keyCode:k.which;(j<48||j>57)&&k.preventDefault()};Xe(fe,k=>{k===!0&&(ye(),Re())});const C=b(()=>o.SelectedDefectSheet.workOrder);Xe(C,()=>{Ne()});const ye=()=>{h.value=[],le.value.forEach(k=>{h.value.push({id:k.id,wo:k.defectWorkorder,load:!1})})},Re=()=>{ve.value=[],le.value.forEach(k=>{ve.value.findIndex(X=>k.taskDesc&&k.taskDesc.split(";")[1]&&k.taskDesc.split(";")[1]!=""?X==k.taskDesc.split(";")[0]+";"+k.taskDesc.split(";")[1]:X==k.taskNo)<0&&(k.taskDesc&&k.taskDesc.split(";")[1]&&k.taskDesc.split(";")[1]!=""?ve.value.push(k.taskDesc.split(";")[0]+";"+k.taskDesc.split(";")[1]):ve.value.push(k.taskNo))})};Nt(()=>{fe.value&&(ye(),Re()),Ne(),x.getServerTimestamp()});const Ne=async()=>{const k=et(),j=a.isUndefined(o.stateSelectedDefectSheet.equipmentModel)?"":o.stateSelectedDefectSheet.equipmentModel,X=`${o.stateSelectedDefectSheet.brand} ${j}`;if(X.includes("undefined")){const pe={modelId:k.stateGeneralForm.modelId,psTypeId:k.stateGeneralForm.psTypeId,unitNumber:k.stateGeneralForm.equipment,workOrder:k.stateGeneralForm.workOrder,employee:{id:S.stateUser.EmployeeId,name:S.stateUser.Name}};V.value=await w.getSuspensionCalibrationTemplate(pe)}else{const pe={modelId:X,psTypeId:o.stateSelectedDefectSheet.psType,unitNumber:o.stateSelectedDefectSheet.unitNumber,workOrder:o.stateSelectedDefectSheet.workOrder,employee:{id:S.stateUser.EmployeeId,name:S.stateUser.Name}};w.toggleShowPreviewSuspensionCylinderHeightForm(!1),V.value=await w.getSuspensionCalibrationTemplate(pe)}},Ke=k=>{let j=k.createdBy.name,X=k.updatedDate!=""?k.updatedDate:k.createdDate;const pe=u.ApprovalData.DefectDetails.find(Y=>Y.defectHeaderId==k.id);return pe&&pe.otherFitterUpdatedBy&&(j=pe.otherFitterUpdatedBy.name,ka(pe.updatedDate)>ka(X)&&(X=pe.updatedDate)),`${j}, ${X}`},Je=async k=>{T("onGetPositionY"),l.setCurrent("defect");const j=await u.setDefectData(k);u.setDefectGeneralStatus(k),N.value=u.getCompleteStatus(k),t.plannerApprove&&u.HeaderStatus!="Decline"&&u.updateHeaderDefect(k),P.value=k,t.fitterId?R.value=o.SelectedWorkOrder:R.value=o.SelectedDefectSheet.workOrder,j&&j=="CALIBRATION"?!a.isUndefined(w.stateSCHeader)&&!a.isUndefined(w.stateSCHeader.status)&&w.stateSCHeader.status=="Submitted"&&w.toggleShowPreviewSuspensionCylinderHeightForm(!0):g.value=!0},nt=k=>u.getDefectDetail(k),it=async k=>{const j=h.value.findIndex(X=>X.id==k);j<0||(h.value[j].load=!0,await u.updateDefectMO(k,h.value[j].wo),h.value[j].load=!1,u.IsError&&(f.value=!0))},st=()=>{g.value=!1},rt=()=>{$.value=!1},lt=()=>{T("onRefreshData")};return(k,j)=>{const X=he("el-collapse-item"),pe=he("el-collapse");return i(),d(ne,null,[p(nl,{ref_key:"downloadPdfDefect",ref:te,onOnDownloadFinish:F},null,512),p(Ac,{ref_key:"downloadPdfSuspension",ref:Z,onOnDownloadFinish:F},null,512),e("div",Bc,[p(pe,{class:"task-group general-accordion defect-panel-wrapper px-5 pb-1 testing",modelValue:I.value,"onUpdate:modelValue":j[1]||(j[1]=Y=>I.value=Y)},{default:O(()=>[p(X,{title:`Defect Identified - ${s.title}`,name:"Defect Identified"},{default:O(()=>[e("div",Tc,[Lc,Nc,Oc,Mc,jc,Ec,s.viewIsDownload?(i(),d("div",Fc)):D("",!0)]),Object.keys(J.value).length===0?(i(),d("div",Hc,Kc)):(i(!0),d(ne,{key:1},Pe(E(Tl)(Object.keys(J.value)),Y=>(i(),d(ne,{key:Y},[je(Y)?(i(),d("div",gv,[e("div",kv,[e("div",_v,[e("div",xv,M(J.value[Y][0].taskNo&&J.value[Y][0].taskNo.split(";")[0]),1),e("div",Cv,[e("span",{class:"text-break",style:{"white-space":"break-spaces"},innerHTML:E(Yt)(J.value[Y][0].taskDesc)},null,8,wv)]),e("div",Dv,[e("div",{class:se(["little-box justify-content-center align-items-center justify-content-center d-flex mx-auto",E(es)(J.value[Y][0].priority)]),style:{"margin-top":"6px"}},[e("span",$v,M(J.value[Y][0].priority),1)],2)]),Sv,e("div",{class:se(["col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center",$e(J.value[Y][0])])},null,2),e("div",Vv,[e("div",{class:se(["mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center mx-auto",[me(J.value[Y][0])]]),style:{"margin-top":"6px"}},Pv,2)]),s.viewIsDownload?(i(),d("div",Rv)):D("",!0)]),e("div",Uv,M(J.value[Y][0].createdBy.name)+", "+M(J.value[Y][0].updatedDate!=""?J.value[Y][0].updatedDate:J.value[Y][0].createdDate),1)])])):(i(),ue(pe,{key:0,modelValue:ve.value,"onUpdate:modelValue":j[0]||(j[0]=ae=>ve.value=ae),class:"task-group e-form-only py-1 px-2 mt-2 overflow-visible defect-panel-task"},{default:O(()=>[p(X,{name:J.value[Y][0].taskNo},{title:O(()=>[e("div",Gc,[J.value[Y][0].taskNo?(i(),d("span",Wc,M(J.value[Y][0].taskNo.split(";")[0]),1)):D("",!0),e("span",{class:"col defect-identified-task",innerHTML:E(Yt)(J.value[Y][0].taskDesc)},null,8,Yc)])]),default:O(()=>[(i(!0),d(ne,null,Pe(J.value[Y],ae=>(i(),d("div",{key:ae.id},[e("div",{class:se(["item px-2 my-2 mx-1",we(ae)])},[e("div",zc,[Jc,e("div",Qc,[e("span",{class:"text-break",style:{"white-space":"break-spaces"},innerHTML:G(ae.descriptionDefect)},null,8,Xc)]),e("div",{class:se(["col-1 justify-content-center column-sm-11-percent column-md-11-percent column-xl-5-percent align-items-center d-flex flex-basis-80",Ie(ae)])},[e("div",{class:se(["little-box justify-content-center align-items-center justify-content-center d-flex mx-auto",E(es)(ae.priority)]),style:{"margin-top":"6px"}},[e("span",Zc,M(ae.priority),1)],2)],2),e("div",ev,[ae.plannerStatus=="Decline"||ae.status=="Decline"?(i(),d("div",{key:0,class:"label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center red-bg text-dark-red cursor-pointer",onClick:ot=>Je(ae.id)}," Declined ",8,tv)):(i(),d("div",{key:1,class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",de(ae.id,le.value)]),onClick:ot=>Je(ae.id)},M(ae.isRevised=="true"?"Revision Approval":"Detailed Information"),11,av))]),e("div",{class:se(["col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center",$e(ae)])},[e("div",sv,[e("div",lv,[e("input",{type:"text",class:"form-control mou-input",placeholder:"Input Work Order",onKeypress:B,autocomplete:"off",value:Ve(ae.id),onInput:Ae(Ce,["prevent"]),onChange:ot=>xe(ot,ae.id),disabled:Q(ae.id,le.value,s.fitterId,ae)},null,40,ov),_e(ae.id)?(i(),d("div",rv,uv)):D("",!0)]),e("div",dv,[e("button",{disabled:Q(ae.id,le.value,s.fitterId,ae),onClick:ot=>it(ae.id),class:"btn btn-sm btn-success ms-2 d-flex justify-content-center align-items-center",style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white",width:"46px",height:"40px"}},pv,8,cv)])])],2),e("div",{class:se(["col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",Ie(ae)])},[e("div",{class:se(["mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center mx-auto",[me(ae)]]),style:{"margin-top":"6px"}},fv,2)],2),s.viewIsDownload?(i(),d("div",{key:0,class:se(["col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",Ie(ae)])},[e("div",yv,[K(s.plannerApprove?ae.plannerStatus:ae.status)?(i(),d("img",{key:0,onClick:ot=>Qe(ae.id,J.value[Y][0].taskDesc,ae.defectType),class:se(["ms-4 me-2 download-icon",W(ae.downloadHistory)?"icon-green":"icon-red"]),src:Us,style:{height:"18px"},alt:""},null,10,bv)):D("",!0)])],2)):D("",!0)]),e("div",hv,M(Ke(ae)),1)],2)]))),128))]),_:2},1032,["name"])]),_:2},1032,["modelValue"]))],64))),128))]),_:1},8,["title"])]),_:1},8,["modelValue"])]),p(fl,{status:E(u).GeneralStatus,"status-spv":E(u).DefectFormStatusSPV,visibility:g.value,"defect-data":E(u).DefectFormData,"header-id":P.value,"work-order":R.value,"view-only":s.viewOnly,"fitter-id":s.fitterId,plannerApprove:s.plannerApprove,"is-complete":N.value,onCloseForm:st,onOnRefreshData:lt},null,8,["status","status-spv","visibility","defect-data","header-id","work-order","view-only","fitter-id","plannerApprove","is-complete"]),p(As,{images:ge.value,visibility:$.value,onHandleClose:rt},null,8,["images","visibility"]),Se.value?(i(),d(ne,{key:0},[E(w).ShowPreviewSuspensionCylinderHeightForm?(i(),ue(Ud,{key:0,show:E(w).ShowPreviewSuspensionCylinderHeightForm,onClose:j[2]||(j[2]=()=>E(w).toggleShowPreviewSuspensionCylinderHeightForm(!1))},null,8,["show"])):D("",!0)],64)):D("",!0),p(zt,{visibility:L.value,caption:"Are you sure want to download all the attachment in this defect file?",yesLabel:"Yes, Download All File",noLabel:"No,  Only F55 Form",showClose:!0,widthDialog:60,footerTemplate:"50-50",onOnClose:Me,onOnNoConfirm:qe,onOnYesConfirm:at},null,8,["visibility"]),p(ds,{visibility:f.value,caption:E(u).stateErrorMessage,onOnClose:m},null,8,["visibility","caption"])],64)}}}),yx=tt(Av,[["__scopeId","data-v-7bc02898"]]),Oe=s=>(vt("data-v-615ea8be"),s=s(),pt(),s),Bv={class:"d-flex justify-content-between"},Tv=Oe(()=>e("span",{class:"el-dialog__title"},"Crack Repair Request",-1)),Lv=["innerHTML"],Nv={class:"d-flex",style:{"margin-right":"3rem"}},Ov={key:0,class:"rounded d-flex justify-content-center align-items-center header-badge red-bg text-dark-red mx-2"},Mv=Oe(()=>e("div",null,"Declined",-1)),jv=[Mv],Ev={key:1,class:"rounded d-flex justify-content-center align-items-center approved-badge header-badge green mx-2"},Fv=Oe(()=>e("div",null,"Approved",-1)),Hv=[Fv],qv=Oe(()=>e("div",null,[e("img",{src:xa,alt:""})],-1)),Kv={style:{margin:"6px 0 4px 5px"}},Gv={class:"history-wrapper"},Wv=Oe(()=>e("hr",null,null,-1)),Yv=Oe(()=>e("div",{class:"mt-1 p-2"},null,-1)),zv={class:"d-flex flex-row justify-content-between"},Jv={class:"py-2 d-flex flex-row flex-grow-1"},Qv={class:"flex-fill"},Xv={class:"form-floating"},Zv=["innerHTML"],ep=Oe(()=>e("label",{for:"floatingInput"},"Asset Number",-1)),tp={class:"flex-fill ps-3"},ap={class:"form-floating"},sp=["innerHTML"],lp=Oe(()=>e("label",{for:"floatingInput"},"Serial Number",-1)),op={class:"flex-fill ps-3"},rp={class:"form-floating"},np=["innerHTML"],ip=Oe(()=>e("label",{for:"floatingInput"},"Ownership",-1)),up={class:"d-flex flex-row justify-content-between"},dp={class:"d-flex justify-content-center reference-photo"},cp={class:"mt-1 py-2"},vp={class:"mt-1 py-2"},pp={class:"row"},mp={class:"col pe-0"},fp={class:"form-floating"},yp=["value"],bp=Oe(()=>e("label",null,"Raised By",-1)),hp={class:"mt-1 py-2"},gp={class:"row"},kp={class:"col-4 pe-0 date"},_p={class:"form-floating"},xp=["value"],Cp=Oe(()=>e("label",null,"Date Raised",-1)),wp={class:"col pe-0 d-flex"},Dp={class:"d-flex flex-column flex-fill"},$p={class:"form-floating"},Sp=["value","disabled"],Vp=Oe(()=>e("label",{class:"text-nowrap"},"How long will this crack repair take?",-1)),Ip={key:0,class:"mt-2"},Pp={class:"ms-2 d-flex align-items-center"},Rp={class:"mt-1 py-2"},Up={class:"mt-1 mb-3 px-3 previous-crack-container word-breaker"},Ap=Oe(()=>e("div",{class:"row justify-content-center table-header-background-color p-1"}," Crack Length ",-1)),Bp=Oe(()=>e("div",{class:"row table-header-background-color p-1"},[e("div",{class:"col"},"Location"),e("div",{class:"col-3"},"Previous"),e("div",{class:"col-3"},"Current"),e("div",{class:"col-1"})],-1)),Tp={class:"col"},Lp={class:"col-3"},Np={class:"col-3"},Op=["value","onInput","disabled"],Mp={key:0,class:"mt-2"},jp=Oe(()=>e("div",{class:"col-1"}," mm",-1)),Ep=Oe(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Priority"),e("div",{class:"col-6"},"Action"),e("div",{class:"col-3 text-break"},"Person Responsible")],-1)),Fp={class:"row p-3 m-1 priority-container"},Hp={class:"col-3"},qp={class:"form-check"},Kp=["disabled"],Gp=Oe(()=>e("label",{class:"form-check-label text-nowrap"}," (P1) Immediate ",-1)),Wp=Oe(()=>e("div",{class:"col-6 word-breaker"},"Shall shut machine down and undertake repairs.",-1)),Yp=Oe(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),zp={class:"row p-3 m-1 priority-container"},Jp={class:"col-3"},Qp={class:"form-check"},Xp=["disabled"],Zp=Oe(()=>e("label",{class:"form-check-label text-nowrap"}," (P2) Urgent ",-1)),em=Oe(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 7 days.",-1)),tm=Oe(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),am={class:"row p-3 m-1 priority-container"},sm={class:"col-3"},lm={class:"form-check"},om=["disabled"],rm=Oe(()=>e("label",{class:"form-check-label text-nowrap"}," (P3) Routine ",-1)),nm=Oe(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 60 days.",-1)),im=Oe(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),um={class:"row p-3 m-1 priority-container"},dm={class:"col-3"},cm={class:"form-check"},vm=["disabled"],pm=Oe(()=>e("label",{class:"form-check-label text-nowrap"}," (P4) Monitor ",-1)),mm=Oe(()=>e("div",{class:"col-6 word-breaker"},"Shall continue to inspect and monitor for 90 days.",-1)),fm=Oe(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),ym=Oe(()=>e("div",{class:"mt-2"},null,-1)),bm=Oe(()=>e("div",{class:"row p-3 m-1 priority-container px-0",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Part Number"),e("div",{class:"col-5"},"Part Description"),e("div",{class:"col-1"},"Qty"),e("div",{class:"col"}),e("div",{class:"col"})],-1)),hm={class:"col-3 ps-0"},gm={class:"d-flex flex-column"},km=["onUpdate:modelValue","disabled"],_m={key:0,class:"mt-2"},xm={class:"col-5"},Cm={class:"d-flex flex-column"},wm=["value","onChange","disabled"],Dm={key:0,class:"mt-2"},$m={class:"col-1 px-1 d-flex flex-column justify-content-start"},Sm={class:"row p-0 m-0 h-50 w-100"},Vm={class:"p-0 col-12 d-flex"},Im=["value","onInput","disabled"],Pm={key:0,class:"mt-2 flex-fill"},Rm={class:"col px-1 d-flex flex-column justify-content-start"},Um={class:"row p-0 m-0 h-100 w-100 align-items-center"},Am={class:"col px-1 d-flex flex-column justify-content-start position-relative"},Bm={class:"row p-0 m-0 h-100 w-100 align-items-center"},Tm=["onClick"],Lm={class:"d-flex justify-content-between align-items-center flex-row-reverse"},Nm={class:"fw-bolder"},Om=["href"],Mm=Oe(()=>e("img",{src:vl},null,-1)),jm=Oe(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),Em=Oe(()=>e("div",{class:"mt-2"},null,-1)),Fm=Oe(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-6"},"Labour Activity"),e("div",{class:"col-2"},"Qty"),e("div",{class:"col-2"},"Hours Each"),e("div",{class:"col-2"},"Total Hours")],-1)),Hm={class:"col-6 px-0"},qm={class:"d-flex flex-column"},Km={key:0,class:"mt-2"},Gm={class:"col-2 d-flex justify-content-start"},Wm={class:"d-flex flex-column"},Ym=["value","onInput","disabled"],zm={key:0,class:"mt-2"},Jm={class:"col-2 d-flex justify-content-start"},Qm={class:"d-flex flex-column"},Xm=["value","onInput","disabled"],Zm={key:0,class:"mt-2"},ef={class:"col-2 d-flex justify-content-start"},tf={class:"row p-0 m-0 h-50 w-100"},af={class:"p-0 col-12 d-flex"},sf=["value"],lf=["onClick"],of={key:0,class:"mt-2 flex-fill"},rf=Oe(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),nf=Oe(()=>e("div",{class:"mt-2"},null,-1)),uf={class:"d-flex flex-fill flex-column"},df={class:"d-flex flex-row"},cf=["value","placeholder","onChange","disabled"],vf=["onClick"],pf={key:0,class:"mt-2"},mf=Oe(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),ff=Oe(()=>e("div",{class:"mt-2"},null,-1)),yf={class:"d-flex flex-row"},bf={class:"d-flex flex-fill flex-column"},hf={key:0,class:"mt-2"},gf=["onClick"],kf={key:0,class:"mt-2"},_f=Oe(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),xf=Oe(()=>e("div",{class:"mt-2"},null,-1)),Cf={class:"d-flex flex-row"},wf={class:"d-flex flex-fill flex-column"},Df={key:0,class:"mt-2"},$f=["onClick"],Sf={key:0,class:"mt-2"},Vf=Oe(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),If={key:1,class:"my-5 w-100 d-flex justify-content-around"},Pf=Ue({__name:"CrackForm",props:{visibility:{required:!0,type:Boolean},crackData:{required:!0,type:Object},workOrder:{required:!1,type:String},headerId:{required:!1,type:String},status:{required:!0,type:String},statusSpv:{required:!0,type:String},viewOnly:{required:!1,type:Boolean,default:!1},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1},isComplete:{required:!0,type:Boolean,default:!1}},emits:["closeForm","onRefreshData"],setup(s,{emit:n}){const t=s,u=n,l=gt(),o=Lt(),w=Os(),S=Ms(),x=Jt(),_=hl(),y=Ga(),T=v("History"),I=v(),g=v("Priority"),N=v("Parts"),h=v("Labour"),H=v("Other Resource (optional)"),P=v("Symptom"),R=v("Cause"),$=v(),V=v(!0),L=v(!0),A=v(!1),te=v(!1),Z=v(""),ee=v(!1),W=v(!1),K=v(!1),oe=Fe(t,"visibility"),m=Fe(t,"crackData"),f=v(),ve=v(""),Ve=v([""]),_e=v([""]),Ce=v([""]),xe=v([""]),me=v([!0]),we=v([""]),$e=v([!0]),Ie=v(!1),Me=v(!1),qe=v(!1),at=v(!1),Qe=v(us()),We=v(!1),F=v(""),le=v(""),J=v(""),G=v(),fe=v(""),ge=v([""]),je=v([""]),Q=v([""]),de=v([""]),Se=v([!0]),B=v([""]),C=v([!0]),ye=v(),Re=["images","description","priority","instruction","plannedDuration","parts","labours","resources","symptoms","causes","crackLength"],Ne=b(()=>a.isUndefined(_.images)?[]:_.images.ImageInfos),Ke=b(()=>({images:Ne.value,description:t.crackData.Description.value,priority:t.crackData.Priority,instruction:t.crackData.Instruction.value,plannedDuration:t.crackData.PlannedDuration.value,parts:t.crackData.Parts,labours:t.crackData.Labours,resources:t.crackData.Resources,symptoms:t.crackData.Symptoms,causes:t.crackData.Causes,crackLength:t.crackData.CrackLength})),Je=b(()=>window.location.href.includes("monitoring-status")),nt=b(()=>{if(Je.value)return!1;const r=o.ApprovalData.CrackHeaders.find(c=>c.defectHeaderId==t.headerId);return r?r.plannerStatus=="Acknowledge"||r.plannerStatus=="Decline"?!1:(t.plannerApprove?r.plannerStatus!="Acknowledge":r.status!="Acknowledge")&&r.generalStatus!="Decline":!1}),it=b(()=>o.VersionDate),st=b(()=>o.SelectedDefectHeaderHistory),rt=b(()=>L.value?!1:Is(Re,ye.value,Ke.value)),lt=()=>{G.value=a.cloneDeep(f.value),fe.value=a.cloneDeep(ve.value),ge.value=a.cloneDeep(Ve.value),je.value=a.cloneDeep(_e.value),Q.value=a.cloneDeep(Ce.value),de.value=a.cloneDeep(xe.value),Se.value=a.cloneDeep(me.value),B.value=a.cloneDeep(we.value),C.value=a.cloneDeep($e.value),J.value=t.crackData.PlannedDuration.value,m.value.PlannedDuration.isValid=!0,m.value.PlannedDuration.errorMessage=""},k=()=>{o.setCrackData(t.headerId??""),t.plannerApprove&&o.HeaderStatus!="Decline"&&o.updateHeaderCrack(t.headerId),f.value=a.cloneDeep(G.value),ve.value=a.cloneDeep(fe.value),Ve.value=a.cloneDeep(ge.value),_e.value=a.cloneDeep(je.value),Ce.value=a.cloneDeep(Q.value),xe.value=a.cloneDeep(de.value),me.value=a.cloneDeep(Se.value),we.value=a.cloneDeep(B.value),$e.value=a.cloneDeep(C.value),le.value=J.value,m.value.PlannedDuration.isValid=!0,m.value.PlannedDuration.errorMessage=""},j=v(!1),X=r=>{j.value=r},pe=b(()=>x.SerialNumber),Y=b(()=>{const r=x.Ownership;return os(r)}),ae=b(()=>t.crackData.DefectRequirement!="Less than 30 minutes labour and less than $250 in parts"&&m.value.Parts.length==0),ot=()=>{W.value=!1,We.value=!0,Rs(()=>{Mt("partsSection")}),ts("partsSection")},Pt=async r=>{_t.value=!0;const c=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});if(t.plannerApprove?await o.updatePlannerCrackDecline(r):await o.updateCrackDecline(r),c.close(),X(!1),o.IsError){Z.value=o.stateErrorMessage,te.value=!0;return}kt()},kt=()=>{A.value=!0,setTimeout(async()=>{A.value=!1,_t.value=!1,await La()},1e3)};let _t=v(!1);const ra=b(()=>{let r="Crack Information Successfully Submitted";return t.status=="Decline"?(r="Crack Identified Successfully Declined",r):Me.value?r:_t.value?(r="Crack Declined",r):(r="Crack Approved",r)}),na=async()=>{m.value.setAssetNumber(o.SelectedDefectDetailVersion.detail.assetNumber),m.value.setPriority(o.SelectedDefectDetailVersion.detail.priority),m.value.setRaisedBy(o.SelectedDefectDetailVersion.detail.raisedBy),m.value.setDate(o.SelectedDefectDetailVersion.detail.date),m.value.setTitle(o.SelectedDefectDetailVersion.detail.title),m.value.setDescription(o.SelectedDefectDetailVersion.detail.description),m.value.importParts(...$t(o.SelectedDefectDetailVersion.detail.parts)),m.value.importLabours(...$t(o.SelectedDefectDetailVersion.detail.labours)),m.value.importResources(...$t(o.SelectedDefectDetailVersion.detail.resources)),m.value.importSymptoms(...$t(o.SelectedDefectDetailVersion.detail.symptoms)),m.value.importCauses(...$t(o.SelectedDefectDetailVersion.detail.causes)),m.value.setPlannedDuration(o.SelectedDefectDetailVersion.detail.plannedDuration??""),m.value.setInstruction(o.SelectedDefectDetailVersion.detail.instruction),m.value.importPreviousCrack(...$t(o.SelectedDefectDetailVersion.detail.previousCracks)),_e.value=[],xe.value=[],me.value=[],m.value.Symptoms.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");_e.value.push(c[0]),xe.value.push(Wt(r.value)),me.value.push(!0)}else _e.value.push(r.value),xe.value.push(""),me.value.push(!0)}),Ce.value=[],we.value=[],$e.value=[],m.value.Causes.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");Ce.value.push(c[0]),we.value.push(Wt(r.value)),$e.value.push(!0)}else Ce.value.push(r.value),we.value.push(""),$e.value.push(!0)}),ve.value=o.SelectedDefectDetailVersion.detail.priority,Ve.value=m.value.Labours.map(r=>r.position),await o.setCrackImages(o.SelectedDefectDetailVersion.detail.images)},Ot=async r=>{o.setDetailVersion(r.versionDate)&&(F.value=r.versionDate,Oa(),await na())},Mt=r=>{r==="partsSection"?ts("partsSection"):Ka(Qe.value),qe.value=!0,lt(),ps(),ye.value={images:a.cloneDeep(Ne.value),description:a.cloneDeep(t.crackData.Description.value),priority:a.cloneDeep(t.crackData.Priority),instruction:a.cloneDeep(t.crackData.Instruction.value),plannedDuration:a.cloneDeep(t.crackData.PlannedDuration.value),parts:a.cloneDeep(t.crackData.Parts),labours:a.cloneDeep(t.crackData.Labours),resources:a.cloneDeep(t.crackData.Resources),symptoms:a.cloneDeep(t.crackData.Symptoms),causes:a.cloneDeep(t.crackData.Causes),crackLength:a.cloneDeep(t.crackData.CrackLength)}},xt=()=>{var r;We.value=!1,qe.value=!1,k(),(r=$.value)==null||r.resetToLatest(),L.value=!0,va()},mt=r=>is(ft(r)),jt=b(()=>o.IsError),Da=b(()=>"Crack Identified Description"),ia=b(()=>"Crack Repair Instructions / Actions"),Et=r=>{let c=r.keyCode?r.keyCode:r.which;(c<48||c>57)&&c!=46&&r.preventDefault()},$a=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),m.value.setCurrentCrack(c,r.target.value),m.value.validateCurrentCrack(m.value.CrackLength[c])},ua=r=>{m.value.setDescription(r.value),m.value.validateDescription()},Ft=r=>{m.value.setInstruction(r.value),m.value.validateInstruction()},At=r=>{r.preventDefault(),m.value.Priority!=r.target.value&&(Ie.value=!0),m.value.setPriority(r.target.value)},Sa=(r,c)=>{r.preventDefault(),m.value.setPartDescription(c,r.target.value),m.value.validatePartDescription(m.value.Parts[c])},da=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),m.value.setPartQty(c,ft(r.target.value)),m.value.validatePartQty(m.value.Parts[c])},Va=r=>{const{value:c,index:ce}=r;m.value.setPartImage(ce,c)},Ia=r=>{const{value:c,index:ce}=r;m.value.setPartAttachment(ce,c)},Pa=()=>{if(m.value.Parts.every(c=>c.partDescription!==""&&c.qty!=="")){for(const c in m.value.Parts)if(Object.hasOwn(m.value.Parts,c)){const ce=m.value.Parts[c];if(!ce.partNumberValidation.isValid||!ce.descriptionValidation.isValid||!ce.qtyValidation.isValid)return}}else{m.value.validateParts();return}m.value.addPart({partNumber:"",partDescription:"",qty:""})},Ra=r=>{m.value.removeParts(r)},Ua=r=>{m.value.setLabourActivity(r,Ve.value[r]),m.value.validateLaboursActivity(m.value.Labours[r])},Aa=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),m.value.setLabourQty(c,ft(r.target.value)),m.value.validateLaboursQty(m.value.Labours[c]),z(c)},U=(r,c)=>{r.preventDefault(),r.target.value=ct(r.target.value),m.value.setLabourHireEach(c,ft(r.target.value)),m.value.validateLaboursHireEach(m.value.Labours[c]),z(c)},z=r=>{if(!m.value.Labours[r].qty||!m.value.Labours[r].hireEach)return;m.value.Labours[r].totalHoursValidation.message="",m.value.Labours[r].totalHoursValidation.isValid=!0;const c=+m.value.Labours[r].qty,ce=+m.value.Labours[r].hireEach,Ye=c*ce;m.value.Labours[r].qty.includes(".")||m.value.Labours[r].hireEach.includes(".")?m.value.setLabourTotalHours(r,Ye.toFixed(2).toString()):m.value.setLabourTotalHours(r,Ye.toString())},Be=()=>{if(m.value.Labours.every(c=>c.position!==""&&c.qty!==""&&c.hireEach!==""&&c.totalHours!=="")){for(const c in m.value.Labours)if(Object.hasOwn(m.value.Labours,c)){const ce=m.value.Labours[c];if(!ce.positionValidation.isValid||!ce.qtyValidation.isValid||!ce.hireEachValidation.isValid)return}}else{m.value.validateLabours();return}m.value.addLabour({position:"",qty:"",hireEach:"",totalHours:""})},dt=r=>{Ve.value.splice(r,1),m.value.removeLabours(r)},Ct=(r,c)=>{r.preventDefault(),m.value.setResources(c,r.target.value),!(c==0&&m.value.Resources[c].value=="")&&m.value.validateResource(m.value.Resources[c])},Xt=()=>{if(!m.value.Resources.every(c=>c.value!=="")){m.value.validateResourcesAdd();return}m.value.addResource("")},Zt=r=>{m.value.removeResource(r),m.value.validateResourcesRemove()},Ba=r=>{Ce.value[r]==="Other"&&(we.value[r]="",$e.value[r]=!0),m.value.setCauses(r,Ce.value[r]),m.value.validateCause(m.value.Causes[r])},Ht=r=>{const c=r.index;typeof c>"u"||c<0||($e.value[c]=r.value!="",we.value[c]=r.value)},ca=()=>{for(const ce in m.value.Causes)if(Object.hasOwn(m.value.Causes,ce)&&!m.value.Causes[ce].isValid)return;if(!m.value.Causes.every(ce=>ce.value!=="")){m.value.validateCauses();return}const c=Ce.value.length-1;if(Ce.value[c]==="Other")if(we.value[c])$e.value[c]=!0;else{$e.value[c]=!1;return}m.value.addCauses("")},ke=r=>{Ce.value.splice(r,1),we.value.splice(r,1),$e.value.splice(r,1),m.value.removeCauses(r)},Te=r=>{_e.value[r]==="Other"&&(xe.value[r]="",me.value[r]=!0),m.value.setSymptom(r,_e.value[r]),m.value.validateSymptom(m.value.Symptoms[r])},Le=r=>{const c=r.index;typeof c>"u"||c<0||(me.value[c]=r.value!="",xe.value[c]=r.value)},cs=()=>{for(const ce in m.value.Symptoms)if(Object.hasOwn(m.value.Symptoms,ce)&&!m.value.Symptoms[ce].isValid)return;if(!m.value.Symptoms.every(ce=>ce.value!=="")){m.value.validateSymptoms();return}const c=_e.value.length-1;if(_e.value[c]==="Other")if(xe.value[c])me.value[c]=!0;else{me.value[c]=!1;return}m.value.addSymptom("")},vs=r=>{_e.value.splice(r,1),xe.value.splice(r,1),me.value.splice(r,1),m.value.removeSymptom(r)},ps=()=>{L.value=!1,m.value.Resources.length==0&&m.value.addResource("")},va=()=>{m.value.Resources.length==1&&m.value.Resources[0].value==""&&m.value.removeResource(0)},Ta=()=>{for(const c in m.value.Symptoms)if(Object.hasOwn(m.value.Symptoms,c)&&!m.value.Symptoms[c].isValid)return!1;const r=_e.value.length-1;return _e.value[r]==="Other"?xe.value[r]?me.value[r]=!0:me.value[r]=!1:me.value[r]=!0,me.value[r]},ms=()=>{for(const c in m.value.Causes)if(Object.hasOwn(m.value.Causes,c)&&!m.value.Causes[c].isValid)return!1;const r=Ce.value.length-1;return Ce.value[r]==="Other"?we.value[r]?$e.value[r]=!0:$e.value[r]=!1:$e.value[r]=!0,$e.value[r]},fs=async()=>{var r;m.value.validateDefectForm(),(r=m.value)!=null&&r.IsValid&&Ta()&&ms()?W.value=!0:Fa()},ys=()=>{m.value.Symptoms.forEach((r,c)=>{r.value=r.value.includes("Other")?`Other:${xe.value[c]}`:r.value})},bs=r=>{r.preventDefault(),r.target.value=ct(r.target.value),m.value.setPlannedDuration(ft(r.target.value)),m.value.validatePlannedDuration()},hs=()=>{m.value.Causes.forEach((r,c)=>{r.value=r.value.includes("Other")?`Other:${we.value[c]}`:r.value})},gs=async r=>{W.value=!1,K.value=!1;const c=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});if(ys(),hs(),m.value.setIsComplete(r.isComplete),!Me.value)if(y.SelectedFitter.name){if(qe.value){const ce=await o.updateCrackFitter(JSON.stringify(y.SelectedFitter),"");if(jt.value){Z.value=ce,c.close(),te.value=!0;return}}}else if(t.plannerApprove){const ce=await o.updateCrackDetail();if(jt.value){Z.value=ce,c.close(),te.value=!0;return}o.setCurrentUserGroup("Planner"),await o.updatePlannerCrackAcknowledge()}else{const ce=await o.updateCrackDetail();if(jt.value){Z.value=ce,c.close(),te.value=!0;return}o.setCurrentUserGroup("Supervisor"),await o.updateCrackAcknowledge()}if(jt.value){c.close();return}Ie.value===!0?(o.setDefectData(t.headerId??""),o.setNewDefectKey()):o.setCrackNewData(),await o.getDefectsData(t.workOrder??""),c.close(),kt()},ks=()=>{var r;va(),W.value=!1,K.value=!1,(r=$.value)==null||r.resetToLatest(),L.value=!0},La=async()=>{ee.value=!1,te.value=!1,Z.value!=la.NO_NETWORK_VIEW&&(za(),va(),u("onRefreshData"))},pa=r=>L.value||r==0?"hidden":"",za=()=>{o.setDetailVersion(""),qe.value=!1,l.clearCurrent(),ve.value="",Ve.value=[""],_e.value=[""],Ce.value=[""],xe.value=[""],me.value=[!0],we.value=[""],$e.value=[!0],L.value=!0,We.value=!1,u("closeForm")},Na=()=>{var r,c;return((c=(r=o.SelectedDefectDetailVersion)==null?void 0:r.detail)==null?void 0:c.isComplete)??!0},Oa=(r=!1)=>{ea.value=Ja(),V.value=r?t.isComplete:Na()},Ja=()=>{var r;return F.value?(r=st.value.find(c=>c.createdDate==F.value))==null?void 0:r.action:t.status},ea=v(Ja()),ma=v(""),_s=()=>{Oa(!0),I.value=o.referencePhoto.title,l.setShowCloseButton(!1),Ka(Qe.value),ve.value=t.crackData.Priority,le.value=t.crackData.PlannedDuration.value,Ve.value=t.crackData.Labours.map(r=>r.position),va(),_e.value=[],xe.value=[],me.value=[],t.crackData.Symptoms.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");_e.value.push(c[0]),xe.value.push(Wt(r.value)),me.value.push(!0)}else _e.value.push(r.value),xe.value.push(""),me.value.push(!0)}),Ce.value=[],we.value=[],$e.value=[],t.crackData.Causes.forEach(r=>{if(r.value.indexOf(":")>-1){const c=r.value.split(":");Ce.value.push(c[0]),we.value.push(Wt(r.value)),$e.value.push(!0)}else Ce.value.push(r.value),we.value.push(""),$e.value.push(!0)}),Ps(f.value),t.plannerApprove&&(ma.value=ve.value)},xs=()=>{o.resetDetailVersion(),l.setShowCloseButton(!1),L.value?u("closeForm"):rt.value?at.value=!0:u("closeForm")},Cs=()=>{at.value=!1},ws=()=>{at.value=!1,u("closeForm")};return(r,c)=>{const ce=he("el-collapse-item"),Ye=he("el-collapse"),yt=he("el-image"),ut=he("Label"),ta=he("el-option"),Ma=he("el-select"),fa=he("el-dialog");return i(),d(ne,null,[p(fa,{modelValue:oe.value,"onUpdate:modelValue":c[14]||(c[14]=aa=>oe.value=aa),"custom-class":`crackform el-defect-crack-form-custom edit-crack-yes ${Qe.value}`,width:"90%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,onClosed:za,"before-close":xs,onOpened:_s,"destroy-on-close":!0},{title:O(()=>[e("div",Bv,[e("div",null,[Tv,e("span",{class:"el-dialog__title task-title",innerHTML:E(Yt)(m.value.Title),ref_key:"defectDetailRef",ref:f},null,8,Lv)]),e("div",Nv,[e("div",{class:se(["rounded d-flex justify-content-center align-items-center header-badge text-badge mx-2",[s.crackData.Type=="YES"?"yellowish yellowish-text":"blueish blueish-text"]])},[e("div",null,M(s.crackData.Type=="YES"?"Repair required":"Monitor"),1)],2),ea.value=="Decline"?(i(),d("div",Ov,jv)):ea.value=="Acknowledge"?(i(),d("div",Ev,Hv)):D("",!0),e("div",{class:se(["rounded d-flex justify-content-center align-items-center header-badge",V.value?"green":"red"])},[qv,e("div",Kv,M(V.value?"Completed":"Incomplete"),1)],2)])])]),default:O(()=>{var aa,ja;return[e("div",null,[p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:T.value,"onUpdate:modelValue":c[0]||(c[0]=q=>T.value=q)},{default:O(()=>[p(ce,{title:"Changes and Approval History",name:"History"},{default:O(()=>[e("div",Gv,[p(il,{activities:st.value},null,8,["activities"]),Wv,p(ul,{"version-dates":it.value,onChangeVersion:Ot,ref_key:"defectVersion",ref:$},null,8,["version-dates"])])]),_:1})]),_:1},8,["modelValue"]),Yv,e("div",zv,[e("div",Jv,[e("div",Qv,[e("div",Xv,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:m.value.AssetNumber},null,8,Zv),ep])]),e("div",tp,[e("div",ap,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:pe.value},null,8,sp),lp])]),e("div",op,[e("div",rp,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:Y.value},null,8,np),ip])])])]),e("div",up,[p(js,{id:"crack",disabled:L.value,"allow-delete":!L.value,"is-monitoring":Je.value,"is-mandatory":!1},null,8,["disabled","allow-delete","is-monitoring"])]),E(o).referencePhoto.blob&&E(o).referencePhoto.blob!=""?(i(),ue(Ye,{key:0,class:"task-group general-accordion py-1 px-5",modelValue:I.value,"onUpdate:modelValue":c[1]||(c[1]=q=>I.value=q)},{default:O(()=>[p(ce,{title:E(o).referencePhoto.title,name:E(o).referencePhoto.title},{default:O(()=>[e("div",dp,[p(yt,{src:E(o).referencePhoto.blob},null,8,["src"])])]),_:1},8,["title","name"])]),_:1},8,["modelValue"])):D("",!0),e("div",cp,[p(ht,{value:(ja=(aa=m.value)==null?void 0:aa.Description)==null?void 0:ja.value,label:Da.value,name:"defectPlaceholder",errorMessage:m.value.Description.errorMessage,"is-valid":m.value.Description.isValid,max:255,disabled:L.value,onHandleChange:ua},null,8,["value","label","errorMessage","is-valid","disabled"])]),e("div",vp,[e("div",pp,[e("div",mp,[e("div",fp,[e("input",{type:"text",class:"form-control",disabled:"",value:m.value.RaisedBy},null,8,yp),bp])])])]),e("div",hp,[e("div",gp,[e("div",kp,[e("div",_p,[e("input",{type:"text",class:"form-control",disabled:"",value:m.value.Date},null,8,xp),Cp])]),e("div",wp,[e("div",Dp,[e("div",$p,[e("input",{type:"text",class:"form-control",onKeypress:Et,value:mt(m.value.PlannedDuration.value),disabled:L.value,pattern:"[0-9]*",inputmode:"numeric",onInput:bs},null,40,Sp),Vp]),m.value.PlannedDuration.isValid?D("",!0):(i(),d("div",Ip,[p(ut,{class:"error-label"},{default:O(()=>[be(M(m.value.PlannedDuration.errorMessage),1)]),_:1})]))]),e("div",Pp,[p(ut,null,{default:O(()=>[be("Hours")]),_:1})])])])]),e("div",Rp,[p(ht,{value:m.value.Instruction.value,label:ia.value,name:"InstructionPlaceholder",errorMessage:m.value.Instruction.errorMessage,"is-valid":m.value.Instruction.isValid,max:255,disabled:L.value,onHandleChange:Ft},null,8,["value","label","errorMessage","is-valid","disabled"])]),e("div",Up,[Ap,Bp,(i(!0),d(ne,null,Pe(s.crackData.CrackLength,(q,re)=>(i(),d("div",{key:q,class:"row my-1 d-flex align-items-center"},[e("div",Tp,M(E(Ll)(q)),1),e("div",Lp,M(mt(q.previousCrack))+" "+M(q.previousCrack!="-"?"mm":"-"),1),e("div",Np,[e("input",{type:"text",class:"form-control",value:mt(q.currentCrack),onInput:ie=>$a(ie,re),onKeypress:Et,pattern:"[0-9]*",inputmode:"numeric",disabled:L.value},null,40,Op),m.value.CrackLength[re].isValid?D("",!0):(i(),d("div",Mp,[p(ut,{class:"error-label"},{default:O(()=>[be(M(m.value.CrackLength[re].errorMessage),1)]),_:2},1024)]))]),jp]))),128))]),p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:g.value,"onUpdate:modelValue":c[6]||(c[6]=q=>g.value=q)},{default:O(()=>[p(ce,{title:"Priority",name:"Priority"},{default:O(()=>[Ep,e("div",Fp,[e("div",Hp,[e("div",qp,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[2]||(c[2]=q=>ve.value=q),value:"P1",onChange:Ae(At,["prevent"]),disabled:L.value},null,40,Kp),[[wt,ve.value]]),Gp])]),Wp,Yp]),e("div",zp,[e("div",Jp,[e("div",Qp,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[3]||(c[3]=q=>ve.value=q),value:"P2",onChange:Ae(At,["prevent"]),disabled:L.value},null,40,Xp),[[wt,ve.value]]),Zp])]),em,tm]),e("div",am,[e("div",sm,[e("div",lm,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[4]||(c[4]=q=>ve.value=q),value:"P3",onChange:Ae(At,["prevent"]),disabled:L.value},null,40,om),[[wt,ve.value]]),rm])]),nm,im]),e("div",um,[e("div",dm,[e("div",cm,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":c[5]||(c[5]=q=>ve.value=q),value:"P4",onChange:Ae(At,["prevent"]),disabled:L.value},null,40,vm),[[wt,ve.value]]),pm])]),mm,fm])]),_:1})]),_:1},8,["modelValue"]),ym,p(Ye,{class:"task-group general-accordion py-1 px-5 parts-collapse",modelValue:N.value,"onUpdate:modelValue":c[7]||(c[7]=q=>N.value=q)},{default:O(()=>[p(ce,{title:"Parts",name:"Parts",id:"partsSection"},{default:O(()=>[We.value?(i(),ue(dl,{key:0})):D("",!0),bm,(i(!0),d(ne,null,Pe(m.value.Parts,(q,re)=>(i(),d("div",{key:q,class:"row p-3 m-1 priority-container px-0"},[e("div",hm,[e("div",gm,[Ge(e("input",{type:"text",class:"form-control","onUpdate:modelValue":ie=>m.value.Parts[re].partNumber=ie,disabled:L.value},null,8,km),[[Rt,m.value.Parts[re].partNumber]]),q.partNumberValidation.isValid?D("",!0):(i(),d("div",_m,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.partNumberValidation.message),1)]),_:2},1024)]))])]),e("div",xm,[e("div",Cm,[e("input",{type:"text",class:"form-control",value:q.partDescription,onChange:ie=>Sa(ie,re),disabled:L.value},null,40,wm),q.descriptionValidation.isValid?D("",!0):(i(),d("div",Dm,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.descriptionValidation.message),1)]),_:2},1024)]))])]),e("div",$m,[e("div",Sm,[e("div",Vm,[e("input",{class:"form-control",value:mt(q.qty),onInput:ie=>da(ie,re),disabled:L.value,pattern:"[0-9]*",inputmode:"numeric",onKeypress:Et},null,40,Im)])]),q.qtyValidation.isValid?D("",!0):(i(),d("div",Pm,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.qtyValidation.message),1)]),_:2},1024)]))]),e("div",Rm,[e("div",Um,[p(Fs,{index:re,"item-value":q.images||[],onHandleChangeImage:Va,"is-disabled":L.value},null,8,["index","item-value","is-disabled"])])]),e("div",Am,[e("div",Bm,[p(Hs,{index:re,"item-value":q.attachment||[],onHandleChangeAttachment:Ia,"is-disabled":L.value},null,8,["index","item-value","is-disabled"])]),e("div",{class:se(["position-absolute",L.value?"hidden":""]),style:{top:"10px",right:"0px"}},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>Ra(re),["prevent"])},null,8,Tm)],2)])]))),128)),e("div",Lm,[e("div",Nm,[be(" Check Partbook "),e("a",{href:E(x).statePartReference.linkAddress,target:"_blank",class:"fw-bolder",style:{color:"#18AF4A"}},[Mm,be(" "+M(E(x).statePartReference.brand),1)],8,Om)]),Ge(e("button",{class:"my-3 btn-add-new",onClick:Pa},[jm,be(" Add more parts ")],512),[[Xs,!L.value]])])]),_:1})]),_:1},8,["modelValue"]),Em,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:h.value,"onUpdate:modelValue":c[9]||(c[9]=q=>h.value=q)},{default:O(()=>[p(ce,{title:"Labour",name:"Labour"},{default:O(()=>[Fm,(i(!0),d(ne,null,Pe(m.value.Labours,(q,re)=>(i(),d("div",{key:q,class:"row p-3 m-1 priority-container px-0"},[e("div",Hm,[e("div",qm,[p(Ma,{modelValue:Ve.value[re],"onUpdate:modelValue":ie=>Ve.value[re]=ie,filterable:"",placeholder:"Select Labour",onChange:ie=>Ua(re),class:"w-100",disabled:L.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(w).positionOption,ie=>(i(),ue(ta,{key:ie.value,label:ie.label,value:ie.label},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),q.positionValidation.isValid?D("",!0):(i(),d("div",Km,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.positionValidation.message),1)]),_:2},1024)]))])]),e("div",Gm,[e("div",Wm,[e("input",{class:"form-control",value:mt(q.qty),pattern:"[0-9]*",inputmode:"numeric",onKeypress:c[8]||(c[8]=(...ie)=>E(ga)&&E(ga)(...ie)),onInput:ie=>Aa(ie,re),disabled:L.value},null,40,Ym),q.qtyValidation.isValid?D("",!0):(i(),d("div",zm,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.qtyValidation.message),1)]),_:2},1024)]))])]),e("div",Jm,[e("div",Qm,[e("input",{class:"form-control",value:mt(q.hireEach),pattern:"[0-9]*",inputmode:"numeric",onKeypress:Et,onInput:ie=>U(ie,re),disabled:L.value},null,40,Xm),q.hireEachValidation.isValid?D("",!0):(i(),d("div",Zm,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.hireEachValidation.message),1)]),_:2},1024)]))])]),e("div",ef,[e("div",tf,[e("div",af,[e("input",{class:"form-control",value:mt(q.totalHours),disabled:""},null,8,sf),e("div",{class:se(["ms-4 d-flex align-items-center",pa(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>dt(re),["prevent"])},null,8,lf)],2)])]),q.totalHoursValidation.isValid?D("",!0):(i(),d("div",of,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.totalHoursValidation.message),1)]),_:2},1024)]))])]))),128)),L.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Be},[rf,be(" Add more labour ")]))]),_:1})]),_:1},8,["modelValue"]),nf,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:H.value,"onUpdate:modelValue":c[10]||(c[10]=q=>H.value=q)},{default:O(()=>[p(ce,{title:"Other Resource (optional)",name:"Other Resource (optional)"},{default:O(()=>[(i(!0),d(ne,null,Pe(m.value.Resources,(q,re)=>(i(),d("div",{class:"p-2 d-flex",key:q.value},[e("div",uf,[e("div",df,[e("input",{type:"text",class:"form-control",value:q.value,placeholder:`Resource ${re+1}`,onChange:ie=>Ct(ie,re),disabled:L.value},null,40,cf),e("div",{class:se(["ms-4 d-flex align-items-center",pa(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>Zt(re),["prevent"])},null,8,vf)],2)]),q.isValid?D("",!0):(i(),d("div",pf,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))])]))),128)),L.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Xt},[mf,be(" Add new resource ")]))]),_:1})]),_:1},8,["modelValue"]),ff,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:P.value,"onUpdate:modelValue":c[11]||(c[11]=q=>P.value=q)},{default:O(()=>[p(ce,{title:"Symptom",name:"Symptom"},{default:O(()=>[(i(!0),d(ne,null,Pe(m.value.Symptoms,(q,re)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:q.value},[e("div",yf,[e("div",bf,[p(Ma,{modelValue:_e.value[re],"onUpdate:modelValue":ie=>_e.value[re]=ie,placeholder:"Select Symptom",filterable:"",onChange:ie=>Te(re),class:"w-100",disabled:L.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(S).Symptoms,ie=>(i(),ue(ta,{key:ie.id,label:ie.symptom,value:ie.symptom},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),_e.value[re]==="Other"?(i(),d("div",hf,[p(ht,{value:xe.value[re],label:"Description",name:"Description",errorMessage:"Required","is-valid":me.value[re],index:re,disabled:L.value,onHandleChange:Le},null,8,["value","is-valid","index","disabled"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",pa(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>vs(re),["prevent"])},null,8,gf)],2)]),q.isValid?D("",!0):(i(),d("div",kf,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))]))),128)),L.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:Ae(cs,["prevent"])},[_f,be(" Add another symptom ")]))]),_:1})]),_:1},8,["modelValue"]),xf,p(Ye,{class:"task-group general-accordion py-1 px-5",modelValue:R.value,"onUpdate:modelValue":c[12]||(c[12]=q=>R.value=q)},{default:O(()=>[p(ce,{title:"Cause",name:"Cause"},{default:O(()=>[(i(!0),d(ne,null,Pe(m.value.Causes,(q,re)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:q.value},[e("div",Cf,[e("div",wf,[p(Ma,{modelValue:Ce.value[re],"onUpdate:modelValue":ie=>Ce.value[re]=ie,placeholder:"Select Cause",filterable:"",onChange:ie=>Ba(re),class:"w-100",disabled:L.value},{default:O(()=>[(i(!0),d(ne,null,Pe(E(S).Causes,ie=>(i(),ue(ta,{key:ie.id,label:ie.causes,value:ie.causes},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]),Ce.value[re]==="Other"?(i(),d("div",Df,[p(ht,{value:we.value[re],label:"Description",name:"Description",errorMessage:"Required","is-valid":$e.value[re],index:re,onHandleChange:Ht,disabled:L.value},null,8,["value","is-valid","index","disabled"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",pa(re)])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(ie=>ke(re),["prevent"])},null,8,$f)],2)]),q.isValid?D("",!0):(i(),d("div",Sf,[p(ut,{class:"error-label"},{default:O(()=>[be(M(q.errorMessage),1)]),_:2},1024)]))]))),128)),L.value?D("",!0):(i(),d("button",{key:0,class:"my-3 btn-add-new",onClick:ca},[Vf,be(" Add another cause ")]))]),_:1})]),_:1},8,["modelValue"]),nt.value?(i(),d("div",If,[qe.value?D("",!0):(i(),d("button",{key:0,class:"btn btn-outline w-100",onClick:c[13]||(c[13]=Ae(()=>X(!0),["prevent"])),style:{border:"1px solid #FF4842",background:"white","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"#FF4842"}},"Decline")),qe.value?(i(),d("button",{key:2,class:"btn btn-light w-100",onClick:Ae(xt,["prevent"]),style:{background:"#FFFFFF",border:"1px solid rgba(145, 158, 171, 0.24)","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"black"}},"Cancel")):(i(),d("button",{key:1,class:"ms-3 btn btn-warning w-100",onClick:Ae(Mt,["prevent"]),style:{background:"#FFC107","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"black"}},"Modify")),e("button",{class:"ms-3 btn btn-success w-100",onClick:Ae(fs,["prevent"]),style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white"}},"Approve")])):D("",!0)]),p(zt,{visibility:at.value,caption:"Are you sure want to close the crack form? <br /> Note: By closing the crack form, you will lose your crack data that you have already inputted.",onOnNoConfirm:Cs,onOnYesConfirm:ws},null,8,["visibility"]),p(cl,{show:W.value,"parts-warning":ae.value,onAddParts:ot,onClose:ks,onSubmit:gs},null,8,["show","parts-warning"]),p(_a,{show:ee.value,onClose:La,message:ra.value},null,8,["show","message"]),p(_a,{show:te.value,onClose:La,message:Z.value,icon:"/media/svg/dma/alert.svg"},null,8,["show","message"]),p(tl,{visibility:j.value,formTitle:"Are you sure want to decline this defect information?","task-title":m.value.Title,onCloseForm:X,onSubmitDecline:Pt},null,8,["visibility","task-title"])]}),_:1},8,["modelValue","custom-class"]),p(Es,{show:A.value,message:ra.value},null,8,["show","message"])],64)}}}),Rf=tt(Pf,[["__scopeId","data-v-615ea8be"]]),Vt=s=>(vt("data-v-11e9b9f0"),s=s(),pt(),s),Uf={class:"mt-5 ps-0"},Af={class:"row px-2 item mx-1 w-100 defect-panel-header"},Bf=Vt(()=>e("div",{class:"col-1 column-sm-12-percent column-md-7-percent column-lg-10-percent column-xl-6-percent text-center align-items-center d-flex justify-content-center"},"Task",-1)),Tf=Vt(()=>e("div",{class:"col align-items-center d-flex text-break"},"Task Description",-1)),Lf=Vt(()=>e("div",{class:"text-break col-1 text-center column-sm-11-percent column-md-10-percent column-lg-5-percent align-items-center d-flex justify-content-center flex-basis-80"},"Priority",-1)),Nf=Vt(()=>e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},"Review Status",-1)),Of=Vt(()=>e("div",{class:"col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center"},"Work Order",-1)),Mf=Vt(()=>e("div",{class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},"Repair Status",-1)),jf={key:0,class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex"},Ef={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},Ff=Vt(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),Hf=[Ff],qf={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},Kf={class:"col-1 column-sm-12-percent column-md-7-percent column-xl-6-percent align-items-center d-flex text-break justify-content-center"},Gf={class:"col align-items-center d-flex text-break"},Wf=["innerHTML"],Yf=["onClick"],zf={style:{"font-weight":"600",color:"white"}},Jf={class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},Qf=["onClick"],Xf=["onClick"],Zf={class:"row"},ey={class:"col-8 col-md-8 d-flex flex-column pe-0"},ty=["onUpdate:modelValue","disabled"],ay={key:0,class:"ms-1 d-flex align-items-center"},sy=Vt(()=>e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),ly=Vt(()=>e("span",null,"Loading...",-1)),oy=[sy,ly],ry={class:"col-4 col-md-3 ps-0 pe-1"},ny=["disabled","onClick"],iy=Vt(()=>e("i",{class:"fa fa-save"},null,-1)),uy=[iy],dy=Vt(()=>e("img",{src:xa,alt:""},null,-1)),cy=[dy],vy={key:0,class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex"},py=["onClick"],my={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},fy=Ue({__name:"CrackPanel",props:{viewOnly:{required:!1,type:Boolean,default:!1},supervisor:{required:!1,type:Boolean,default:!0},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1},viewIsDownload:{required:!1,type:Boolean,default:!1},isApproval:{type:Boolean,default:!1},title:{default:"Repairs Completed"},isIdentifiedDefectMenu:{required:!1,type:Boolean,default:!1}},emits:["onRefreshData","onGetPositionY"],setup(s,{emit:n}){const t=s,u=Lt(),l=Ga(),o=Jt(),w=Wa(),S=gt(),x=n,_=v("Crack Identified"),y=v(!1),T=v(!0),I=v([]),g=v([]),N=v(""),h=v(""),H=v(""),P=v(!1),R=v(),$=v(""),V=v(!1),L=Q=>u.getCrackDetail(Q),A=v(!1),te=v(),Z=()=>{A.value=!1},ee=Q=>{A.value=!0,te.value={headerId:Q}},W=v(!1),K=()=>{W.value=!0,V.value=!1,u.stateErrorMessage!=la.NO_NETWORK_VIEW&&(W.value=!1,u.resetErrorStatus(),je())},oe=()=>{w.setIsAttachmentIncludeDownload(!1),Z(),f()},m=()=>{w.setIsAttachmentIncludeDownload(!0),Z(),f()},f=async()=>{$.value="";const Q=a.cloneDeep(L(te.value.headerId)),de=u.getCrackHeader(te.value.headerId);if(Q&&de){const Se=await u.getReferencePhoto(Q.detail.referencePhoto),B={title:Q.detail.referenceSection,blob:Se,dimension:u.referencePhoto.dimension,id:Q.detail.referencePhoto};Ls({header:de,detail:Q.detail,referencePhoto:B,serialNumber:o.SerialNumber,approvalData:{approvedBy:de.approvedBy,approvedDate:de.approvedDate},ownership:o.Ownership,unitNumber:l.SelectedDefectSheet.unitNumber})&&($.value=te.value.headerId,R.value.handleDataFetch())}},ve=Q=>Q?Ns(Q):!1,Ve=Q=>Q=="Acknowledge",_e=()=>{u.updateDownloadHistory($.value,"crack")},Ce=async(Q,de)=>{if(!t.supervisor||!t.isApproval||!de)return;const Se=u.ApprovalData.CrackHeaders.find(B=>B.id===Q);if(Se){const B=Se.repairedStatus=="Repaired"?"Not-Repaired":"Repaired";await u.updateCrackRepairedStatus(Q,B)}},xe=Q=>{let de="";return Q.isRevised=="true"&&(de="soft-yellow-background"),de},me=b(()=>{const Q=["P3","P4"];return u.ApprovalData.CrackHeaders.filter(de=>u.ApprovalData.CrackDetails.find(B=>de.id==B.defectHeaderId&&(B.detail.isComplete??!0)==(t.title=="Repairs Completed")&&(t.supervisor||t.viewOnly?!0:Q.includes(B.detail.priority)))!=null)}),we=b(()=>u.DataFetched),$e=b(()=>{var Q;return(Q=u.DefectPictures[N.value])==null?void 0:Q.map(de=>({fileName:de,url:""}))}),Ie=Q=>{let de="red  ";return de=u.getCrackCompleteStatus(Q.id)?"green":"red",de},Me=Q=>{Q.target.value.length>=15&&Q.preventDefault();let de=Q.keyCode?Q.keyCode:Q.which;(de<48||de>57)&&Q.preventDefault()},qe=Q=>{Q.preventDefault();const de=Q.target,Se=ct(de.value).replaceAll(".","");de.value=Se},at=Q=>Q.plannerStatus=="Decline"||Q.status=="Decline"||Q.priority===void 0?"invisible":"",Qe=Q=>Q.plannerStatus=="Decline"||Q.status=="Decline"?"invisible":"",We=(Q,de,Se="")=>{let B=!0;const C=de==null?void 0:de.find(ye=>ye.id===Q);if(C){if(Se)return!0;if(B=!1,t.plannerApprove){if((C.priority=="P3"||C.priority=="P4")&&C.generalStatus=="Acknowledge"&&(B=!1),(C.priority=="P1"||C.priority=="P2")&&C.defectWorkorder)return!0;if((C.priority=="P1"||C.priority=="P2")&&!C.defectWorkorder)return!1}else{if(C.priority=="P3"||C.priority=="P4"&&C.defectWorkorder)return!0;if(C.priority=="P3"||C.priority=="P4"&&!C.defectWorkorder)return!1;(C.priority=="P1"||C.priority=="P2")&&C.generalStatus=="Acknowledge"&&(B=!1)}if(B||(B=t.plannerApprove?C.plannerStatus!="Acknowledge":C.status!="Acknowledge",B))return B;B=!(!C.defectWorkorder||C.defectWorkorder=="")}return B},F=(Q,de)=>{let Se="light-yellow color-dark-yellow";const B=de==null?void 0:de.find(C=>C.id===Q);if(t.supervisor){if(B){if(["P3","P4"].includes((B==null?void 0:B.priority)??"")&&!t.isIdentifiedDefectMenu)return"light-green color-dark-green";Se=B.generalStatus==="Acknowledge"?"light-green color-dark-green":"light-yellow color-dark-yellow",B.priority===void 0&&(Se="light-green color-dark-green")}}else if(B){switch(B.generalStatus){case"Submited":Se="light-yellow color-dark-yellow";break;case"Acknowledge":Se="light-green color-dark-green";break}B.priority===void 0&&(Se="light-green color-dark-green")}return Se};Xe(we,Q=>{Q===!0&&(g.value=[],me.value.forEach(de=>{g.value.push(de.defectWorkorder)}))}),Nt(()=>{we.value&&(g.value=[],me.value.forEach(Q=>{g.value.push(Q.defectWorkorder)}))});const le=Q=>{let de=Q.createdBy.name,Se=Q.updatedDate!=""?Q.updatedDate:Q.createdDate;const B=u.ApprovalData.CrackDetails.find(C=>C.defectHeaderId==Q.id);return B&&B.otherFitterUpdatedBy&&(de=B.otherFitterUpdatedBy.name,ka(B.updatedDate)>ka(Se)&&(Se=B.updatedDate)),`${de}, ${Se}`},J=async Q=>{x("onGetPositionY"),S.setCurrent("crack"),await u.setCrackData(Q),u.setCrackGeneralStatus(Q),T.value=u.getCrackCompleteStatus(Q),t.plannerApprove&&u.HeaderStatus!="Decline"&&u.updateHeaderCrack(Q),h.value=Q,t.fitterId?H.value=l.SelectedWorkOrder:H.value=l.SelectedDefectSheet.workOrder,y.value=!0},G=async(Q,de)=>{g.value[de]===""||!g.value[de]||(I.value[de]=!0,await u.updateCrackMO(Q,g.value[de]),I.value[de]=!1,u.IsError&&(V.value=!0))},fe=()=>{y.value=!1},ge=()=>{P.value=!1},je=()=>{x("onRefreshData")};return(Q,de)=>{const Se=he("el-collapse-item"),B=he("el-collapse");return i(),d(ne,null,[p(oo,{ref_key:"downloadPdfDefect",ref:R,onOnDownloadFinish:_e},null,512),e("div",Uf,[p(B,{class:"task-group general-accordion py-1 px-5 testing",modelValue:_.value,"onUpdate:modelValue":de[0]||(de[0]=C=>_.value=C)},{default:O(()=>[p(Se,{title:`Crack Identified - ${s.title}`,name:"Crack Identified"},{default:O(()=>[e("div",Af,[Bf,Tf,Lf,Nf,Of,Mf,s.viewIsDownload?(i(),d("div",jf)):D("",!0)]),me.value.length<1?(i(),d("div",Ef,Hf)):(i(!0),d(ne,{key:1},Pe(me.value,(C,ye)=>(i(),d("div",{key:C.id,class:se(["item px-2 my-2 mx-1",xe(C)])},[e("div",qf,[e("div",Kf,M(C.taskNo),1),e("div",Gf,[e("span",{class:"text-break defect-identified-task",innerHTML:E(Yt)(C.taskDesc)},null,8,Wf)]),e("div",{class:se(["col-1 justify-content-center column-sm-11-percent column-md-11-percent column-xl-5-percent align-items-center d-flex flex-basis-80",Qe(C)])},[e("div",{class:se(["little-box d-flex justify-content-center align-items-center",E(es)(C.priority)]),style:{"margin-top":"6px"},onClick:Re=>Ce(C.id,C.priority)},[e("span",zf,M(C.priority),1)],10,Yf)],2),e("div",Jf,[C.plannerStatus=="Decline"||C.status=="Decline"?(i(),d("div",{key:0,class:"label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center red-bg text-dark-red cursor-pointer",onClick:Re=>J(C.id)}," Declined ",8,Qf)):(i(),d("div",{key:1,class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",F(C.id,me.value)]),onClick:Re=>J(C.id)},M(C.isRevised=="true"?"Revision Approval":"Detailed Information"),11,Xf))]),e("div",{class:se(["col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center",at(C)])},[e("div",Zf,[e("div",ey,[Ge(e("input",{type:"text",class:"form-control mou-input","onUpdate:modelValue":Re=>g.value[ye]=Re,autocomplete:"off",placeholder:"Input Work Order",onKeypress:Me,onInput:Ae(qe,["prevent"]),disabled:We(C.id,me.value,s.fitterId)},null,40,ty),[[Rt,g.value[ye]]]),I.value[ye]?(i(),d("div",ay,oy)):D("",!0)]),e("div",ry,[e("button",{disabled:We(C.id,me.value,s.fitterId),onClick:Re=>G(C.id,ye),class:"btn btn-sm btn-success ms-2 d-flex justify-content-center align-items-center",style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white",width:"46px",height:"40px"}},uy,8,ny)])])],2),e("div",{class:se(["col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",Qe(C)])},[e("div",{class:se(["mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center",[Ie(C)]]),style:{"margin-top":"6px"}},cy,2)],2),s.viewIsDownload?(i(),d("div",vy,[Ve(s.plannerApprove?C.plannerStatus:C.status)?(i(),d("img",{key:0,onClick:Re=>ee(C.id),class:se(["ms-4 me-2 download-icon",ve(C.downloadHistory)?"icon-green":"icon-red"]),src:Us,style:{height:"18px"},alt:""},null,10,py)):D("",!0)])):D("",!0)]),e("div",my,M(le(C)),1)],2))),128))]),_:1},8,["title"])]),_:1},8,["modelValue"])]),p(Rf,{status:E(u).GeneralStatus,"status-spv":E(u).DefectFormStatusSPV,visibility:y.value,"header-id":h.value,"work-order":H.value,"view-only":s.viewOnly,"fitter-id":s.fitterId,plannerApprove:s.plannerApprove,"is-form":!s.plannerApprove,"is-complete":T.value,"crack-data":E(u).CrackFormData,onCloseForm:fe,onOnRefreshData:je},null,8,["status","status-spv","visibility","header-id","work-order","view-only","fitter-id","plannerApprove","is-form","is-complete","crack-data"]),p(As,{images:$e.value,visibility:P.value,onHandleClose:ge},null,8,["images","visibility"]),p(zt,{visibility:A.value,caption:"Are you sure want to download all the attachment in this defect file?",yesLabel:"Yes, Download All File",noLabel:"No,  Only F55 Form",showClose:!0,widthDialog:60,footerTemplate:"50-50",onOnClose:Z,onOnNoConfirm:oe,onOnYesConfirm:m},null,8,["visibility"]),p(ds,{visibility:V.value,caption:E(u).stateErrorMessage,onOnClose:K},null,8,["visibility","caption"])],64)}}}),bx=tt(fy,[["__scopeId","data-v-11e9b9f0"]]),yy=["innerHTML"],Ha=Ue({__name:"Label",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0}},setup(s){const n=s,t=Fe(n,"item"),u=b(()=>ls(n.item.value));b(()=>a.isUndefined(t.value.style)?"":t.value.style.textAlign=="left"?"text-start":t.value.style.textAlign=="right"?"text-end":"text-center");const l=b(()=>{const S=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",x=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"";return`${S} ${x}`}),o=b(()=>`${!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.fontWeight)&&t.value.style.fontWeight!="normal"?`font-weight: ${t.value.style.fontWeight}; `:""}`),w=b(()=>"pb-2");return(S,x)=>(i(),d("div",{class:se([[w.value],"px-2 pt-2"]),style:De(l.value)},[!E(a.isUndefined)(s.item.style)&&s.item.style.visibility!="hidden"?(i(),d("label",{key:0,style:De(o.value),innerHTML:u.value},null,12,yy)):D("",!0)],6))}}),by={class:"px-0 mx-0 d-flex"},hy=["innerHTML"],gy=["innerHTML"],ky=Ue({__name:"Dropdown",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},generalStyle:{type:Boolean,default:!0}},setup(s){const n=s,t=Fe(n,"item"),u=b(()=>{let g="Choose One";return!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.placeholder)&&(g=t.value.style.placeholder),g}),l=b(()=>{let g="";return n.item.categoryItemType=="dropdownToolGroup"&&(g="dropdown-tool"),g}),o=b(()=>{const g=n.item.caption.replace("[","").replace("]","").split("; "),N=n.item.itemValue.replace("[","").replace("]","").split(", ");return g.map((H,P)=>({label:H.replaceAll("'",""),value:N[P].replaceAll("'","")}))}),w=b(()=>{var g;return x.value?(g=o.value.find(N=>N.value==String(x.value)))==null?void 0:g.label:x.value}),S=b(()=>{const g=t.value.value.toString().replaceAll("'","");let N;return g=="A"?N="a":g=="B"?N="b":g=="C"?N="c":g=="X"&&(N="x"),N}),x=b(()=>n.item.value.toString().replaceAll("'","")),_=b(()=>{const g=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",N=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"";return`${g}${N}`}),y=b(()=>!0),T=g=>ls(g),I=b(()=>"pb-2");return(g,N)=>{const h=he("el-option"),H=he("el-select");return i(),d("div",{class:se([[I.value],"px-2 pt-2 dropdown-eform-status"]),style:De(_.value)},[e("div",by,[p(H,{modelValue:x.value,"onUpdate:modelValue":N[0]||(N[0]=P=>x.value=P),placeholder:u.value,size:"small",class:se(["w-100",[S.value,l.value]]),disabled:y.value},rs({default:O(()=>[(i(!0),d(ne,null,Pe(o.value,P=>(i(),ue(h,{key:P,value:P.value},{default:O(()=>[e("span",{innerHTML:P&&P.label?T(P&&P.label):""},null,8,hy)]),_:2},1032,["value"]))),128))]),_:2},[x.value?{name:"prefix",fn:O(()=>[e("span",{class:"el-input__custom-option",innerHTML:w.value},null,8,gy)]),key:"0"}:void 0]),1032,["modelValue","placeholder","disabled","class"])])],6)}}}),Vs=tt(ky,[["__scopeId","data-v-0ea1628a"]]),Bt=Ue({__name:"Input",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0}},setup(s){const t=Fe(s,"item"),u=b(()=>t.value.categoryItemType==Hl.PISTON_INPUT_RATING&&t.value.value!=""?`${Number(t.value.value)*100}%`:t.value.value),l=b(()=>{let _="";return!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.suffix)&&(_=t.value.style.suffix),_}),o=b(()=>{let _="Please Input";return(t.value.categoryItemType=="targetRating"||t.value.categoryItemType=="resultParamRating")&&(_=""),!a.isUndefined(t.value.style)&&!a.isUndefined(t.value.style.placeholder)&&(_=t.value.style.placeholder),_}),w=b(()=>{const _=t.value.value.toString().replaceAll("'","");let y;return t.value.categoryItemType=="targetRating"&&(_=="A"?y="a":_=="B"?y="b":_=="C"?y="c":_=="X"&&(y="x")),y}),S=b(()=>{const _=!a.isUndefined(t.value.style)&&t.value.style.bgColor!="none"?`background-color: ${t.value.style.bgColor}; `:"",y=!a.isUndefined(t.value.style)&&t.value.style.fontColor!="none"?`color: ${t.value.style.fontColor}; `:"";return`${_} ${y}`}),x=b(()=>"pb-2");return(_,y)=>{const T=he("el-input");return i(),d("div",{class:se([[x.value],"px-2 pt-2 input-eform-status"]),style:De(S.value)},[p(T,{ref:"cbmInput",class:se([w.value,l.value!=""?"service-sheet-input":""]),modelValue:u.value,"onUpdate:modelValue":y[0]||(y[0]=I=>u.value=I),size:"small",placeholder:o.value,readonly:!0},rs({_:2},[l.value!=""?{name:"append",fn:O(()=>[be(M(l.value),1)]),key:"0"}:void 0]),1032,["class","modelValue","placeholder"])],6)}}}),_y={class:"d-flex justify-content-center"},xy={class:"d-flex justify-content-center"},Cy=["disabled"],wy=["src"],Dy={key:0,class:"d-flex justify-content-center ms-3"},$y={class:"text-white"},Ea=Ue({__name:"SmallCamera",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},history:{type:Object,required:!0}},setup(s){const n=s,t=Fe(n,"item"),u=v(!1),l=Ut(),o=ze(()=>t.value.value?qt(t.value.value):[]),w=()=>{var g;let I="/media/svg/dma/camera/e-form/png/cam-active.png";return(g=n.history)!=null&&g.updatedBy&&(n.history.updatedBy.id==l.user.EmployeeId&&o.value.length>0?I="/media/svg/dma/camera/e-form/png/cam-user.png":n.history.updatedBy.id==l.user.EmployeeId&&o.value.length==0?I="/media/svg/dma/camera/e-form/png/cam-active.png":n.history.updatedBy.id!=l.user.EmployeeId&&o.value.length>0?I="/media/svg/dma/camera/e-form/png/cam-read.png":I="/media/svg/dma/camera/e-form/png/cam-active.png"),I},S=ze(()=>!y.value),x=()=>{u.value=!0},_=()=>{u.value=!1},y=ze(()=>!0),T=ze(()=>{var g,N;let I="pb-2";return(g=n.history)!=null&&g.updatedBy&&((N=n.history)==null?void 0:N.updatedBy).name&&(I=""),I});return(I,g)=>(i(),d("div",{class:se([[E(T)],"pt-2"])},[e("div",_y,[e("div",xy,[e("button",{class:"btn btn-sm btn-icon btn-bg-light",disabled:E(y)},[e("img",{src:w(),style:{height:"12px",width:"14px"},alt:"camera"},null,8,wy)],8,Cy)]),E(o)&&E(o).length>0?(i(),d("div",Dy,[e("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:x,style:{"background-color":"#18AF4A"}},[e("label",$y,"+"+M(E(o).length),1)])])):D("",!0)]),u.value?(i(),ue(pl,{key:0,type:"task","re-render":!1,images:E(o),"show-delete-button":E(S),"is-mandatory":!1,visibility:u.value,"is-monitoring":!E(S),"show-mandatory-caption":!1,onOnClose:_},null,8,["images","show-delete-button","visibility","is-monitoring"])):D("",!0)],2))}}),Sy={class:"position-relative pb-5",style:{border:"1px solid rgba(145, 158, 171, 0.24)"}},Vy={key:0,class:"d-flex flex-row justify-content-between"},Iy={class:"col-1 text-start px-2 py-2"},Py={class:"col text-start px-2 py-2"},Ry={class:"col-1 text-start px-2 py-2"},Uy={class:"col-1 text-start px-2 py-2"},Ay={class:"col-1 text-start px-2 py-2"},By={class:"col-1 text-start px-2 py-2"},Ty={class:"col-1 text-start px-2 py-2"},Ly={class:"col-1 text-start px-2 py-2"},Ny={class:"col-1 text-start px-2 py-2"},Oy={class:"col-1 text-start px-2 py-2"},My={class:"col-1 text-start px-2 py-2 d-flex align-items-center"},jy={key:1,class:"d-flex flex-row justify-content-between"},Ey={class:"col-1 text-start px-2 py-2"},Fy={class:"col text-start px-2 py-2"},Hy={class:"col-2 text-start px-2 py-2"},qy={class:"col-2 text-start px-2 py-2"},Ky={class:"col-2 text-start px-2 py-2 d-flex align-items-center"},Gy={key:2,class:"d-flex flex-row justify-content-between"},Wy={class:"col-1 text-start px-2 py-2"},Yy={class:"col text-start px-2 py-2"},zy={class:"col text-start px-2 py-2"},Jy={class:"col-1 text-start px-2 py-2"},Qy={class:"col-2 text-start px-2 py-2"},Xy={class:"col-2 text-start px-2 py-2"},Zy={class:"col-2 text-start px-2 py-2 d-flex align-items-center"},eb={key:3,class:"row w-100 position-absolute pe-3",style:"bottom: 4px;"},tb={class:"d-flex justify-content-end pb-1 my-0 timestamp-task"},ab=Ue({__name:"InlineTask",props:{history:{type:Object,required:!0},items:{type:Object,required:!0},task:{type:Object,required:!0},row:{type:Number,required:!0},max:{type:Number,required:!0}},setup(s){const n=s,t=b(()=>{const _=n.items.find(y=>y.categoryItemType=="paramRating"||y.categoryItemType=="paramRatingDynamic");return _||{}}),u=b(()=>{const _=n.items.find(y=>y.categoryItemType=="targetTool");if(_)return _;if(_)return{};{const y=n.items.findIndex(T=>T.categoryItemType=="paramRating"||T.categoryItemType=="paramRatingDynamic");return n.items[y+1]}}),l=b(()=>{const _=n.items.find(y=>y.categoryItemType=="targetRating");return _||{}}),o=b(()=>{const _=n.items.find(y=>y.itemType=="smallCamera");return _||{}}),w=b(()=>{let _="auto";return(n.task.rating=="MANUAL"||n.task.rating=="NORMAL"&&n.task.category=="CBM")&&(_="manual"),console.log(_),_}),S=_=>n.history.isUpdatePhoto!=null&&!n.history.isUpdatePhoto?{}:_,x=()=>{let _="";return n.history&&(_+=n.history.description.split(";")[1],_+=". ",_+=n.history.description.split(";")[2]),_};return(_,y)=>(i(),d("div",Sy,[s.task.rating==E(Kt).OIL_COOLED?(i(),d("div",Vy,[e("div",Iy,M(s.items[0].value),1),e("div",Py,M(s.items[2].value),1),e("div",Ry,[p(Vs,{item:s.items[3]},null,8,["item"])]),e("div",Uy,[p(Bt,{item:s.items[4]},null,8,["item"])]),e("div",Ay,[p(Bt,{item:s.items[5]},null,8,["item"])]),e("div",By,[p(Bt,{item:s.items[6]},null,8,["item"])]),e("div",Ty,M(s.items[7].value),1),e("div",Ly,[p(Bt,{item:s.items[8]},null,8,["item"])]),e("div",Ny,[p(Bt,{item:s.items[9]},null,8,["item"])]),e("div",Oy,[p(Ea,{item:S(o.value),history:s.history,"is-disabled":!0},null,8,["item","history"])]),e("div",My,M(s.row==s.max-1?"IronForms":"IronPortal"),1)])):w.value=="manual"?(i(),d("div",jy,[e("div",Ey,M(s.items[0].value),1),e("div",Fy,[p(Ha,{item:s.items[2]},null,8,["item"])]),e("div",Hy,[s.items[3].itemType=="dropDown"?(i(),ue(Vs,{key:0,item:s.items[3]},null,8,["item"])):(i(),ue(Vs,{key:1,item:s.items[4]},null,8,["item"]))]),e("div",qy,[s.items[4].itemType=="smallCamera"?(i(),ue(Ea,{key:0,item:S(s.items[4]),history:s.history,"is-disabled":!0},null,8,["item","history"])):(i(),ue(Ea,{key:1,item:S(s.items[5]),history:s.history,"is-disabled":!0},null,8,["item","history"]))]),e("div",Ky,M(s.row==s.max-1?"IronForms":"IronPortal"),1)])):w.value=="auto"&&s.task.rating!=E(Kt).OIL_COOLED?(i(),d("div",Gy,[e("div",Wy,M(s.items[0].value),1),e("div",Yy,M(s.task.rating==E(Kt).CALIPER?x():s.items[2].value),1),e("div",zy,[p(Bt,{item:t.value},null,8,["item"])]),e("div",Jy,[p(Ha,{item:u.value},null,8,["item"])]),e("div",Qy,[p(Bt,{item:l.value},null,8,["item"])]),e("div",Xy,[p(Ea,{item:S(o.value),history:s.history,"is-disabled":!0},null,8,["item","history"])]),e("div",Zy,M(s.row==s.max-1?"IronForms":"IronPortal"),1)])):D("",!0),s.task.updatedBy.name?(i(),d("div",eb,[e("div",tb,M(s.task.updatedBy.name)+", "+M(s.task.updatedDate),1)])):D("",!0)]))}}),sb={class:"input-eform-status"},lb=Ue({__name:"InputHistory",props:{item:{type:String,required:!0}},setup(s){const n=s,t=Fe(n,"item"),u=b({get:()=>t.value,set:w=>{t.value=w}}),l=b(()=>{const w=n.item;let S;return w=="A"?S="a":w=="B"?S="b":w=="C"?S="c":w=="X"&&(S="x"),S}),o=v();return(w,S)=>{const x=he("el-input");return i(),d("div",sb,[p(x,{ref_key:"cbmInput",ref:o,class:se([l.value]),modelValue:u.value,"onUpdate:modelValue":S[0]||(S[0]=_=>u.value=_),size:"small",disabled:!0},null,8,["class","modelValue"])])}}}),ob={class:"pt-2"},rb={class:"d-flex justify-content-center"},nb={class:"d-flex justify-content-center"},ib={class:"btn btn-sm btn-icon btn-bg-light",disabled:""},ub=["src"],db={key:0,class:"d-flex justify-content-center ms-3"},cb={class:"text-white"},vb=Ue({__name:"SmallCamera",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},history:{type:Object,required:!0}},setup(s){const n=s,t=Fe(n,"item"),u=v(!1),l=Ut(),o=ze(()=>t.value?qt(t.value):[]),w=()=>{u.value=!0},S=()=>{u.value=!1},x=()=>{var y;let _="/media/svg/dma/camera/e-form/png/cam-active.png";return(y=n.history)!=null&&y.updatedBy&&(n.history.updatedBy.id==l.user.EmployeeId&&o.value.length>0?_="/media/svg/dma/camera/e-form/png/cam-user.png":n.history.updatedBy.id==l.user.EmployeeId&&o.value.length==0?_="/media/svg/dma/camera/e-form/png/cam-active.png":n.history.updatedBy.id!=l.user.EmployeeId&&o.value.length>0?_="/media/svg/dma/camera/e-form/png/cam-read.png":_="/media/svg/dma/camera/e-form/png/cam-active.png"),_};return(_,y)=>(i(),d("div",ob,[e("div",rb,[e("div",nb,[e("button",ib,[e("img",{src:x(),style:{height:"12px",width:"14px"},alt:"camera"},null,8,ub)])]),E(o)&&E(o).length>0?(i(),d("div",db,[e("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:w,style:{"background-color":"#18AF4A"}},[e("label",cb,"+"+M(E(o).length),1)])])):D("",!0)]),u.value?(i(),ue(pl,{key:0,type:"task","re-render":!1,images:E(o),"show-delete-button":!1,"is-mandatory":!1,visibility:u.value,"is-monitoring":!0,"show-mandatory-caption":!1,onOnClose:S},null,8,["images","visibility"])):D("",!0)]))}}),pb={class:"position-relative pb-5",style:{border:"1px solid rgba(145, 158, 171, 0.24)"}},mb={class:"d-flex flex-row justify-content-between"},fb={class:"col-1 text-start px-2 py-2"},yb={class:"col text-start px-2 py-2"},bb={class:"col text-start px-2 py-2"},hb={class:"col-1 text-start px-2 py-2"},gb={class:"col-2 text-start px-2 py-2"},kb={class:"col-2 text-start px-2 py-2"},_b={class:"col-2 text-start px-2 py-2 d-flex align-items-center"},xb={key:0,class:"row w-100 position-absolute pe-3",style:"bottom: 4px;"},Cb={class:"d-flex justify-content-end pb-1 my-0 timestamp-task"},wb=Ue({__name:"InlineTask",props:{item:{type:Object,required:!0},row:{type:Number,required:!0},max:{type:Number,required:!0},history:{type:Object,required:!0}},setup(s){const n=t=>t.isUpdatePhoto!=null&&!t.isUpdatePhoto?[]:t.cbmAdjustmentReplacementValue.pictures;return(t,u)=>(i(),d("div",pb,[e("div",mb,[e("div",fb,M(s.item.items[0].value),1),e("div",yb,M(s.item.items[2].value),1),e("div",bb,[e("span",null,M(s.item.cbmAdjustmentReplacementValue.measurement),1)]),e("div",hb,[e("span",null,M(s.item.cbmAdjustmentReplacementValue.uom),1)]),e("div",gb,[p(lb,{item:s.item.cbmAdjustmentReplacementValue.rating},null,8,["item"])]),e("div",kb,[p(vb,{item:n(s.item),history:s.history},null,8,["item","history"])]),e("div",_b,M(s.row==s.max-1?"IronForms":"IronPortal"),1)]),s.item.cbmAdjustmentReplacementValue.updatedBy.name?(i(),d("div",xb,[e("div",Cb,M(s.item.cbmAdjustmentReplacementValue.updatedBy.name)+", "+M(s.item.cbmAdjustmentReplacementValue.updatedDate),1)])):D("",!0)]))}}),$l=s=>(vt("data-v-6177d6f1"),s=s(),pt(),s),Db=$l(()=>e("h3",{class:"mt-3 border"},null,-1)),$b=$l(()=>e("h3",{class:"mt-3"},"History Modified",-1)),Sb={key:0,class:"d-flex flex-row justify-content-between"},Vb=ns('<div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-left:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Task</label></div><div class="col text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Measurement Location</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Rating</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-right:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1> Action </div>',5),Ib=[Vb],Pb={key:1,class:"d-flex flex-row justify-content-between"},Rb=ns('<div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-left:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Task</label></div><div class="col text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Measurement Location</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Tool</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>A</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>B</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Piston Movement (B-A)</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>UoM</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Percent Worn</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Rating</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1></label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-right:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1> Action </div>',11),Ub=ns('<template data-v-6177d6f1><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-left:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Task</label></div><div class="col text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-left:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Measurement Location</label></div><div class="col text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Measurement Value</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>UoM</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1><label data-v-6177d6f1>Rating</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-right:1px solid rgba(145, 158, 171, 0.24);" data-v-6177d6f1> Action </div></template>',1),Ab=Ue({__name:"History",props:{history:{type:Object,required:!0},taskRating:{required:!1,default:""},taskNo:{required:!1,default:""}},setup(s){const n=s;return Nt(async()=>{console.log(n)}),(t,u)=>(i(),d(ne,null,[Db,$b,s.history.detail.rating=="MANUAL"||s.history.detail.rating=="NORMAL"?(i(),d("div",Sb,Ib)):(i(),d("div",Pb,[s.taskRating==E(Kt).OIL_COOLED?(i(),d(ne,{key:0},[Rb],64)):D("",!0),Ub])),(i(!0),d(ne,null,Pe(s.history.detail.history,(l,o)=>(i(),d(ne,{key:l.key},[l.cbmAdjustmentReplacementValue?(i(),ue(wb,{key:0,history:l,item:l,row:o,max:s.history.detail.history.length},null,8,["history","item","row","max"])):(i(),ue(ab,{key:1,history:l,items:l.items,task:l,row:o,max:s.history.detail.history.length},null,8,["history","items","task","row","max"]))],64))),128))],64))}}),Bb=tt(Ab,[["__scopeId","data-v-6177d6f1"]]),Tb={class:"d-flex flex-row justify-content-between"},Lb={class:"col-1 text-start px-2 py-2"},Nb={class:"col-2 col-lg-3 text-start px-2 py-2"},Ob={class:"col-2 text-start px-2 py-2"},Mb={class:"col-1 text-start px-2 py-2"},jb={class:"col-2 text-start px-2 py-2"},Eb={class:"col-2 text-start px-2 py-2"},Fb={class:"col-2 col-lg-1 text-start px-2 py-2 d-flex align-items-center"},Hb={key:0,class:"row w-100 position-absolute pe-3",style:"bottom: 4px;"},qb={class:"d-flex justify-content-end pb-1 my-0 timestamp-task"},Kb=Ue({__name:"InlineTask",props:{history:{type:Object,required:!0},items:{type:Object,required:!0},task:{type:Object,required:!0},row:{type:Number,required:!0},max:{type:Number,required:!0},taskNo:{required:!0}},setup(s){const n=s,t=b(()=>"border-bottom: 1px solid rgba(145, 158, 171, 0.24);"),u=b(()=>{const o=n.items.find(w=>w.itemType=="smallCamera");return o||{}}),l=o=>n.history.isUpdatePhoto!=null&&!n.history.isUpdatePhoto?{}:o;return(o,w)=>(i(),d("div",{class:"position-relative pb-5 history-table",style:De(t.value)},[e("div",Tb,[e("div",Lb,M(s.taskNo),1),e("div",Nb,[p(Ha,{item:s.items[2]},null,8,["item"])]),e("div",Ob,[p(Bt,{item:s.items[3]},null,8,["item"])]),e("div",Mb,[p(Ha,{item:s.items[4]},null,8,["item"])]),e("div",jb,[s.items[5].itemType=="input"?(i(),ue(Bt,{key:0,item:s.items[5]},null,8,["item"])):s.items[5].itemType=="label"?(i(),ue(Ha,{key:1,item:s.items[5]},null,8,["item"])):D("",!0)]),e("div",Eb,[p(Ea,{item:l(u.value),history:s.history,"is-disabled":!0},null,8,["item","history"])]),e("div",Fb,M(s.row==s.max-1?"IronForms":"IronPortal"),1)]),s.task.updatedBy.name?(i(),d("div",Hb,[e("div",qb,M(s.task.updatedBy.name)+", "+M(s.task.updatedDate),1)])):D("",!0)],4))}}),Gb=tt(Kb,[["__scopeId","data-v-eb052f86"]]),Wb=ns('<h3 class="mt-3 border" data-v-a2a8ff73></h3><h3 class="mt-3" data-v-a2a8ff73>History Modified</h3><div class="d-flex flex-row justify-content-between" data-v-a2a8ff73><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-left:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73><label data-v-a2a8ff73>Item</label></div><div class="col-2 col-lg-3 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73><label data-v-a2a8ff73>Measurement Location</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73><label data-v-a2a8ff73>Measurement Value</label></div><div class="col-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73><label data-v-a2a8ff73>UoM</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73><label data-v-a2a8ff73>Rating</label></div><div class="col-2 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73></div><div class="col-2 col-lg-1 text-start px-2 py-2" style="background-color:rgb(249, 250, 251);border-top:1px solid rgba(145, 158, 171, 0.24);border-right:1px solid rgba(145, 158, 171, 0.24);" data-v-a2a8ff73> Action </div></div>',3),Yb=Ue({__name:"CBMAvgHistory",props:{history:{type:Object,required:!0},taskNo:{required:!0}},setup(s){return(n,t)=>(i(),d(ne,null,[Wb,(i(!0),d(ne,null,Pe(s.history.detail.history,(u,l)=>(i(),ue(Gb,{key:u.key,history:u,taskNo:s.taskNo,items:u.items,task:u,row:l,max:s.history.detail.history.length},null,8,["history","taskNo","items","task","row","max"]))),128))],64))}}),zb=tt(Yb,[["__scopeId","data-v-a2a8ff73"]]),Ze=s=>(vt("data-v-8cc54d1d"),s=s(),pt(),s),Jb=Ze(()=>e("span",{class:"el-dialog__title",style:{"text-align":"start"}},null,-1)),Qb={class:"ps-3"},Xb=Ze(()=>e("h3",null,"Detailed Information",-1)),Zb=Ze(()=>e("div",{class:"d-flex flex-row justify-content-between"},[e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"No")]),e("div",{class:"col text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Measurement Location")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Previous Value")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Current Value")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"UoM")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-right":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Rating")])],-1)),eh={class:"d-flex flex-row justify-content-between"},th={key:0,class:"d-flex flex-row justify-content-between"},ah=Ze(()=>e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),sh=Ze(()=>e("div",{class:"col text-start px-2 py-2",style:{}},[e("label",null,"Replacement")],-1)),lh=Ze(()=>e("div",{class:"col-2 text-start px-2 py-2",style:{}},[e("label")],-1)),oh={class:"col-2 text-start px-2 py-2",style:{}},rh={class:"col-1 text-start px-2 py-2",style:{}},nh={class:"col-2 text-start px-2 py-2",style:{"border-right":"1px solid rgba(145, 158, 171, 0.24)"}},ih={key:1,class:"d-flex flex-row justify-content-between"},uh=Ze(()=>e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-bottom":"1px solid rgba(145, 158, 171, 0.24)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),dh=Ze(()=>e("div",{class:"col text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Comment")],-1)),ch=Ze(()=>e("div",{class:"col-2 text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),vh={class:"col-5 text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)","border-right":"1px solid rgba(145, 158, 171, 0.24)"}},ph=Ze(()=>e("div",{class:"d-flex flex-row justify-content-between items-center"},[e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"No")]),e("div",{class:"col text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Measurement Location")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Tool")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"A")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"B")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Piston Movement (B-A)")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"UoM")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Percent Worn")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-right":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Rating")])],-1)),mh={class:"d-flex flex-row justify-content-between"},fh=Ze(()=>e("div",{class:"d-flex flex-row justify-content-between"},[e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"No")]),e("div",{class:"col text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Measurement Location")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Measurement Value")]),e("div",{class:"col-1 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"UoM")]),e("div",{class:"col-2 text-start px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-top":"1px solid rgba(145, 158, 171, 0.24)","border-right":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Rating")])],-1)),yh={class:"d-flex flex-row justify-content-between"},bh={key:0,class:"d-flex flex-row justify-content-between"},hh=Ze(()=>e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),gh={class:"col text-start px-2 py-2",style:{}},kh={key:0},_h={key:1},xh=Ze(()=>e("div",{class:"col-2 text-start px-2 py-2",style:{}},[e("label")],-1)),Ch={class:"col-2 text-start px-2 py-2",style:{}},wh={class:"col-1 text-start px-2 py-2",style:{}},Dh={class:"col-2 text-start px-2 py-2",style:{"border-right":"1px solid rgba(145, 158, 171, 0.24)"}},$h={key:1,class:"d-flex flex-row justify-content-between"},Sh=Ze(()=>e("div",{class:"col-1 text-center px-2 py-2",style:{"background-color":"rgb(249, 250, 251)","border-bottom":"1px solid rgba(145, 158, 171, 0.24)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),Vh=Ze(()=>e("div",{class:"col text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label",null,"Comment")],-1)),Ih=Ze(()=>e("div",{class:"col-2 text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)"}},[e("label")],-1)),Ph={class:"col-5 text-start px-2 py-2",style:{"border-bottom":"1px solid rgba(145, 158, 171, 0.24)","border-right":"1px solid rgba(145, 158, 171, 0.24)"}},Rh=Ze(()=>e("h3",{class:"mt-3"},"Detail Specs",-1)),Uh={key:5},Ah={class:"table table-bordered",style:{width:"500px"}},Bh=Ze(()=>e("caption",null,null,-1)),Th=Ze(()=>e("thead",null,[e("tr",{style:{background:"#70AD47"}},[e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Rating"),e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Value Min"),e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Value Max"),e("th",{scope:"col",class:"table-header"},"UoM")])],-1)),Lh={scope:"row",style:{"border-right":"1px solid white","padding-left":"10px"}},Nh={scope:"row",style:{"border-right":"1px solid white"}},Oh={scope:"row",style:{"border-right":"1px solid white"}},Mh={scope:"row"},jh=Ze(()=>e("h3",{class:"mt-3"},"Previous - Current Gap Rating Spec",-1)),Eh={class:"table table-bordered",style:{width:"500px"}},Fh=Ze(()=>e("caption",null,null,-1)),Hh=Ze(()=>e("thead",null,[e("tr",{style:{background:"#70AD47"}},[e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Rating"),e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Value Min"),e("th",{scope:"col",class:"table-header",style:{"border-right":"1px solid white"}},"Value Max"),e("th",{scope:"col",class:"table-header"},"UoM")])],-1)),qh={scope:"row",style:{"border-right":"1px solid white","padding-left":"10px"}},Kh={scope:"row",style:{"border-right":"1px solid white"}},Gh={scope:"row",style:{"border-right":"1px solid white"}},Wh={scope:"row"},Yh=Ze(()=>e("h3",{class:"mt-3"},"Detailed picture",-1)),zh={class:"row my-4"},Jh={key:0,style:{"font-size":"10px","font-weight":"600"}},Qh={class:"bg-secondary"},Xh=["src","onClick"],Zh={key:8,class:"mt-1 py-2",style:{"word-break":"break-word !important"}},eg=Ze(()=>e("div",{class:"desc-label"},"Approval Comment",-1)),tg={class:"d-flex flex-column"},ag="CBM Successfully Confirmed",sg=Ue({__name:"CBMInfo",props:{visibility:{required:!0,type:Boolean},cbmIsConfirmed:{required:!1,type:Boolean,default:!0},cbmData:{required:!0,type:Object},cbmDataHistory:{required:!1,type:Object,default:null},viewOnly:{required:!1,type:Boolean,default:!1}},emits:["closeForm","onApproveCbm"],setup(s,{emit:n}){const t=s,u=n,l=et(),o=Lt(),w=v(!1),S=v([]),x=v([]),_=v([]),y=v([]),T=v(""),I=Fe(t,"visibility"),g=Fe(t,"cbmData"),N=v([]),h=v(!1),H=v([]),P=v(),R=v(),$=v(),V=v(),L=v(""),A=v(""),te=v(!0),Z=v(!1),ee=v(!1),W=v(""),K=v(""),oe=v(""),m=b(()=>t.cbmDataHistory.historyModified?t.cbmDataHistory.historyModified:{}),f=J=>{const G=y.value.findIndex(ge=>ge.imgBlob==J),fe=y.value[G];if(G>0){const ge=y.value.slice(G),je=y.value.slice(0,G);y.value=[...ge,...je]}T.value=fe.url,w.value=!0},ve=b(()=>{var Q,de,Se;let J=!1;const G=((Q=t.cbmDataHistory)==null?void 0:Q.historyModifiedDefault)&&((de=t.cbmDataHistory)==null?void 0:de.historyModifiedDefault.length)>1;let fe=!1,ge=!1,je=!1;return G&&((Se=t.cbmDataHistory)==null||Se.historyModifiedDefault.forEach(B=>{B.items.forEach(C=>{C.category=="cbmCalculateAvg"&&(ge=!0),C.categoryItemType=="resultParamRating"&&(je=!0)})})),ge&&je&&(fe=!0),fe&&(J=!0),J}),Ve=()=>{T.value="",w.value=!1},_e=J=>J?J=="cab side"?"Cab Side":"Off Cab Side":"",Ce=b(()=>{let J=N.value.filter(G=>G.cbmType!="CBM_GAP"&&G.cbmType!=Ss.CBM_BRAKE_PACK_PERCENTAGE);return K.value==Kt.OIL_COOLED&&(J=J.filter(G=>G.cbmType!=Ss.BIRRANA&&G.cbmType!=Ss.CAT_GAUGE)),J}),xe=b(()=>N.value.filter(G=>G.cbmType=="CBM_GAP")),me=b(()=>a.orderBy(_.value,J=>J.type)),we=J=>{const G=S.value.find(fe=>fe.key==J);return(G==null?void 0:G.value)??""},$e=async()=>{if(H.value=[],!(_.value.length<1))for(const[J,G]of _.value.entries()){const fe={fileUrl:`${G.filename}`,ver:"v1"};try{const ge=`https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/attachment/download_by_url?${new URLSearchParams(fe).toString()}`,Q=(await Dt.getBlob(ge)).data,de=new Blob([Q]),B=(window.URL||window.webkitURL).createObjectURL(de);S.value.push({key:G.filename,value:B}),y.value.forEach(C=>{C.imgBlob==G.filename&&(C.url=B)}),x.value[J]=!1}catch(ge){console.log("image",ge)}}},Ie=()=>{u("closeForm")},Me=b(()=>g.value.taskNo.replace(/[^a-z]/gi,"").length>1?g.value.taskNo.replace(";","").replace(/\D/g,""):g.value.taskNo.replace(";","")),qe=async()=>{const J=await l.getTask(t.cbmData.serviceSheetDetailId,t.cbmData.taskId,"items");K.value=await l.getTask(t.cbmData.serviceSheetDetailId,t.cbmData.taskId,ql.RATING),K.value==Kt.OIL_COOLED&&(oe.value=`${Number(oe.value)*100}%`),P.value=J.filter(G=>G.categoryItemType=="previousParamRating"),R.value=J.filter(G=>G.categoryItemType=="paramRating"),$.value=J.filter(G=>G.categoryItemType=="targetRating"),V.value=await l.getTask(t.cbmData.serviceSheetDetailId,t.cbmData.taskId,"replacement")},at=async()=>{var fe,ge,je;h.value=!0,L.value="",te.value=!0,A.value="",oe.value="",t.cbmData&&t.cbmData.cbmMeasurement&&(oe.value=is(t.cbmData.cbmMeasurement)),await qe();const J=l.stateCBMFormulas.filter(Q=>Q.taskKey===g.value.taskId);N.value=a.orderBy(J,["uom","cbmRating","minValue"]);let G=[];(fe=t.cbmDataHistory)!=null&&fe.detailedPicture&&((ge=t.cbmDataHistory)==null?void 0:ge.detailedPicture.length)>0&&t.cbmDataHistory.historyModified!=null?G=(je=t.cbmDataHistory)==null?void 0:je.detailedPicture:G=await o.getDefectImages(g.value.serviceSheetDetailId,g.value.cbmImageKey,g.value.cbmImageProp),_.value=qt(G),x.value=Array.apply(null,Array(_.value.length)).map(function(){return!0}),y.value=_.value.map(Q=>({imgBlob:Q.filename,url:"",description:Q.description})),await $e(),h.value=!1},Qe=J=>{L.value=J.value,A.value="",te.value=!0},We=()=>{if(io.isSPVPlannerMandatoryInputCommentOnApproveCBM&&!L.value){A.value="Approval Comment is required",te.value=!1;return}const J=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});u("onApproveCbm",{headerId:t.cbmData.id,reason:L.value,callback:(G,fe)=>{J.close(),G?(W.value=fe,ee.value=!0):le()}})},F=()=>{ee.value=!1,W.value!=la.NO_NETWORK_VIEW&&Ie()},le=()=>{Z.value=!0,setTimeout(()=>{Z.value=!1,F()},1e3)};return(J,G)=>{const fe=he("el-input"),ge=he("el-option"),je=he("el-select"),Q=he("el-skeleton-item"),de=he("el-skeleton"),Se=he("el-dialog"),B=Zs("loading");return i(),d(ne,null,[p(Se,{modelValue:I.value,"onUpdate:modelValue":G[17]||(G[17]=C=>I.value=C),"custom-class":"crackform dialog-header-noborder",width:"90%",center:"",onClosed:Ie,onOpened:at,"destroy-on-close":!0},{title:O(()=>[Jb]),default:O(()=>[e("div",null,[Ge((i(),d("div",Qb,[Xb,s.cbmData.appSPVBy?(i(),d(ne,{key:0},[p(Qa,{message:`${s.cbmData.appSPVDate} - ${s.cbmData.appSPVBy.name}`,"placeholder-message":"Approved by Supervisor"},null,8,["message"]),s.cbmData.approveReason?(i(),ue(Qa,{key:0,message:`${s.cbmData.approveReason}`,"placeholder-message":"Approval Comment"},null,8,["message"])):D("",!0)],64)):D("",!0),s.cbmData.appPlannerBy?(i(),d(ne,{key:1},[p(Qa,{message:`${s.cbmData.appPlannerDate} - ${s.cbmData.appPlannerBy.name}`,"placeholder-message":"Approved by Planner"},null,8,["message"]),s.cbmData.plannerApproveReason?(i(),ue(Qa,{key:0,message:`${s.cbmData.plannerApproveReason}`,"placeholder-message":"Approval Comment"},null,8,["message"])):D("",!0)],64)):D("",!0),P.value&&R.value&&V.value&&$.value?(i(),d(ne,{key:2},[Zb,e("div",eh,[e("div",{class:"col-1 text-center px-2 py-2",style:De([{"background-color":"rgb(249, 250, 251)","border-left":"1px solid rgba(145, 158, 171, 0.24)"},V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);"])},[e("label",null,M(Me.value),1)],4),e("div",{class:"col text-start px-2 py-2",style:De(V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.taskDesc),1)],4),e("div",{class:"col-2 text-start px-2 py-2",style:De(V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:P.value[0].value,"onUpdate:modelValue":G[0]||(G[0]=C=>P.value[0].value=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-2 text-start px-2 py-2",style:De(V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:R.value[0].value,"onUpdate:modelValue":G[1]||(G[1]=C=>R.value[0].value=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.cbmUom),1)],4),e("div",{class:"col-2 text-start px-2 py-2",style:De([{"border-right":"1px solid rgba(145, 158, 171, 0.24)"},V.value.rating?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);"])},[p(fe,{size:"small",modelValue:$.value[0].value,"onUpdate:modelValue":G[2]||(G[2]=C=>$.value[0].value=C),class:se($.value[0].value.toLowerCase()),disabled:!0},null,8,["modelValue","class"])],4)]),V.value.rating?(i(),d("div",th,[ah,sh,lh,e("div",oh,[p(fe,{size:"small",class:"dark-text-primary",modelValue:V.value.measurement,"onUpdate:modelValue":G[3]||(G[3]=C=>V.value.measurement=C),disabled:!0},null,8,["modelValue"])]),e("div",rh,[e("label",null,M(V.value.uom),1)]),e("div",nh,[p(fe,{size:"small",class:se(["dark-text-primary",V.value.rating.toLowerCase()]),modelValue:V.value.rating,"onUpdate:modelValue":G[4]||(G[4]=C=>V.value.rating=C),disabled:!0},null,8,["modelValue","class"])])])):D("",!0),V.value.rating?(i(),d("div",ih,[uh,dh,ch,e("div",vh,[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.commentValue,"onUpdate:modelValue":G[5]||(G[5]=C=>g.value.commentValue=C),disabled:!0},null,8,["modelValue"])])])):D("",!0)],64)):K.value==E(Kt).OIL_COOLED?(i(),d(ne,{key:3},[ph,e("div",mh,[e("div",{class:"col-1 text-center px-2 py-2",style:De([g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);",{"background-color":"rgb(249, 250, 251)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}])},[e("label",null,M(Me.value),1)],4),e("div",{class:"col text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.taskDesc),1)],4),e("div",{class:"col-2 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(je,{size:"small",modelValue:g.value.cbmPistonTool,"onUpdate:modelValue":G[6]||(G[6]=C=>g.value.cbmPistonTool=C),disabled:"",placeholder:"Select"},{default:O(()=>[(i(!0),d(ne,null,Pe([g.value.cbmPistonTool],C=>(i(),ue(ge,{key:C,label:C,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.cbmPistonA,"onUpdate:modelValue":G[7]||(G[7]=C=>g.value.cbmPistonA=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.cbmPistonB,"onUpdate:modelValue":G[8]||(G[8]=C=>g.value.cbmPistonB=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.cbmPistonResult,"onUpdate:modelValue":G[9]||(G[9]=C=>g.value.cbmPistonResult=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.cbmUom),1)],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:oe.value,"onUpdate:modelValue":G[10]||(G[10]=C=>oe.value=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De([{"border-right":"1px solid rgba(145, 158, 171, 0.24)"},g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);"])},[p(fe,{size:"small",modelValue:g.value.taskValue,"onUpdate:modelValue":G[11]||(G[11]=C=>g.value.taskValue=C),class:se(g.value.taskValue.toLowerCase()),disabled:!0},null,8,["modelValue","class"])],4)])],64)):(i(),d(ne,{key:4},[fh,e("div",yh,[e("div",{class:"col-1 text-center px-2 py-2",style:De([g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);",{"background-color":"rgb(249, 250, 251)","border-left":"1px solid rgba(145, 158, 171, 0.24)"}])},[e("label",null,M(Me.value),1)],4),e("div",{class:"col text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.taskDesc),1)],4),e("div",{class:"col-2 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[p(fe,{size:"small",class:"dark-text-primary",modelValue:oe.value,"onUpdate:modelValue":G[12]||(G[12]=C=>oe.value=C),disabled:!0},null,8,["modelValue"])],4),e("div",{class:"col-1 text-start px-2 py-2",style:De(g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);")},[e("label",null,M(g.value.cbmUom),1)],4),e("div",{class:"col-2 text-start px-2 py-2",style:De([{"border-right":"1px solid rgba(145, 158, 171, 0.24)"},g.value.isCbmAdjusment==="true"&&g.value.correctedValue?"":"border-bottom: 1px solid rgba(145, 158, 171, 0.24);"])},[p(fe,{size:"small",modelValue:g.value.taskValue,"onUpdate:modelValue":G[13]||(G[13]=C=>g.value.taskValue=C),class:se(g.value.taskValue.toLowerCase()),disabled:!0},null,8,["modelValue","class"])],4)]),g.value.isCbmAdjusment==="true"&&g.value.correctedValue?(i(),d("div",bh,[hh,e("div",gh,[K.value==E(Kt).MANUAL_CLEANED?(i(),d("label",kh,"After clean")):(i(),d("label",_h,"Adjustment"))]),xh,e("div",Ch,[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.correctedMeasurement,"onUpdate:modelValue":G[14]||(G[14]=C=>g.value.correctedMeasurement=C),disabled:!0},null,8,["modelValue"])]),e("div",wh,[e("label",null,M(g.value.correctedUom),1)]),e("div",Dh,[p(fe,{size:"small",class:se(["dark-text-primary",g.value.correctedValue.toLowerCase()]),modelValue:g.value.correctedValue,"onUpdate:modelValue":G[15]||(G[15]=C=>g.value.correctedValue=C),disabled:!0},null,8,["modelValue","class"])])])):D("",!0),g.value.isCbmAdjusment==="true"&&g.value.correctedValue?(i(),d("div",$h,[Sh,Vh,Ih,e("div",Ph,[p(fe,{size:"small",class:"dark-text-primary",modelValue:g.value.commentValue,"onUpdate:modelValue":G[16]||(G[16]=C=>g.value.commentValue=C),disabled:!0},null,8,["modelValue"])])])):D("",!0)],64)),Rh,xe.value.length==0?(i(),d("div",Uh,[e("table",Ah,[Bh,Th,e("tbody",null,[(i(!0),d(ne,null,Pe(Ce.value,(C,ye)=>(i(),d("tr",{key:ye,class:se(ye%2==0?"even":"odd")},[e("th",Lh,M(C.cbmRating),1),e("th",Nh,M(C.minValueComplete),1),e("th",Oh,M(C.maxValueComplete),1),e("th",Mh,M(C.uom),1)],2))),128))])])])):D("",!0),xe.value.length>0?(i(),d(ne,{key:6},[jh,e("table",Eh,[Fh,Hh,e("tbody",null,[(i(!0),d(ne,null,Pe(xe.value,(C,ye)=>(i(),d("tr",{key:ye,class:se(ye%2==0?"even":"odd")},[e("th",qh,M(C.cbmRating),1),e("th",Kh,M(C.minValueComplete),1),e("th",Gh,M(C.maxValueComplete),1),e("th",Wh,M(C.uom),1)],2))),128))])])],64)):D("",!0),Yh,e("div",zh,[(i(!0),d(ne,null,Pe(me.value,(C,ye)=>(i(),d("div",{class:"col-md-3 fv-row fv-plugins-icon-container p-2 rounded position-relative",key:C.filename},[p(de,{loading:x.value[ye],animated:""},{template:O(()=>[p(Q,{variant:"image",class:"w-100 rounded",style:{height:"200px","object-fit":"fill"}})]),default:O(()=>{var Re,Ne;return[(Ne=(Re=m.value)==null?void 0:Re.detail)!=null&&Ne.rating.includes("REPLACEMENT")?(i(),d("span",Jh,M(_e(C.type)),1)):D("",!0),e("div",Qh,[we(C.filename)!=null?(i(),d("img",{key:0,src:we(C.filename),class:"w-100 rounded",style:{height:"200px","object-fit":"contain",cursor:"pointer"},alt:"images",onClick:Ke=>f(C.filename)},null,8,Xh)):D("",!0)])]}),_:2},1032,["loading"])]))),128))]),Object.keys(m.value).length>0?(i(),d(ne,{key:7},[ve.value?(i(),ue(zb,{key:0,history:m.value,taskNo:Me.value},null,8,["history","taskNo"])):(i(),ue(Bb,{key:1,history:m.value,taskRating:K.value,taskNo:Me.value},null,8,["history","taskRating","taskNo"]))],64)):D("",!0),!s.cbmIsConfirmed&&!s.viewOnly?(i(),d("div",Zh,[eg,e("div",tg,[p(ht,{value:L.value??"","disable-floating":!0,name:"approveReason",max:255,"is-valid":te.value,"error-message":A.value,onHandleChange:Qe},null,8,["value","is-valid","error-message"])]),e("button",{class:"mt-2 btn btn-success w-100",onClick:Ae(We,["prevent"]),style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white"}},"Approve")])):D("",!0)])),[[B,h.value]])])]),_:1},8,["modelValue"]),w.value?(i(),ue(no,{key:0,images:y.value,visibility:w.value,image:T.value,onHandleClose:Ve},null,8,["images","visibility","image"])):D("",!0),p(Es,{show:Z.value,message:ag},null,8,["show"]),p(_a,{show:ee.value,onClose:F,message:W.value,icon:"/media/svg/dma/alert.svg"},null,8,["show","message"])],64)}}}),lg=tt(sg,[["__scopeId","data-v-8cc54d1d"]]),Sl=s=>(vt("data-v-b3c9ad7f"),s=s(),pt(),s),og={class:"mt-5 ps-0"},rg=Sl(()=>e("div",{class:"row px-2 item mx-1 w-100 defect-panel-header"},[e("div",{class:"col-1 column-sm-12-percent column-md-7-percent column-lg-10-percent column-xl-6-percent text-center align-items-center d-flex justify-content-center"}," Task"),e("div",{class:"col align-items-center d-flex text-break"},"Task Description"),e("div",{class:"col align-items-center d-flex text-break"},"Comments"),e("div",{class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent align-items-center d-flex justify-content-center"}," Rating"),e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"}," Review Status")],-1)),ng={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},ig=Sl(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),ug=[ig],dg={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},cg={class:"col-1 column-sm-12-percent column-md-7-percent column-xl-6-percent align-items-center d-flex text-break justify-content-center"},vg={class:"col align-items-center d-flex text-break"},pg=["innerHTML"],mg={class:"col align-items-center d-flex text-break"},fg={class:"text-break"},yg={class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent align-items-center d-flex justify-content-center"},bg={style:{"font-weight":"600",color:"white"}},hg={style:{"font-weight":"600",color:"white"}},gg={class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},kg=["onClick"],_g={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},xg=Ue({__name:"CBMPanel",props:{headers:{required:!0,type:[]},plannerApprove:{required:!1,type:Boolean,default:!1},isDisabled:{required:!1,type:Boolean,default:!1},defectStatus:{required:!1,type:String,default:""}},emits:["onRefreshData"],setup(s,{emit:n}){const t=s,u=n,l=Lt(),o=v("Component Condition Data"),w=v(),S=v(),x=v(!1),_=v(!1),y=b(()=>{var H,P;return t.plannerApprove?((H=w.value)==null?void 0:H.plannerCbmNAStatus)==="Confirmed":((P=w.value)==null?void 0:P.cbmNAStatus)==="Confirmed"}),T=async H=>{const P=t.headers.find(R=>R.id===H);P&&(w.value=P,S.value=await l.getDefectsDataCBM(P.workorder||"",P.taskId)),x.value=!0},I=async H=>{try{l.ApprovalData.CBMHeaders.find(R=>R.id===H.headerId)&&(t.plannerApprove?await l.updatePlannerCBMConfirmedStatus(H.headerId,H.reason):await l.updateCBMConfirmedStatus(H.headerId,H.reason),H.callback&&(u("onRefreshData"),H.callback(l.IsError,l.ErrorMessage)))}catch(P){console.log(P)}},g=()=>{_.value=!1,l.stateErrorMessage!=la.NO_NETWORK_VIEW&&(l.resetErrorStatus(),N())},N=()=>{u("onRefreshData")},h=()=>{x.value=!1};return(H,P)=>{const R=he("el-collapse-item"),$=he("el-collapse");return i(),d(ne,null,[e("div",og,[p($,{class:"task-group general-accordion py-1 px-5 testing",modelValue:o.value,"onUpdate:modelValue":P[0]||(P[0]=V=>o.value=V)},{default:O(()=>[p(R,{title:"Condition Data",name:"Component Condition Data"},{default:O(()=>[rg,s.headers.length<1?(i(),d("div",ng,ug)):(i(!0),d(ne,{key:1},Pe(s.headers,V=>(i(),d("div",{key:V.id,class:"item px-2 my-2 mx-1"},[e("div",dg,[e("div",cg,M(E(Ul)(V.taskNo.replace(";",""))),1),e("div",vg,[e("span",{class:"text-break defect-identified-task",innerHTML:E(Al)(V.taskDesc,V.taskNo.replace(";",""))},null,8,pg)]),e("div",mg,[e("span",fg,M(V.commentValue),1)]),e("div",yg,[e("div",{class:se(["little-box d-flex justify-content-center align-items-center px-2",E(qs)(V.taskValue)])},[e("span",bg,M(V.taskValue),1)],2),V.correctedValue?(i(),d("div",{key:0,class:se(["little-box d-flex justify-content-center align-items-center px-2 ms-1",E(qs)(V.correctedValue)])},[e("span",hg,M(V.correctedValue),1)],2)):D("",!0)]),e("div",gg,[e("div",{class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",E(Qs)(V.id,s.headers,!s.plannerApprove,"cbmNAStatus","plannerCbmNAStatus",s.isDisabled,s.defectStatus)]),onClick:Ae(L=>T(V.id),["prevent"])}," Detailed Information ",10,kg)])]),e("div",_g,M(V.createdBy.name)+", "+M(V.updatedDate!=""?V.updatedDate:V.createdDate),1)]))),128))]),_:1})]),_:1},8,["modelValue"])]),p(lg,{visibility:x.value,"cbm-data":w.value,"cbm-is-confirmed":y.value,"view-only":s.isDisabled,"cbm-data-history":S.value,onCloseForm:h,onOnApproveCbm:I},null,8,["visibility","cbm-data","cbm-is-confirmed","view-only","cbm-data-history"]),p(ds,{visibility:_.value,caption:E(l).stateErrorMessage,onOnClose:g},null,8,["visibility","caption"])],64)}}}),hx=tt(xg,[["__scopeId","data-v-b3c9ad7f"]]),Ya=s=>(vt("data-v-41c66d88"),s=s(),pt(),s),Cg={class:"mt-5 ps-0"},wg={class:"row px-2 item mx-1 w-100 defect-panel-header"},Dg=Ya(()=>e("div",{class:"col-1 column-sm-12-percent column-md-7-percent column-lg-10-percent column-xl-6-percent text-center align-items-center d-flex justify-content-center"},"Task",-1)),$g=Ya(()=>e("div",{class:"col-4 align-items-center d-flex text-break"},"Task Description",-1)),Sg={key:0,class:"col align-items-center d-flex text-break"},Vg={key:1,class:"col align-items-center d-flex text-break"},Ig={key:2,class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent align-items-center d-flex justify-content-center"},Pg={key:3,class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},Rg={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},Ug=Ya(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),Ag=[Ug],Bg={class:"col-1 column-sm-12-percent column-md-7-percent column-lg-10-percent column-xl-6-percent text-center align-items-center d-flex justify-content-center"},Tg={class:"col-4 align-items-center d-flex text-break"},Lg=["innerHTML"],Ng={key:0,class:"col align-items-center d-flex text-break"},Og={class:"text-break"},Mg=["onClick"],jg=["onClick"],Eg={key:1,class:"col align-items-center d-flex text-break"},Fg={key:2,class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent align-items-center d-flex justify-content-center"},Hg={key:3,class:"col-1 column-sm-20-percent column-md-11-percent column-lg-11-percent column-xl-11-percent justify-content-center align-items-center d-flex"},qg=["onClick"],Kg={key:1,src:rl,style:{width:"28px"},alt:""},Gg={key:2,class:"ms-1 d-flex align-items-center"},Wg=Ya(()=>e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Yg=Ya(()=>e("span",null,"Loading...",-1)),zg=[Wg,Yg],Jg={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},Qg=Ue({__name:"NAPanel",props:{title:{required:!0,type:String},isDefect:{required:!0,type:Boolean,default:!0},headers:{required:!0,type:[]},plannerApprove:{required:!1,type:Boolean,default:!1},isDisabled:{required:!1,type:Boolean,default:!1}},emits:["onRefreshData","onGetPositionY"],setup(s,{emit:n}){const t=s,u=n,l=Lt(),o=v([]),w=v(),S=b(()=>t.title),x=b(()=>!t.plannerApprove);t.headers.forEach(()=>{o.value.push(!1)});const _=v(!1),y=v(),T=v(),I=async R=>{t.isDefect?t.plannerApprove?(await l.updatePlannerDefectDeclineStatus(R.headerId,R.reason),R.afterSubmit(l.stateIsError,l.stateErrorMessage)):(await l.updateDefectDeclineStatus(R.headerId,R.reason),R.afterSubmit(l.stateIsError,l.stateErrorMessage)):t.plannerApprove?(await l.updatePlannerCrackDeclineStatus(R.headerId,R.reason),R.afterSubmit(l.stateIsError,l.stateErrorMessage)):(await l.updateCrackDeclineStatus(R.headerId,R.reason),R.afterSubmit(l.stateIsError,l.stateErrorMessage))},g=async R=>{const{headerId:$,reason:V="",afterSubmit:L}=R;t.isDefect?t.plannerApprove?(await l.updatePlannerDefectConfirmedStatus($),L(l.stateIsError,l.stateErrorMessage)):(await l.updateDefectConfirmedStatus($,V),L(l.stateIsError,l.stateErrorMessage)):t.plannerApprove?(await l.updatePlannerCrackConfirmedStatus($),L(l.stateIsError,l.stateErrorMessage)):(await l.updateCrackConfirmedStatus($,V),L(l.stateIsError,l.stateErrorMessage))},N=()=>{_.value=!1},h=R=>{u("onGetPositionY"),y.value=void 0,T.value=void 0;const $=R.id;let V=l.ApprovalData.DefectNADetails.find(A=>A.defectHeaderId==$),L=R;V?(_.value=!0,y.value=L,T.value=V):(V=l.ApprovalData.CrackNADetails.find(A=>A.defectHeaderId==$),V&&(_.value=!0,y.value=L,T.value=V))},H=async(R,$)=>{if(!(!Ks()||t.isDisabled))if(t.isDefect){const V=l.ApprovalData.DefectNAHeaders.find(L=>L.id===R);if(V){if(t.plannerApprove){if(!a.isUndefined(V.plannerCbmNAStatus)&&V.plannerCbmNAStatus==="Confirmed")return}else if(V.cbmNAStatus==="Confirmed")return;o.value[$]=!0,t.plannerApprove?await l.updatePlannerDefectConfirmedStatus(R):await l.updateDefectConfirmedStatus(R),w.value.handleErrorMessage(l.stateIsError,l.stateErrorMessage),o.value[$]=!1}}else{const V=l.ApprovalData.CrackNAHeaders.find(L=>L.id===R);if(V){if(t.plannerApprove){if(!a.isUndefined(V.plannerCbmNAStatus)&&V.plannerCbmNAStatus==="Confirmed")return}else if(V.cbmNAStatus==="Confirmed")return;o.value[$]=!0,t.plannerApprove?await l.updatePlannerCrackConfirmedStatus(R):await l.updateCrackConfirmedStatus(R),w.value.handleErrorMessage(l.stateIsError,l.stateErrorMessage),o.value[$]=!1}}},P=()=>{u("onRefreshData")};return(R,$)=>{const V=he("el-collapse-item"),L=he("el-collapse");return i(),d(ne,null,[e("div",Cg,[p(L,{class:"task-group general-accordion py-1 px-5 testing",modelValue:S.value,"onUpdate:modelValue":$[0]||($[0]=A=>S.value=A)},{default:O(()=>[p(V,{title:s.title,name:s.title},{default:O(()=>[e("div",wg,[Dg,$g,s.isDefect?(i(),d("div",Sg,"Comments")):D("",!0),e("div",{class:se([[x.value?"col justify-content-end pe-16":"col-1 justify-content-center"],"column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex"])},"Review Status",2),!s.isDefect&&!x.value?(i(),d("div",Vg)):D("",!0),x.value?D("",!0):(i(),d("div",Ig)),x.value?D("",!0):(i(),d("div",Pg,"Confirmed"))]),s.headers.length<1?(i(),d("div",Rg,Ag)):(i(!0),d(ne,{key:1},Pe(s.headers,(A,te)=>(i(),d("div",{key:A.id,class:"row px-2 item mx-1 w-100 my-2"},[e("div",Bg,M(A.taskNo.replace(";","")),1),e("div",Tg,[e("span",{class:"text-break defect-identified-task",innerHTML:E(Yt)(A.taskDesc)},null,8,Lg)]),s.isDefect?(i(),d("div",Ng,[e("span",Og,M(A.commentValue),1)])):D("",!0),e("div",{class:se([[x.value?"col justify-content-end":"col-1 justify-content-center"],"column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex"])},[A.plannerCbmNAStatus=="Decline"||A.cbmNAStatus=="Decline"?(i(),d("div",{key:0,class:"label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center red-bg text-dark-red cursor-pointer",onClick:Z=>h(A)}," Declined ",8,Mg)):(i(),d("div",{key:1,class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",E(Qs)(A.id,s.headers,!0,"cbmNAStatus","plannerCbmNAStatus")]),onClick:Ae(Z=>h(A),["prevent"])}," Detailed Information ",10,jg))],2),!s.isDefect&&!x.value?(i(),d("div",Eg)):D("",!0),x.value?D("",!0):(i(),d("div",Fg)),x.value?D("",!0):(i(),d("div",Hg,[A.cbmNAStatus!="Decline"?(i(),d("div",{key:0,class:se(["mx-10 little-box rounded-circle d-flex justify-content-center align-items-center flex-fill cbm-confirm-checkbox flex-column",E(Ds)(A.id,s.headers,s.plannerApprove)&&E(Ks)()?s.isDisabled?"not-allowed":"dot":"not-allowed"])},[E(Ds)(A.id,s.headers,s.plannerApprove)?(i(),d("div",{key:0,class:"little-dot",onClick:Z=>H(A.id,te)},null,8,qg)):D("",!0),E(Ds)(A.id,s.headers,s.plannerApprove)?D("",!0):(i(),d("img",Kg)),o.value[te]?(i(),d("div",Gg,zg)):D("",!0)],2)):D("",!0)])),e("div",Jg,M(A.createdBy.name)+", "+M(A.updatedDate!=""?A.updatedDate:A.createdDate),1)]))),128))]),_:1},8,["title","name"])]),_:1},8,["modelValue"])]),p(Jl,{ref_key:"NAFormComponent",ref:w,"view-only":s.isDisabled||!x.value,visibility:_.value,"na-data-header":y.value,"na-data-detail":T.value,onOnSubmitDecline:I,onOnSubmitConfirm:g,onOnRefreshData:P,onClose:N},null,8,["view-only","visibility","na-data-header","na-data-detail"])],64)}}}),gx=tt(Qg,[["__scopeId","data-v-41c66d88"]]),Xg={class:"row pt-3 pb-3 text-dark modal-title"},Zg=e("h3",null," Please select if any of the questions below are applicable to this defect before submitting. Please note neither may be applicable and you can still submit and continue. ",-1),e1=e("span",{innerHTML:"Does the defect identified require > 30 minutes in labour to repair?"},null,-1),t1={class:"dialog-footer",style:{display:"block","text-align":"right"}},a1=Ue({__name:"DefectConfirmationDialog",props:["show","checkListArr"],emits:["close","updateCheckList","submit"],setup(s,{emit:n}){const t=s,u=n,l=ze({get:()=>t.checkListArr,set:x=>{u("updateCheckList",x)}}),o=()=>{u("submit")},w=ze(()=>t.show),S=()=>{u("close")};return(x,_)=>{const y=he("el-checkbox"),T=he("el-checkbox-group"),I=he("el-button"),g=he("el-dialog");return i(),ue(g,{modelValue:E(w),"onUpdate:modelValue":_[1]||(_[1]=N=>qa(w)?w.value=N:null),width:"50%","show-close":!1,"custom-class":"oil-not-in-range__header defect__confirmation_container",top:"30vh",center:!0,onClose:S},{footer:O(()=>[e("span",t1,[p(I,{onClick:S,style:{"box-shadow":"0px 24px 48px rgba(145, 158, 171, 0.2)"}},{default:O(()=>[be("Cancel")]),_:1}),p(I,{class:"button-OK-confirmation",type:"success",onClick:Ae(o,["prevent"]),style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white"}},{default:O(()=>[be("Submit")]),_:1})])]),default:O(()=>[e("div",Xg,[Zg,p(T,{modelValue:E(l),"onUpdate:modelValue":_[0]||(_[0]=N=>qa(l)?l.value=N:null),class:"d-flex flex-column defect-checkbox"},{default:O(()=>[p(y,{label:"Does the defect identified require > 30 minutes in labour to repair?"},{default:O(()=>[e1]),_:1}),p(y,{label:"Does the defect identified require > $250 in parts to repair?"})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])}}}),He=s=>(vt("data-v-762ce49f"),s=s(),pt(),s),s1=He(()=>e("span",{class:"el-dialog__title"},"Detailed Information for Defect Identification",-1)),l1=["innerHTML"],o1={key:0,class:"d-flex flex-column justify-content-between"},r1={class:"py-2 d-flex flex-row flex-grow-1"},n1={class:"flex-fill"},i1={class:"form-floating"},u1=He(()=>e("label",{for:"floatingInput"},"Task Description",-1)),d1={key:0,class:"mt-1"},c1={class:"d-flex flex-row justify-content-between"},v1={class:"py-2 d-flex flex-row flex-grow-1"},p1={class:"flex-fill"},m1={class:"form-floating"},f1=["innerHTML"],y1=He(()=>e("label",{for:"floatingInput"},"Asset Number",-1)),b1={class:"flex-fill ps-3"},h1={class:"form-floating"},g1=["innerHTML"],k1=He(()=>e("label",{for:"floatingInput"},"Serial Number",-1)),_1={class:"flex-fill ps-3"},x1={class:"form-floating"},C1=["innerHTML"],w1=He(()=>e("label",{for:"floatingInput"},"Ownership",-1)),D1={class:"d-flex flex-row justify-content-between"},$1={class:"mt-1 py-2"},S1={class:"d-flex flex-column"},V1={class:"mt-1 py-2"},I1={class:"row"},P1={class:"col pe-0"},R1={class:"form-floating"},U1=["value"],A1=He(()=>e("label",null,"Raised By",-1)),B1={class:"mt-1 py-2"},T1={class:"row"},L1={class:"col-4 pe-0 date"},N1={class:"form-floating"},O1=["value"],M1=He(()=>e("label",null,"Date Raised",-1)),j1={class:"col pe-0 d-flex"},E1={class:"d-flex flex-column flex-fill"},F1={class:"form-floating"},H1=["value"],q1=He(()=>e("label",{class:"text-nowrap"},"How long will this defect repair takes?",-1)),K1={key:0,class:"mt-2"},G1={class:"ms-2 d-flex align-items-center"},W1={class:"mt-1 py-2"},Y1=He(()=>e("div",{class:"mt-2"},null,-1)),z1=He(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Priority"),e("div",{class:"col-6"},"Action"),e("div",{class:"col-3 text-break"},"Person Responsible")],-1)),J1={class:"row p-3 m-1 priority-container"},Q1={class:"col-3"},X1={class:"form-check"},Z1=He(()=>e("label",{class:"form-check-label text-nowrap"}," (P1) Immediate ",-1)),ek=He(()=>e("div",{class:"col-6 word-breaker"},"Shall shut machine down and undertake repairs.",-1)),tk=He(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),ak={class:"row p-3 m-1 priority-container"},sk={class:"col-3"},lk={class:"form-check"},ok=He(()=>e("label",{class:"form-check-label text-nowrap"}," (P2) Urgent ",-1)),rk=He(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 7 days.",-1)),nk=He(()=>e("div",{class:"col-3 text-break"},"Maintenance Supervisor",-1)),ik={class:"row p-3 m-1 priority-container"},uk={class:"col-3"},dk={class:"form-check"},ck=He(()=>e("label",{class:"form-check-label text-nowrap"}," (P3) Routine ",-1)),vk=He(()=>e("div",{class:"col-6 word-breaker"},"Shall complete within 60 days.",-1)),pk=He(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),mk={class:"row p-3 m-1 priority-container"},fk={class:"col-3"},yk={class:"form-check"},bk=He(()=>e("label",{class:"form-check-label text-nowrap"}," (P4) Monitor ",-1)),hk=He(()=>e("div",{class:"col-6 word-breaker"},"Shall continue to inspect and monitor for 90 days.",-1)),gk=He(()=>e("div",{class:"col-3 text-break"},"Maintenance Planner",-1)),kk=He(()=>e("div",{class:"mt-2"},null,-1)),_k=He(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-3"},"Part Number"),e("div",{class:"col-5"},"Part Description"),e("div",{class:"col-1"},"Qty"),e("div",{class:"col"}),e("div",{class:"col"})],-1)),xk={class:"col-3 px-0"},Ck={class:"d-flex flex-column"},wk=["onUpdate:modelValue"],Dk={key:0,class:"mt-2"},$k={class:"col-5"},Sk={class:"d-flex flex-column"},Vk=["value","onChange"],Ik={key:0,class:"mt-2"},Pk={class:"col-1 px-1 d-flex flex-column justify-content-start"},Rk={class:"row p-0 m-0 h-50 w-100"},Uk={class:"p-0 col-12 d-flex"},Ak=["value","onInput"],Bk={key:0,class:"mt-2 flex-fill"},Tk={class:"col px-1 d-flex flex-column justify-content-start"},Lk={class:"row p-0 m-0 h-100 w-100 align-items-center"},Nk={class:"col px-1 d-flex flex-column justify-content-start position-relative"},Ok={class:"row p-0 m-0 h-100 w-100 align-items-center"},Mk={class:"position-absolute",style:{top:"10px",right:"0px"}},jk=["onClick"],Ek=He(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),Fk=He(()=>e("div",{class:"mt-2"},null,-1)),Hk=He(()=>e("div",{class:"row p-3 m-1 priority-container",style:{background:"#F4F6F8","border-radius":"8px"}},[e("div",{class:"col-6"},"Labour Activity"),e("div",{class:"col-2"},"Qty"),e("div",{class:"col-2 word-breaker"},"Hours Each"),e("div",{class:"col-2 word-breaker"},"Total Hours")],-1)),qk={class:"col-6 px-0"},Kk={class:"d-flex flex-column"},Gk={key:0,class:"mt-2"},Wk={class:"col-2 d-flex justify-content-start"},Yk={class:"d-flex flex-column"},zk=["value","onInput"],Jk={key:0,class:"mt-2"},Qk={class:"col-2 d-flex justify-content-start"},Xk={class:"d-flex flex-column"},Zk=["value","onInput"],e_={key:0,class:"mt-2"},t_={class:"col-2 d-flex flex-column justify-content-start"},a_={class:"row p-0 m-0 h-50 w-100"},s_={class:"p-0 col-12 d-flex"},l_=["value"],o_=["onClick"],r_={key:0,class:"mt-2 flex-fill"},n_=He(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),i_=He(()=>e("div",{class:"mt-2"},null,-1)),u_={class:"d-flex flex-fill flex-column"},d_={class:"d-flex flex-row"},c_=["value","placeholder","onChange"],v_=["onClick"],p_={key:0,class:"mt-2"},m_=He(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),f_=He(()=>e("div",{class:"mt-2"},null,-1)),y_={class:"d-flex flex-row"},b_={class:"d-flex flex-fill flex-column"},h_={key:0,class:"mt-2"},g_=["onClick"],k_={key:0,class:"mt-2"},__=He(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),x_=He(()=>e("div",{class:"mt-2"},null,-1)),C_={class:"d-flex flex-row"},w_={class:"d-flex flex-fill flex-column"},D_={key:0,class:"mt-2"},$_=["onClick"],S_={key:0,class:"mt-2"},V_=He(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),I_={class:"my-5 w-100"},P_=Ue({__name:"DefectsYesForm",props:{visibility:{required:!0,type:Boolean},generic:{required:!1,type:Boolean,default:!1},assetNumber:{required:!0,type:String},defectData:{required:!0,type:Object},workorder:{required:!1,type:String,default:""},form:{required:!1,type:String,default:""}},emits:["onRefreshData"],setup(s,{emit:n}){const t=s,u=n,l=gt(),o=Jt(),w=Ut(),S=et(),x=Os(),_=Ms(),y=v(!1),T=v(!1),I=v(!0),g=v(!1),N=Fe(t,"visibility"),h=Fe(t,"defectData"),H=v("P1"),P=v([""]),R=v([""]),$=v([""]),V=v([""]),L=v([!0]),A=v([""]),te=v([!0]),Z=v(!1),ee=v(us()),W=v(""),K=v(),oe=v({isValid:!0,errorMessage:""}),m=b(()=>a.isUndefined(o.images)?[]:o.images.ImageInfos),f=U=>{U==""?(oe.value.isValid=!1,oe.value.errorMessage="Required"):(oe.value.isValid=!0,oe.value.errorMessage=""),W.value=U},ve=v("Priority"),Ve=v("Parts Required"),_e=v("Labour Required"),Ce=v("Other Resources Required (optional)"),xe=v("Defect Symptom"),me=v("Defect Cause"),we=v(""),$e=b(()=>o.SerialNumber),Ie=b(()=>{const U=o.Ownership;return os(U)}),Me=U=>U===""?U:is(ft(U)),qe=b(()=>o.DefectUpdate),at=b(()=>S.formAlreadySubmitted),Qe=b(()=>"Defect Identified Description"),We=b(()=>"Defect Repair Instructions / Actions"),F=b(()=>S.taskAlreadyUpdated),le=b(()=>t.generic?h.value.Title:Yt(Js(o.stateTask)));Xe(at,U=>{U&&(o.toggleYesVisible(!1),S.resetTaskUpdated(),o.resetTaskUpdated(),y.value=!1,I.value=!1,g.value=!1,o.setCancelledState(!0),l.clearCurrent())}),Xe(F,U=>{U&&(o.toggleYesVisible(!1),S.resetTaskUpdated(),o.resetTaskUpdated(),y.value=!1,I.value=!1,g.value=!1,o.setCancelledState(!0),l.clearCurrent())}),Xe(qe,U=>{o.DefectYesVisible==!0&&(U===!1&&(g.value=!0),U===!0&&(y.value=!0))});const J=b(()=>{const U="Diesel Fitter";return x.positionOption&&x.positionOption.find(z=>z.label==U)?U:""}),G=()=>{const U=ss();return`${el(U.stateTimeZone)} (${U.stateTimeZoneDesc})`},fe=()=>{o.setOpenDialogConfirmSubmitDefect(!0),H.value="P1",P.value=[J.value],R.value=[""],$.value=[""],V.value=[""],L.value=[!0],A.value=[""],te.value=[!0],o.toggleNoVisible(!1),S.resetTaskUpdated(),o.resetTaskUpdated(),y.value=!1,I.value=!1,g.value=!1},ge=U=>{h.value.setDescription(U.value),h.value.validateDescription()},je=U=>{U.preventDefault(),U.target.value=ct(U.target.value),h.value.setPlannedDuration(ft(U.target.value)),h.value.validatePlannedDuration()},Q=U=>{let z=U.keyCode?U.keyCode:U.which;(z<48||z>57)&&z!=46&&U.preventDefault()},de=U=>{h.value.setInstruction(U.value),h.value.validateInstruction()},Se=U=>{U.preventDefault(),h.value.setPriority(U.target.value)},B=(U,z)=>{U.preventDefault(),h.value.setPartDescription(z,U.target.value),h.value.validatePartDescription(h.value.Parts[z])},C=(U,z)=>{U.preventDefault(),U.target.value=ct(U.target.value),h.value.setPartQty(z,ft(U.target.value)),h.value.validatePartQty(h.value.Parts[z])},ye=U=>{const{value:z,index:Be}=U;h.value.setPartImage(Be,z)},Re=U=>{const{value:z,index:Be}=U;h.value.setPartAttachment(Be,z)},Ne=()=>{if(h.value.Parts.every(z=>z.partDescription!==""&&z.qty!=="")){for(const z in h.value.Parts)if(Object.hasOwn(h.value.Parts,z)){const Be=h.value.Parts[z];if(!Be.partNumberValidation.isValid||!Be.descriptionValidation.isValid||!Be.qtyValidation.isValid)return}}else{h.value.validateParts();return}h.value.addPart({partNumber:"",partDescription:"",qty:""})},Ke=U=>{h.value.removeParts(U)},Je=U=>{h.value.setLabourActivity(U,P.value[U]),h.value.validateLaboursActivity(h.value.Labours[U])},nt=(U,z)=>{U.preventDefault(),U.target.value=ct(U.target.value),h.value.setLabourQty(z,ft(U.target.value)),h.value.validateLaboursQty(h.value.Labours[z]),h.value.Labours[z].position||Je(z),st(z)},it=(U,z)=>{U.preventDefault(),U.target.value=ct(U.target.value),h.value.setLabourHireEach(z,ft(U.target.value)),h.value.validateLaboursHireEach(h.value.Labours[z]),h.value.Labours[z].position||Je(z),st(z)},st=U=>{if(!h.value.Labours[U].qty||!h.value.Labours[U].hireEach)return;h.value.Labours[U].totalHoursValidation.message="",h.value.Labours[U].totalHoursValidation.isValid=!0;const z=+h.value.Labours[U].qty,Be=+h.value.Labours[U].hireEach,dt=z*Be;h.value.setLabourTotalHours(U,dt.toFixed(2).toString())},rt=()=>{if(h.value.Labours.every(z=>z.position!==""&&z.qty!==""&&z.hireEach!==""&&z.totalHours!=="")){for(const z in h.value.Labours)if(Object.hasOwn(h.value.Labours,z)){const Be=h.value.Labours[z];if(!Be.positionValidation.isValid||!Be.qtyValidation.isValid||!Be.hireEachValidation.isValid)return}h.value.validateLabours()&&(h.value.addLabour({position:"",qty:"",hireEach:"",totalHours:""}),P.value.push(J.value),Je(h.value.Labours.length-1))}else{h.value.validateLabours();return}},lt=U=>{P.value.splice(U,1),h.value.removeLabours(U)},k=(U,z)=>{U.preventDefault(),h.value.setResources(z,U.target.value),!(h.value.Resources.length==1&&h.value.Resources[z].value=="")&&h.value.validateResource(h.value.Resources[z])},j=()=>{if(!h.value.Resources.every(z=>z.value!=="")){h.value.validateResourcesAdd();return}h.value.addResource("")},X=U=>{h.value.removeResource(U),h.value.validateResourcesRemove()},pe=U=>{A.value[U]="",te.value[U]=!0,h.value.setCauses(U,$.value[U]),h.value.validateCause(h.value.Causes[U])},Y=U=>{A.value[U.index]=U.value,te.value[U.index]=A.value[U.index]!=""},ae=()=>{for(const Be in h.value.Causes)if(Object.hasOwn(h.value.Causes,Be)&&!h.value.Causes[Be].isValid)return;if(!h.value.Causes.every(Be=>Be.value!=="")){h.value.validateCauses();return}const z=$.value.length-1;if($.value[z]==="Other")if(A.value[z])te.value[z]=!0;else{te.value[z]=!1;return}h.value.addCauses(""),$.value.push(""),A.value.push(""),te.value.push(!0)},ot=U=>{$.value.splice(U,1),A.value.splice(U,1),te.value.splice(U,1),h.value.removeCauses(U)},Pt=U=>{V.value[U]="",L.value[U]=!0,h.value.setSymptom(U,R.value[U]),h.value.validateSymptom(h.value.Symptoms[U])},kt=U=>{V.value[U.index]=U.value,L.value[U.index]=V.value[U.index]!=""},_t=()=>{for(const Be in h.value.Symptoms)if(Object.hasOwn(h.value.Symptoms,Be)&&!h.value.Symptoms[Be].isValid)return;if(!h.value.Symptoms.every(Be=>Be.value!=="")){h.value.validateSymptoms();return}const z=R.value.length-1;if(R.value[z]==="Other")if(V.value[z])L.value[z]=!0;else{L.value[z]=!1;return}h.value.addSymptom(""),R.value.push(""),V.value.push(""),L.value.push(!0)},ra=U=>{R.value.splice(U,1),V.value.splice(U,1),L.value.splice(U,1),h.value.removeSymptom(U)},na=async()=>{const U=[{keyValue:o.ItemKey,propertyParams:[{propertyName:"value",propertyValue:"2"},{propertyName:"updatedBy",propertyValue:JSON.stringify(S.employee)},{propertyName:"updatedDate",propertyValue:Kl()}]}];await S.updateServiceSheetTaskValue(U,w.user.EmployeeId,w.user.Name),o.SetTaskUpdated(),S.updateAllItems(o.ItemKey,"2")},Ot=()=>{for(const z in h.value.Symptoms)if(Object.hasOwn(h.value.Symptoms,z)&&!h.value.Symptoms[z].isValid)return!1;const U=R.value.length-1;return R.value[U]==="Other"?V.value[U]?L.value[U]=!0:L.value[U]=!1:L.value[U]=!0,L.value[U]},Mt=()=>{for(const z in h.value.Causes)if(Object.hasOwn(h.value.Causes,z)&&!h.value.Causes[z].isValid)return!1;const U=$.value.length-1;return $.value[U]==="Other"?A.value[U]?te.value[U]=!0:te.value[U]=!1:te.value[U]=!0,te.value[U]},xt=v(!1);Xe(m,U=>{U.length>0&&(xt.value=!1)},{deep:!0});const mt=b(()=>!a.isUndefined(o.stateItem.customValidation)&&o.stateItem.customValidation.includes("normalTakePhoto")),jt=async()=>{var U,z;h.value.validateDefectForm(),t.generic&&(W.value==""?(oe.value.isValid=!1,oe.value.errorMessage="Required"):(oe.value.isValid=!0,oe.value.errorMessage="")),mt.value?a.isUndefined(o.images)||o.images.ImageInfos.length<1?(xt.value=!0,Fa()):(U=h.value)!=null&&U.IsValid&&Ot()&&Mt()&&oe.value.isValid?T.value=!0:(da(),Fa()):(z=h.value)!=null&&z.IsValid&&Ot()&&Mt()&&oe.value.isValid?T.value=!0:(da(),Fa())},Da=()=>{h.value.Symptoms.forEach((U,z)=>{U.value=U.value==="Other"?`Other:${V.value[z]}`:U.value})},ia=()=>{h.value.Causes.forEach((U,z)=>{U.value=U.value==="Other"?`Other:${A.value[z]}`:U.value})},Et=async()=>{T.value=!1;const U=St.service({lock:!0,text:"Processing...",background:"rgba(0, 0, 0, 0.7)"});if(h.value.setAssetNumber(t.assetNumber),Da(),ia(),t.generic)await o.createDefectGeneric({form:t.form,workorder:t.workorder,taskDesc:W.value}),u("onRefreshData"),o.SetTaskUpdated();else{let z=!1;if(o.stateTask.taskValue=="3"){const dt=[{keyValue:"",propertyParams:[{propertyName:"isActive",propertyValue:"false"}]}];await S.updateDefectHeaderWithTaskKey(o.stateTask.key,dt),o.stateTask.taskValue="2",z=!0}else o.stateTask.taskValue=="1"&&(z=!0);await o.createDefect(z)?await na():S.taskErrorDialog&&ua()}U.close()},$a=()=>{T.value=!1},ua=()=>{o.setOpenDialogConfirmSubmitDefect(!1),H.value="P1",P.value=[J.value],R.value=[""],$.value=[""],V.value=[""],L.value=[!0],A.value=[""],te.value=[!0],o.toggleNoVisible(!1),S.resetTaskUpdated(),o.resetTaskUpdated(),y.value=!1,I.value=!1,g.value=!1},Ft=async()=>{I.value===!0&&o.setCancelledState(!0),P.value=[J.value],R.value=[""],$.value=[""],V.value=[""],L.value=[!0],A.value=[""],te.value=[!0],we.value="",oe.value={isValid:!0,errorMessage:""},W.value="",o.OpenDialogConfirmSubmitDefect==!1&&o.resetInstance(),o.setUpdateTaskDefect(""),l.clearCurrent(),l.setShowCloseButton(!1),xt.value=!1,l.reset()},At=v(null),Sa=()=>{h.value.setIsNeed30Minutes(o.stateIsNeed30Minutes),y.value=!1,l.setShowCloseButton(!0),o.setOpenDialogConfirmSubmitDefect(!1),Ka(ee.value),oe.value={isValid:!0,errorMessage:""},I.value=!0,H.value="P1",P.value=[J.value],R.value=[""],$.value=[""],V.value=[""],L.value=[!0],A.value=[""],te.value=[!0],K.value={images:a.cloneDeep(m.value),description:a.cloneDeep(t.defectData.Description.value),priority:a.cloneDeep(t.defectData.Priority),instruction:a.cloneDeep(t.defectData.Instruction.value),plannedDuration:a.cloneDeep(t.defectData.PlannedDuration.value),parts:a.cloneDeep(t.defectData.Parts),labours:a.cloneDeep(t.defectData.Labours),resources:a.cloneDeep(t.defectData.Resources),symptoms:a.cloneDeep(t.defectData.Symptoms),causes:a.cloneDeep(t.defectData.Causes)},K.value.labours[0].position=J.value,Ps(At.value)},da=()=>{ve.value="Priority",Ve.value="Parts Required",_e.value="Labour Required",Ce.value="Other Resources Required (optional)",xe.value="Defect Symptom",me.value="Defect Cause"},Va=()=>{Aa.value?Z.value=!0:o.toggleYesVisible(!1)},Ia=()=>{Z.value=!1},Pa=()=>{Z.value=!1,o.toggleYesVisible(!1)},Ra=["images","description","priority","instruction","plannedDuration","parts","labours","resources","symptoms","causes"],Ua=b(()=>({images:m.value,description:t.defectData.Description.value,priority:t.defectData.Priority,instruction:t.defectData.Instruction.value,plannedDuration:t.defectData.PlannedDuration.value,parts:t.defectData.Parts,labours:t.defectData.Labours,resources:t.defectData.Resources,symptoms:t.defectData.Symptoms,causes:t.defectData.Causes})),Aa=b(()=>Is(Ra,K.value,Ua.value));return(U,z)=>{const Be=he("Label"),dt=he("el-collapse-item"),Ct=he("el-collapse"),Xt=he("el-option"),Zt=he("el-select"),Ba=he("el-dialog");return i(),ue(Ba,{modelValue:N.value,"onUpdate:modelValue":z[12]||(z[12]=Ht=>N.value=Ht),width:"90%",center:"",onClosed:Ft,onOpened:Sa,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":Va,"custom-class":`el-defect-crack-form-custom form-defect-yes-eform ${ee.value}`,"destroy-on-close":!0},{title:O(()=>[s1,e("span",{class:"el-dialog__title task-title",innerHTML:le.value,ref_key:"defectDetailRef",ref:At},null,8,l1)]),default:O(()=>{var Ht,ca;return[e("div",null,[s.generic?(i(),d("div",o1,[e("div",r1,[e("div",n1,[e("div",i1,[Ge(e("input",{type:"text",class:"form-control","onUpdate:modelValue":z[0]||(z[0]=ke=>W.value=ke),"on:handleChange":f},null,544),[[Rt,W.value]]),u1])])]),oe.value.isValid?D("",!0):(i(),d("div",d1,[p(Be,{class:"error-label"},{default:O(()=>[be(M(oe.value.errorMessage),1)]),_:1})]))])):D("",!0),e("div",c1,[e("div",v1,[e("div",p1,[e("div",m1,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:s.assetNumber},null,8,f1),y1])]),e("div",b1,[e("div",h1,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:$e.value},null,8,g1),k1])]),e("div",_1,[e("div",x1,[e("div",{type:"text",class:"form-control asset-number-disabled-div",innerHTML:Ie.value},null,8,C1),w1])])])]),e("div",D1,[p(js,{id:"defect",disabled:!1,"allow-delete":!0,"is-monitoring":!1,"is-mandatory":mt.value},null,8,["is-mandatory"])]),xt.value?(i(),ue(Be,{key:1,class:"error-label"},{default:O(()=>[be("Required")]),_:1})):D("",!0),e("div",$1,[e("div",S1,[p(ht,{class:"form-control h-100px",value:(ca=(Ht=h.value)==null?void 0:Ht.Description)==null?void 0:ca.value,label:Qe.value,name:"defectPlaceholder",errorMessage:h.value.Description.errorMessage,"is-valid":h.value.Description.isValid,onHandleChange:ge},null,8,["value","label","errorMessage","is-valid"])])]),e("div",V1,[e("div",I1,[e("div",P1,[e("div",R1,[e("input",{type:"text",class:"form-control",disabled:"",value:E(o).selectedFitter.name},null,8,U1),A1])])])]),e("div",B1,[e("div",T1,[e("div",L1,[e("div",N1,[e("input",{type:"text",class:"form-control",disabled:"",value:G()},null,8,O1),M1])]),e("div",j1,[e("div",E1,[e("div",F1,[e("input",{type:"text",pattern:"[0-9]*",inputmode:"numeric",class:"form-control",value:Me(h.value.PlannedDuration.value),onInput:je,onKeypress:Q},null,40,H1),q1]),h.value.PlannedDuration.isValid?D("",!0):(i(),d("div",K1,[p(Be,{class:"error-label"},{default:O(()=>[be(M(h.value.PlannedDuration.errorMessage),1)]),_:1})]))]),e("div",G1,[p(Be,null,{default:O(()=>[be("Hours")]),_:1})])])])]),e("div",W1,[p(ht,{class:"form-control h-100px",value:h.value.Instruction.value,label:We.value,name:"instructionPlaceholder",errorMessage:h.value.Instruction.errorMessage,"is-valid":h.value.Instruction.isValid,onHandleChange:de},null,8,["value","label","errorMessage","is-valid"])]),Y1,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:ve.value,"onUpdate:modelValue":z[5]||(z[5]=ke=>ve.value=ke)},{default:O(()=>[p(dt,{title:"Priority",name:"Priority"},{default:O(()=>[z1,e("div",J1,[e("div",Q1,[e("div",X1,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":z[1]||(z[1]=ke=>H.value=ke),value:"P1",onChange:Ae(Se,["prevent"])},null,544),[[wt,H.value]]),Z1])]),ek,tk]),e("div",ak,[e("div",sk,[e("div",lk,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":z[2]||(z[2]=ke=>H.value=ke),value:"P2",onChange:Ae(Se,["prevent"])},null,544),[[wt,H.value]]),ok])]),rk,nk]),e("div",ik,[e("div",uk,[e("div",dk,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":z[3]||(z[3]=ke=>H.value=ke),value:"P3",onChange:Ae(Se,["prevent"])},null,544),[[wt,H.value]]),ck])]),vk,pk]),e("div",mk,[e("div",fk,[e("div",yk,[Ge(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":z[4]||(z[4]=ke=>H.value=ke),value:"P4",onChange:Ae(Se,["prevent"])},null,544),[[wt,H.value]]),bk])]),hk,gk])]),_:1})]),_:1},8,["modelValue"]),kk,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:Ve.value,"onUpdate:modelValue":z[6]||(z[6]=ke=>Ve.value=ke)},{default:O(()=>[p(dt,{title:"Parts Required",name:"Parts Required"},{default:O(()=>[_k,(i(!0),d(ne,null,Pe(h.value.Parts,(ke,Te)=>(i(),d("div",{key:ke,class:"row p-3 m-1 priority-container px-0"},[e("div",xk,[e("div",Ck,[Ge(e("input",{type:"text",class:"form-control","onUpdate:modelValue":Le=>h.value.Parts[Te].partNumber=Le},null,8,wk),[[Rt,h.value.Parts[Te].partNumber]]),ke.partNumberValidation.isValid?D("",!0):(i(),d("div",Dk,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.partNumberValidation.message),1)]),_:2},1024)]))])]),e("div",$k,[e("div",Sk,[e("input",{type:"text",class:"form-control",value:ke.partDescription,onChange:Le=>B(Le,Te)},null,40,Vk),ke.descriptionValidation.isValid?D("",!0):(i(),d("div",Ik,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.descriptionValidation.message),1)]),_:2},1024)]))])]),e("div",Pk,[e("div",Rk,[e("div",Uk,[e("input",{pattern:"[0-9]*",inputmode:"numeric",class:"form-control",value:Me(ke.qty),onInput:Le=>C(Le,Te),onKeypress:Q},null,40,Ak)])]),ke.qtyValidation.isValid?D("",!0):(i(),d("div",Bk,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.qtyValidation.message),1)]),_:2},1024)]))]),e("div",Tk,[e("div",Lk,[p(Fs,{index:Te,"item-value":ke.images||[],onHandleChangeImage:ye},null,8,["index","item-value"])])]),e("div",Nk,[e("div",Ok,[p(Hs,{index:Te,"item-value":ke.attachment||[],onHandleChangeAttachment:Re},null,8,["index","item-value"])]),e("div",Mk,[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(Le=>Ke(Te),["prevent"])},null,8,jk)])])]))),128)),e("button",{class:"my-3 btn-add-new",onClick:Ne},[Ek,be(" Add more parts ")])]),_:1})]),_:1},8,["modelValue"]),Fk,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:_e.value,"onUpdate:modelValue":z[8]||(z[8]=ke=>_e.value=ke)},{default:O(()=>[p(dt,{title:"Labour Required",name:"Labour Required"},{default:O(()=>[Hk,(i(!0),d(ne,null,Pe(h.value.Labours,(ke,Te)=>(i(),d("div",{key:ke,class:"row p-3 m-1 priority-container ps-0"},[e("div",qk,[e("div",Kk,[p(Zt,{modelValue:P.value[Te],"onUpdate:modelValue":Le=>P.value[Te]=Le,filterable:"",placeholder:"Choose Labour",onChange:Le=>Je(Te),class:"w-100"},{default:O(()=>[(i(!0),d(ne,null,Pe(E(x).positionOption,Le=>(i(),ue(Xt,{key:Le.value,label:Le.label,value:Le.label},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),ke.positionValidation.isValid?D("",!0):(i(),d("div",Gk,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.positionValidation.message),1)]),_:2},1024)]))])]),e("div",Wk,[e("div",Yk,[e("input",{pattern:"[0-9]*",inputmode:"numeric",class:"form-control",value:Me(ke.qty),onKeypress:z[7]||(z[7]=(...Le)=>E(ga)&&E(ga)(...Le)),onInput:Le=>nt(Le,Te)},null,40,zk),ke.qtyValidation.isValid?D("",!0):(i(),d("div",Jk,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.qtyValidation.message),1)]),_:2},1024)]))])]),e("div",Qk,[e("div",Xk,[e("input",{pattern:"[0-9]*",inputmode:"numeric",class:"form-control",value:Me(ke.hireEach),onKeypress:Q,onInput:Le=>it(Le,Te)},null,40,Zk),ke.hireEachValidation.isValid?D("",!0):(i(),d("div",e_,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.hireEachValidation.message),1)]),_:2},1024)]))])]),e("div",t_,[e("div",a_,[e("div",s_,[e("input",{class:"form-control",value:Me(ke.totalHours),disabled:""},null,8,l_),e("div",{class:se(["ms-4 d-flex align-items-center",Te===0?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(Le=>lt(Te),["prevent"])},null,8,o_)],2)])]),ke.totalHoursValidation.isValid?D("",!0):(i(),d("div",r_,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.totalHoursValidation.message),1)]),_:2},1024)]))])]))),128)),e("button",{class:"my-3 btn-add-new",onClick:rt},[n_,be(" Add more labour ")])]),_:1})]),_:1},8,["modelValue"]),i_,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:Ce.value,"onUpdate:modelValue":z[9]||(z[9]=ke=>Ce.value=ke)},{default:O(()=>[p(dt,{title:"Other Resources Required (optional)",name:"Other Resources Required (optional)"},{default:O(()=>[(i(!0),d(ne,null,Pe(h.value.Resources,(ke,Te)=>(i(),d("div",{class:"p-2 d-flex",key:ke.value},[e("div",u_,[e("div",d_,[e("input",{type:"text",class:"form-control",value:ke.value,placeholder:`Resource ${Number(Te)+1}`,onChange:Le=>k(Le,Te)},null,40,c_),e("div",{class:se(["ms-4 d-flex align-items-center",Te===0?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(Le=>X(Te),["prevent"])},null,8,v_)],2)]),ke.isValid?D("",!0):(i(),d("div",p_,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.errorMessage),1)]),_:2},1024)]))])]))),128)),e("button",{class:"my-3 btn-add-new",onClick:j},[m_,be(" Add new resource ")])]),_:1})]),_:1},8,["modelValue"]),f_,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:xe.value,"onUpdate:modelValue":z[10]||(z[10]=ke=>xe.value=ke)},{default:O(()=>[p(dt,{title:"Defect Symptom",name:"Defect Symptom"},{default:O(()=>[(i(!0),d(ne,null,Pe(h.value.Symptoms,(ke,Te)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:ke.value},[e("div",y_,[e("div",b_,[p(Zt,{modelValue:R.value[Te],"onUpdate:modelValue":Le=>R.value[Te]=Le,placeholder:"Select Symptom",filterable:"",onChange:Le=>Pt(Te),class:"w-100"},{default:O(()=>[(i(!0),d(ne,null,Pe(E(_).Symptoms,Le=>(i(),ue(Xt,{key:Le.id,label:Le.symptom,value:Le.symptom},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),R.value[Te]==="Other"?(i(),d("div",h_,[p(ht,{class:"form-control h-100px",value:V.value[Te],label:"Description",name:"Description",errorMessage:"Required","is-valid":L.value[Te],index:Te,onHandleChange:kt},null,8,["value","is-valid","index"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",Te===0?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(Le=>ra(Te),["prevent"])},null,8,g_)],2)]),ke.isValid?D("",!0):(i(),d("div",k_,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.errorMessage),1)]),_:2},1024)]))]))),128)),e("button",{class:"my-3 btn-add-new",onClick:Ae(_t,["prevent"])},[__,be(" Add another symptom ")])]),_:1})]),_:1},8,["modelValue"]),x_,p(Ct,{class:"task-group general-accordion py-1 px-5",modelValue:me.value,"onUpdate:modelValue":z[11]||(z[11]=ke=>me.value=ke)},{default:O(()=>[p(dt,{title:"Defect Cause",name:"Defect Cause"},{default:O(()=>[(i(!0),d(ne,null,Pe(h.value.Causes,(ke,Te)=>(i(),d("div",{class:"p-2 d-flex flex-column",key:ke.value},[e("div",C_,[e("div",w_,[p(Zt,{modelValue:$.value[Te],"onUpdate:modelValue":Le=>$.value[Te]=Le,placeholder:"Select Cause",filterable:"",onChange:Le=>pe(Te),class:"w-100"},{default:O(()=>[(i(!0),d(ne,null,Pe(E(_).Causes,Le=>(i(),ue(Xt,{key:Le.id,label:Le.causes,value:Le.causes},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),$.value[Te]==="Other"?(i(),d("div",D_,[p(ht,{class:"form-control h-100px",value:A.value[Te],label:"Description",name:"Description",errorMessage:"Required","is-valid":te.value[Te],index:Te,onHandleChange:Y},null,8,["value","is-valid","index"])])):D("",!0)]),e("div",{class:se(["ms-4 d-flex align-items-center",Te===0?"hidden":""])},[e("em",{class:"fa fa-times",style:{color:"gray",cursor:"pointer"},onClick:Ae(Le=>ot(Te),["prevent"])},null,8,$_)],2)]),ke.isValid?D("",!0):(i(),d("div",S_,[p(Be,{class:"error-label"},{default:O(()=>[be(M(ke.errorMessage),1)]),_:2},1024)]))]))),128)),e("button",{class:"my-3 btn-add-new",onClick:ae},[V_,be(" Add another cause ")])]),_:1})]),_:1},8,["modelValue"]),e("div",I_,[e("button",{class:"btn btn-success w-100",onClick:Ae(jt,["prevent"]),style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white"}},"Submit")])]),p(zt,{visibility:Z.value,caption:"Are you sure want to close the defect form? <br /> Note: By closing the defect form, you will lose your defect data that you have already inputted.",onOnNoConfirm:Ia,onOnYesConfirm:Pa},null,8,["visibility"]),p(zt,{visibility:T.value,caption:"Please confirm this defect information is correct.",onOnNoConfirm:$a,onOnYesConfirm:Et},null,8,["visibility"]),p(_a,{show:y.value,message:"Defect Information Successfully Submitted","show-left-button":!0,"left-button-label":"+ Add Another Defect",onLeftButtonAction:fe,backgroundLeftButton:"#18AF4A",colorLeftButton:"#FFF",borderColorLeftButton:"#18AF4A",backgroundRightButton:"#FFF",colorRightButton:"#18AF4A",borderColorRightButton:"#18AF4A",onClose:ua},null,8,["show"])]}),_:1},8,["modelValue","custom-class"])}}}),R_=tt(P_,[["__scopeId","data-v-762ce49f"]]),It=s=>(vt("data-v-f8e2389a"),s=s(),pt(),s),U_={class:"mt-5 ps-0"},A_={class:"row px-2 item mx-1 w-100 defect-panel-header"},B_=It(()=>e("div",{class:"col align-items-center d-flex text-break"},"Task Description",-1)),T_=It(()=>e("div",{class:"text-break col-1 text-center column-sm-11-percent column-md-10-percent column-lg-5-percent align-items-center d-flex justify-content-center"},"Priority",-1)),L_=It(()=>e("div",{class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},"Review Status",-1)),N_=It(()=>e("div",{class:"col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center"},"Work Order",-1)),O_=It(()=>e("div",{class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},"Repair Status",-1)),M_={key:0,class:"col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",style:{"word-break":"initial !important"}},j_={key:0,class:"row flex-nowrap px-2 my-2 mx-1 w-100"},E_=It(()=>e("p",{style:{"text-align":"center"}},"No data recorded",-1)),F_=[E_],H_={class:"row flex-nowrap px-2 my-2 mx-1 w-100"},q_={class:"col align-items-center d-flex text-break defect-description"},K_=["innerHTML"],G_={class:"text-center",style:{"font-weight":"600",color:"white"}},W_={class:"col-1 column-sm-20-percent column-md-24-percent column-lg-10-percent column-xl-10-percent align-items-center d-flex justify-content-center"},Y_=["onClick"],z_=["onClick"],J_={class:"row"},Q_={class:"col-8 col-md-8 d-flex flex-column pe-0"},X_=["value","onChange","disabled"],Z_={key:0,class:"ms-1 d-flex align-items-center"},e2=It(()=>e("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),t2=It(()=>e("span",null,"Loading...",-1)),a2=[e2,t2],s2={class:"col-4 col-md-3 ps-0 pe-1"},l2=["disabled","onClick"],o2=It(()=>e("i",{class:"fa fa-save"},null,-1)),r2=[o2],n2=It(()=>e("img",{src:xa,alt:""},null,-1)),i2=[n2],u2={class:"mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center mx-auto",style:{"margin-top":"6px",cursor:"initial"}},d2=["onClick"],c2={class:"row flex-nowrap w-100 flex-row-reverse create-by",style:{"font-size":"13px !important"}},v2=It(()=>e("em",{class:"fa fa-plus me-2"},null,-1)),p2=Ue({__name:"DefectPanelGeneric",props:{viewOnly:{required:!1,type:Boolean,default:!1},supervisor:{required:!0,type:Boolean,default:!0},fitterId:{required:!1,type:String,default:""},plannerApprove:{required:!1,type:Boolean,default:!1},viewIsDownload:{required:!1,type:Boolean,default:!1},assetNumber:{required:!1,type:String,default:""},workorder:{required:!1,type:String,default:""},form:{required:!1,type:String,default:""},disableAddGeneric:{required:!1,type:Boolean,default:!0},isApproval:{type:Boolean,default:!1},title:{required:!1,type:String,default:"Repairs Completed"},isIdentifiedDefectMenu:{required:!1,type:Boolean,default:!1}},emits:["onRefreshData"],setup(s,{emit:n}){const t=s,u=Lt(),l=gt(),o=Ga(),w=ss(),S=Jt(),x=Wa(),_=n,y=v("Generic Defect Identified"),T=v(!1);v(!1);const I=v([]),g=v(""),N=v(!0),h=v(""),H=v(""),P=v(!1),R=v(!1),$=v(!1),V=v(),L=v(""),A=v([]),te=k=>{A.value=k},Z=()=>{S.toggleIsNeed30Minutes(!1),A.value.length<1?W():(A.value.includes("Does the defect identified require > 30 minutes in labour to repair?")&&S.toggleIsNeed30Minutes(!0),ee()),A.value=[]},ee=async()=>{R.value=!1,S.cretateInstance(!0),S.toggleYesVisible(!0)},W=()=>{R.value=!1,S.cretateInstance(!1),S.toggleNoVisible(!0)},K=()=>{A.value=[],R.value=!1},oe=k=>k?Ns(k):!1,m=v(!1),f=()=>{m.value=!0,$.value=!1,u.stateErrorMessage!=la.NO_NETWORK_VIEW&&(m.value=!1,u.resetErrorStatus(),lt())},ve=()=>{R.value=!0},Ve=b(()=>t.disableAddGeneric),_e=b(()=>S.DefectYesVisible);b(()=>S.DefectNoVisible);const Ce=(k,j)=>j=="Acknowledge",xe=v([""]),me=k=>{var j;return(j=I.value.find(X=>X.id==k))==null?void 0:j.wo},we=k=>{let j="";return k.isRevised=="true"&&(j="soft-yellow-background"),j},$e=k=>{var j;return(j=I.value.find(X=>X.id==k))==null?void 0:j.load},Ie=(k,j)=>{I.value.every(X=>X.id==j?(X.wo=k.target.value,!1):!0)},Me=k=>{let j=k.createdBy.name,X=k.updatedDate!=""?k.updatedDate:k.createdDate;const pe=u.ApprovalData.DefectGenericDetails.find(Y=>Y.defectHeaderId==k.defectHeaderId);return pe&&pe.otherFitterUpdatedBy&&(j=pe.otherFitterUpdatedBy.name,ka(pe.updatedDate)>ka(X)&&(X=pe.updatedDate)),`${j}, ${X}`},qe=k=>{k.preventDefault();const j=k.target,X=ct(j.value).replaceAll(".","");j.value=X},at=k=>{let j="red";return j=u.getGenericCompleteStatus(k.id)?"green":"red",j},Qe=k=>k.plannerStatus=="Decline"||k.status=="Decline"||k.priority===void 0?"invisible":"",We=k=>k.plannerStatus=="Decline"||k.status=="Decline"?"invisible":"",F=v(!1),le=v(),J=()=>{F.value=!1},G=k=>{F.value=!0,le.value={headerId:k}},fe=()=>{x.setIsAttachmentIncludeDownload(!1),J(),je()},ge=()=>{x.setIsAttachmentIncludeDownload(!0),J(),je()},je=()=>{L.value="";const k=a.cloneDeep(nt(le.value.headerId)),j=u.getDefectGenericHeader(le.value.headerId);k&&j&&Ls({header:j,detail:k.detail,serialNumber:S.SerialNumber,approvalData:{approvedBy:j.approvedBy,approvedDate:j.approvedDate},ownership:S.Ownership,unitNumber:o.SelectedDefectSheet.unitNumber,taskDesc:j.taskDesc,generic:!0})&&(L.value=le.value.headerId,V.value.handleDataFetch())},Q=()=>{u.updateDownloadHistory(L.value,"defect",!0)},de=b(()=>{const k=["P3","P4"];return u.ApprovalData.DefectGenericHeaders.filter(j=>u.ApprovalData.DefectGenericDetails.find(pe=>j.defectHeaderId==pe.defectHeaderId&&(pe.detail.isComplete??!0)==(t.title=="Repairs Completed")&&(t.supervisor||t.viewOnly?!0:k.includes(pe.detail.priority)))!=null)}),Se=b(()=>u.DataFetched),B=b(()=>{var k;return(k=u.DefectPictures[g.value])==null?void 0:k.map(j=>({fileName:j,url:""}))}),C=(k,j,X="",pe)=>{let Y=!0;const ae=j==null?void 0:j.find(ot=>ot.id===k);if(ae){if(X)return!0;if(Y=!1,t.plannerApprove){if((ae.priority=="P3"||ae.priority=="P4")&&ae.generalStatus=="Acknowledge"&&(Y=!1),(ae.priority=="P1"||ae.priority=="P2")&&ae.defectWorkorder)return!0;if((ae.priority=="P1"||ae.priority=="P2")&&!ae.defectWorkorder)return!1}else{if(ae.priority=="P3"||ae.priority=="P4"&&ae.defectWorkorder)return!0;if(ae.priority=="P3"||ae.priority=="P4"&&!ae.defectWorkorder)return!1;(ae.priority=="P1"||ae.priority=="P2")&&ae.generalStatus=="Acknowledge"&&(Y=!1)}if(Y||(Y=t.plannerApprove?ae.plannerStatus!="Acknowledge":ae.status!="Acknowledge",Y))return Y;Y=!(!ae.defectWorkorder||ae.defectWorkorder=="")}return Y},ye=(k,j)=>{let X="light-yellow color-dark-yellow";const pe=j==null?void 0:j.find(Y=>Y.id===k);if(t.supervisor){if(pe){if(["P3","P4"].includes((pe==null?void 0:pe.priority)??"")&&!t.isIdentifiedDefectMenu)return"light-green color-dark-green";X=pe.status==="Acknowledge"?"light-green color-dark-green":"light-yellow color-dark-yellow",pe.priority===void 0&&(X="light-green color-dark-green")}}else if(pe){switch(pe.generalStatus){case"Submited":X="light-yellow color-dark-yellow";break;case"Acknowledge":X="light-green color-dark-green";break}pe.priority===void 0&&(X="light-green color-dark-green")}return X},Re=k=>{k.target.value.length>=15&&k.preventDefault();let j=k.keyCode?k.keyCode:k.which;(j<48||j>57)&&k.preventDefault()};Xe(Se,k=>{k===!0&&(Ne(),Ke())});const Ne=()=>{I.value=[],de.value.forEach(k=>{I.value.push({id:k.id,wo:k.defectWorkorder,load:!1})})},Ke=()=>{xe.value=[],de.value.forEach(k=>{xe.value.findIndex(X=>k.taskDesc&&k.taskDesc.split(";")[1]&&k.taskDesc.split(";")[1]!=""?X==k.taskDesc.split(";")[0]+";"+k.taskDesc.split(";")[1]:X==k.taskNo)<0&&(k.taskDesc&&k.taskDesc.split(";")[1]&&k.taskDesc.split(";")[1]!=""?xe.value.push(k.taskDesc.split(";")[0]+";"+k.taskDesc.split(";")[1]):xe.value.push(k.taskNo))})};Nt(()=>{S.resetInstance(),Se.value&&(Ne(),Ke()),w.getServerTimestamp()});const Je=async k=>{l.setCurrent("defect"),await u.setDefectDataGeneric(k),u.setGenericDefectGeneralStatus(k),N.value=u.getGenericCompleteStatus(k),t.plannerApprove&&u.HeaderStatus!="Decline"&&u.updateHeaderGenericDefect(k),h.value=k,t.fitterId?H.value=o.SelectedWorkOrder:H.value=o.SelectedDefectSheet.workOrder,T.value=!0},nt=k=>u.getDefectGenericDetail(k),it=async k=>{const j=I.value.findIndex(X=>X.id==k);j<0||(I.value[j].load=!0,await u.updateDefectMO(k,I.value[j].wo,!0),I.value[j].load=!1,u.IsError&&($.value=!0))},st=()=>{T.value=!1},rt=()=>{P.value=!1},lt=()=>{_("onRefreshData")};return Xe(()=>S.OpenDialogConfirmSubmitDefect,k=>{k&&(R.value=k)}),(k,j)=>{const X=he("el-collapse-item"),pe=he("el-collapse");return i(),d(ne,null,[p(nl,{ref_key:"downloadPdfDefect",ref:V,onOnDownloadFinish:Q},null,512),e("div",U_,[p(pe,{class:"task-group general-accordion defect-panel-wrapper px-5 pb-1",modelValue:y.value,"onUpdate:modelValue":j[0]||(j[0]=Y=>y.value=Y)},{default:O(()=>[p(X,{title:`Generic Defect Identified - ${s.title}`,name:"Generic Defect Identified"},{default:O(()=>[e("div",A_,[B_,T_,L_,N_,O_,s.viewIsDownload?(i(),d("div",M_)):D("",!0)]),de.value.length===0?(i(),d("div",j_,F_)):(i(!0),d(ne,{key:1},Pe(de.value,Y=>(i(),d("div",{key:Y,class:se(["item px-2 my-2 mx-1",we(Y)])},[e("div",H_,[e("div",q_,[e("span",{class:"text-break",innerHTML:Y.taskDesc},null,8,K_)]),e("div",{class:se(["col-1 text-center column-sm-11-percent column-md-10-percent column-lg-5-percent align-items-center d-flex justify-content-center",We(Y)])},[e("div",{class:se(["little-box justify-content-center align-items-center justify-content-center d-flex mx-auto",E(es)(Y.priority)]),style:{"margin-top":"6px"}},[e("span",G_,M(Y.priority),1)],2)],2),e("div",W_,[Y.plannerStatus=="Decline"||Y.status=="Decline"?(i(),d("div",{key:0,class:"label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center red-bg text-dark-red cursor-pointer",onClick:ae=>Je(Y.defectHeaderId)}," Declined ",8,Y_)):(i(),d("div",{key:1,class:se(["label d-flex align-items-center acknowledge-btn py-2 px-1 rounded text-center justify-content-center cursor-pointer",ye(Y.defectHeaderId,de.value)]),onClick:ae=>Je(Y.defectHeaderId)},M(Y.isRevised=="true"?"Revision Approval":"Detailed Information"),11,z_))]),e("div",{class:se(["col-1 column-sm-30-percent column-md-23-percent column-lg-16-percent column-xl-16-percent align-items-center d-flex justify-content-center",Qe(Y)])},[e("div",J_,[e("div",Q_,[e("input",{type:"text",class:"form-control mou-input",placeholder:"Input Work Order",onKeypress:Re,autocomplete:"false",value:me(Y.defectHeaderId),onInput:Ae(qe,["prevent"]),onChange:ae=>Ie(ae,Y.defectHeaderId),disabled:C(Y.defectHeaderId,de.value,s.fitterId,Y)},null,40,X_),$e(Y.defectHeaderId)?(i(),d("div",Z_,a2)):D("",!0)]),e("div",s2,[e("button",{disabled:C(Y.defectHeaderId,de.value,s.fitterId,Y),onClick:ae=>it(Y.defectHeaderId),class:"btn btn-sm btn-success ms-2 d-flex justify-content-center align-items-center",style:{background:"#18AF4A","box-shadow":"0px 8px 16px rgba(0, 171, 85, 0.24)",color:"white",width:"46px",height:"40px"}},r2,8,l2)])])],2),e("div",{class:se(["col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",We(Y)])},[e("div",{class:se(["mx-3 little-box rounded-circle d-flex p-3 justify-content-center align-items-center mx-auto",[at(Y)]]),style:{"margin-top":"6px"}},i2,2)],2),s.viewIsDownload?(i(),d("div",{key:0,class:se(["col-1 column-sm-10-percent column-md-6-percent column-lg-6-percent column-xl-6-percent justify-content-center align-items-center d-flex",We(Y)])},[e("div",u2,[Ce(Y.defectWorkorder&&Y.defectWorkorder!="",s.plannerApprove?Y.plannerStatus:Y.status)?(i(),d("img",{key:0,onClick:ae=>G(Y.defectHeaderId),class:se(["ms-4 me-2 download-icon",oe(Y.downloadHistory)?"icon-green":"icon-red"]),src:Us,style:{height:"18px"},alt:""},null,10,d2)):D("",!0)])],2)):D("",!0)]),e("div",c2,M(Me(Y)),1)],2))),128)),Ve.value?D("",!0):(i(),d("button",{key:2,class:"my-3 btn-add-new",onClick:ve},[v2,be(" Add Generic Identified Defect, If Required ")]))]),_:1},8,["title"])]),_:1},8,["modelValue"])]),p(fl,{status:E(u).GeneralStatus,"status-spv":E(u).DefectFormStatusSPV,visibility:T.value,"defect-data":E(u).DefectFormData,"header-id":h.value,"work-order":H.value,"view-only":s.viewOnly,"fitter-id":s.fitterId,plannerApprove:s.plannerApprove,"is-complete":N.value,generic:!0,onCloseForm:st,onOnRefreshData:lt},null,8,["status","status-spv","visibility","defect-data","header-id","work-order","view-only","fitter-id","plannerApprove","is-complete"]),p(As,{images:B.value,visibility:P.value,onHandleClose:rt},null,8,["images","visibility"]),p(a1,{show:R.value,"check-list-arr":A.value,onUpdateCheckList:te,onSubmit:Z,onClose:K},null,8,["show","check-list-arr"]),p(R_,{visibility:_e.value,"asset-number":s.assetNumber,"defect-data":E(S).defectInfo,generic:!0,form:s.form,workorder:s.workorder,onOnRefreshData:lt},null,8,["visibility","asset-number","defect-data","form","workorder"]),p(zt,{visibility:F.value,caption:"Are you sure want to download all the attachment in this defect file?",yesLabel:"Yes, Download All File",noLabel:"No,  Only F55 Form",showClose:!0,widthDialog:60,footerTemplate:"50-50",onOnClose:J,onOnNoConfirm:fe,onOnYesConfirm:ge},null,8,["visibility"]),p(ds,{visibility:$.value,caption:E(u).stateErrorMessage,onOnClose:f},null,8,["visibility","caption"])],64)}}}),kx=tt(p2,[["__scopeId","data-v-f8e2389a"]]);export{bx as C,fx as D,Ac as I,gx as N,Ud as S,a1 as _,yx as a,kx as b,hx as c,fl as d,Rf as e,Si as f,hl as g,Ca as u};
