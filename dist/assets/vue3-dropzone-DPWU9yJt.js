import{f as fe}from"./file-selector-CuD-TRe-.js";import{_ as U}from"./attr-accept-BWI1aNlo.js";import{r as T,d as ve,l as ge,o as pe,L as de,c as k,M as De}from"./@vue-BypzYtbH.js";var v=function(){return v=Object.assign||function(n){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},v.apply(this,arguments)};function G(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(t[i[o]]=e[i[o]]);return t}function me(e,n,t,i){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(s){try{l(i.next(s))}catch(E){c(E)}}function y(s){try{l(i.throw(s))}catch(E){c(E)}}function l(s){s.done?a(s.value):o(s.value).then(d,y)}l((i=i.apply(e,[])).next())})}function be(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(l){return function(s){return y([l,s])}}function y(l){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,l[0]&&(t=0)),t;)try{if(i=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,o=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=n.call(e,t)}catch(s){l=[6,s],o=0}finally{i=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function B(e,n,t){if(t||arguments.length===2)for(var i=0,o=n.length,a;i<o;i++)(a||!(i in n))&&(a||(a=Array.prototype.slice.call(n,0,i)),a[i]=n[i]);return e.concat(a||Array.prototype.slice.call(n))}function ye(e){return e.includes("MSIE")||e.includes("Trident/")}function Fe(e){return e.includes("Edge/")}function Ee(e){return e===void 0&&(e=window.navigator.userAgent),ye(e)||Fe(e)}function W(e){e.preventDefault()}function z(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function P(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}var he="file-invalid-type",Oe="file-too-large",Ce="file-too-small",Ae="too-many-files",we={code:Ae,message:"Too many files"},xe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:he,message:"File type must be ".concat(n)}};function A(e){return e!=null}var Re=U.default,Le=Re||U;function V(e,n){var t=e.type==="application/x-moz-file"||Le(e,n);return[t,t?null:xe(n)]}var $=function(e){return{code:Oe,message:"File is larger than ".concat(e," bytes")}},J=function(e){return{code:Ce,message:"File is smaller than ".concat(e," bytes")}};function q(e,n,t){if(A(e.size)&&e.size)if(A(n)&&A(t)){if(e.size>t)return[!1,$(t)];if(e.size<n)return[!1,J(n)]}else{if(A(n)&&e.size<n)return[!1,J(n)];if(A(t)&&e.size>t)return[!1,$(t)]}return[!0,null]}function b(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e.some(function(a){return!P(t)&&a&&a.apply(void 0,B([t],i,!1)),P(t)})}}function Se(e){var n=e.files,t=e.accept,i=e.minSize,o=e.maxSize,a=e.multiple,c=e.maxFiles;return!a&&n.length>1||a&&c>=1&&n.length>c?!1:n.every(function(d){var y=V(d,t)[0],l=q(d,i,o)[0];return y&&l})}var Ie={disabled:!1,getFilesFromEvent:fe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};function ze(e){e===void 0&&(e={});var n=T(v(v({},Ie),e));ve(function(){return v({},e)},function(r){n.value=v(v({},n.value),r)});var t=T(),i=T(),o=ge({isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]}),a=function(){i.value&&(o.isFileDialogActive=!0,i.value.value="",i.value.click())},c=function(){var r=n.value.onFileDialogCancel;o.isFileDialogActive&&setTimeout(function(){if(i.value){var u=i.value.files;u&&!u.length&&(o.isFileDialogActive=!1,typeof r=="function"&&r())}},300)};function d(){o.isFocused=!0}function y(){o.isFocused=!1}function l(){var r=n.value.noClick;r||(Ee()?setTimeout(a,0):a())}var s=T([]),E=function(r){if(t.value){var u=t.value.$el||t.value;u.contains(r.target)||(r.preventDefault(),s.value=[])}};pe(function(){window.addEventListener("focus",c,!1);var r=n.value.preventDropOnDocument;r&&(document.addEventListener("dragover",W,!1),document.addEventListener("drop",E,!1))}),de(function(){window.removeEventListener("focus",c,!1);var r=n.value.preventDropOnDocument;r&&(document.removeEventListener("dragover",W),document.removeEventListener("drop",E))});function w(r){var u=n.value.noDragEventsBubbling;u&&r.stopPropagation()}function Q(r){return me(this,void 0,void 0,function(){var u,f,g,p,D;return be(this,function(F){switch(F.label){case 0:return u=n.value,f=u.getFilesFromEvent,g=u.noDragEventsBubbling,p=u.onDragEnter,r.preventDefault(),w(r),s.value=B(B([],s.value,!0),[r.target],!1),z(r)?f?[4,f(r)]:[2]:[3,2];case 1:if(D=F.sent(),D||(D=[]),P(r)&&!g)return[2];o.draggedFiles=D,o.isDragActive=!0,p&&p(r),F.label=2;case 2:return[2]}})})}function X(r){var u=n.value.onDragOver;if(r.preventDefault(),w(r),r.dataTransfer)try{r.dataTransfer.dropEffect="copy"}catch{}return z(r)&&u&&u(r),!1}function Z(r){r.preventDefault(),w(r);var u=s.value.filter(function(p){if(!t.value)return!1;var D=t.value.$el||t.value;return D.contains(p)}),f=u.indexOf(r.target);if(f!==-1&&u.splice(f,1),s.value=u,!(u.length>0)){o.draggedFiles=[],o.isDragActive=!1;var g=n.value.onDragLeave;z(r)&&g&&g(r)}}function M(r){r.preventDefault(),w(r),s.value=[];var u=n.value,f=u.getFilesFromEvent,g=u.noDragEventsBubbling,p=u.accept,D=u.minSize,F=u.maxSize,R=u.multiple,L=u.maxFiles,S=u.onDrop,I=u.onDropRejected,j=u.onDropAccepted;if(z(r)){if(!f)return;Promise.resolve(f(r)).then(function(ae){if(!(P(r)&&!g)){var m=[],O=[];ae.forEach(function(C){var Y=V(C,p),oe=Y[0],ie=Y[1],_=q(C,D,F),le=_[0],ue=_[1];if(oe&&le)m.push(C);else{var se=[ie,ue].filter(function(ce){return ce});O.push({file:C,errors:se})}}),(!R&&m.length>1||R&&L>=1&&m.length>L)&&(m.forEach(function(C){O.push({file:C,errors:[we]})}),m.splice(0)),o.acceptedFiles=m,o.fileRejections=O,S&&S(m,O,r),O.length>0&&I&&I(O,r),m.length>0&&j&&j(m,r)}})}o.isFileDialogActive=!1,o.isDragActive=!1,o.draggedFiles=[],o.acceptedFiles=[],o.fileRejections=[]}var h=function(r){return n.value.disabled?void 0:r},H=function(r){return n.value.noKeyboard?void 0:h(r)},x=function(r){return n.value.noDrag?void 0:h(r)},ee=function(r){r===void 0&&(r={});var u=r.onFocus,f=r.onBlur,g=r.onClick,p=r.onDragEnter,D=r.onDragenter,F=r.onDragOver,R=r.onDragover,L=r.onDragLeave,S=r.onDragleave,I=r.onDrop,j=G(r,["onFocus","onBlur","onClick","onDragEnter","onDragenter","onDragOver","onDragover","onDragLeave","onDragleave","onDrop"]);return v(v({onFocus:H(b(u,d)),onBlur:H(b(f,y)),onClick:h(b(g,l)),onDragenter:x(b(p,D,Q)),onDragover:x(b(F,R,X)),onDragleave:x(b(L,S,Z)),onDrop:x(b(I,M)),ref:t},!n.value.disabled&&!n.value.noKeyboard?{tabIndex:0}:{}),j)},re=function(r){r.stopPropagation()};function ne(r){r===void 0&&(r={});var u=r.onChange,f=r.onClick,g=G(r,["onChange","onClick"]),p={accept:n.value.accept,multiple:n.value.multiple,style:"display: none",type:"file",onChange:h(b(u,M)),onClick:h(b(f,re)),autoComplete:"off",tabIndex:-1,ref:i};return v(v({},p),g)}var K=k(function(){return o.draggedFiles?o.draggedFiles.length:0}),N=k(function(){return K.value>0&&Se({files:o.draggedFiles,accept:n.value.accept,minSize:n.value.minSize,maxSize:n.value.maxSize,multiple:n.value.multiple,maxFiles:n.value.maxFiles})}),te=k(function(){return K.value>0&&!N.value});return v(v({},De(o)),{isDragAccept:N,isDragReject:te,isFocused:k(function(){return o.isFocused&&!n.value.disabled}),getRootProps:ee,getInputProps:ne,rootRef:t,inputRef:i,open:h(a)})}export{ze as u};
