import{D as u}from"./urls-CvqtYZA-.js";import{u as a}from"./useAttachmentStore-CPMOf2aR.js";import{C as i}from"./CrackYesClass-COntz77m.js";const e=s=>{try{return s?JSON.parse(s):[]}catch(t){return console.error("Failed to parse JSON:",t),[]}},D=s=>{const t=new u;if(t.setAssetNumber(s.assetNumber),t.setPriority(s.priority),t.setRaisedBy(s.raisedBy),t.setDate(s.date),t.setTitle(s.title),t.setDescription(s.description),t.importParts(...e(s.parts)),t.importLabours(...e(s.labours)),t.importResources(...e(s.resources)),t.importSymptoms(...e(s.symptoms)),t.importCauses(...e(s.causes)),t.setPlannedDuration(s.plannedDuration??""),t.setInstruction(s.instruction),t.setDefectRequirement(s.requirement),t.setIsComplete(s.isComplete??!1),s.type==="NO"&&s.actions){const o=e(s.actions);t.setInstruction(o.join(`
`))}const r=s.type==="YES";return[t,r]},b=s=>{const t=new i;if(t.setAssetNumber(s.assetNumber),t.setPriority(s.priority),t.setRaisedBy(s.raisedBy),t.setDate(s.date),t.setTitle(s.title),t.setDescription(s.description),t.importParts(...e(s.parts)),t.importLabours(...e(s.labours)),t.importResources(...e(s.resources)),t.importSymptoms(...e(s.symptoms)),t.importCauses(...e(s.causes)),t.importPreviousCrack(...e(s.previousCracks)),t.setPlannedDuration(s.plannedDuration??""),t.setInstruction(s.instruction),t.setDefectRequirement(s.requirement),t.setIsComplete(s.isComplete??!1),s.type==="NO"&&s.actions){const o=e(s.actions);t.setInstruction(o.join(`
`))}const r=s.type==="YES";return[t,r]},C=async(s,t)=>{const r={Id:"defect",ImageInfos:[],ImageBlobs:[]},o=a();if(r.ImageInfos.push(...e(s)),r.ImageInfos.length===0)return r;const m=[];return r.ImageInfos.forEach(n=>{const c=typeof n=="string"?n:n.filename;m.push(o.downloadAttachment(c))}),Promise.all(m).then(n=>{n.forEach(c=>{const p=new Blob([c],{type:"image/png"});r.ImageBlobs.push(p)}),t&&t()}),r};export{D as a,b,C as d,e as s};
