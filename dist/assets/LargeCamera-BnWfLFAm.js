import{k as D,r as h,bL as c,p as y,aa as b,aB as s,b4 as p,u as n,C,A as O,s as I,F as V}from"./@vue-BypzYtbH.js";import{_ as T}from"./ImagePreview.vue_vue_type_style_index_0_lang-DrcOCjy4.js";import{u as j}from"./useCameraStore-BwXVJhPe.js";import{a as L}from"./UploadImageFailureDialog.vue_vue_type_style_index_0_lang-DVBJv3c1.js";import{s as w}from"./string-to-imageinfo-converter-Cdr1iOkP.js";import{b as N}from"./vue-router-iNp9kJ0K.js";import{_ as P}from"./nw-img-vue-CR837WER.js";const $={class:"py-2 ps-0 pe-2 w-100"},q={class:"d-flex align-items-center"},z={class:"flex-fill large-camera-container"},E={class:"ms-2"},H=["src"],R={key:0,class:"d-flex justify-content-center ms-2"},Y={class:"text-white"},G=D({__name:"LargeCamera",props:{id:{type:String,required:!0},allowDelete:{type:Boolean,required:!0,default:!1},disabled:{type:Boolean,required:!0,default:!1},isMonitoring:{type:Boolean,default:!1},isMandatory:{type:Boolean,default:!1}},setup(l){const o=l,i=j(),_=N(),r=h(!1),u=h(!1),a=c(()=>i.ImageObjects.find(e=>e.Id===o.id)),d=c(()=>{var e;return(e=a.value)==null?void 0:e.ImageInfos.length}),m=c(()=>a.value?w(a.value.ImageInfos):[]),k=()=>{if(_.path=="/ironforms/monitoring-status/preview"){let t;return m.value.length>0?t="/media/svg/dma/camera/e-form/png/cam-read.png":t="/media/svg/dma/camera/e-form/png/cam-active.png",t}let e="/media/svg/dma/camera/e-form/png/cam-active.png";return d.value>0&&(e="/media/svg/dma/camera/e-form/png/cam-user.png"),f.value=="not-allowed"&&(e="/media/svg/dma/camera/e-form/png/cam-read.png"),e},x=c(()=>o.disabled?"disabled":""),f=c(()=>o.disabled?"not-allowed":"allowed"),g=(e=!1)=>{o.disabled||(i.setIsActionFromDelete(e),o.isMandatory&&m.value.length==0?i.setShowCloseButton(!1):i.setShowCloseButton(!0),i.toggleIsVisible(!0,o.id))},B=async e=>{if(o.isMandatory&&m.value.length==1)r.value=!1,g(!0);else{if(!a.value)return;a.value.ImageInfos=w(a.value.ImageInfos);const t=a.value.ImageInfos.findIndex(v=>v.filename==e);t!=-1&&(a.value.ImageInfos.splice(t,1),a.value.ImageBlobs.splice(t,1),a.value.ImageInfos.length<1&&(r.value=!1))}},M=()=>{r.value=!0},A=()=>{r.value=!1},F=()=>{u.value=!1},S=()=>{u.value=!1,g()};return(e,t)=>(y(),b(V,null,[s("div",$,[s("div",q,[s("div",{class:p(["d-flex w-100 align-items-center camera-wrapper py-2",n(x)])},[s("div",z,[s("span",null,C(`Please take a photo of the ${o.id} identified`),1)]),s("div",E,[s("div",{class:p(["p-2 justify-items-center rounded",n(f)]),style:{background:"#F4F6F8"},onClick:t[0]||(t[0]=v=>g())},[s("img",{src:k(),style:{height:"20px",width:"24px"},class:p(n(f)),alt:"camera"},null,10,H)],2)]),n(d)&&n(d)>0?(y(),b("div",R,[s("button",{class:"btn btn-sm btn-icon btn-bg-success lg-btn-icon",onClick:M,style:{"background-color":"#18AF4A"}},[s("label",Y,"+"+C(n(d)),1)])])):O("",!0)],2)])]),I(T,{type:l.id,"re-render":!1,images:n(m),"show-delete-button":l.allowDelete,"is-mandatory":l.isMandatory,visibility:r.value,"is-monitoring":l.isMonitoring,"show-mandatory-caption":l.isMandatory,onOnClose:A,onOnDelete:B},null,8,["type","images","show-delete-button","is-mandatory","visibility","is-monitoring","show-mandatory-caption"]),I(L,{visibility:u.value,caption:"The photo successfully taken, would you like to take another photo?",onOnNoConfirm:F,onOnYesConfirm:S},null,8,["visibility"])],64))}}),ee=P(G,[["__scopeId","data-v-855f98d2"]]);export{ee as L};
