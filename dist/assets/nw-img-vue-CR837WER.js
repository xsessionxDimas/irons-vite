import{p as r,aa as c,A as h}from"./@vue-BypzYtbH.js";const l=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},p={name:"NwImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0}},data:function(){return{pathToFile:null}},methods:{createCacheFolder:function(){const t=window.require("fs");t.existsSync(this.cacheFolder)||t.mkdirSync(this.cacheFolder)},getImageFromAppData:function(){const t=window.require("fs");let e=!1;try{e=t.existsSync(this.cachedImage)}catch{e=!1}e?this.pathToFile=this.cachedImage:this.saveImageToAppData()},saveImageToAppData:function(){const t=window.require("fs");let e=window.require("http");const i=window.require("stream").Transform;this.src.startsWith("https")&&(e=window.require("https")),e.request(this.src,n=>{let s=new i;n.on("data",o=>{s.push(o)}),n.on("end",()=>{t.writeFileSync(this.cachedImage,s.read()),this.pathToFile=this.cachedImage})}).end()}},computed:{isNw:function(){return window.nw&&window.require},fileNameEncoded:function(){let t=this.src;return t=t.split(" ").join("[nbsp]"),t=t.split("\\").join("[bsol]"),t=t.split("/").join("[sol]"),t=t.split(":").join("[colon]"),t=t.split("*").join("[ast]"),t=t.split("?").join("[quest]"),t=t.split('"').join("[quot]"),t=t.split("<").join("[lt]"),t=t.split(">").join("[gt]"),t=t.split("|").join("[pipe]"),t},cacheFolder:function(){return this.isNw?window.require("path").join(window.nw.App.dataPath,"nw-img-cache"):""},cachedImage:function(){return this.isNw?window.require("path").join(this.cacheFolder,this.fileNameEncoded):""}},created:function(){this.isNw?(this.createCacheFolder(),this.getImageFromAppData()):this.pathToFile=this.src}},d=["src","alt"];function u(t,e,i,n,s,o){return t.pathToFile?(r(),c("img",{key:0,src:t.pathToFile,alt:i.alt},null,8,d)):h("",!0)}const w=l(p,[["render",u]]),a=function(t){t.mixin({components:{NwImg:w}})};typeof window<"u"&&window.Vue&&a(window.Vue);const m={install:a};export{m as N,l as _};
