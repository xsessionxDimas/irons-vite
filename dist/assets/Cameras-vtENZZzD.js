import{k as r3,r as s,a0 as c3,c as x,d as _e,o as d3,L as u3,p as a,aa as c,s as v,x as C,F as v3,R,Y as h3,y as g3,u as y,q as de,aB as e,C as D,A as f,P as h,b6 as xe,b4 as ue,B as S,bd as m3,bb as f3}from"./@vue-BypzYtbH.js";import{u as p3}from"./useCameraStore-BwXVJhPe.js";import{_ as w3,a as C3,b as b3}from"./UploadImageFailureDialog.vue_vue_type_style_index_0_lang-DVBJv3c1.js";import{a as _3}from"./index-BuVmIl8K.js";import{u as x3}from"./useAttachmentStore-DqM3autD.js";import{C as y3}from"./simple-vue-camera-D9MGhAeE.js";import{a as ye}from"./element-plus-BeWdvTRa.js";import{u as L3}from"./useGlobalConnectionStore-DV9B81de.js";import{_ as k3,C as te,s as V3,a as Le,c as ke}from"./PhotoDescription.vue_vue_type_style_index_0_lang-1F5CAfuD.js";import{V as H3}from"./vue-drawing-canvas-CzCJUKem.js";import{j as M3}from"./helpers-wUOLw-dU.js";import{_ as I3}from"./nw-img-vue-CR837WER.js";const r=Z=>(m3("data-v-fea7bbf3"),Z=Z(),f3(),Z),B3={"element-loading-text":"Opening Camera","element-loading-background":"rgba(0, 0, 0, 0.7)",class:"d-flex",style:{position:"fixed",top:"0",left:"0","z-index":"11",width:"100%",height:"100%",background:"rgba(22, 28, 36, 1)"}},D3={key:0,class:"d-flex flex-column justify-content-center align-items-end camera-container",style:{height:"100%"}},S3={key:0,class:"h-100 text-center d-flex align-items-center justify-content-center timer-container"},Z3={class:"timer-label"},j3={key:1,class:"d-flex flex-column justify-content-center align-items-center camera-tools-container",style:{position:"relative"}},P3=r(()=>e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M24.4 7.61334C23.88 7.09334 23.04 7.09334 22.52 7.61334L16 14.12L9.48 7.60001C8.96 7.08001 8.12 7.08001 7.6 7.60001C7.08 8.12001 7.08 8.96001 7.6 9.48001L14.12 16L7.6 22.52C7.08 23.04 7.08 23.88 7.6 24.4C8.12 24.92 8.96 24.92 9.48 24.4L16 17.88L22.52 24.4C23.04 24.92 23.88 24.92 24.4 24.4C24.92 23.88 24.92 23.04 24.4 22.52L17.88 16L24.4 9.48001C24.9067 8.97334 24.9067 8.12001 24.4 7.61334Z",fill:"white"})],-1)),T3={key:2,class:"d-flex flex-column justify-content-center align-items-center camera-tools-container",style:{position:"relative"}},A3=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center close-camera",style:{width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M24.4 7.61334C23.88 7.09334 23.04 7.09334 22.52 7.61334L16 14.12L9.48 7.60001C8.96 7.08001 8.12 7.08001 7.6 7.60001C7.08 8.12001 7.08 8.96001 7.6 9.48001L14.12 16L7.6 22.52C7.08 23.04 7.08 23.88 7.6 24.4C8.12 24.92 8.96 24.92 9.48 24.4L16 17.88L22.52 24.4C23.04 24.92 23.88 24.92 24.4 24.4C24.92 23.88 24.92 23.04 24.4 22.52L17.88 16L24.4 9.48001C24.9067 8.97334 24.9067 8.12001 24.4 7.61334Z",fill:"white"})])])],-1)),U3=[A3],$3=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center tools-camera",style:{background:"rgba(255, 72, 66, 1)",width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M26.6667 6.66667H22.44L20 4H12L9.56 6.66667H5.33333C3.86667 6.66667 2.66667 7.86667 2.66667 9.33333V25.3333C2.66667 26.8 3.86667 28 5.33333 28H26.6667C28.1333 28 29.3333 26.8 29.3333 25.3333V9.33333C29.3333 7.86667 28.1333 6.66667 26.6667 6.66667ZM26.6667 25.3333H5.33333V9.33333H10.7333L13.1733 6.66667H18.8267L21.2667 9.33333H26.6667V25.3333ZM16 10.6667C12.32 10.6667 9.33333 13.6533 9.33333 17.3333C9.33333 21.0133 12.32 24 16 24C19.68 24 22.6667 21.0133 22.6667 17.3333C22.6667 13.6533 19.68 10.6667 16 10.6667ZM16 21.3333C13.8 21.3333 12 19.5333 12 17.3333C12 15.1333 13.8 13.3333 16 13.3333C18.2 13.3333 20 15.1333 20 17.3333C20 19.5333 18.2 21.3333 16 21.3333Z",fill:"white"})])])],-1)),O3=[$3],F3=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center tools-camera",style:{width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M29.3333 21.3334V5.33335C29.3333 3.86669 28.1333 2.66669 26.6667 2.66669H10.6667C9.2 2.66669 8 3.86669 8 5.33335V21.3334C8 22.8 9.2 24 10.6667 24H26.6667C28.1333 24 29.3333 22.8 29.3333 21.3334ZM15.2 16.7067L17.3733 19.6134L20.8133 15.32C21.08 14.9867 21.5867 14.9867 21.8533 15.32L25.8 20.2534C26.1467 20.6934 25.84 21.3334 25.28 21.3334H12C11.4533 21.3334 11.1333 20.7067 11.4667 20.2667L14.1333 16.7067C14.4 16.36 14.9333 16.36 15.2 16.7067ZM2.66667 9.33335V26.6667C2.66667 28.1334 3.86667 29.3334 5.33333 29.3334H22.6667C23.4 29.3334 24 28.7334 24 28C24 27.2667 23.4 26.6667 22.6667 26.6667H6.66667C5.93333 26.6667 5.33333 26.0667 5.33333 25.3334V9.33335C5.33333 8.60002 4.73333 8.00002 4 8.00002C3.26667 8.00002 2.66667 8.60002 2.66667 9.33335Z",fill:"white"})])])],-1)),R3=[F3],z3=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center tools-camera",style:{width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M26.6667 6.66667H22.44L20.7867 4.86667C20.2933 4.32 19.5733 4 18.8267 4H13.1733C12.4267 4 11.7067 4.32 11.2 4.86667L9.56 6.66667H5.33333C3.86667 6.66667 2.66667 7.86667 2.66667 9.33333V25.3333C2.66667 26.8 3.86667 28 5.33333 28H26.6667C28.1333 28 29.3333 26.8 29.3333 25.3333V9.33333C29.3333 7.86667 28.1333 6.66667 26.6667 6.66667ZM18.2267 23.6C17.5333 23.8533 16.7867 24 16 24C12.32 24 9.33333 21.0133 9.33333 17.3333H6.66667L10 14L13.3333 17.3333H10.6667C10.6667 20.28 13.0533 22.6667 16 22.6667C16.6133 22.6667 17.2133 22.56 17.76 22.36C18.0133 22.2667 18.28 22.32 18.4667 22.5067C18.8133 22.8533 18.68 23.4267 18.2267 23.6ZM22 20.6667L18.6667 17.3333H21.3333C21.3333 14.3867 18.9467 12 16 12C15.3867 12 14.7867 12.1067 14.24 12.3067C13.9867 12.4 13.72 12.3467 13.5333 12.16C13.1867 11.8133 13.32 11.24 13.7733 11.0667C14.4667 10.8133 15.2133 10.6667 16 10.6667C19.68 10.6667 22.6667 13.6533 22.6667 17.3333H25.3333L22 20.6667Z",fill:"white"})])])],-1)),E3=[z3],N3={key:0,xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"-4 -2 30 30",fill:"none"},W3=r(()=>e("path",{fill:"white",d:"M24 12c0 6.627-5.373 12-12 12s-12-5.373-12-12h2c0 5.514 4.486 10 10 10s10-4.486 10-10-4.486-10-10-10c-2.777 0-5.287 1.141-7.099 2.977l2.061 2.061-6.962 1.354 1.305-7.013 2.179 2.18c2.172-2.196 5.182-3.559 8.516-3.559 6.627 0 12 5.373 12 12zm-13-6v8h7v-2h-5v-6h-2z"},null,-1)),Y3=[W3],q3={key:1,class:"text-white timer-label"},G3={key:1,class:"preview-container"},J3={class:"d-flex justify-content-center align-items-center",style:{height:"100%"}},K3={key:0,class:"d-flex flex-row gap-4 preview-button-tools"},Q3=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center",style:{"background-color":"rgba(157, 154, 154, 0.9)",width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("g",{"clip-path":"url(#clip0_3476_147612)"},[e("path",{d:"M21.3333 9.33334H19.9999L18.6666 8H13.3333L11.9999 9.33334H10.6666C9.19994 9.33334 7.99994 10.5333 7.99994 12V20C7.99994 21.4667 9.19994 22.6667 10.6666 22.6667H21.3333C22.7999 22.6667 23.9999 21.4667 23.9999 20V12C23.9999 10.5333 22.7999 9.33334 21.3333 9.33334ZM15.9999 18.6667C14.5333 18.6667 13.3333 17.4667 13.3333 16C13.3333 14.5333 14.5333 13.3333 15.9999 13.3333C17.4666 13.3333 18.6666 14.5333 18.6666 16C18.6666 17.4667 17.4666 18.6667 15.9999 18.6667Z",fill:"white"}),e("path",{d:"M12.5999 0.373336C12.0666 0.480003 11.8666 1.12 12.2533 1.49334L16.2666 5.50667C16.6933 5.92 17.3999 5.62667 17.3999 5.04V2.72C23.3333 3.30667 28.1466 7.81334 29.1866 13.6133C29.2933 14.2267 29.8533 14.6533 30.4799 14.6533C31.3066 14.6533 31.9333 13.8933 31.7866 13.08C30.1466 3.85334 21.0533 -1.49333 12.5999 0.373336Z",fill:"white"}),e("path",{d:"M15.7333 26.4933C15.3066 26.0667 14.5999 26.3733 14.5999 26.96V29.28C8.66661 28.6933 3.85327 24.1867 2.81327 18.3867C2.70661 17.7733 2.14661 17.3467 1.51994 17.3467C0.693273 17.3467 0.0666066 18.1067 0.213273 18.92C1.86661 28.1467 10.9599 33.4933 19.4133 31.6267C19.9333 31.5067 20.1466 30.88 19.7599 30.4933L15.7333 26.4933Z",fill:"white"})]),e("defs",null,[e("clipPath",{id:"clip0_3476_147612"},[e("rect",{width:"32",height:"32",fill:"white"})])])])])],-1)),X3=r(()=>e("div",{class:"text-white"},"Retake Photo",-1)),et=[Q3,X3],tt=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center",style:{"background-color":"rgba(33, 43, 54, 1)",width:"100%",height:"100%"}},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"white"},[e("path",{d:"M27.1666 2.66669H5.83329C4.36663 2.66669 3.17996 3.86669 3.17996 5.33335L3.16663 29.3334L8.49996 24H27.1666C28.6333 24 29.8333 22.8 29.8333 21.3334V5.33335C29.8333 3.86669 28.6333 2.66669 27.1666 2.66669ZM27.1666 21.3334H7.39329L5.83329 22.8934V5.33335H27.1666V21.3334ZM14.5 18.6667H24.5V16H17.1666L14.5 18.6667ZM19.6466 10.84C19.9133 10.5734 19.9133 10.16 19.6466 9.89335L17.2866 7.53335C17.02 7.26669 16.6066 7.26669 16.34 7.53335L8.49996 15.3734V18.6667H11.7933L19.6466 10.84Z",fill:"white"})])])],-1)),ot=r(()=>e("div",{class:"text-white"},"Add Description",-1)),lt=[tt,ot],st=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center",style:{"background-color":"rgba(33, 43, 54, 1)",width:"100%",height:"100%"}},[e("svg",{viewBox:"0 0 32 32",fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},[e("path",{d:"M25.47 13.8533L26.8833 12.44C27.9233 11.4 27.9233 9.70667 26.8833 8.66667L25.0033 6.78667C23.9633 5.74667 22.27 5.74667 21.23 6.78667L19.8167 8.2L25.47 13.8533ZM19.8167 15.7467L10.2167 25.3333H8.33667V23.4533L17.9233 13.8667L19.8167 15.7467ZM17.9233 10.08L5.67 22.3467V28H11.3233L23.5767 15.7467L17.9233 10.08ZM25.67 23.3333C25.67 26.2533 22.2833 28 19.0033 28C18.27 28 17.67 27.4 17.67 26.6667C17.67 25.9333 18.27 25.3333 19.0033 25.3333C21.0567 25.3333 23.0033 24.36 23.0033 23.3333C23.0033 22.7067 22.3633 22.1733 21.3633 21.7333L23.3367 19.76C24.7633 20.6 25.67 21.72 25.67 23.3333ZM6.44334 17.8C5.15 17.0533 4.33667 16.08 4.33667 14.6667C4.33667 12.2667 6.85667 11.16 9.08334 10.1867C10.4567 9.57333 12.3367 8.74667 12.3367 8C12.3367 7.45333 11.2967 6.66667 9.67 6.66667C7.99 6.66667 7.27 7.48 7.23 7.52C6.76334 8.06667 5.92334 8.13333 5.36334 7.68C4.81667 7.22667 4.71 6.41333 5.16334 5.84C5.31 5.65333 6.68334 4 9.67 4C12.6567 4 15.0033 5.76 15.0033 8C15.0033 10.4933 12.43 11.6267 10.15 12.6267C8.89667 13.1733 7.00334 14 7.00334 14.6667C7.00334 15.08 7.57667 15.4667 8.43 15.8133L6.44334 17.8Z",fill:"white"})])])],-1)),nt=r(()=>e("div",{class:"text-white"},"Draw Photo",-1)),it=[st,nt],at=r(()=>e("div",{class:"button-ring"},[e("section",{class:"rounded-circle d-flex justify-content-center align-items-center",style:{"background-color":"rgba(24, 175, 74, 1)",width:"100%",height:"100%"}},[e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M11.7266 21.1666L7.09996 16.54C6.57996 16.02 5.73996 16.02 5.21996 16.54C4.69996 17.06 4.69996 17.9 5.21996 18.42L10.7933 23.9933C11.3133 24.5133 12.1533 24.5133 12.6733 23.9933L26.78 9.88664C27.3 9.36664 27.3 8.52664 26.78 8.00664C26.26 7.48664 25.42 7.48664 24.9 8.00664L11.7266 21.1666Z",fill:"white"})])])],-1)),rt=[at],ct={key:1,id:"config-wrapper"},dt={class:"rounded-circle d-flex justify-content-center align-items-center",style:{"background-color":"#18AF4A",width:"100%",height:"100%"}},ut={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"white",width:"24",height:"24"},vt=r(()=>e("path",{d:"m12 6.586-8.707 8.707 1.414 1.414L12 9.414l7.293 7.293 1.414-1.414L12 6.586z"},null,-1)),ht=[vt],gt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"white",width:"24",height:"24"},mt=r(()=>e("path",{d:"M12 17.414 3.293 8.707l1.414-1.414L12 14.586l7.293-7.293 1.414 1.414L12 17.414z"},null,-1)),ft=[mt],pt={class:"flex-fill d-flex flex-row justify-content-between align-items-center"},wt=r(()=>e("p",{class:"m-0 draw-title"},"Draw Photo",-1)),Ct={class:"flex-fill d-flex flex-row justify-content-between align-items-center"},bt={class:"d-flex gap-4"},_t=r(()=>e("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"me-1"},[e("path",{d:"M8.31055 5.72211C6.54388 5.72211 4.94388 6.38211 3.71055 7.45544L2.45055 6.19544C2.03055 5.77544 1.31055 6.06877 1.31055 6.66211V10.3888C1.31055 10.7554 1.61055 11.0554 1.97721 11.0554H5.70388C6.29721 11.0554 6.59721 10.3354 6.17721 9.91544L4.90388 8.64211C5.83055 7.86877 7.01055 7.38877 8.31721 7.38877C10.4239 7.38877 12.2439 8.61544 13.1105 10.3888C13.2905 10.7621 13.7172 10.9488 14.1105 10.8154C14.5839 10.6621 14.8239 10.1221 14.6105 9.66877C13.4639 7.33544 11.0772 5.72211 8.31055 5.72211Z",fill:"white"})],-1)),xt=r(()=>e("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"me-1"},[e("path",{d:"M12.2857 7.45544C11.0524 6.38211 9.4524 5.72211 7.68574 5.72211C4.9124 5.72211 2.52574 7.33544 1.3924 9.67544C1.17907 10.1221 1.41907 10.6554 1.8924 10.8154C2.28574 10.9488 2.7124 10.7621 2.8924 10.3888C3.75907 8.61544 5.57907 7.38877 7.68574 7.38877C8.98574 7.38877 10.1724 7.86877 11.0991 8.64211L9.82574 9.91544C9.40574 10.3354 9.69907 11.0554 10.2924 11.0554H14.0191C14.3857 11.0554 14.6857 10.7554 14.6857 10.3888V6.66211C14.6857 6.06877 13.9657 5.76877 13.5457 6.18877L12.2857 7.45544Z",fill:"white"})],-1)),yt={class:"d-flex gap-4"},Lt=r(()=>e("svg",{width:"16",height:"17",xmlns:"http://www.w3.org/2000/svg",class:"me-1"},[e("path",{d:"M5 9.723c-1.107 0-2 .893-2 2 0 .873-.774 1.333-1.334 1.333.613.814 1.66 1.334 2.667 1.334a2.666 2.666 0 0 0 2.666-2.667c0-1.107-.893-2-2-2Zm9.14-6.247-.894-.893a.664.664 0 0 0-.94 0L6.333 8.556l1.833 1.834 5.973-5.974c.26-.26.26-.68 0-.94Z"})],-1)),kt=r(()=>e("svg",{width:"16",height:"17",viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg",class:"me-1"},[e("path",{d:"M13.5365 4.4888L13.8632 3.78214L14.5699 3.45547C14.8299 3.33547 14.8299 2.9688 14.5699 2.8488L13.8632 2.52214L13.5365 1.82214C13.4165 1.56214 13.0499 1.56214 12.9299 1.82214L12.6032 2.5288L11.9032 2.85547C11.6432 2.97547 11.6432 3.34214 11.9032 3.46214L12.6099 3.7888L12.9365 4.4888C13.0499 4.7488 13.4232 4.7488 13.5365 4.4888Z"}),e("path",{d:"M11.7099 6.5688L9.8232 4.68214C9.5632 4.42214 9.1432 4.42214 8.8832 4.68214L1.42986 12.1288C1.16986 12.3888 1.16986 12.8088 1.42986 13.0688L3.31653 14.9555C3.57653 15.2155 3.99653 15.2155 4.25653 14.9555L11.7032 7.5088C11.9699 7.25547 11.9699 6.8288 11.7099 6.5688ZM9.37653 7.96214L8.43653 7.02214L9.35653 6.10214L10.2965 7.04214L9.37653 7.96214Z"})],-1)),Vt={class:"flex-fill d-flex flex-row align-items-center"},Ht={class:"m-0 me-4",style:{color:"white"}},Mt={class:"m-0 ms-4"},It={class:"flex-fill d-flex flex-row justify-content-start gap-4 position-relative"},Bt={style:{display:"none"}},Dt={key:0,class:"d-flex flex-column justify-content-center align-items-end camera-container",style:{height:"100%"}},St={key:0,class:"h-100 text-center d-flex align-items-center justify-content-center timer-container"},Zt={"data-testid":"timer-countdown",class:"timer-label"},jt={key:1,class:"d-flex flex-column justify-content-center align-items-center camera-tools-container",style:{position:"relative"}},Pt=r(()=>e("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M24.4 7.61334C23.88 7.09334 23.04 7.09334 22.52 7.61334L16 14.12L9.48 7.60001C8.96 7.08001 8.12 7.08001 7.6 7.60001C7.08 8.12001 7.08 8.96001 7.6 9.48001L14.12 16L7.6 22.52C7.08 23.04 7.08 23.88 7.6 24.4C8.12 24.92 8.96 24.92 9.48 24.4L16 17.88L22.52 24.4C23.04 24.92 23.88 24.92 24.4 24.4C24.92 23.88 24.92 23.04 24.4 22.52L17.88 16L24.4 9.48001C24.9067 8.97334 24.9067 8.12001 24.4 7.61334Z",fill:"white"})],-1)),Tt={key:2,class:"d-flex flex-column justify-content-center align-items-center camera-tools-container",style:{position:"relative"}},At={key:0,xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"-4 -2 30 30",fill:"none"},Ut=r(()=>e("path",{fill:"white",d:"M24 12c0 6.627-5.373 12-12 12s-12-5.373-12-12h2c0 5.514 4.486 10 10 10s10-4.486 10-10-4.486-10-10-10c-2.777 0-5.287 1.141-7.099 2.977l2.061 2.061-6.962 1.354 1.305-7.013 2.179 2.18c2.172-2.196 5.182-3.559 8.516-3.559 6.627 0 12 5.373 12 12zm-13-6v8h7v-2h-5v-6h-2z"},null,-1)),$t=[Ut],Ot={key:1,class:"text-white timer-label"},Ve=50,Ft=r3({__name:"Cameras",props:{visibility:{type:Boolean,required:!0}},setup(Z){const He=Z,n=p3(),ve=_3(),Me=x3(),z=L3(),j=s(),E=s([]),N=s(!1),P=s(""),oe=s(null),le=s(!1),b=s(!1),se=s(""),L=s(0),k=s(),he=c3(He,"visibility"),W=s(!1),ne=s(!1),g=s(0),p=s(0),T=s(null),A=s(!1),V=s(!1),ge=s(null),U=s(!1),ie=s(!1),Ie=x(()=>n.ShowCloseButton),Be=()=>{le.value=!1,n.toggleIsVisible(!0)},De=x(()=>n.currentImage),Se=x(()=>W.value?"collapsed":"expanded"),Ze=()=>{H.value=!1},je=o=>{console.log("camera err",o),n.setIsCameraError(!0),$.value=!1,ie.value=!0},Pe=()=>{$.value=!1,z.stateConnectionStatus?setTimeout(()=>{H.value=!0},1e3):(O(),z.setSubmitConnectionError(!0))},H=s(!1),Te=x(()=>z.stateSubmitConnectionError),Ae=()=>{z.setSubmitConnectionError(!1)},$=s(!1),Ue=x(()=>n.isVisible);_e(Ue,o=>{o&&($.value=!0)});const $e=()=>{O(),setTimeout(()=>{n.toggleIsVisible(!0)},100)},me=()=>{b.value&&(re(),M.value.redraw())};_e(De,o=>{o?(b.value=!0,se.value=o):(b.value=!1,se.value="")}),d3(()=>{window.addEventListener("resize",me)}),u3(()=>{window.removeEventListener("resize",me)});const ae=s(!1),Oe=()=>{ae.value=!0,fe(),ae.value=!1},fe=async()=>{var l,d,u;if(!ae.value)return;const o=await((l=j.value)==null?void 0:l.devices(["videoinput"]));if(!o)return;const t=o[L.value];((d=j.value)==null?void 0:d.currentDeviceID())!=t.deviceId&&((u=j.value)==null||u.changeCamera(t.deviceId)),L.value+1==(o==null?void 0:o.length)?L.value=0:L.value=L.value+1},Fe=()=>{$.value=!0,b.value=!1,P.value="",n.setImage(""),n.setBlob(void 0),Q.value=window.innerWidth,X.value=window.innerHeight,ne.value=!1,g.value=0};s(0),s(0);let Y,q;const Re=(o,t,l,d)=>{const u=Math.min(l/o,d/t);return{width:o*u,height:t*u}},re=()=>{console.log("screen available width",window.innerWidth),console.log("screen available height",window.innerHeight),console.log("picture width on as param",q),console.log("picture height on as param",Y);const{width:o,height:t}=Re(q,Y,window.innerWidth,window.innerHeight);console.log("computed width",o),console.log("computed height",t),console.log("======================================"),Q.value=Math.floor(o),X.value=Math.floor(t)},ze=(o,t)=>{const l=new Image;l.src=o,l.onload=()=>{window.screen.height>window.screen.width?(console.log("image is taken by camera",t),console.log("original take photo result's height",l.height),console.log("original take photo result's width",l.width),Y=t?l.width:l.height,q=t?l.height:l.width,re()):(Y=l.height,q=l.width,re()),M.value.setBackground()}},pe=(o,t=!0)=>{const l=new FileReader;l.readAsDataURL(o),l.onload=()=>{const d=l.result;typeof d=="string"&&ze(d,t)}},Ee=async o=>{E.value=[];const t=ye.service({lock:!0,text:"Uploading",background:"rgba(0, 0, 0, 0.7)"});let l=!0;if(["image/gif","image/jpeg","image/jpg","image/png"].includes(o[0].type)||(l=!1,E.value.push(o[0].name)),!l)E.value.length>0&&(le.value=!0);else{pe(o[0],!1),k.value=o[0];const u=URL.createObjectURL(o[0]);n.setImage(u),n.setBlob(o[0])}t.close()},Ne=()=>{},We=async()=>{H.value&&(g.value>0&&(U.value=!0),G(!1),p.value=g.value,A.value=!0,Ye(),ge.value=setTimeout(async()=>{var l;A.value=!1,b.value=!1;const o=await((l=j.value)==null?void 0:l.snapshot());U.value=!1,k.value=o,pe(o);const t=URL.createObjectURL(o);n.setImage(t),n.setBlob(o),ne.value=!0},g.value*1e3))},Ye=()=>{T.value&&clearInterval(T.value),T.value=setInterval(()=>{p.value>0?p.value--:clearInterval(T.value)},1e3)},we=o=>{g.value=o,G(!1)},G=o=>{V.value=o},Ce=()=>{clearTimeout(ge.value),clearInterval(T.value),A.value=!1,g.value=0,U.value=!1,p.value=0},qe=(o,t="",l=512)=>{const d=atob(o),u=[];for(let B=0;B<d.length;B+=l){const F=d.slice(B,B+l),i=new Array(F.length);for(let ee=0;ee<F.length;ee++)i[ee]=F.charCodeAt(ee);const a3=new Uint8Array(i);u.push(a3)}return new Blob(u,{type:t})},Ge=async()=>{be();const o=ye.service({lock:!0,text:"Uploading Picture",background:"rgba(0, 0, 0, 0.7)"}),t=Je(15),l=new FormData;let d=k.value;try{const m=await M3(d);l.append("files",m.file,`${t}.webp`),d=m.file}catch(m){console.error(m.message),l.append("files",d,`${t}.png`)}l.append("userAccount",ve.user.Email);const u=await Me.uploadAttachment(l,ve.user.Email);u&&Promise.all([u]).then(()=>{const m={filename:t,description:encodeURI(P.value)};n.isReplacementCamera&&(m.type=n.replacementPhotoLength==0?"cab side":n.replacementPosition,n.replacementPosition=="cab side"?n.setReplacementPosition("off cab side"):n.setReplacementPosition("cab side"),n.setReplacementPhotoLength(n.replacementPhotoLength+1)),P.value="",n.IsFromActionDelete?n.definePhoto(k.value,m):n.addPhoto(k.value,m)}),o.close(),n.setImage(""),n.setBlob(void 0),L.value=0,ne.value=!1,t3()},Je=o=>{let t="";const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=l.length;for(let u=0;u<o;u++)t+=l.charAt(Math.floor(Math.random()*d));return t},Ke=()=>{H.value&&oe.value&&oe.value.openUploadDialog()},Qe=()=>{N.value=!0},Xe=()=>{N.value=!1},e3=o=>{P.value=o,N.value=!1},O=(o=!0)=>{ie.value=!1,o&&n.setIsActionFromDelete(!1),n.toggleIsVisible(!1),g.value=0},t3=()=>{O(!1)},M=s(),_=s(!0),ce=s(""),I=s(!1),J=s(10),K=s("rgba(242, 24, 24, 1)"),o3=s([]),Q=s(window.innerWidth),X=s(window.innerHeight),l3=x(()=>Q.value*Ve/100),s3=x(()=>X.value*Ve/100),n3=()=>{_.value=!1},w=o=>{K.value=o},i3=()=>{_.value=!0,M.value.reset()},be=()=>{_.value=!0,k.value=qe(ce.value.split(",")[1],"image/png")};return(o,t)=>{const l=R("el-button"),d=R("el-slider"),u=R("el-color-picker"),m=R("el-dialog"),B=R("InformationPopUp"),F=h3("loading");return a(),c(v3,null,[v(m,{modelValue:he.value,"onUpdate:modelValue":t[21]||(t[21]=i=>he.value=i),fullscreen:"","custom-class":"outer-dialog","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{default:C(()=>[g3((a(),c("div",B3,[y(n).isVisible&&!b.value?(a(),de(y(y3),{key:0,ref_key:"cam",ref:j,autoplay:"",onLoading:Ze,onStarted:Pe,onCameraChange:fe,onError:je},{default:C(()=>[H.value?(a(),c("div",D3,[A.value&&p.value!=0?(a(),c("div",S3,[e("h1",Z3,D(p.value),1)])):f("",!0),U.value?(a(),c("div",j3,[v(te,{onClick:t[0]||(t[0]=i=>Ce())},{default:C(()=>[P3]),_:1})])):(a(),c("div",T3,[Ie.value?(a(),c("div",{key:0,class:"d-flex flex-column align-items-center gap-4",style:{"margin-bottom":"80px"},onClick:t[1]||(t[1]=h(i=>O(!0),["prevent"]))},U3)):f("",!0),e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(We,["prevent"])},O3),e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(Ke,["prevent"])},R3),e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(Oe,["prevent"])},E3),e("div",{style:xe(`visibility: ${V.value?"hidden":"visible"}`)},[v(te,{onClick:t[2]||(t[2]=i=>G(!V.value)),bgColor:g.value==0?"":y(V3)},{default:C(()=>[g.value==0?(a(),c("svg",N3,Y3)):(a(),c("div",q3,D(g.value),1))]),_:1},8,["bgColor"])],4),V.value?(a(),de(Le,{key:1,selectedTimer:g.value,timerOption:y(ke),onSelectTimer:we},null,8,["selectedTimer","timerOption"])):f("",!0)]))])):f("",!0)]),_:1},512)):f("",!0),y(n).isVisible&&b.value?(a(),c("div",G3,[e("div",J3,[v(y(H3),{ref_key:"VueCanvasDrawing",ref:M,image:ce.value,"onUpdate:image":t[3]||(t[3]=i=>ce.value=i),width:Q.value,height:X.value,"stroke-type":"dash","line-cap":"round","line-join":"round",eraser:I.value,lineWidth:J.value,color:K.value,"background-image":se.value,"initial-image":o3.value,saveAs:"png",lock:_.value,"output-width":l3.value,"output-height":s3.value},null,8,["image","width","height","eraser","lineWidth","color","background-image","initial-image","lock","output-width","output-height"])]),e("div",{class:"d-flex flex-row justify-content-center align-items-center button-container",style:xe({backgroundColor:_.value?"":"black",bottom:_.value?"16px":"0"})},[_.value?(a(),c("div",K3,[e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(Fe,["prevent"])},et),e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(Qe,["prevent"])},lt),e("div",{class:"d-flex flex-column align-items-center gap-4",onClick:h(n3,["prevent"])},it),e("div",{class:"ms-auto d-flex flex-column align-items-center gap-4",onClick:h(Ge,["prevent"])},rt)])):(a(),c("div",ct,[e("button",{class:"collapsible-button small-button-ring",onClick:t[4]||(t[4]=h(()=>{W.value=!W.value},["stop"]))},[e("section",dt,[W.value?(a(),c("svg",ut,ht)):(a(),c("svg",gt,ft))])]),e("div",{class:ue(["d-flex flex-column gap-4 draw-image-tools",Se.value])},[e("section",pt,[v(l,{class:"btn btn-outline btn-outline-btech-default btech-lg m-0",onClick:h(i3,["prevent"])},{default:C(()=>[S(" Cancel ")]),_:1}),wt,v(l,{class:"btn btn-btech-primary btech-lg m-0",onClick:h(be,["prevent"])},{default:C(()=>[S("Done")]),_:1})]),e("section",Ct,[e("div",bt,[e("p",{class:"tools-item tools-active d-flex align-items-center m-0 px-3 py-2",onClick:t[5]||(t[5]=h(i=>M.value.undo(),["prevent"]))},[_t,S(" Undo ")]),e("p",{class:"tools-item tools-active d-flex align-items-center m-0 px-3 py-2",onClick:t[6]||(t[6]=h(i=>M.value.redo(),["prevent"]))},[xt,S(" Redo ")])]),e("div",yt,[e("p",{class:ue(["tools-item m-0 d-flex align-items-center m-0 px-3 py-2",I.value?"":"tools-active"]),onClick:t[7]||(t[7]=h(i=>I.value=!1,["prevent"]))},[Lt,S(" Brush ")],2),e("p",{class:ue(["tools-item m-0 d-flex align-items-center m-0 px-3 py-2",I.value?"tools-active":""]),onClick:t[8]||(t[8]=h(i=>I.value=!0,["prevent"]))},[kt,S(" Eraser ")],2)])]),e("section",Vt,[e("p",Ht,D(I.value?"Eraser Size":"Brush Size"),1),v(d,{modelValue:J.value,"onUpdate:modelValue":t[9]||(t[9]=i=>J.value=i),class:"flex-fill",min:1},null,8,["modelValue"]),e("p",Mt,D(J.value),1)]),e("section",It,[v(u,{modelValue:K.value,"onUpdate:modelValue":t[10]||(t[10]=i=>K.value=i),"show-alpha":"",class:"tools-color"},null,8,["modelValue"]),e("div",{class:"tools-color",style:{"background-color":"white"},onClick:t[11]||(t[11]=i=>w("rgba(255, 255, 255, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"black"},onClick:t[12]||(t[12]=i=>w("rgba(0, 0, 0, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(255, 72, 66, 1)"},onClick:t[13]||(t[13]=i=>w("rgba(255, 72, 66, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(24, 175, 74, 1)"},onClick:t[14]||(t[14]=i=>w("rgba(24, 175, 74, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(1, 163, 255, 1)"},onClick:t[15]||(t[15]=i=>w("rgba(1, 163, 255, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(255, 165, 0, 1)"},onClick:t[16]||(t[16]=i=>w("rgba(255, 165, 0, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(0, 0, 255, 1)"},onClick:t[17]||(t[17]=i=>w("rgba(0, 0, 255, 1)"))}),e("div",{class:"tools-color",style:{"background-color":"rgba(255, 231, 0, 1)"},onClick:t[18]||(t[18]=i=>w("rgba(255, 231, 0, 1)"))})])],2)]))],4)])):f("",!0),v(b3,{ref_key:"singleUploader",ref:oe,"is-multiple":!1,onOnFileDropped:Ee,onOnFileCancelled:Ne},null,512),e("div",Bt,[H.value?(a(),c("div",Dt,[A.value&&p.value!=0?(a(),c("div",St,[e("h1",Zt,D(p.value),1)])):f("",!0),U.value?(a(),c("div",jt,[v(te,{onClick:t[19]||(t[19]=i=>Ce())},{default:C(()=>[Pt]),_:1})])):(a(),c("div",Tt,[v(te,{"data-testid":"timer-button",onClick:t[20]||(t[20]=i=>G(!V.value))},{default:C(()=>[g.value==0?(a(),c("svg",At,$t)):(a(),c("div",Ot,D(g.value),1))]),_:1}),V.value?(a(),de(Le,{key:0,"data-testid":"timer-option",timerOption:y(ke),onSelectTimer:we},null,8,["timerOption"])):f("",!0)]))])):f("",!0)])])),[[F,$.value,void 0,{fullscreen:!0,lock:!0}]])]),_:1},8,["modelValue"]),v(k3,{"is-visible":N.value,description:P.value,onOnClose:Xe,onOnSaveDesc:e3},null,8,["is-visible","description"]),v(w3,{show:le.value,onClose:Be,imageList:E.value},null,8,["show","imageList"]),v(B,{show:Te.value,onClose:Ae,"title-pop-up":"no internet connection"},null,8,["show"]),v(C3,{visibility:ie.value,caption:"Your device camera cannot be opened, please retry or contact your administrator!",onOnNoConfirm:O,onOnYesConfirm:$e,yesLabel:"Retry",noLabel:"Close",btnColorNo:"background-color: #FFFFFF; color: black;",btnColorYes:"background-color: #18AF4A; color: white;"},null,8,["visibility"])],64)}}}),e1=I3(Ft,[["__scopeId","data-v-fea7bbf3"]]);export{e1 as C};
