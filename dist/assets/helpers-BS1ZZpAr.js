import{a as n}from"./index-BuVmIl8K.js";import{a as f}from"./useDefectsFormStore-41UTMhiG.js";import{g as m}from"./date-format-8-IvfSl3.js";import{u as c}from"./useHistoricalEformDmaStore-Fo4tKNgB.js";import{e as p}from"./lodash-DrHMlsdo.js";const u=()=>{const e=n(),r=f(),o=e.user.Name,t=m(r.stateTimeZone);return`${o}, at ${t} (${r.stateTimeZoneDesc})`},d=(e,r)=>{for(const o in e)if(r.includes(o))try{e[o]=JSON.parse(e[o])}catch(t){console.log(t)}return e},h=(e,r="")=>{const o=c();if(o.IsIntervention){const t=e.form??"",s=e.header.defectWorkorder?` WO ${e.header.defectWorkorder}`:"";o.setFileName(`${t}${s}`)}else{const t=e.taskDesc??e.header.taskDesc,s=e.generic?t.length<=20?t:t.slice(0,20):(t.includes(";")?t.split(";")[2]:t).slice(0,20),i=r.length<=20?r:r.slice(0,20),a=e.header.defectWorkorder?` ${e.header.defectWorkorder}`:"";o.setFileName(`${e.unitNumber} ${s} ${i}${a}`)}},v=e=>{try{const r=c();"referencePhoto"in e.detail&&e.referencePhoto&&!p.isEmpty(e.referencePhoto)&&r.setReferencePhoto(e.referencePhoto);const o=["parts","labours","resources","symptoms","causes","images"];"previousCracks"in e.detail&&o.push("previousCracks");const t=d(e.detail,o);return r.setDefectDetailDownload(t),r.setSerialNumber(e.serialNumber),r.setOwnerShip(e.ownership),r.setApprovalDefectDownload({approvedBy:e.header.approvedBy,approvedDate:e.header.approvedDate}),r.setTimeStamp(u()),h(e,t.description),!0}catch{return!1}},P=e=>{const r=n();return!!(e.length>0&&e.find(t=>t.downloadBy.id==r.user.EmployeeId))},w=e=>`${e.sampleStatus} Intervention ${e.equipment} ${e.sapWorkOrder}`,F=(e,r)=>{var t;const o=e.find(s=>Array.isArray(r)?r.includes(s.status):s.status===r);return{name:((t=o==null?void 0:o.updatedBy)==null?void 0:t.name)??"",date:(o==null?void 0:o.updatedDate)??""}};export{u as a,P as c,F as g,v as p,w as t};
