import{a as H}from"./@vueuse-DFoNmIyu.js";import{k as U,r as o,a0 as W,d as L,p as g,q as B,x as m,R as d,aB as n,s as k,aa as M,$ as O,F as A,C as P}from"./@vue-BypzYtbH.js";const Q={class:"row fullscreen-dialog-image-preview"},T=n("div",{class:"bg-secondary"},null,-1),j=["src"],G={class:"image-carousel-description"},J=n("div",{class:"description-title"},"Description",-1),K={class:"description-text"},X={style:{"font-family":"'Public sans', sans-serif !important","font-size":"12px","text-wrap":"unset"}},ee=U({__name:"FullScreenDialog",props:{visibility:{type:Boolean,default:!1},image:{type:String,required:!0},images:{required:!0,type:Array},newVersion:{type:Boolean,default:!1}},emits:["handle-close"],setup(x,{emit:b}){const c=x,V=b,i=H("(min-width: 1000px)"),N=o(),p=o(""),y=W(c,"visibility"),f=o([]),l=o(),u=o(0),_=o(!1),t=o("0px"),R=o(0),h=o(0),s=o(0),a=o(0),w=o(0),$=async()=>{u.value=0,f.value=[],!(c.images.length<1)&&(_.value=!0,t.value="300px",window.setTimeout(()=>{w.value=0,p.value=decodeURI(c.images[0].description),l.value=document.getElementsByClassName("carousel-image")[0],s.value=l.value.height,a.value=l.value.width,R.value=600,h.value=600,a.value<500&&s.value<250?(l.value.style.width=a.value+"px",l.value.style.height=s.value+"px",t.value="300px"):a.value>600&&s.value<250?(l.value.style.width=a.value+"px",l.value.style.height="auto",t.value="300px"):(l.value.style.height=i.value?"600px":"450px",l.value.style.width="auto",t.value=i.value?"600px":"450px"),_.value=!1},500))},D=e=>{u.value=0,p.value=decodeURI(c.images[e].description),l.value=document.getElementsByClassName("carousel-image")[e],s.value=l.value.height,a.value=l.value.width,l.value.style.transform=`rotate(${u.value}deg)`,a.value<500&&s.value<250?(l.value.style.width=a.value+"px",l.value.style.height=s.value+"px",t.value="300px"):a.value>600&&s.value<250?(l.value.style.width=a.value+"px",l.value.style.height="auto",t.value="300px"):(l.value.style.height=i.value?"600px":"450px",l.value.style.width="auto",t.value=i.value?"600px":"450px")},I=()=>{f.value=[],V("handle-close")},E=()=>{u.value==360&&(u.value=0),u.value=u.value+90;const e=l.value;u.value==90||u.value==270?C(e):a.value<500&&s.value<250?(e.style.width=a.value+"px",e.style.height=s.value+"px",t.value="300px"):a.value>600&&s.value<250?(e.style.width=a.value+"px",e.style.height="auto",t.value="300px"):(e.style.height=i.value?"600px":"450px",e.style.width="auto",t.value=i.value?"600px":"450px"),e.style.transform=`rotate(${u.value}deg)`},C=e=>{const v=h.value/a.value;e.style.width=`${h.value}px`,e.style.height=`${s.value*v+300}px`,t.value=`${a.value*v+50}px`};return L(i,()=>{const e=document.getElementsByClassName("carousel-image")[w.value];if(u.value==90||u.value==270)C(e);else{if(!e)return;a.value<500&&s.value<250?(e.style.width=a.value+"px",e.style.height=s.value+"px",t.value="300px"):a.value>600&&s.value<250?(e.style.width=a.value+"px",e.style.height="auto",t.value="300px"):(e.style.height=i.value?"600px":"450px",e.style.width="auto",t.value=i.value?"600px":"450px")}}),(e,v)=>{const S=d("el-carousel-item"),q=d("el-carousel"),z=d("NwImg"),F=d("el-dialog");return g(),B(F,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=r=>y.value=r),title:"Detailed picture",width:"90%",onClosed:v[1]||(v[1]=r=>I()),top:"2vh",onOpened:$,"destroy-on-close":""},{default:m(()=>[n("div",Q,[T,k(q,{ref_key:"carousel",ref:N,"indicator-position":"none",trigger:"click",height:t.value,interval:2147483647,arrow:"always",onChange:D,loop:"false"},{default:m(()=>[(g(!0),M(A,null,O(x.images,r=>(g(),B(S,{key:r.imgBlob},{default:m(()=>[n("img",{src:r.url,class:"carousel-image",alt:"photo"},null,8,j)]),_:2},1024))),128))]),_:1},8,["height"]),n("div",{class:"rotate-button",onClick:E},[k(z,{src:"/media/icons/bumaau/rotate.png",width:"60"})]),n("div",G,[J,n("div",K,[n("pre",X,P(p.value),1)])])])]),_:1},8,["modelValue"])}}});export{ee as _};
