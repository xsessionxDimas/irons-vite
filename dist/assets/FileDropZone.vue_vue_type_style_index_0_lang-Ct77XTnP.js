import{j as u}from"./index-BCnwA6yE.js";import{u as N}from"./vue3-dropzone-DPWU9yJt.js";import{k as P,r as i,c as T,L as q,R as z,p as c,aa as m,aB as e,O as B,u as C,s as k,b4 as y,C as S,x as A,q as L,A as D}from"./@vue-BypzYtbH.js";const R=["disabled"],$={key:0,class:"dropzone-upload-area-text text-color-dark excel-upload-success"},j={class:"excel-upload-success-content"},Z={key:2,class:"dropzone-upload-area"},G={class:"dropzone-upload-area-icon"},H={class:"svg-icon svg-icon-3x svg-icon-primary"},J={class:"dropzone-upload-area-text text-color-dark"},K=e("p",null,"Drop files here or click to upload",-1),ee=P({__name:"FileDropZone",props:{isSubmissionUploadSuccess:{type:Boolean},accept:{default:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},errorMessage:{required:!1,type:String},skipSizeValidation:{required:!1,type:Boolean,default:!1}},emits:["handleUpload","handleCloseUploadedFile","handleSetIsExcelFileUploaded"],setup(b,{expose:F,emit:V}){const a=b,v=V,l=i(!1),f=i(!1),r=i(""),g=i(""),o=i(0),x=T(()=>o.value>0&&a.isSubmissionUploadSuccess),w=async(s,d)=>{var h,M;if(v("handleSetIsExcelFileUploaded",!1),s.length<1){if((M=(h=d[0])==null?void 0:h.errors)==null?void 0:M.some(t=>t.code==="too-many-files")){const t=a.errorMessage||"Only accept one excel file";u(t)}else{const t=a.errorMessage||"Only accept excel file";u(t)}return}const n=Math.floor(s[0].size/1e6*100)/100,_=s[0].type.includes("image");if(a.skipSizeValidation){if(!_&&n>5){u("Max file size: 5 MB");return}}else if(n>2){u("File size is too big");return}const p=new FormData;p.append("fileUpload",s[0]),await v("handleUpload",p),r.value=s[0].name,g.value=`${Math.floor(s[0].size/1e6*100)/100} Mb`,a.isSubmissionUploadSuccess?(f.value=!0,o.value=o.value%100+50):(o.value=0,l.value=!1),o.value===50&&setTimeout(()=>{l.value=!1},2e3)},E=()=>{r.value="",g.value=""},U=()=>{v("handleCloseUploadedFile"),f.value=!1,setTimeout(()=>{o.value=0},500)},{getRootProps:I,getInputProps:O}=N({onDrop:w,maxFiles:1,multiple:!1,accept:a.accept});return q(()=>{U()}),F({resetInput:E}),(s,d)=>{const n=z("inline-svg"),_=z("el-tooltip"),p=z("el-progress");return c(),m("div",B(C(I)(),{class:[x.value?"dropzone-upload-excel-success":"","dropzone-upload dropzone-upload-excel mb-3"]}),[e("input",B(C(O)(),{disabled:!!(x.value||f.value)}),null,16,R),x.value?(c(),m("div",$,[e("span",{class:"svg-icon svg-icon-2x excel-upload-success-close-icon",onClick:d[0]||(d[0]=h=>U())},[k(n,{src:"/media/icons/duotune/general/gen040.svg"})]),e("div",j,[e("p",{class:y(l.value?"text-gray-600":"")},S(g.value),3),k(_,{class:"box-item",effect:"dark",content:r.value,placement:"top"},{default:A(()=>[e("p",{class:y([l.value?"text-gray-600":"","excel-upload-success-content-file-name"])},S(r.value),3)]),_:1},8,["content"])]),l.value?(c(),L(p,{key:0,indeterminate:!0,percentage:o.value,"stroke-width":14,class:"loading-upload-bar"},null,8,["percentage"])):D("",!0)])):D("",!0),o.value>0?(c(),m("div",{key:1,class:y([o.value>0?"dropzone-upload-disable":"","dropzone-upload-area"])},null,2)):(c(),m("div",Z,[e("div",G,[e("span",H,[k(n,{src:"/media/icons/duotune/files/fil010.svg"})])]),e("div",J,[K,e("span",null,"Max upload 1 file"+S(b.skipSizeValidation?"":" and Max size is 2 MB"),1)])]))],16)}}});export{ee as _};
