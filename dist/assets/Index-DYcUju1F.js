import{k as F,r as h,c as d,d as M,o as P,a7 as U,p as r,aa as i,aB as o,s as k,C as _,A as q,x as z,y as I,a1 as L,F as E,$ as K,R,bd as G,bb as J,B as Q,b4 as W}from"./@vue-BypzYtbH.js";import{n as X}from"./navigator-D5io2Cca.js";import{u as Y}from"./useSosStore-DEF7qS5a.js";import{a as b}from"./element-plus-BeWdvTRa.js";import{a as Z}from"./index-BuVmIl8K.js";import{O as ee}from"./OnlineStatus-Bhk3CA8-.js";import{S as te}from"./SelectSearch-CnaDUnr3.js";import{_ as oe}from"./nw-img-vue-CR837WER.js";import"./vue-router-iNp9kJ0K.js";import"./pinia-BjOS2_Ao.js";import"./authentication-handler-Pueb_EI7.js";import"./dayjs-D0x2Df_K.js";import"./@popperjs-BaMZbQYT.js";import"./lodash-DrHMlsdo.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./object-path-DPahbflh.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./useGlobalConnectionStore-DV9B81de.js";import"./internet-connection-CnLQPjRt.js";import"./@vueuse-DFoNmIyu.js";import"./helpers-wUOLw-dU.js";import"./number-format-BdMuQVyW.js";import"./webp-converter-browser-C3MD88Lp.js";import"./compressorjs-Cmz8Y9J9.js";import"./file-saver-CwTBvle_.js";const y=u=>(G("data-v-39b141e1"),u=u(),J(),u),se={class:"wrapper d-flex flex-column flex-fill px-4"},ae={class:"d-flex justify-content-between align-items-center"},le=y(()=>o("p",{class:"page-title"},"SOS Print Label",-1)),re={class:"d-flex flex-row align-items-center"},ie={class:"d-flex flex-row align-items-center justify-content-end mt-5 w-100"},ne={key:0,class:"mb-0"},ce={key:0,class:"d-flex flex-column"},de={class:"task w-100"},me={class:"form-check"},ue=["indeterminate"],pe=y(()=>o("label",{class:"form-check-label ms-3 task--label",for:"check-all"}," Compartment or System ",-1)),ve={class:"form-check"},fe=["value","id","disabled"],he={class:"d-flex flex-row ps-3 justify-content-between pe-9"},_e=["for"],be={key:0,class:"text-message"},Se={key:1,class:"text-message"},ge={key:1,class:"task w-100"},ke=y(()=>o("p",{class:"task--label mb-0"},"Compartment or System",-1)),ye=[ke],xe=F({__name:"Index",setup(u){const t=Y(),l=h(),O=h(!1),p=h(!1),x=h(!1),n=d(()=>t.FormattedSosCompartment),s=d({get:()=>t.SelectedSosCompartment,set:e=>{t.stateSelectedSosCompartment=e}}),C=d(()=>{for(const e of n.value)if(e.status!="")return!0;return!1}),H=()=>{p.value&&C.value?s.value=n.value.filter(e=>e.status==""):p.value&&!C.value?s.value=n.value:s.value=[],v()},v=()=>{const e=s.value.length;x.value=e>0&&e<n.value.length},S=d(()=>t.SosHistoryOptions),m=d(()=>t.SelectedSosHistory),w=d(()=>{const e=t.SelectedSosHistory;return Object.keys(e).length==0?"":`${e.equipment} - ${e.modelId} - ${V(e.psTypeId)}${e.workOrder} - ${e.eformType}`}),V=e=>e==null?"":e+" Hr Service - ",N=e=>{t.setSelectedSos(e),s.value=[],t.stateSosCompartment=[],v(),g()},f=Z();M(()=>f.user.SiteId,async e=>{e&&(l.value=b.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),S.value.length==0&&await t.getSosHistory(f.user.SiteId),l.value.close())});const g=async()=>{l.value=b.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});const e={workOrder:m.value.workOrder,eformType:m.value.eformType};await t.getSosCompartment(e),v(),s.value.length>0&&(t.checkLatestCompartmentList(),t.checkSortSelectedCompartment()),l.value.close()},{redirectByName:T}=X(),B=async()=>{await g(),await $(),T("sosprintlabelpreview")},$=async()=>{l.value=b.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});const e={workOrder:m.value.workOrder,eformType:m.value.eformType,oilSampleKey:s.value.map(c=>c.value)};await t.getLabelData(e),l.value.close()};return P(async()=>{f.user.SiteId&&S.value.length==0&&(l.value=b.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),await t.getSosHistory(f.user.SiteId),l.value.close()),Object.keys(m.value).length&&await g()}),U(()=>{l.value&&l.value.close()}),(e,c)=>{const j=R("el-button");return r(),i("div",se,[o("div",ae,[le,o("div",re,[k(ee)])]),k(te,{value:w.value,data:S.value,"display-label":!0,placeholder:"Completed Services",dialogVisible:O.value,onOnSelected:N},null,8,["value","data","dialogVisible"]),o("div",ie,[s.value.length>0?(r(),i("p",ne,_(s.value.length)+" Selected ",1)):q("",!0),k(j,{disabled:!w.value||s.value.length==0,type:"success",class:"button ms-5",onClick:B},{default:z(()=>[Q("Next")]),_:1},8,["disabled"])]),n.value.length?(r(),i("div",ce,[o("div",de,[o("div",me,[I(o("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>p.value=a),id:"check-all",class:"form-check-input",type:"checkbox",indeterminate:x.value,onChange:H},null,40,ue),[[L,p.value]]),pe])]),(r(!0),i(E,null,K(n.value,(a,D)=>(r(),i("div",{class:"compartment w-100",key:D},[o("div",ve,[I(o("input",{"onUpdate:modelValue":c[1]||(c[1]=A=>s.value=A),class:"form-check-input",type:"checkbox",value:a,id:a.value,disabled:a.status!="",onChange:v},null,40,fe),[[L,s.value]]),o("div",he,[o("label",{class:W(["form-check-label",a.status!=""?"text-disabled":""]),for:a.value},_(a.label),11,_e),a.labelNumber?(r(),i("p",be,_(a.labelNumber),1)):(r(),i("p",Se,_(a.status),1))])])]))),128))])):(r(),i("div",ge,ye))])}}}),_t=oe(xe,[["__scopeId","data-v-39b141e1"]]);export{_t as default};
