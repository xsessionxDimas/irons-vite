import{u as le}from"./vuex-BbOKrtVp.js";import{b as bt}from"./vue-router-iNp9kJ0K.js";import{a as ce}from"./breadcrumb-D-Q4Tk9w.js";import{b as j,s as Y,u as M,i as lt,h as gt,j as mt,A as ue}from"./index-BCnwA6yE.js";import{P as Lt}from"./Pagination-CVDIvnOM.js";import{F as me}from"./FilterIconButton-Bj0WTbms.js";import{h as pe,A as de,U as he}from"./excel-generator-CRLIz6fw.js";import{k as J,p as u,q as L,x as p,R as W,s as i,B as X,aB as D,c as x,aa as w,C as O,b4 as ge,r as N,u as n,y as it,T as _t,F as ft,Y as Dt,A as et,P as pt,bd as yt,bb as Ft,a0 as Tt,d as Ot,$ as fe,a7 as De,L as Se}from"./@vue-BypzYtbH.js";import{_ as St}from"./nw-img-vue-CR837WER.js";import{_ as y,b as wt}from"./element-plus-C5R56mia.js";import{P as rt,b as z,a as ve}from"./table-sort-VnBD5Hfa.js";import{d as It}from"./pinia-BjOS2_Ao.js";import{a as Q,m as Bt}from"./mapOption-sP4IrA4W.js";import{f as $,n as _,a as At}from"./date-format-BASVuupi.js";import{c as be}from"./urls-cnAouliv.js";import{b as Ce}from"./urls-D--VoWL5.js";import{b as Le}from"./urls-VV7rTsJU.js";import{c as dt,a as H,f as _e,b as st,d as Et,h as ye}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as kt}from"./ErrorAlert-CMKGfwAi.js";import{_ as ot}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as Pt}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{_ as nt}from"./DecimalInput.vue_vue_type_script_setup_true_lang-BrbFZUJW.js";import{_ as qt}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as ht}from"./AutoComplete.vue_vue_type_script_setup_true_lang-BJG-QfZq.js";import{a as Fe}from"./vee-validate-C_msoaAA.js";import{_ as Te}from"./lodash-Cr9vlq0V.js";import{_ as we}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as Ie}from"./map-anything-abi6NY2Z.js";import{_ as at}from"./AutoComplete.vue_vue_type_style_index_0_lang-DTl0xZyN.js";import{_ as $t}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{F as Ee}from"./file-saver-DhbZvGod.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const ke=J({setup(t,{emit:r}){return{handleDownload:c=>{r("handle-download",c)}}}}),Pe={class:"svg-icon svg-icon-2x"};function Ue(t,r,e,c,h,l){const o=W("inline-svg"),T=W("el-tooltip"),b=W("el-dropdown-item"),d=W("el-dropdown-menu"),I=W("el-dropdown");return u(),L(I,{trigger:"click",class:"btn btn-small btn-icon duotune-icon px-2 my-5",onCommand:t.handleDownload},{dropdown:p(()=>[i(d,null,{default:p(()=>[i(b,{command:"General"},{default:p(()=>[X("Download General")]),_:1}),i(b,{command:"Specific"},{default:p(()=>[X("Download Specific")]),_:1})]),_:1})]),default:p(()=>[i(T,{class:"box-item",effect:"dark",placement:"top",content:"Download Excel"},{default:p(()=>[D("span",Pe,[i(o,{src:"/media/svg/buttons/download-excel.svg"})])]),_:1})]),_:1},8,["onCommand"])}const We=St(ke,[["render",Ue]]),Z="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_cbm_status",Rt=`${Z}`,xe=`${Z}/general_export`,Ge=`${Z}/cbm_status_general/update`,Oe=`${Z}/specific_lookup`,Ae=`${Z}/specific_validate_upload`,$e=`${Z}/cbm_status_specific_bulk`,Re=`${Z}/cbm_status_specific/update`,He=`${Z}/specific_export`,Ne=`${Z}/cbm_status_specific_bulk`,Ht={cbmGroup:"",cbmGroupTo:"",component:"",componentTo:"",parameter:"",parameterTo:"",cluster:"",clusterTo:"",sampleCount:"",sampleCountTo:"",sampleWeight:"",sampleWeightTo:"",cautionLimit:"",cautionLimitTo:"",criticalLimit:"",criticalLimitTo:"",summaryWeight:"",summaryWeightTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},Ct={cluster:"",clusterTo:"",sampleCount:"",sampleCountTo:"",sampleWeight:"",sampleWeightTo:"",cautionLimit:"",cautionLimitTo:"",criticalLimit:"",criticalLimitTo:"",summaryWeight:"",summaryWeightTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},ct=It({id:"CbmStatusList",state:()=>({stateFilterData:{...Ct},stateLastUsedFilterData:{...Ct},stateFilterDataSpecific:{...Ht},stateLastUsedFilterDataSpecific:{...Ht},statePageName:"cbmStatus",stateDisplayData:[],stateDisplayDataSpecific:[],statePagination:new rt,statePaginationSpecific:new rt,stateLoading:!1,statePaginationLoading:!1,stateCbmGroupOption:[],stateParameterOption:[],stateComponentOption:[],stateClusterOption:[],stateSampleCountOption:[],stateSampleWeightOption:[],stateCautionLimitOption:[],stateCriticalLimitOption:[],stateSummaryWeightOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,paginationSpecific:t=>t.statePaginationSpecific,displayData:t=>t.stateDisplayData,displayDataSpecific:t=>t.stateDisplayDataSpecific,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,filterDataSpecific:t=>t.stateFilterDataSpecific,lastUsedFilterDataSpecific:t=>t.stateLastUsedFilterDataSpecific,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,cbmGroupOption:t=>t.stateCbmGroupOption,parameterOption:t=>t.stateParameterOption,componentOption:t=>t.stateComponentOption,clusterOption:t=>t.stateClusterOption,sampleCountOption:t=>t.stateSampleCountOption,sampleWeightOption:t=>t.stateSampleWeightOption,cautionLimitOption:t=>t.stateCautionLimitOption,criticalLimitOption:t=>t.stateCriticalLimitOption,summaryWeightOption:t=>t.stateSummaryWeightOption},actions:{async getData(t=!0){const r={cluster:this.stateFilterData.cluster,clusterTo:this.stateFilterData.clusterTo,sampleCount:this.stateFilterData.sampleCount,sampleCountTo:this.stateFilterData.sampleCountTo,sampleWeight:this.stateFilterData.sampleWeight,sampleWeightTo:this.stateFilterData.sampleWeightTo,cautionLimit:this.stateFilterData.cautionLimit,cautionLimitTo:this.stateFilterData.cautionLimitTo,criticalLimit:this.stateFilterData.criticalLimit,criticalLimitTo:this.stateFilterData.criticalLimitTo,startDate:this.stateFilterData.startDate?$(_(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?$(_(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?$(_(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?$(_(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await j.get(Rt,"cbm_status_general",new URLSearchParams(r).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){Y("IRONS",e),!e.response.data&&(e!=null&&e.includes("Request failed with status code 401"))&&M().setLoggedIn(!1),console.log(e)}finally{this.stateLoading=!1}},async getDataSpecific(t=!0){const r={cbmGroup:this.stateFilterDataSpecific.cbmGroup,cbmGroupTo:this.stateFilterDataSpecific.cbmGroupTo,component:this.stateFilterDataSpecific.component,componentTo:this.stateFilterDataSpecific.componentTo,cluster:this.stateFilterDataSpecific.cluster,clusterTo:this.stateFilterDataSpecific.clusterTo,sampleCount:this.stateFilterDataSpecific.sampleCount,sampleCountTo:this.stateFilterDataSpecific.sampleCountTo,sampleWeight:this.stateFilterDataSpecific.sampleWeight,sampleWeightTo:this.stateFilterDataSpecific.sampleWeightTo,cautionLimit:this.stateFilterDataSpecific.cautionLimit,cautionLimitTo:this.stateFilterDataSpecific.cautionLimitTo,criticalLimit:this.stateFilterDataSpecific.criticalLimit,criticalLimitTo:this.stateFilterDataSpecific.criticalLimitTo,startDate:this.stateFilterDataSpecific.startDate?$(_(new Date(this.stateFilterDataSpecific.startDate))):"",startDateTo:this.stateFilterDataSpecific.startDateTo?$(_(new Date(this.stateFilterDataSpecific.startDateTo))):"",endDate:this.stateFilterDataSpecific.endDate?$(_(new Date(this.stateFilterDataSpecific.endDate))):"",endDateTo:this.stateFilterDataSpecific.endDateTo?$(_(new Date(this.stateFilterDataSpecific.endDateTo))):"",page:this.stateFilterDataSpecific.page.toString(),pageSize:this.stateFilterDataSpecific.pageSize.toString(),order:this.stateFilterDataSpecific.order,ver:this.stateFilterDataSpecific.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayDataSpecific=[]);const e=await j.get(Rt,"cbm_status_specific",new URLSearchParams(r).toString());this.stateDisplayDataSpecific=e.data.result.content,this.setTotalPageSpecific(e.data.result.total),this.stateLastUsedFilterDataSpecific={...this.stateFilterData}}catch(e){Y("IRONS",e),!e.response.data&&(e!=null&&e.includes("Request failed with status code 401"))&&M().setLoggedIn(!1),console.log(e)}finally{this.stateLoading=!1}},async getLookup(){const t={ver:this.stateFilterData.ver};try{const r=await j.get(Oe,"",new URLSearchParams(t).toString());this.stateCbmGroupOption=Q(r.data.result.content.cbmGroup),this.stateComponentOption=Bt(r.data.result.content.component,"component","componentDescription"),this.stateParameterOption=Q(r.data.result.content.parameter),this.stateClusterOption=Q(r.data.result.content.cluster),this.stateSampleCountOption=Q(r.data.result.content.sampleCount),this.stateSampleWeightOption=Q(r.data.result.content.sampleWeight),this.stateCautionLimitOption=Q(r.data.result.content.cautionLimit),this.stateCriticalLimitOption=Q(r.data.result.content.criticalLimit)}catch(r){Y("IRONS",r),r.response.data.statusCode==401&&M().setLoggedIn(!1),console.log(r)}},async export(t){const r={order:this.stateFilterData.order,ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)},e={cbmGroup:this.stateFilterDataSpecific.cbmGroup,cbmGroupTo:this.stateFilterDataSpecific.cbmGroupTo,component:this.stateFilterDataSpecific.component,componentTo:this.stateFilterDataSpecific.componentTo,cluster:this.stateFilterDataSpecific.cluster,clusterTo:this.stateFilterDataSpecific.clusterTo,sampleCount:this.stateFilterDataSpecific.sampleCount,sampleCountTo:this.stateFilterDataSpecific.sampleCountTo,sampleWeight:this.stateFilterDataSpecific.sampleWeight,sampleWeightTo:this.stateFilterDataSpecific.sampleWeightTo,cautionLimit:this.stateFilterDataSpecific.cautionLimit,cautionLimitTo:this.stateFilterDataSpecific.cautionLimitTo,criticalLimit:this.stateFilterDataSpecific.criticalLimit,criticalLimitTo:this.stateFilterDataSpecific.criticalLimitTo,startDate:this.stateFilterDataSpecific.startDate?$(_(new Date(this.stateFilterDataSpecific.startDate))):"",startDateTo:this.stateFilterDataSpecific.startDateTo?$(_(new Date(this.stateFilterDataSpecific.startDateTo))):"",endDate:this.stateFilterDataSpecific.endDate?$(_(new Date(this.stateFilterDataSpecific.endDate))):"",endDateTo:this.stateFilterDataSpecific.endDateTo?$(_(new Date(this.stateFilterDataSpecific.endDateTo))):"",order:this.stateFilterDataSpecific.order,ver:this.stateFilterDataSpecific.ver,Gmt:new Date().toTimeString().slice(12,17)};try{const c=t==="General"?xe:He,h=t==="General"?r:e;return(await j.getBlob(c,"",new URLSearchParams(h).toString())).data}catch(c){Y("IRONS",c),console.log(c)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},setTotalPageSpecific(t){this.paginationSpecific.totalPage=t,this.paginationSpecific.getPaginationStartIndex(),this.paginationSpecific.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setPageSpecific(t){this.statePaginationLoading=!0,this.statePaginationSpecific.handleCurrentPageChange(t),this.stateFilterDataSpecific.page=this.statePaginationSpecific.currentPage,await this.getDataSpecific(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:r},e){if(e==="Specific"){if(!t&&!r)this.stateFilterDataSpecific.order="";else{const c=r=="ascending"?"asc":"desc";this.stateFilterDataSpecific.order=`${t}_${c}`}this.statePaginationSpecific.handleCurrentPageChange(1),this.stateFilterDataSpecific.page=this.statePaginationSpecific.currentPage,await this.getDataSpecific(!1)}else{if(!t&&!r)this.stateFilterData.order="";else{const c=r=="ascending"?"asc":"desc";this.stateFilterData.order=`${t}_${c}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)}},setCbmGroup(t){this.stateFilterDataSpecific.cbmGroup=t},setCbmGroupTo(t){this.stateFilterDataSpecific.cbmGroupTo=t},setComponent(t){this.stateFilterDataSpecific.component=t},setComponentTo(t){this.stateFilterDataSpecific.componentTo=t},setParameter(t){this.stateFilterDataSpecific.parameter=t},setParameterTo(t){this.stateFilterDataSpecific.parameterTo=t},setCluster(t){this.stateFilterDataSpecific.cluster=t},setClusterTo(t){this.stateFilterDataSpecific.clusterTo=t},setSampleCount(t){this.stateFilterDataSpecific.sampleCount=t},setSampleCountTo(t){this.stateFilterDataSpecific.sampleCountTo=t},setSampleWeight(t){this.stateFilterDataSpecific.sampleWeight=t},setSampleWeightTo(t){this.stateFilterDataSpecific.sampleWeightTo=t},setCautionLimit(t){this.stateFilterDataSpecific.cautionLimit=t},setCautionLimitTo(t){this.stateFilterDataSpecific.cautionLimitTo=t},setCriticalLimit(t){this.stateFilterDataSpecific.criticalLimit=t},setCriticalLimitTo(t){this.stateFilterDataSpecific.criticalLimitTo=t},setSummaryWeight(t){this.stateFilterDataSpecific.summaryWeight=t},setSummaryWeightTo(t){this.stateFilterDataSpecific.summaryWeightTo=t},setStartDate(t){this.stateFilterDataSpecific.startDate=t},setStartDateTo(t){this.stateFilterDataSpecific.startDateTo=t},setEndDate(t){this.stateFilterDataSpecific.endDate=t},setEndDateTo(t){this.stateFilterDataSpecific.endDateTo=t},async resetFilter(){this.stateFilterDataSpecific.cbmGroup="",this.stateFilterDataSpecific.cbmGroupTo="",this.stateFilterDataSpecific.component="",this.stateFilterDataSpecific.componentTo="",this.stateFilterDataSpecific.parameter="",this.stateFilterDataSpecific.parameterTo="",this.stateFilterDataSpecific.cluster="",this.stateFilterDataSpecific.clusterTo="",this.stateFilterDataSpecific.sampleCount="",this.stateFilterDataSpecific.sampleCountTo="",this.stateFilterDataSpecific.sampleWeight="",this.stateFilterDataSpecific.sampleWeightTo="",this.stateFilterDataSpecific.cautionLimit="",this.stateFilterDataSpecific.cautionLimitTo="",this.stateFilterDataSpecific.criticalLimit="",this.stateFilterDataSpecific.criticalLimitTo="",this.stateFilterDataSpecific.summaryWeight="",this.stateFilterDataSpecific.summaryWeightTo="",this.stateFilterDataSpecific.startDate="",this.stateFilterDataSpecific.startDateTo="",this.stateFilterDataSpecific.endDate="",this.stateFilterDataSpecific.endDateTo="";const t=this.stateLastUsedFilterDataSpecific.cbmGroup!=="",r=this.stateLastUsedFilterDataSpecific.cbmGroupTo!=="",e=this.stateLastUsedFilterDataSpecific.component!=="",c=this.stateLastUsedFilterDataSpecific.componentTo!=="",h=this.stateLastUsedFilterDataSpecific.parameter!=="",l=this.stateLastUsedFilterDataSpecific.parameterTo!=="",o=this.stateLastUsedFilterDataSpecific.cluster!=="",T=this.stateLastUsedFilterDataSpecific.clusterTo!=="",b=this.stateLastUsedFilterDataSpecific.sampleCount!=="",d=this.stateLastUsedFilterDataSpecific.sampleCountTo!=="",I=this.stateLastUsedFilterDataSpecific.sampleWeight!=="",F=this.stateLastUsedFilterDataSpecific.sampleWeightTo!=="",s=this.stateLastUsedFilterDataSpecific.cautionLimit!=="",U=this.stateLastUsedFilterDataSpecific.cautionLimitTo!=="",G=this.stateLastUsedFilterDataSpecific.criticalLimit!=="",A=this.stateLastUsedFilterDataSpecific.criticalLimitTo!=="",C=this.stateLastUsedFilterDataSpecific.summaryWeight!=="",P=this.stateLastUsedFilterDataSpecific.summaryWeightTo!=="",f=this.stateLastUsedFilterData.startDate!=="",V=this.stateLastUsedFilterData.startDateTo!=="",q=this.stateLastUsedFilterData.endDate!=="",B=this.stateLastUsedFilterData.endDateTo!=="";(t||r||e||c||h||l||o||T||b||d||I||F||s||U||G||A||C||P||f||V||q||B)&&await this.getDataSpecific()},resetState(){this.stateFilterData={...Ct},this.stateDisplayData=[],this.statePagination=new rt,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Nt={cbmStatusId:0,cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))},Vt={cbmStatusId:0,cbmGroup:"",component:"",parameter:"",clusterData:[],startDate:_(new Date),endDate:_(new Date("12/31/9999"))},Ve={cbmStatusId:0,cbmGroup:"",component:"",parameter:"",cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))},vt=It({id:"CbmStatusForm",state:()=>({stateFormData:{...Nt},stateFormDataSpecific:{...Vt},stateUpdateSpecific:{...Ve},stateIsError:!1,stateError:"",stateIsErrorEdit:!1,stateErrorEdit:"",stateErrors:[],stateLoading:!1,stateCbmGroupOption:[],stateParameterOption:[],stateComponentOption:[],stateIsEdit:!1,stateActiveTab:"General",stateIsDuplicate:!1}),getters:{activeTab:t=>t.stateActiveTab,formData:t=>t.stateFormData,formDataSpecific:t=>t.stateFormDataSpecific,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading,cbmGroupOption:t=>t.stateCbmGroupOption,parameterOption:t=>t.stateParameterOption,componentOption:t=>t.stateComponentOption,isEdit:t=>t.stateIsEdit,isDuplicate:t=>t.stateIsDuplicate},actions:{setActiveTab(t){this.stateActiveTab=t},async getLookup(){const t={ver:"v1"};try{const r=await j.get(be,"",new URLSearchParams(t).toString()),e=await j.get(Ce,"",new URLSearchParams(t).toString()),c=await j.get(Le,"",new URLSearchParams(t).toString());this.stateCbmGroupOption=Q(c.data.result.content.cbmGroup),this.stateParameterOption=Q(r.data.result.content.parameter),this.stateComponentOption=Bt(e.data.result.content,"component","componentDescription")}catch(r){Y("IRONS",r),r.response.data.statusCode==401&&M().setLoggedIn(!1),console.log(r)}},async insertData(t){try{this.stateLoading=!0;const r={userAccount:t,ver:"v1"},e=this.stateFormDataSpecific.clusterData.map(h=>({cbmStatusId:0,cbmGroup:this.stateFormDataSpecific.cbmGroup,component:this.stateFormDataSpecific.component,cluster:h.cluster,sampleCount:h.sampleCount,sampleWeight:h.sampleWeight,cautionLimit:h.cautionLimit,criticalLimit:h.criticalLimit,startDate:$(_(new Date(this.stateFormDataSpecific.startDate))),endDate:$(_(new Date(this.stateFormDataSpecific.endDate)))})),c=await j.post(`${Ne}?${new URLSearchParams(r).toString()}`,e);c.data.title==="Error"?(this.stateErrors.push(c.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1),this.setActiveTab("Specific")}catch(r){Y("IRONS",r),r.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=r,this.stateErrors.push(r.response.data.result.message),this.stateIsError=!0}finally{this.stateLoading=!1}},async updateData(t){try{this.stateLoading=!0;const r={userAccount:t,ver:"v1"},e={cbmStatusId:this.stateFormData.cbmStatusId,cluster:this.stateFormData.cluster,sampleCount:this.stateFormData.sampleCount,sampleWeight:this.stateFormData.sampleWeight,cautionLimit:this.stateFormData.cautionLimit,criticalLimit:this.stateFormData.criticalLimit,startDate:$(_(new Date(this.stateFormData.startDate))),endDate:$(_(new Date(this.stateFormData.endDate)))},c=await j.post(`${Ge}?${new URLSearchParams(r).toString()}`,e);c.data.title==="Error"?(this.stateErrors.push(c.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(r){Y("IRONS",r),r.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=r,this.stateErrors.push(r.response.data.result.message),this.stateIsError=!0}finally{this.stateLoading=!1}},async updateDataSpecific(t){try{this.stateLoading=!0;const r={userAccount:t,ver:"v1"},e={cbmStatusId:this.stateUpdateSpecific.cbmStatusId,cbmGroup:this.stateUpdateSpecific.cbmGroup,component:this.stateUpdateSpecific.component,cluster:this.stateUpdateSpecific.cluster,sampleCount:this.stateUpdateSpecific.sampleCount,sampleWeight:this.stateUpdateSpecific.sampleWeight,cautionLimit:this.stateUpdateSpecific.cautionLimit,criticalLimit:this.stateUpdateSpecific.criticalLimit,startDate:$(_(new Date(this.stateUpdateSpecific.startDate))),endDate:$(_(new Date(this.stateUpdateSpecific.endDate)))},c=await j.post(`${Re}?${new URLSearchParams(r).toString()}`,e);c.data.title==="Error"?(this.stateErrors.push(c.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1),this.setActiveTab("Specific")}catch(r){Y("IRONS",r),r.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=r,this.stateErrors.push(r.response.data.result.message),this.stateIsError=!0}finally{this.stateLoading=!1}},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},setFormData(t){this.stateFormData.cbmStatusId=t.cbmStatusId,this.stateFormData.cluster=t.cluster,this.stateFormData.sampleCount=t.sampleCount,this.stateFormData.sampleWeight=t.sampleWeight,this.stateFormData.cautionLimit=t.cautionLimit,this.stateFormData.criticalLimit=t.criticalLimit,this.stateFormData.startDate=t.startDate,this.stateFormData.endDate=t.endDate},setFormDataUpdateSpecific(t){this.stateUpdateSpecific.cbmStatusId=t.cbmStatusId,this.stateUpdateSpecific.cbmGroup=t.cbmGroup,this.stateUpdateSpecific.component=t.component,this.stateUpdateSpecific.cluster=t.cluster,this.stateUpdateSpecific.sampleCount=t.sampleCount,this.stateUpdateSpecific.sampleWeight=t.sampleWeight,this.stateUpdateSpecific.cautionLimit=t.cautionLimit,this.stateUpdateSpecific.criticalLimit=t.criticalLimit,this.stateUpdateSpecific.startDate=t.startDate,this.stateUpdateSpecific.endDate=t.endDate},setFormDataSpecific(t){this.stateFormDataSpecific.cbmStatusId=t.cbmStatusId,this.stateFormDataSpecific.cbmGroup=t.cbmGroup,this.stateFormDataSpecific.component=t.component,this.stateFormDataSpecific.clusterData=[...this.stateFormDataSpecific.clusterData,...t.clusterData],this.stateFormDataSpecific.startDate=t.startDate,this.stateFormDataSpecific.endDate=t.endDate},setFormDataDuplicate(t){switch(this.stateFormDataSpecific.cbmStatusId=t.cbmStatusId,this.stateFormDataSpecific.cbmGroup=t.cbmGroup,this.stateFormDataSpecific.component=t.component,this.stateFormDataSpecific.parameter=t.parameter,t.cluster){case"First Cluster":this.stateFormDataSpecific.clusterData[0]={index:0,cluster:t.cluster,sampleCount:t.sampleCount,sampleWeight:t==null?void 0:t.sampleWeight,cautionLimit:t.cautionLimit,criticalLimit:t.criticalLimit,summaryWeight:t.summaryWeight};break;case"Second Cluster":this.stateFormDataSpecific.clusterData[1]={index:1,cluster:t.cluster,sampleCount:t.sampleCount,sampleWeight:t==null?void 0:t.sampleWeight,cautionLimit:t.cautionLimit,criticalLimit:t.criticalLimit,summaryWeight:t.summaryWeight};break;case"Third Cluster":this.stateFormDataSpecific.clusterData[2]={index:2,cluster:t.cluster,sampleCount:t.sampleCount,sampleWeight:t==null?void 0:t.sampleWeight,cautionLimit:t.cautionLimit,criticalLimit:t.criticalLimit,summaryWeight:t.summaryWeight};break;case"Fourth Cluster":this.stateFormDataSpecific.clusterData[3]={index:3,cluster:t.cluster,sampleCount:t.sampleCount,sampleWeight:t==null?void 0:t.sampleWeight,cautionLimit:t.cautionLimit,criticalLimit:t.criticalLimit,summaryWeight:t.summaryWeight};break}this.stateFormDataSpecific.startDate=t.startDate,this.stateFormDataSpecific.endDate=t.endDate,this.stateIsDuplicate=!0},resetState(){this.stateFormData={...Nt},this.stateFormDataSpecific={...Vt,clusterData:[]},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1},setIsEdit(t){this.stateIsEdit=t}}}),Be={class:"form-label fs-6 fw-bolder text-dark"},Ut=J({__name:"PercentInput",props:{margin:{type:Boolean,default:!0},gridClass:{required:!1,type:String,default:""},max:{type:Number,default:524288},value:{required:!0,type:String},name:{required:!0,type:String},label:{required:!1,type:String},placeholder:{required:!1,type:String,default:"Input Text"},disabled:{default:!1}},emits:["handleChange"],setup(t,{emit:r}){const e=t,c=r,h=x({get:()=>e.value,set:b=>{c("handleChange",b)}}),l=b=>{let d=b.keyCode?b.keyCode:b.which;(d<48||d>57)&&b.preventDefault()},o=()=>{h.value&&(h.value=h.value.replace("%",""))},T=()=>{let b="";h.value&&(b=h.value+"%"),c("handleChange",b)};return(b,d)=>{const I=W("el-input"),F=W("el-form-item");return u(),w("div",{class:ge(["fv-row",t.gridClass])},[D("label",Be,O(t.label),1),i(F,null,{default:p(()=>[i(I,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=s=>h.value=s),placeholder:t.placeholder,class:"select-bg-grey",onKeypress:l,maxlength:t.max,onFocus:o,onBlur:T},null,8,["modelValue","placeholder","maxlength"])]),_:1})],2)}}});function Wt(){const t=N(2),r=N(3);return{calCautionLimit:h=>(parseFloat(h)*t.value).toString(),calCriticalLimit:h=>(parseFloat(h)*r.value).toString()}}const qe=t=>(yt("data-v-de8a306f"),t=t(),Ft(),t),Me={key:0,style:{height:"100px"}},ze={key:1},je={key:1},Ke={key:1},Xe={key:1},Ye={key:1},Je={key:0,class:"d-flex align-items-center"},Qe=qe(()=>D("span",{class:"mx-1 w-20"},"to",-1)),Ze={key:1,class:"row justify-content-center"},ta={key:0,class:"d-flex justify-content-end"},ea=["disabled","onClick"],aa={key:1,class:"d-flex"},ia=J({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","fetch-data","duplicateData"],setup(t,{emit:r}){const e=t,c=Wt(),h=M(),l=ct(),o=vt(),T=r,b=x(()=>(e.page-1)*10+1),d=N(""),I=k=>{d.value=k.order;const S={prop:k.prop,order:k.order};l.setSort(S,"General")},F=N({cbmStatusId:0,cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))}),s=N({cbmStatusId:0,cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))}),U=k=>{o.resetState(),s.value={...k}},G=x(()=>o.isEdit),A=k=>{if(k){const S=c.calCautionLimit(k),m=c.calCriticalLimit(k);s.value.cautionLimit=S,s.value.criticalLimit=m}s.value.sampleCount=k},C=()=>{f(),o.resetState(),setTimeout(()=>{s.value=Object.assign({},F.value)},300),o.setIsEdit(!1)},P=dt().shape({cluster:H().required("Cluster is mandatory"),sampleCount:_e().required("Sample Count is mandatory").max(10,"Sample Count should not be more than 10"),sampleWeight:H().required("Weight is mandatory").matches(/^\d+(\.\d+)?%?$/,{message:"Value Weight should be a valid percentage"}).test("max-value","Weight should not be more than 100%",function(k){return parseFloat(k.replace("%",""))<=100}),cautionLimit:H().required("Caution Limit is mandatory"),criticalLimit:H().required("Critical Limit is mandatory"),startDate:st().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:st().required("End Date is mandatory").min(Et("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),f=()=>{o.setErrors([])},V=x(()=>o.isError),q=x(()=>o.errors),B=async()=>{o.setIsEdit(!0),f(),await P.validate(s.value,{abortEarly:!1}).catch(k=>{o.setErrors(k.errors),window&&window.scrollTo(0,0)}),!V.value&&lt("Are you sure you want to submit ?").then(async k=>{k.isConfirmed&&(o.setFormData(s.value),o.updateData(h.user.Name).then(()=>{o.isError||gt("Form has been successfully submitted!","Ok").then(()=>{C(),T("fetch-data",null)})}))})};return(k,S)=>{const m=W("inline-svg"),E=W("el-tooltip"),R=Dt("loading");return n(l).loading?it((u(),w("div",Me,null,512)),[[R,n(l).loading]]):(u(),w(ft,{key:1},[i(_t,{name:"fade"},{default:p(()=>[V.value&&G.value?(u(),L(kt,{key:0,errorMessages:q.value,onResetForm:f},null,8,["errorMessages"])):et("",!0)]),_:1}),it((u(),L(n(wt),{data:e.listData,style:{width:"100%"},onSortChange:I,"empty-text":"No Data"},{default:p(()=>[i(n(y),{label:"No",width:"90",align:"center"},{default:p(g=>[D("span",null,O(b.value+g.$index),1)]),_:1}),i(n(y),{prop:"cluster",label:"Cluster","min-width":"170",sortable:"","sort-method":(g,a)=>n(z)(d.value)},{default:p(({row:g})=>[g.cbmStatusId===s.value.cbmStatusId?(u(),L(qt,{key:0,value:s.value.cluster,placeholder:"Add Cluster",name:"cluster",max:200,onHandleChange:S[0]||(S[0]=a=>s.value.cluster=a)},null,8,["value"])):(u(),w("span",ze,O(g.cluster),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"sampleCount",label:"Sample Count","min-width":"170",sortable:"","sort-method":(g,a)=>n(z)(d.value)},{default:p(({row:g})=>[g.cbmStatusId===s.value.cbmStatusId?(u(),L(Pt,{key:0,value:s.value.sampleCount,placeholder:"Add Sample Count",name:"sampleCount",max:20,onHandleChange:A},null,8,["value"])):(u(),w("span",je,O(g.sampleCount),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"sampleWeight",label:"Weight","min-width":"170",sortable:"","sort-method":(g,a)=>n(z)(d.value)},{default:p(({row:g})=>[g.cbmStatusId===s.value.cbmStatusId?(u(),L(Ut,{key:0,value:s.value.sampleWeight,placeholder:"Add Weight",name:"sampleWeight",max:20,onHandleChange:S[1]||(S[1]=a=>s.value.sampleWeight=a)},null,8,["value"])):(u(),w("span",Ke,O(g.sampleWeight),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"cautionLimit",label:"Caution Limit","min-width":"170",sortable:"","sort-method":(g,a)=>n(z)(d.value)},{default:p(({row:g})=>[g.cbmStatusId===s.value.cbmStatusId?(u(),L(nt,{key:0,value:s.value.cautionLimit,margin:!1,placeholder:"Add Caution Limit",name:"cautionLimit",max:100,onHandleChange:S[2]||(S[2]=a=>s.value.cautionLimit=a)},null,8,["value"])):(u(),w("span",Xe,O(g.cautionLimit),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"criticalLimit",label:"Critical Limit","min-width":"170",sortable:"","sort-method":(g,a)=>n(z)(d.value)},{default:p(({row:g})=>[g.cbmStatusId===s.value.cbmStatusId?(u(),L(nt,{key:0,value:s.value.criticalLimit,margin:!1,placeholder:"Add Critical Limit",name:"criticalLimit",max:10,onHandleChange:S[3]||(S[3]=a=>s.value.criticalLimit=a)},null,8,["value"])):(u(),w("span",Ye,O(g.criticalLimit),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"isActive",label:"Is Active",width:s.value.cbmStatusId!=0?350:100,sortable:"",align:"center"},{default:p(g=>[g.row.cbmStatusId===s.value.cbmStatusId?(u(),w("div",Je,[i(ot,{value:s.value.startDate,placeholder:"Add Start Date",name:"StartDate",onHandleChange:S[4]||(S[4]=a=>s.value.startDate=a)},null,8,["value"]),Qe,i(ot,{value:s.value.endDate,placeholder:"Add End Date",name:"EndDate",onHandleChange:S[5]||(S[5]=a=>s.value.endDate=a)},null,8,["value"])])):(u(),w("div",Ze,[g.row.isActive?(u(),L(m,{key:0,src:"/media/svg/tables/rows/check.svg"})):(u(),L(m,{key:1,src:"/media/svg/tables/rows/minus.svg"}))]))]),_:1},8,["width"]),i(n(y),{label:"",width:"80"},{default:p(g=>[g.row.cbmStatusId!==s.value.cbmStatusId?(u(),w("div",ta,[i(E,{class:"box-item",effect:"dark",content:g.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:p(()=>[D("div",null,[D("button",{disabled:!g.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:a=>U(g.row)},[i(m,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,ea)])]),_:2},1032,["content"])])):(u(),w("div",aa,[i(E,{class:"box-item",effect:"dark",content:"Save",placement:"top"},{default:p(()=>[D("button",{class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:pt(B,["prevent"])},[i(m,{src:"/media/svg/tables/rows/save.svg",width:"12",height:"12"})])]),_:1}),i(E,{class:"box-item",effect:"dark",content:"Cancel",placement:"top"},{default:p(()=>[D("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:pt(C,["prevent"])},[i(m,{src:"/media/svg/tables/rows/valid-false.svg",width:"12",height:"12"})])]),_:1})]))]),_:1})]),_:1},8,["data"])),[[R,n(l).loading]])],64))}}}),sa=St(ia,[["__scopeId","data-v-de8a306f"]]),oa=t=>(yt("data-v-0245f4be"),t=t(),Ft(),t),na={key:0,style:{height:"100px"}},ra={key:1},la={key:1},ca={key:1},ua={key:1},ma={key:1},pa={key:1},da={key:1},ha={key:0,class:"d-flex align-items-center"},ga=oa(()=>D("span",{class:"mx-1 w-20"},"to",-1)),fa={key:1,class:"row justify-content-center"},Da={key:0,class:"d-flex justify-content-end"},Sa=["disabled","onClick"],va=["onClick"],ba={key:1,class:"d-flex"},Ca=J({__name:"GridSpesific",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","fetch-data","duplicateData"],setup(t,{emit:r}){const e=t,c=Wt(),h=M(),l=ct(),o=vt(),T=r,b=x(()=>(e.page-1)*10+1),d=N(""),I=S=>{d.value=S.order;const m={prop:S.prop,order:S.order};l.setSort(m,"Specific")},F=N({cbmStatusId:0,cbmGroup:"",component:"",parameter:"",cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))}),s=N({cbmStatusId:0,cbmGroup:"",component:"",parameter:"",cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:"",startDate:_(new Date),endDate:_(new Date("12/31/9999"))}),U=S=>{o.resetState(),s.value={...S}},G=x(()=>o.isEdit),A=S=>{if(S){const m=c.calCautionLimit(S),E=c.calCriticalLimit(S);s.value.cautionLimit=m,s.value.criticalLimit=E}s.value.sampleCount=S},C=()=>{f(),o.resetState(),setTimeout(()=>{s.value=Object.assign({},F.value)},300),o.setIsEdit(!1)},P=dt().shape({cbmGroup:H().required("Cbm Group is mandatory"),component:H().required("Component is mandatory"),cluster:H().required("Cluster is mandatory"),sampleCount:H().required("Sample Count is mandatory").max(10,"Sample Count should not be more than 10"),sampleWeight:H().matches(/^\d+(\.\d+)?%?$/,{message:"Value should be a valid percentage"}).test("max-value","Weight should not be more than 100%",function(S){return parseFloat(S.replace("%",""))<=100}).required("Weight is mandatory"),cautionLimit:H().required("Caution Limit is mandatory"),criticalLimit:H().required("Critical Limit is mandatory"),startDate:st().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:st().required("End Date is mandatory").min(Et("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),f=()=>{o.setErrors([])},V=x(()=>o.isError),q=x(()=>o.errors),B=async()=>{o.setIsEdit(!0),f(),await P.validate(s.value,{abortEarly:!1}).catch(S=>{o.setErrors(S.errors),window&&window.scrollTo(0,0)}),!V.value&&lt("Are you sure you want to submit ?").then(async S=>{S.isConfirmed&&(o.setFormDataUpdateSpecific(s.value),o.updateDataSpecific(h.user.Name).then(()=>{o.isError||gt("Form has been successfully submitted!","Ok").then(()=>{C(),T("fetch-data",null)})}))})},k=async S=>{o.setFormDataDuplicate(S),T("duplicateData",!0)};return(S,m)=>{const E=W("inline-svg"),R=W("el-tooltip"),g=Dt("loading");return n(l).loading?it((u(),w("div",na,null,512)),[[g,n(l).loading]]):(u(),w(ft,{key:1},[i(_t,{name:"fade"},{default:p(()=>[V.value&&G.value?(u(),L(kt,{key:0,errorMessages:q.value,onResetForm:f},null,8,["errorMessages"])):et("",!0)]),_:1}),it((u(),L(n(wt),{data:e.listData,style:{width:"100%"},onSortChange:I,"empty-text":"No Data"},{default:p(()=>[i(n(y),{label:"No",width:"90",align:"center"},{default:p(a=>[D("span",null,O(b.value+a.$index),1)]),_:1}),i(n(y),{prop:"cbmGroup",label:"Cbm Group","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(ht,{key:0,value:s.value.cbmGroup,placeholder:"Add Cbm Group",name:"cbmGroup",max:200,onHandleChange:m[0]||(m[0]=v=>s.value.cbmGroup=v),options:n(o).cbmGroupOption},null,8,["value","options"])):(u(),w("span",ra,O(a.cbmGroup),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(ht,{key:0,value:s.value.component,placeholder:"Add Component",name:"component",max:200,onHandleChange:m[1]||(m[1]=v=>s.value.component=v),options:n(o).componentOption},null,8,["value","options"])):(u(),w("span",la,O(a.component),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"cluster",label:"Cluster","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(qt,{key:0,value:s.value.cluster,placeholder:"Add Cluster",name:"cluster",max:200,onHandleChange:m[2]||(m[2]=v=>s.value.cluster=v)},null,8,["value"])):(u(),w("span",ca,O(a.cluster),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"sampleCount",label:"Sample Count","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(Pt,{key:0,value:s.value.sampleCount,placeholder:"Add Sample Count",name:"sampleCount",max:20,onHandleChange:A},null,8,["value"])):(u(),w("span",ua,O(a.sampleCount),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"sampleWeight",label:"Weight","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(Ut,{key:0,value:s.value.sampleWeight,placeholder:"Add Weight",name:"sampleWeight",max:20,onHandleChange:m[3]||(m[3]=v=>s.value.sampleWeight=v)},null,8,["value"])):(u(),w("span",ma,O(a.sampleWeight),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"cautionLimit",label:"Caution Limit","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(nt,{key:0,value:s.value.cautionLimit,margin:!1,placeholder:"Add Caution Limit",name:"cautionLimit",max:100,onHandleChange:m[4]||(m[4]=v=>s.value.cautionLimit=v)},null,8,["value"])):(u(),w("span",pa,O(a.cautionLimit),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"criticalLimit",label:"Critical Limit","min-width":"170",sortable:"","sort-method":(a,v)=>n(z)(d.value)},{default:p(({row:a})=>[a.cbmStatusId===s.value.cbmStatusId?(u(),L(nt,{key:0,value:s.value.criticalLimit,margin:!1,placeholder:"Add Critical Limit",name:"criticalLimit",max:10,onHandleChange:m[5]||(m[5]=v=>s.value.criticalLimit=v)},null,8,["value"])):(u(),w("span",da,O(a.criticalLimit),1))]),_:1},8,["sort-method"]),i(n(y),{prop:"isActive",label:"Is Active",width:s.value.cbmStatusId!=0?350:100,sortable:"",align:"center"},{default:p(a=>[a.row.cbmStatusId===s.value.cbmStatusId?(u(),w("div",ha,[i(ot,{value:s.value.startDate,placeholder:"Add Start Date",name:"StartDate",onHandleChange:m[6]||(m[6]=v=>s.value.startDate=v)},null,8,["value"]),ga,i(ot,{value:s.value.endDate,placeholder:"Add End Date",name:"EndDate",onHandleChange:m[7]||(m[7]=v=>s.value.endDate=v)},null,8,["value"])])):(u(),w("div",fa,[a.row.isActive?(u(),L(E,{key:0,src:"/media/svg/tables/rows/check.svg"})):(u(),L(E,{key:1,src:"/media/svg/tables/rows/minus.svg"}))]))]),_:1},8,["width"]),i(n(y),{label:"",width:"100"},{default:p(a=>[a.row.cbmStatusId!==s.value.cbmStatusId?(u(),w("div",Da,[i(R,{class:"box-item",effect:"dark",content:a.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:p(()=>[D("div",null,[D("button",{disabled:!a.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:v=>U(a.row)},[i(E,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Sa)])]),_:2},1032,["content"]),i(R,{class:"box-item",effect:"dark",content:"Add new data based on table rows",placement:"top"},{default:p(()=>[D("div",null,[D("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:v=>k(a.row)},[i(E,{src:"/media/svg/tables/rows/paste-icon-button-blue.svg",width:"12",height:"12"})],8,va)])]),_:2},1024)])):(u(),w("div",ba,[i(R,{class:"box-item",effect:"dark",content:"Save",placement:"top"},{default:p(()=>[D("button",{class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:pt(B,["prevent"])},[i(E,{src:"/media/svg/tables/rows/save.svg",width:"12",height:"12"})])]),_:1}),i(R,{class:"box-item",effect:"dark",content:"Cancel",placement:"top"},{default:p(()=>[D("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:pt(C,["prevent"])},[i(E,{src:"/media/svg/tables/rows/valid-false.svg",width:"12",height:"12"})])]),_:1})]))]),_:1})]),_:1},8,["data"])),[[g,n(l).loading]])],64))}}}),La=St(Ca,[["__scopeId","data-v-0245f4be"]]),_a={class:"row"},ya={class:"form-label fs-2 fw-bolder text-dark"},Fa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ta={class:"col-md-6 fv-row fv-plugins-icon-container"},wa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ia={class:"col-md-6 fv-row fv-plugins-icon-container"},Ea=J({__name:"ClusterForm",props:{name:{type:String,default:""}},emits:["handle-change"],setup(t,{expose:r,emit:e}){const c=Wt(),h=t,l=e,o=N({cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:""}),T=(I,F)=>{if(F==="sampleCount"&&I){const s=c.calCautionLimit(I),U=c.calCriticalLimit(I);o.value.cautionLimit=s,o.value.criticalLimit=U}o.value={...o.value,cluster:h.name,[F]:I},l("handle-change",o.value)};return r({handleResetForm:()=>{o.value={cluster:"",sampleCount:"",sampleWeight:"",cautionLimit:"",criticalLimit:"",summaryWeight:""}},setClusterData:I=>{o.value=I}}),(I,F)=>{const s=W("el-divider");return u(),w("div",_a,[i(s),D("label",ya,O(t.name),1),D("div",Fa,[i(Pt,{value:o.value.sampleCount,placeholder:"Add Sample Count",label:"Sample Count",name:"sampleCount",max:20,onHandleChange:F[0]||(F[0]=U=>T(U,"sampleCount"))},null,8,["value"])]),D("div",Ta,[i(Ut,{value:o.value.sampleWeight,placeholder:"Add Weight",label:"Weight",name:"sampleWeight",max:20,onHandleChange:F[1]||(F[1]=U=>T(U,"sampleWeight"))},null,8,["value"])]),D("div",wa,[i(nt,{value:o.value.cautionLimit,placeholder:"Add Caution Limit",label:"Caution Limit",name:"cautionLimit",max:20,onHandleChange:F[2]||(F[2]=U=>T(U,"cautionLimit"))},null,8,["value"])]),D("div",Ia,[i(nt,{value:o.value.criticalLimit,placeholder:"Add Critical Limit",label:"Critical Limit",name:"criticalLimit",max:20,onHandleChange:F[3]||(F[3]=U=>T(U,"criticalLimit"))},null,8,["value"])])])}}}),ka={class:"col-md-6 fv-row fv-plugins-icon-container"},Pa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ua={class:"dialog-footer"},Wa=J({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1},reRender:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:r}){const e=t,c=r,h=N(null),l=vt(),o=M(),T=ct(),b=Tt(e,"visibility"),d=x(()=>l.formDataSpecific),I=x(()=>T.displayData),F=x(()=>l.errors),s=x(()=>l.isError),U=x(()=>l.isEdit);Ot(()=>e.reRender,async m=>{m===!0&&await G()}),Ot(()=>h.value,async()=>{e.reRender&&await G()});const G=async()=>{d.value.clusterData&&d.value.clusterData.length>0&&d.value.clusterData.forEach(m=>{h.value[m.index].setClusterData(m)})},A=dt().shape({cbmGroup:H().required("Cbm Group is mandatory"),component:H().required("Component is mandatory"),clusterData:ye().of(dt().shape({sampleWeight:H().required("Weight is mandatory").matches(/^\d+(\.\d+)?%?$/,{message:"Value Weight should be a valid percentage"}).test("max-value","Weight should not be more than 100%",function(m){return parseFloat(m.replace("%",""))<=100}),cautionLimit:H().required("Caution Limit is mandatory"),criticalLimit:H().required("Critical Limit is mandatory")})).test("hasItems","Please provide at all cluster data",function(m){return m&&m.length>=4}).required(),startDate:st().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:st().required("End Date is mandatory").min(Et("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),C=(m=!1)=>{S(),l.resetState(),I.value.forEach((E,R)=>{h.value[R].handleResetForm()}),c("handle-close",m)},P=m=>{d.value.cbmGroup=m},f=m=>{d.value.component=m},V=m=>{d.value.startDate=m},q=m=>{d.value.endDate=m},B=(m,E)=>{d.value.clusterData[E]={...m,index:E}},k=async()=>{S(),await A.validate(d.value,{abortEarly:!1}).catch(m=>{l.setErrors(m.errors),window&&window.scrollTo(0,0)}),!s.value&&lt("Are you sure you want to submit ?").then(async m=>{m.isConfirmed&&l.insertData(o.user.Name).then(()=>{l.isError||gt("Form has been successfully submitted!","Ok").then(()=>{C(!0)})})})},S=()=>{l.setErrors([])};return(m,E)=>{const R=W("el-button"),g=W("el-dialog"),a=Dt("loading");return it((u(),L(g,{modelValue:b.value,"onUpdate:modelValue":E[0]||(E[0]=v=>b.value=v),title:"New Data",width:"40%",onClose:E[1]||(E[1]=v=>C())},{footer:p(()=>[D("span",Ua,[i(R,{type:"primary",onClick:k,disabled:n(l).loading},{default:p(()=>[X("Submit")]),_:1},8,["disabled"]),i(R,{type:"secondary",onClick:C,disabled:n(l).loading},{default:p(()=>[X("Close")]),_:1},8,["disabled"])])]),default:p(()=>[i(_t,{name:"fade"},{default:p(()=>[s.value&&!U.value?(u(),L(kt,{key:0,errorMessages:F.value,onResetForm:S},null,8,["errorMessages"])):et("",!0)]),_:1}),it((u(),L(n(Fe),{id:"kt_filter_form",class:"row g-9 my-4"},{default:p(()=>[i(ht,{value:d.value.cbmGroup,placeholder:"Add CBM Group",label:"CBM Group",name:"cbmGroup",max:20,onHandleChange:P,options:n(l).cbmGroupOption},null,8,["value","options"]),i(ht,{value:d.value.component,placeholder:"Add Component",label:"Component",name:"component",max:200,onHandleChange:f,options:n(l).componentOption},null,8,["value","options"]),(u(!0),w(ft,null,fe(I.value,(v,tt)=>(u(),L(Ea,{key:v.cbmStatusId,ref_for:!0,ref_key:"clusterForm",ref:h,name:v.cluster,onHandleChange:K=>B(K,tt)},null,8,["name","onHandleChange"]))),128)),D("div",ka,[i(ot,{value:d.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:V},null,8,["value"])]),D("div",Pa,[i(ot,{value:d.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:q},null,8,["value"])])]),_:1})),[[a,n(l).loading]])]),_:1},8,["modelValue"])),[[a,n(l).loading]])}}}),xt=It({id:"CbmStatusBulk",state:()=>({statePagination:new rt,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const r={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await j.post(`${$e}?${new URLSearchParams(r).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){Y("IRONS",e),e.response.data.statusCode==401&&M().setLoggedIn(!1),this.stateError=e.response.data.result.isError?e.response.data.result.message:"",this.stateIsError=!0,console.log(e)}finally{this.stateLoading=!1}},async upload({userAccount:t,excelFile:r}){const e={userAccount:t,ver:"v1"},c=`${Ae}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const h=await j.postImages(c,r);h.data.statusCode==200?h.data.result.isError?(this.stateIsError=!0,this.stateError=h.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=h.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Te.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=h.data.result.isError,this.stateError=h.data.result.message)}catch(h){Y("IRONS",h),h.response.data.statusCode==401?M().setLoggedIn(!1):(this.stateIsError=!0,this.stateError=h.response.data.result.message)}finally{this.stateUploadLoading=!1}},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(ve(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new rt,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),xa={class:"icon"},Ga=J({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const r=t,e=N(""),c=xt(),h=x(()=>(r.page-1)*10+1),l=o=>{e.value=o.order;const T={prop:o.prop,order:o.order};c.setSort(T)};return(o,T)=>{const b=W("inline-svg");return u(),L(n(wt),{data:r.listData,style:{width:"100%"},onSortChange:l,"empty-text":"No Data"},{default:p(()=>[i(n(y),{label:"No",width:"60",align:"center"},{default:p(d=>[D("span",null,O(h.value+d.$index),1)]),_:1}),i(n(y),{prop:"cbmGroup",label:"CBM Group",width:"170",sortable:""}),i(n(y),{prop:"component",label:"Component",width:"170",sortable:""}),i(n(y),{prop:"cluster",label:"Cluster",width:"170",sortable:""}),i(n(y),{prop:"sampleCount",label:"Sample Count",width:"170",sortable:""}),i(n(y),{prop:"sampleWeight",label:"Weight",width:"170",sortable:""}),i(n(y),{prop:"cautionLimit",label:"Caution Limit",width:"170",sortable:""}),i(n(y),{prop:"criticalLimit",label:"Critical Limit",width:"170",sortable:""}),i(n(y),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:p(d=>[D("span",null,O(n(At)(d.row.startDate)),1)]),_:1}),i(n(y),{prop:"EndDate",label:"end Date",align:"center",width:"170",sortable:""},{default:p(d=>[D("span",null,O(n(At)(d.row.endDate)),1)]),_:1}),i(n(y),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),i(n(y),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:p(d=>[D("div",xa,[i(b,{src:d.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Gt=t=>(yt("data-v-64f584a1"),t=t(),Ft(),t),Oa=Gt(()=>D("div",{class:"text-center"},null,-1)),Aa=Gt(()=>D("div",{class:"mb-3"},[D("span",null,[X(" Download template "),D("a",{href:"documents/MasterDataCriticalityLogic.xlsx",target:"_blank",id:"link-download"},"here"),X(" before uploading file ")])],-1)),$a=Gt(()=>D("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[D("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),Ra={class:"card"},Ha={class:"card-body grid-padding"},Na={class:"dialog-footer"},Va=J({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:r}){const e=t,c=r,h=M(),l=xt(),o=Tt(e,"visibility"),T=()=>{const C=Ie(l.validatedData,P=>{const f=P;return{cbmStatusId:0,cbmGroup:f.cbmGroup,component:f.component,cluster:f.cluster,sampleCount:f.sampleCount,sampleWeight:f.sampleWeight,cautionLimit:f.cautionLimit,criticalLimit:f.criticalLimit,summaryWeight:f.summaryWeight,startDate:f.startDate,endDate:f.endDate}});return Object.values(C)},b=()=>{const C=document.getElementById("link-download");C&&C.click()},d=()=>{l.validatedData.length>0?lt("Cancel Upload Data?","Confirm").then(P=>{P.isConfirmed&&F()}):F()},I=async C=>{await l.upload({userAccount:h.user.Name,excelFile:C}),l.stateError&&mt(l.error)},F=(C=!1)=>{l.resetState(),c("handle-close",C)},s=C=>{l.setIsUploadedState(C)},U=C=>{l.setPage(C)},G=()=>{if(l.validatedData.length<1){b();return}const C=["CBM GROUP","COMPONENT","CLUSTER","SAMPLE COUNT","SAMPLE WEIGHT","CAUTION LIMIT","CRITICAL LIMIT","START DATE","END DATE","REMARK","STATUS"],P=l.validatedData.map(f=>({cbmGroup:f.cbmGroup,component:f.component,cluster:f.cluster,sampleCount:f.sampleCount,sampleWeight:f.sampleWeight,cautionLimit:f.cautionLimit,criticalLimit:f.criticalLimit,startDate:f.startDate,endDate:f.endDate,remark:f.validationReason,status:f.isValid?"OK":"Error"}));pe("CriticalityLogic",C,P)},A=async()=>{if(l.displayData.length<1){mt("There is no data to submit");return}if(l.isError){mt("There is still invalid row(s)");return}lt("Are you sure you want to submit ?").then(async C=>{if(C.isConfirmed){const P=T();if(l.setBulkData(P),await l.bulkInsert(h.user.Name),l.isError){mt(l.stateError);return}gt("Form has been successfully submitted!","Ok").then(()=>{F(!0)})}})};return(C,P)=>{const f=W("el-button"),V=W("el-dialog"),q=Dt("loading");return u(),L(V,{title:"Upload Bulk Data",modelValue:o.value,"onUpdate:modelValue":P[1]||(P[1]=B=>o.value=B),"before-close":d,width:"70%","custom-class":"upload-modal"},{footer:p(()=>[D("div",null,[D("span",Na,[i(f,{type:"success",onClick:G},{default:p(()=>[X("Download")]),_:1}),i(f,{type:"primary",onClick:A},{default:p(()=>[X("Upload")]),_:1}),i(f,{type:"success",onClick:d},{default:p(()=>[X("Cancel")]),_:1})])])]),default:p(()=>[Oa,Aa,it(i(we,{isSubmissionUploadSuccess:n(l).isUploaded,onHandleCloseUploadedFile:d,onHandleUpload:I,onHandleSetIsExcelFileUploaded:s},null,8,["isSubmissionUploadSuccess"]),[[q,n(l).uploadLoading]]),$a,D("div",Ra,[D("div",Ha,[i(Ga,{"list-data":n(l).displayData,page:n(l).pagination.currentPage},null,8,["list-data","page"])])]),n(l).displayData.length>0?(u(),L(Lt,{key:0,onRaisePageChange:P[0]||(P[0]=B=>U(B)),currentPage:n(l).pagination.currentPage,totalPage:n(l).pagination.totalPage,totalPageSize:n(l).pagination.totalPageSize,startPaginationIndex:n(l).pagination.startPaginationIndex,endPaginationIndex:n(l).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):et("",!0)]),_:1},8,["modelValue"])}}}),Ba=St(Va,[["__scopeId","data-v-64f584a1"]]),qa={class:"row g-9 my-4"},Ma={class:"dialog-footer"},za=J({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:r}){const e=ct(),c=t,h=r,l=Tt(c,"visibility"),o=x(()=>e.filterDataSpecific),T=()=>{b(),e.resetFilter()},b=()=>{h("handle-close",!1)},d=a=>{e.setCbmGroup(a)},I=a=>{e.setCbmGroupTo(a)},F=a=>{e.setComponent(a)},s=a=>{e.setComponentTo(a)},U=a=>{e.setCluster(a)},G=a=>{e.setClusterTo(a)},A=a=>{e.setSampleCount(a)},C=a=>{e.setSampleCountTo(a)},P=a=>{e.setSampleWeight(a)},f=a=>{e.setSampleWeightTo(a)},V=a=>{e.setCautionLimit(a)},q=a=>{e.setCautionLimitTo(a)},B=a=>{e.setCriticalLimit(a)},k=a=>{e.setCriticalLimitTo(a)},S=a=>{e.setStartDate(a)},m=a=>{e.setStartDateTo(a)},E=a=>{e.setEndDate(a)},R=a=>{e.setEndDateTo(a)},g=()=>{const a=e.lastUsedFilterDataSpecific.cbmGroup!==e.filterDataSpecific.cbmGroup,v=e.lastUsedFilterDataSpecific.cbmGroupTo!==e.filterDataSpecific.cbmGroupTo,tt=e.lastUsedFilterDataSpecific.component!==e.filterDataSpecific.component,K=e.lastUsedFilterDataSpecific.componentTo!==e.filterDataSpecific.componentTo,ut=e.lastUsedFilterDataSpecific.parameter!==e.filterDataSpecific.parameter,Mt=e.lastUsedFilterDataSpecific.parameterTo!==e.filterDataSpecific.parameterTo,zt=e.lastUsedFilterDataSpecific.cluster!==e.filterDataSpecific.cluster,jt=e.lastUsedFilterDataSpecific.clusterTo!==e.filterDataSpecific.clusterTo,Kt=e.lastUsedFilterDataSpecific.sampleCount!==e.filterDataSpecific.sampleCount,Xt=e.lastUsedFilterDataSpecific.sampleCountTo!==e.filterDataSpecific.sampleCountTo,Yt=e.lastUsedFilterDataSpecific.sampleWeight!==e.filterDataSpecific.sampleWeight,Jt=e.lastUsedFilterDataSpecific.sampleWeightTo!==e.filterDataSpecific.sampleWeightTo,Qt=e.lastUsedFilterDataSpecific.cautionLimit!==e.filterDataSpecific.cautionLimit,Zt=e.lastUsedFilterDataSpecific.cautionLimitTo!==e.filterDataSpecific.cautionLimitTo,te=e.lastUsedFilterDataSpecific.criticalLimit!==e.filterDataSpecific.criticalLimit,ee=e.lastUsedFilterDataSpecific.criticalLimitTo!==e.filterDataSpecific.criticalLimitTo,ae=e.lastUsedFilterDataSpecific.summaryWeight!==e.filterDataSpecific.summaryWeight,ie=e.lastUsedFilterDataSpecific.summaryWeightTo!==e.filterDataSpecific.summaryWeightTo,se=e.lastUsedFilterDataSpecific.startDate!==e.filterDataSpecific.startDate,oe=e.lastUsedFilterDataSpecific.startDateTo!==e.filterDataSpecific.startDateTo,ne=e.lastUsedFilterDataSpecific.endDate!==e.filterDataSpecific.endDate,re=e.lastUsedFilterDataSpecific.endDateTo!==e.filterDataSpecific.endDateTo;h("handle-close",a||v||tt||K||ut||Mt||zt||jt||Kt||Xt||Yt||Jt||Qt||Zt||te||ee||ae||ie||se||oe||ne||re)};return(a,v)=>{const tt=W("el-button"),K=W("el-dialog");return u(),L(K,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=ut=>l.value=ut),title:"Filter",width:"60%",onClose:v[1]||(v[1]=ut=>b())},{footer:p(()=>[D("span",Ma,[i(tt,{type:"secondary",onClick:T},{default:p(()=>[X("Reset")]),_:1}),i(tt,{type:"primary",onClick:g},{default:p(()=>[X("Filter")]),_:1})])]),default:p(()=>[D("div",qa,[i(at,{"value-from":o.value.cbmGroup,"value-to":o.value.cbmGroupTo,label:"CBM Group",name:"cbmGroup",options:n(e).cbmGroupOption,onHandleChangeFrom:d,onHandleChangeTo:I},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.component,"value-to":o.value.componentTo,label:"Component",name:"component",options:n(e).componentOption,onHandleChangeFrom:F,onHandleChangeTo:s},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.cluster,"value-to":o.value.clusterTo,label:"Cluster",name:"cluster",options:n(e).clusterOption,onHandleChangeFrom:U,onHandleChangeTo:G},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.sampleCount,"value-to":o.value.sampleCountTo,label:"Sample Count",name:"sampleCount",options:n(e).sampleCountOption,onHandleChangeFrom:A,onHandleChangeTo:C},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.sampleWeight,"value-to":o.value.sampleWeightTo,label:"Weight",name:"sampleWeight",options:n(e).sampleWeightOption,onHandleChangeFrom:P,onHandleChangeTo:f},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.cautionLimit,"value-to":o.value.cautionLimitTo,label:"Caution Limit",name:"cautionLimit",options:n(e).cautionLimitOption,onHandleChangeFrom:V,onHandleChangeTo:q},null,8,["value-from","value-to","options"]),i(at,{"value-from":o.value.criticalLimit,"value-to":o.value.criticalLimitTo,label:"Critical Limit",name:"criticalLimit",options:n(e).criticalLimitOption,onHandleChangeFrom:B,onHandleChangeTo:k},null,8,["value-from","value-to","options"]),i($t,{"value-from":o.value.startDate?o.value.startDate.toString():"","value-to":o.value.startDateTo?o.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:S,onHandleChangeTo:m},null,8,["value-from","value-to"]),i($t,{"value-from":o.value.endDate?o.value.endDate.toString():"","value-to":o.value.endDateTo?o.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:E,onHandleChangeTo:R},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),ja={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Ka=D("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),Xa={class:"d-flex justify-content-between align-items-center"},Ya={class:"card"},Ja={class:"card-body grid-padding"},Qa={class:"my-5"},cs=J({__name:"Index",setup(t){const r=le(),e=ct(),c=vt(),h=xt(),l=N(!1),o=N(!1),T=N(!1),b=N(!1),d=N(null),I=x(()=>e.displayData),F=x(()=>e.displayDataSpecific),s=x(()=>c.activeTab),U=async g=>{c.setActiveTab(g.paneName),g.paneName==="General"?await e.getData():await e.setPageSpecific(1)},G=x(()=>e.pagination),A=x(()=>e.paginationSpecific),C=g=>{e.setPage(g),c.setIsEdit(!1)},P=g=>{e.setPageSpecific(g)};De(async()=>{r.dispatch(ue.ACTIVE_PAGE,bt().meta.parentMenu),ce("Criticality Logic",[{pageName:bt().meta.parentMenu,pageRoute:bt().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-cbmstatus"},{pageName:"Criticality Logic",pageRoute:"ironlake-config-cbmstatus"}]),e.setPage(1),await e.getLookup(),await c.getLookup()}),Se(async()=>{e.resetState(),c.resetState(),h.resetState()});const f=async()=>{await e.setPage(1),await e.setPageSpecific(1),await e.getLookup(),await c.getLookup()},V=()=>{l.value=!0,c.setIsEdit(!1),c.setErrors([]),c.resetState()},q=async g=>{l.value=!1,b.value=!1,g&&await f()},B=()=>{o.value=!0},k=async g=>{o.value=!1,g&&(c.setActiveTab("Specific"),await f())},S=async g=>{const a=await e.export(g);Ee.saveAs(new Blob([a],{type:"application/octet-stream"}),`CriticalityLogic${g}.xlsx`)},m=()=>{T.value=!0},E=async g=>{T.value=!1,g&&(c.setActiveTab("Specific"),await f())},R=async()=>{l.value=!0,c.setErrors([]),b.value=!0};return(g,a)=>{const v=W("el-tab-pane"),tt=W("el-tabs");return u(),w(ft,null,[D("div",ja,[Ka,D("div",Xa,[i(de,{onShowDialog:V}),i(me,{onShowDialog:B}),i(We,{onHandleDownload:S}),i(he,{onShowDialog:m})])]),D("div",Ya,[D("div",Ja,[i(tt,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=K=>s.value=K),type:"card",onTabClick:U},{default:p(()=>[i(v,{label:"General",name:"General"}),i(v,{label:"Specific",name:"Specific"})]),_:1},8,["modelValue"]),s.value==="General"?(u(),L(sa,{key:0,"list-data":I.value,page:G.value.currentPage,onFetchData:f},null,8,["list-data","page"])):et("",!0),s.value==="Specific"?(u(),L(La,{key:1,"list-data":F.value,page:A.value.currentPage,onDuplicateData:R,onFetchData:f},null,8,["list-data","page"])):et("",!0)])]),D("div",Qa,[!n(e).paginationLoading&&s.value==="General"?(u(),L(Lt,{key:0,onRaisePageChange:a[1]||(a[1]=K=>C(K)),currentPage:G.value.currentPage,totalPage:G.value.totalPage,totalPageSize:G.value.totalPageSize,startPaginationIndex:G.value.startPaginationIndex,endPaginationIndex:G.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):et("",!0),!n(e).paginationLoading&&s.value==="Specific"?(u(),L(Lt,{key:1,onRaisePageChange:a[2]||(a[2]=K=>P(K)),currentPage:A.value.currentPage,totalPage:A.value.totalPage,totalPageSize:A.value.totalPageSize,startPaginationIndex:A.value.startPaginationIndex,endPaginationIndex:A.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):et("",!0)]),i(Wa,{ref_key:"addFormRef",ref:d,"re-render":b.value,visibility:l.value,onHandleClose:q},null,8,["re-render","visibility"]),i(za,{visibility:o.value,onHandleClose:k},null,8,["visibility"]),i(Ba,{visibility:T.value,onHandleClose:E},null,8,["visibility"])],64)}}});export{cs as default};
