import{d as l}from"./pinia-BjOS2_Ao.js";import{c as r,s as m}from"./index-BuVmIl8K.js";const d=l({id:"historicalEformDma",state:()=>({stateImageList:[],statePreRiskImage:[],stateIsAttachmentIncludeDownload:!1,stateApprovalDefectDownload:{},stateDefectDetailDownload:{},stateOwnerShip:"",stateSerialNumber:"",stateReferencePhoto:{},stateIsIntervention:!1,stateFileName:"",stateTimeStamp:"",stateIsDownloadPDF:!1}),getters:{imageList:t=>t.stateImageList,preRiskImageList:t=>t.statePreRiskImage,DefectDetailDownload:t=>t.stateDefectDetailDownload,IsAttachmentIncludeDownload:t=>t.stateIsAttachmentIncludeDownload,ApprovalDefectDownload:t=>t.stateApprovalDefectDownload,OwnerShip:t=>t.stateOwnerShip,SerialNumber:t=>t.stateSerialNumber,ReferencePhoto:t=>t.stateReferencePhoto,IsIntervention:t=>t.stateIsIntervention,FileName:t=>t.stateFileName,TimeStamp:t=>t.stateTimeStamp,IsDownloadPDF:t=>t.stateIsDownloadPDF},actions:{setImageList(t){this.stateImageList.push(t)},setImageListPreRisk(t){this.statePreRiskImage.push(t)},setIsIntervention(t){this.stateIsIntervention=t},setFileName(t){this.stateFileName=t},setTimeStamp(t){this.stateTimeStamp=t},setIsDownloadPDF(t){this.stateIsDownloadPDF=t},resetImageList(){this.stateImageList=[],this.statePreRiskImage=[]},async loadImage(t){const a={fileUrl:`${t}`,ver:"v1"};try{const e="https://digital-bumaau-dev-apm-001.azure-api.net/dinspect/api/attachment/download_by_url";await r.getBlob(e,"",new URLSearchParams(a).toString());const n=(await r.getBlob(e,"",new URLSearchParams(a).toString())).data,s=new Blob([n]),i=window.URL||window.webkitURL,o=await createImageBitmap(s);return{id:t,buffer:i.createObjectURL(s),dimension:{height:o.height,width:o.width}}}catch(e){return m("IRONS",e),console.log(e),null}},setDefectDetailDownload(t){this.stateDefectDetailDownload=t},setApprovalDefectDownload(t){this.stateApprovalDefectDownload=t},setIsAttachmentIncludeDownload(t){this.stateIsAttachmentIncludeDownload=t},setReferencePhoto(t){this.stateReferencePhoto=t},setOwnerShip(t){this.stateOwnerShip=t},setSerialNumber(t){this.stateSerialNumber=t},resetAfterDownload(){this.stateIsAttachmentIncludeDownload=!1,this.stateApprovalDefectDownload={},this.stateDefectDetailDownload={},this.stateOwnerShip="",this.stateSerialNumber="",this.stateReferencePhoto={},this.stateIsIntervention=!1,this.stateFileName="",this.stateTimeStamp="",this.stateIsDownloadPDF=!1}}});export{d as u};
