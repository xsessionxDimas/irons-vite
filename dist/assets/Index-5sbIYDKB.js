import{u as fe}from"./useInterimPreviewFormStore-CJby802P.js";import{a as be}from"./element-plus-BeWdvTRa.js";import{e as t}from"./lodash-DrHMlsdo.js";import{k as z,c as m,r as W,p as i,aa as $,F as X,$ as ce,aB as l,b4 as q,C as L,A as C,a0 as ne,bL as ae,a7 as Pe,Y as Ze,y as Ne,b6 as J,u as O,R as oe,s as G,_ as Te,x as ee,q as E,bd as ke,bb as ge,B as me,K as Ve,o as _e,d as Re,a1 as et,by as tt,L as st,v as ot}from"./@vue-BypzYtbH.js";import{_ as ye}from"./nw-img-vue-CR837WER.js";import{c as je,s as at,a as $e}from"./index-BuVmIl8K.js";import{a as Ae}from"./manipulate-html-string-DqTEGh-F.js";import{_ as Ce,a as De}from"./defect-CAkPobhd.js";import{u as lt,_ as rt,a as nt,V as it}from"./ViewOnlyNAReasonDialog-DR-Uz59p.js";import{_ as dt}from"./Confirmation.vue_vue_type_style_index_0_lang-HchphDdZ.js";import{G as ut,u as Ie,a as Oe,b as ct,V as mt}from"./ViewOnlyNAForm-DC1ogXLe.js";import{C as ft}from"./CrackNoClass-0DSU7BAn.js";import{C as yt}from"./CrackYesClass-COntz77m.js";import{u as pt}from"./authentication-handler-Pueb_EI7.js";import{d as vt}from"./pinia-BjOS2_Ao.js";import{u as he}from"./useCameraStore-BwXVJhPe.js";import{u as bt}from"./useAttachmentStore-DqM3autD.js";import{u as Ue,b as Ee}from"./useDefectsFormStore-41UTMhiG.js";import{f as Le,r as Se}from"./number-format-BdMuQVyW.js";import{_ as ht}from"./ImagePreview.vue_vue_type_style_index_0_lang-DrcOCjy4.js";import{s as ve}from"./string-to-imageinfo-converter-Cdr1iOkP.js";import{_ as kt,a as Ge,S as Me}from"./ImageListModal.vue_vue_type_style_index_0_lang-djt6-PkA.js";import{b as gt,u as xe}from"./vue-router-iNp9kJ0K.js";import{s as _t,e as $t,l as Ut,I as St}from"./helpers-wUOLw-dU.js";import{_ as wt,a as Rt,R as Ct}from"./RiskAssessment-Cp7incD6.js";import{S as It}from"./SMUDetailDialog-Bs-98WGo.js";import{M as we}from"./MachineSMUEnum-CgiCo9nf.js";import{C as xt}from"./CameraIdEnum-C2Xl0HNE.js";import{r as Bt,t as Pt,u as Nt,i as Tt}from"./date-format-8-IvfSl3.js";import{a as Vt}from"./useInterimEngineStore-Ctq4w8Oq.js";import{u as jt}from"./useOfflineCameraStore-BBsMm6DV.js";import{u as At}from"./useDefectSheetStore-85RM-z1z.js";import{u as Dt}from"./useInterimDefectsStore-DCjj_hjG.js";import{_ as Ot}from"./FormAlreadyOpenedByOtherSupervisor.vue_vue_type_style_index_0_lang-DkxhNkJR.js";import"./urls-COjrEEs1.js";import"./dayjs-D0x2Df_K.js";import"./@popperjs-BaMZbQYT.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./object-path-DPahbflh.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./useMasterStore-CzSO06fn.js";import"./Textarea.vue_vue_type_style_index_0_lang-v94SEJmi.js";import"./DefectNoClass-BqGKOkzR.js";import"./urls-CvqtYZA-.js";import"./useGlobalConnectionStore-DV9B81de.js";import"./useDailyScheduleStore-B3ZQzhxq.js";import"./urls-CPQ2HRXU.js";import"./prev-val-handler-DvA3D_kF.js";import"./urls-B0Rq9QQ3.js";import"./urls-hWHEBXep.js";import"./urls-D8F5Tyyp.js";import"./FullScreenDialog.vue_vue_type_style_index_0_lang-DXRDt27h.js";import"./@vueuse-DFoNmIyu.js";import"./PDFViewerDialog.vue_vue_type_style_index_0_lang-GWz8s3FD.js";import"./InformationPopUp.vue_vue_type_style_index_0_lang-O2xYF9Pq.js";import"./webp-converter-browser-C3MD88Lp.js";import"./compressorjs-Cmz8Y9J9.js";import"./file-saver-CwTBvle_.js";import"./OfflineFullScreenDialog.vue_vue_type_style_index_0_lang-C2GTRJsq.js";import"./ToastWithIcon.vue_vue_type_style_index_0_lang-wfM94fOM.js";import"./ErrorBox.vue_vue_type_style_index_0_lang-Bysg_zE3.js";import"./moment-C5S46NFB.js";import"./disabled-state-O9W-ZY8y.js";const Et={class:"d-flex justify-content-between"},Lt=["onClick"],Gt=z({__name:"GroupStepper",props:{groups:{type:Array,default(){return[]}}},setup(o){const s=fe(),e=m(()=>s.selectedGroup),r=W("fa-chevron-up"),a=W(!0),c=S=>{let p="";return!t.isUndefined(S.isDisable)&&S.isDisable=="true"&&(p+=" disabled"),p},d=async(S,p,k)=>{if(!t.isUndefined(k.isDisable)&&k.isDisable=="true")return;const B=be.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});s.setSelectedGroup(S),await s.getTaskProgress(),p!="DEFECT_IDENTIFIED_SERVICE"&&await s.updateGroupByParam(p),B.close()},w=()=>{a.value=!a.value,r.value=a.value?"fa-chevron-up":"fa-chevron-down"},g=S=>{var k;let p="";if(S.totalTask>0){const B=S.groupName!="General-interim"&&S.groupName!="DEFECT_IDENTIFIED_SERVICE",U=S.totalTask==S.doneTask,P=S.id==((k=e.value)==null?void 0:k.id);B&&U&&(p="done-task"),B&&U&&P&&(p="done-task-selected")}return p};return(S,p)=>(i(),$("div",Et,[(i(!0),$(X,null,ce(o.groups,(k,B)=>{var U,P;return i(),$("div",{key:k.id,class:q(["d-flex flex-column m-1 mb-3 stepper-button",g(k)])},[l("div",{class:q(["box-menu text-center p-2 d-flex justify-content-center align-items-center stepper-title",[k.id==((U=e.value)==null?void 0:U.id)?"active":"",c(k)]]),onClick:D=>d(k.id,k.groupName,k)},[l("span",null,L(k.groupLabel),1)],10,Lt),a.value?(i(),$("div",{key:0,class:q(["text-center box-pill rounded-pill mt-2 mb-4 stepper-button-info w-100 py-2",[B==0?"invisible":"",k.id==((P=e.value)==null?void 0:P.id)?"active":"",c(k)]])}," Done "+L(k.doneTask)+"/"+L(k.totalTask),3)):C("",!0)],2)}),128)),l("div",null,[l("button",{class:"border-0 mt-10 align-items-center",onClick:w,style:{background:"transparent"}},[l("em",{class:q(["fa",r.value])},null,2)])])]))}}),Mt=ye(Gt,[["__scopeId","data-v-b26366e9"]]),qt=["src"],qe=z({__name:"Image",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(o){const s=o,e=W("/media/svg/dma/warning.svg"),r=W(!0),a=ne(s,"item"),c=ae(()=>!t.isUndefined(a.value.style)&&a.value.style.breakPoint!="none"?`col-${a.value.style.breakPoint}`:"col"),d=ae(()=>{let p="";return s.generalStyle&&!t.isUndefined(a.value.style)&&(!t.isUndefined(a.value.style.potraitBreakPoint)&&a.value.style.breakPoint!="none"?(p=`col-md-${a.value.style.potraitBreakPoint}`,p=`${p} col-lg-${a.value.style.breakPoint}`):(p=`col-md-${a.value.style.potraitBreakPoint}`,p=`${p} col-lg-${a.value.style.breakPoint}`)),p}),w=ae(()=>{var N,A,V;const p=!t.isUndefined(a.value.style)&&a.value.style.bgColor!="none"?`background-color: ${a.value.style.bgColor}; `:"",k=!t.isUndefined(a.value.style)&&a.value.style.fontColor!="none"?`color: ${a.value.style.fontColor}; `:"",B=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.border)&&a.value.style.border.top!="none"?`border-top: ${a.value.style.border.top}; `:"",U=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.border)&&a.value.style.border.right!="none"?`border-right: ${a.value.style.border.right}; `:"";let P=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.border)&&a.value.style.border.bottom!="none"?`border-bottom: ${a.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((N=s.task)==null?void 0:N.isShowAdjustmentRow)&&((A=s.task)!=null&&A.isShowAdjustmentRow))P="";else{let _=0;(V=s.task)==null||V.items.forEach(I=>{var f;t.isUndefined(I.style)||(t.isUndefined(I.style.border)?t.isUndefined(I.style.border)&&(_=_+Number(I.style.breakPoint)):((I.style.border.right=="none"||t.isUndefined(I.style.border.right))&&(_=_+Number(I.style.breakPoint)),t.isEqual(I,t.last((f=s.task)==null?void 0:f.items))&&(_=_+Number(I.style.breakPoint))))}),_==12&&(P=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.border)&&a.value.style.border.bottom!="none"?`border-bottom: ${a.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const D=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.border)&&a.value.style.border.left!="none"?`border-left: ${a.value.style.border.left}; `:"",F=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.borderRadius)&&a.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${a.value.style.borderRadius.topRight}; `:"",v=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.borderRadius)&&a.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${a.value.style.borderRadius.bottomRight}; `:"",y=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.borderRadius)&&a.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${a.value.style.borderRadius.topLeft}; `:"",n=!t.isUndefined(a.value.style)&&!t.isUndefined(a.value.style.borderRadius)&&a.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${a.value.style.borderRadius.bottomLeft}; `:"";let h="";return P&&(h="padding-bottom: 25px; "),`${h}${p}${k}${B}${U}${P}${D}${F}${v}${y}${n}`}),g=ae(()=>!t.isUndefined(a.value.style)&&a.value.style.breakPoint=="1"?"width: 20px; height: 20px":"");Pe(async()=>{const p={id:a.value.value.toString(),ver:"v1"};try{const U=(await je.getBlob("https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_id","",new URLSearchParams(p).toString())).data,P=new Blob([U]),D=window.URL||window.webkitURL;e.value=D.createObjectURL(P),r.value=!1}catch{r.value=!1}});const S=ae(()=>{let p="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(p=""),p});return(p,k)=>{const B=Ze("loading");return Ne((i(),$("div",{class:q([[O(c),O(d),O(S)],"py-2 px-2 d-flex d-flex justify-content-center"]),style:J(O(w))},[l("img",{src:e.value,class:"img-fluid",style:J(O(g))},null,12,qt)],6)),[[B,r.value]])}}}),Ft=["innerHTML"],Fe=z({__name:"Label",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(o){const s=o,e=ne(s,"item"),r=m(()=>s.generalStyle?!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col":""),a=m(()=>Ae(s.item.value)),c=m(()=>{let p="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(!t.isUndefined(e.value.style.potraitBreakPoint)&&e.value.style.breakPoint!="none"?(p=`col-md-${e.value.style.potraitBreakPoint}`,p=`${p} col-lg-${e.value.style.breakPoint}`):(p=`col-md-${e.value.style.potraitBreakPoint}`,p=`${p} col-lg-${e.value.style.breakPoint}`)),p}),d=m(()=>t.isUndefined(e.value.style)?"":e.value.style.textAlign=="left"?"text-start":e.value.style.textAlign=="right"?"text-end":"text-center"),w=m(()=>{var N,A,V;const p=!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; `:"",k=!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:"",B=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",U=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let P=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((N=s.task)==null?void 0:N.isShowAdjustmentRow)&&((A=s.task)!=null&&A.isShowAdjustmentRow))P="";else{let _=0;(V=s.task)==null||V.items.forEach(I=>{var f;t.isUndefined(I.style)||(t.isUndefined(I.style.border)?t.isUndefined(I.style.border)&&(_=_+Number(I.style.breakPoint)):((I.style.border.right=="none"||t.isUndefined(I.style.border.right))&&(_=_+Number(I.style.breakPoint)),t.isEqual(I,t.last((f=s.task)==null?void 0:f.items))&&(_=_+Number(I.style.breakPoint))))}),_==12&&(P=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const D=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",F=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",v=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",n=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";let h="";return P&&(h="padding-bottom: 25px; "),`${h}${p}${k}${B}${U}${P}${D}${F}${v}${y}${n}`}),g=m(()=>`${!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.fontWeight)&&e.value.style.fontWeight!="normal"?`font-weight: ${e.value.style.fontWeight}; `:""}`),S=m(()=>{let p="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(p=""),p});return(p,k)=>(i(),$("div",{class:q([[r.value,d.value,c.value,S.value],"px-2 py-2"]),style:J(w.value)},[!O(t.isUndefined)(o.item.style)&&o.item.style.visibility!="hidden"?(i(),$("label",{key:0,style:J(g.value),innerHTML:a.value},null,12,Ft)):C("",!0)],6))}}),He=vt({id:"InterimcrackPreview",state:()=>({stateLoading:!1,stateViewYesVisible:!1,stateViewtNoVisible:!1,stateIsYes:void 0,stateCrackInfo:{}}),getters:{ViewYesVisible:o=>o.stateViewYesVisible,ViewNoVisible:o=>o.stateViewtNoVisible,images:()=>he().ImageObjects.find(s=>s.Id==="crack"),crackInfo:o=>o.stateCrackInfo},actions:{toggleViewYesVisible(o){this.stateViewYesVisible=o,this.stateViewtNoVisible=!1},toggleViewNoVisible(o){this.stateViewtNoVisible=o,this.stateViewYesVisible=!1},async getCrackDetail(o,s){this.stateLoading=!0;const e={ver:"v1"},r={servicesheetDetailId:o,taskId:s};try{const c=(await je.post(`${ut}?${new URLSearchParams(e).toString()}`,r)).data.result.content.detail,d=he(),w=bt();if(d.setCurrent("crack"),d.clearCurrent(),c.type==="YES"){this.stateIsYes=!0;const g=new yt;g.setAssetNumber(c.assetNumber),g.setDescription(c.description),g.setPriority(c.priority),g.setRaisedBy(c.raisedBy),g.setDate(c.date),g.setPlannedDuration(c.plannedDuration),g.setInstruction(c.instruction),g.setTitle(c.title),g.importParts(...JSON.parse(c.parts)),g.importLabours(...JSON.parse(c.labours)),g.importResources(...JSON.parse(c.resources)),g.importSymptoms(...JSON.parse(c.symptoms)),g.importCauses(...JSON.parse(c.causes)),g.importPreviousCrack(...JSON.parse(c.previousCracks)),this.images.ImageInfos.push(...JSON.parse(c.images));const S=[];this.images.ImageInfos.forEach(p=>{let k="";typeof p=="string"?k=p:k=p.filename,S.push(w.downloadAttachment(k))}),Promise.all(S).then(p=>{p.forEach(k=>{const B=new Blob([k],{type:"image/png"});this.images.ImageBlobs.push(B)}),this.stateCrackInfo=g,this.toggleViewYesVisible(!0)})}else{this.stateIsYes=!1,this.stateCrackInfo=new ft,this.stateCrackInfo.setAssetNumber(c.assetNumber),this.stateCrackInfo.setDescription(c.description),this.stateCrackInfo.setRaisedBy(c.raisedBy),this.stateCrackInfo.setDate(c.date),this.stateCrackInfo.setInstruction(c.instruction),this.stateCrackInfo.setTitle(c.title),this.stateCrackInfo.importPreviousCrack(...JSON.parse(c.previousCracks)),this.images.ImageInfos.push(...JSON.parse(c.images));const g=[];this.images.ImageInfos.forEach(S=>{let p="";typeof S=="string"?p=S:p=S.filename,g.push(w.downloadAttachment(p))}),Promise.all(g).then(S=>{S.forEach(p=>{const k=new Blob([p],{type:"image/png"});this.images.ImageBlobs.push(k)}),this.toggleViewNoVisible(!0)})}this.stateLoading=!1}catch(a){pt(a),console.log(a),this.stateLoading=!1,at("IRONS",a)}},resetInstance(){this.stateLoading=!1,this.stateCrackInfo={},this.stateViewYesVisible=!1,this.stateViewtNoVisible=!1,this.stateIsYes=void 0}}}),pe=o=>(ke("data-v-97dea13a"),o=o(),ge(),o),Ht=["innerHTML"],Jt=["innerHTML"],Yt={key:0,class:"ms-2"},Wt=pe(()=>l("img",{src:De,alt:"na",class:"d-icon"},null,-1)),zt=[Wt],Kt=pe(()=>l("img",{src:Ce,alt:"defect",class:"d-icon"},null,-1)),Xt=[Kt],Qt=pe(()=>l("img",{src:Ce,alt:"defect",class:"d-icon"},null,-1)),Zt=[Qt],es=pe(()=>l("img",{src:De,alt:"na",class:"d-icon"},null,-1)),ts=[es],ss=pe(()=>l("img",{src:rt,alt:"ok",class:"d-icon"},null,-1)),os=[ss],as=z({__name:"Dropdown",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0}},setup(o){const s=o,e=ne(s,"item"),r=ne(s,"task"),a=fe(),c=Ie(),d=He(),w=Oe(),g=W(!1),S=lt(),p=()=>{var b,u;S.setReason((b=s.task)==null?void 0:b.reason),S.setTitle((u=s.task)==null?void 0:u.description),S.setVisible(!0)},k=m(()=>s.generalStyle?!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col":""),B=m(()=>{let b="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(!t.isUndefined(e.value.style.potraitBreakPoint)&&e.value.style.breakPoint!="none"?(b=`col-md-${e.value.style.potraitBreakPoint}`,b=`${b} col-lg-${e.value.style.breakPoint}`):(b=`col-md-${e.value.style.potraitBreakPoint}`,b=`${b} col-lg-${e.value.style.breakPoint}`)),b}),U=m(()=>{let b="Choose One";return!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.placeholder)&&(b=e.value.style.placeholder),b}),P=m(()=>!window.location.href.includes("render-template")),D=m(()=>{var x,j;const b=e.value.value.toString().replaceAll("'","");let u;return b=="1"?u="green":b=="2"||b=="3"&&((x=r.value)==null?void 0:x.category)=="CRACK"?u="red":b=="3"&&(((j=r.value)==null?void 0:j.category)=="NORMAL"||e.value.categoryItemType=="resultStatus")||b=="4"?u="yellow":b=="A"?u="a":b=="B"?u="b":b=="C"?u="c":b=="X"&&(u="x"),u}),F=m(()=>{var b;return v.value?(b=y.value.find(u=>u.value==String(v.value)))==null?void 0:b.label:v.value}),v=m({get:()=>s.item.value.toString().replaceAll("'",""),set:b=>{console.log(b)}}),y=m(()=>{const b=s.item.caption.replace("[","").replace("]","").split("; "),u=s.item.itemValue.replace("[","").replace("]","").split(", ");return b.map((j,H)=>({label:j.replaceAll("'",""),value:u[H].replaceAll("'","")}))}),n=b=>Ae(b),h=m(()=>{var K,re,Z;const b=!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; `:"",u=!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:"",x=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",j=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let H=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((K=s.task)==null?void 0:K.isShowAdjustmentRow)&&((re=s.task)!=null&&re.isShowAdjustmentRow))H="";else{let te=0;(Z=s.task)==null||Z.items.forEach(se=>{var ie;t.isUndefined(se.style)||(t.isUndefined(se.style.border)?t.isUndefined(se.style.border)&&(te=te+Number(se.style.breakPoint)):((se.style.border.right=="none"||t.isUndefined(se.style.border.right))&&(te=te+Number(se.style.breakPoint)),t.isEqual(se,t.last((ie=s.task)==null?void 0:ie.items))&&(te=te+Number(se.style.breakPoint))))}),te==12&&(H=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const Y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",Q=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",le=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",ue=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",T=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";let M="";return H&&(M="padding-bottom: 25px; "),`${M}${b}${u}${x}${j}${H}${Y}${Q}${le}${ue}${T}`}),N=async b=>{const u=await c.getApprovalDefect(b);c.setApprovalData(u||{})},A=async()=>{var b,u;await c.getDefectDetail((b=a.selectedGroup)==null?void 0:b.id,(u=r.value)==null?void 0:u.key)},V=async()=>{var b,u;await d.getCrackDetail((b=a.selectedGroup)==null?void 0:b.id,(u=r.value)==null?void 0:u.key)},_=async()=>{var b,u,x;await w.getNADetail((b=a.selectedGroup)==null?void 0:b.id,(u=r.value)==null?void 0:u.key),await N({workorder:a.generalForm.workOrder,taskId:(x=r.value)==null?void 0:x.key})},I=async()=>{g.value=!1},f=()=>{g.value=!1},R=m(()=>{let b="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(b=""),b});return(b,u)=>{var H,Y,Q,le,ue,T,M;const x=oe("el-option"),j=oe("el-select");return i(),$(X,null,[l("div",{class:q([[k.value,B.value,R.value],"px-2 py-2 d-flex dropdown-eform-status"]),style:J(h.value)},[G(j,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=K=>v.value=K),placeholder:U.value,size:"small",class:q(["w-100",D.value]),disabled:P.value},Te({default:ee(()=>[(i(!0),$(X,null,ce(y.value,K=>(i(),E(x,{key:K,value:K.value},{default:ee(()=>[l("span",{innerHTML:K&&K.label?n(K&&K.label):""},null,8,Ht)]),_:2},1032,["value"]))),128))]),_:2},[v.value?{name:"prefix",fn:ee(()=>[l("span",{class:"el-input__custom-option",innerHTML:F.value},null,8,Jt)]),key:"0"}:void 0]),1032,["modelValue","placeholder","disabled","class"]),e.value.value==="2"&&((H=o.task)==null?void 0:H.category)=="NORMAL"?(i(),$("div",Yt,[l("img",{src:Ce,alt:"defect",class:"d-icon",onClick:A})])):C("",!0),e.value.value==="3"&&(((Y=o.task)==null?void 0:Y.category)=="NORMAL"||((Q=o.task)==null?void 0:Q.category)=="CBM")?(i(),$("div",{key:1,class:"ms-2",onClick:_},zt)):C("",!0),e.value.value==="2"&&((le=o.task)==null?void 0:le.category)=="CRACK"?(i(),$("div",{key:2,class:"ms-2",onClick:V},Xt)):C("",!0),e.value.value==="3"&&((ue=o.task)==null?void 0:ue.category)=="CRACK"?(i(),$("div",{key:3,class:"ms-2",onClick:V},Zt)):C("",!0),e.value.value==="4"?(i(),$("div",{key:4,class:"ms-2",onClick:_},ts)):C("",!0),e.value.value==="1"&&((T=o.task)!=null&&T.reason)&&((M=o.task)==null?void 0:M.reason)!=""?(i(),$("div",{key:5,class:"ms-2",onClick:p},os)):C("",!0)],6),G(dt,{visibility:g.value,caption:"Have you done personal Pre-Task Risk Assessment?",onOnNoConfirm:f,onOnYesConfirm:I},null,8,["visibility"])],64)}}}),Je=ye(as,[["__scopeId","data-v-97dea13a"]]),ls=l("div",{class:"row text-center pt-3 pb-3 text-dark"},[l("h3",null,"Please ensure oil level is checked and it is within the tolerance range.")],-1),rs={class:"row text-center pt-5"},ns=z({__name:"OilNotInRange",props:{show:{type:Boolean,required:!0}},emits:["close"],setup(o,{emit:s}){const e=o,r=s,a=ae(()=>e.show),c=()=>{r("close")};return(d,w)=>{const g=oe("el-button"),S=oe("el-dialog");return i(),E(S,{modelValue:O(a),"onUpdate:modelValue":w[0]||(w[0]=p=>Ve(a)?a.value=p:null),width:"40%","show-close":!1,"custom-class":"oil-not-in-range__header",top:"30vh",center:!0},{default:ee(()=>[ls,l("div",rs,[G(g,{type:"success",class:"ok-button",onClick:c},{default:ee(()=>[me("Ok")]),_:1})])]),_:1},8,["modelValue"])}}}),is={key:0,class:"text-danger ps-2 font-weight-bold"},Ye=z({__name:"Input",props:{item:{type:Object,required:!0},isDisabled:{type:Boolean,default:!1},task:{type:Object},generalStyle:{type:Boolean,default:!0}},setup(o){var b;const s=o,e=ne(s,"item"),r=ne(s,"task"),a=Ue(),c=$e(),d=W(!1),w=W("");let g;const S=W(""),p=m(()=>{let u="Please Input";return(e.value.categoryItemType=="targetRating"||e.value.categoryItemType=="resultParamRating")&&(u=""),!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.placeholder)&&(u=e.value.style.placeholder),u}),k=m(()=>s.generalStyle?!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col":""),B=m(()=>{let u="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(!t.isUndefined(e.value.style.potraitBreakPoint)&&e.value.style.breakPoint!="none"?(u=`col-md-${e.value.style.potraitBreakPoint}`,u=`${u} col-lg-${e.value.style.breakPoint}`):(u=`col-md-${e.value.style.potraitBreakPoint}`,u=`${u} col-lg-${e.value.style.breakPoint}`)),u}),U=m(()=>{let u="";return!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.suffix)&&(u=e.value.style.suffix),u}),P=e.value.valueType=="int",D=(b=e.value.customValidation)==null?void 0:b.toLowerCase().includes("percentage"),F=e.value.categoryItemType=="paramRating",v=!t.isUndefined(e.value.mappingKeyId)&&!t.isArray(e.value.mappingKeyId),y=m({get:()=>{let u=S.value;return(P||D||F||v)&&(u=Le(S.value)),u},set:async u=>{w.value="",e.value.value=u,clearTimeout(g),g=setTimeout(async()=>{if(f(u)){const j={keyValue:r.value.key,propertyParams:[{propertyName:"taskValue",propertyValue:u},{propertyName:"updatedBy",propertyValue:JSON.stringify(a.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};t.isUndefined(e.value.mappingKeyId)||_(u);let H=!0;s.task.category=="CBM"&&e.value.categoryItemType=="paramRating"&&await h(j).then(Y=>{H=Y,Y||(w.value="Out Of Range")}),H&&n(j,u)}},2e3)}});_e(()=>{S.value=e.value.value});const n=(u,x)=>{const j=[{keyValue:e.value.key,propertyParams:[{propertyName:"value",propertyValue:x},{propertyName:"updatedBy",propertyValue:JSON.stringify(a.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];!t.isUndefined(e.value.isTaskValue)&&e.value.isTaskValue&&j.push(u),a.updateServiceSheetTaskValue(j,c.user.EmployeeId,c.user.Name)},h=async(u,x)=>{let j=!0;return s.task.rating,await a.getCBMResult(s.task,e.value,u).then(H=>{j=H}),j},N=m(()=>{const u=e.value.value.toString().replaceAll("'","");let x;return e.value.categoryItemType=="targetRating"&&(u=="A"?x="a":u=="B"?x="b":u=="C"?x="c":u=="X"&&(x="x")),x}),A=m(()=>{var re,Z,te;const u=!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; `:"",x=!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:"",j=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",H=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let Y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((re=s.task)==null?void 0:re.isShowAdjustmentRow)&&((Z=s.task)!=null&&Z.isShowAdjustmentRow))Y="";else{let se=0;(te=s.task)==null||te.items.forEach(ie=>{var Be;t.isUndefined(ie.style)||(t.isUndefined(ie.style.border)?t.isUndefined(ie.style.border)&&(se=se+Number(ie.style.breakPoint)):((ie.style.border.right=="none"||t.isUndefined(ie.style.border.right))&&(se=se+Number(ie.style.breakPoint)),t.isEqual(ie,t.last((Be=s.task)==null?void 0:Be.items))&&(se=se+Number(ie.style.breakPoint))))}),se==12&&(Y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const Q=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",le=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",ue=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",T=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",M=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";let K="";return Y&&(K="padding-bottom: 25px; "),`${K}${u}${x}${j}${H}${Y}${Q}${le}${ue}${T}${M}`}),V=()=>{d.value=!1},_=async u=>{var x;(x=e.value)!=null&&x.mappingKeyId&&await a.getValueFromItemKey(e.value.mappingKeyId).then(j=>{if(j!=""){const H=Number(j)-Number(j)*.05,Y=Number(j)+Number(j)*(5/100),Q=u>=H,le=u<=Y;if(Q&&le){const ue={keyValue:r.value.key,propertyParams:[{propertyName:"taskValue",propertyValue:u},{propertyName:"updatedBy",propertyValue:JSON.stringify(a.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]};n(ue,u)}else d.value=!0}})},I=u=>{if(e.value.valueType=="int"){let x=u.keyCode?u.keyCode:u.which;(x<48||x>57)&&x!=46&&u.preventDefault()}},f=u=>{if(e.value.valueType=="int"){const x=u.split(".");let j=!1,H=x[0].length>5;return x[1]&&(j=x[1].length>2),H||j?(w.value="max input length is 5 digits and 2 number after .",!1):!0}else return!0};Re(y,()=>{w.value=""},{deep:!0});const R=m(()=>{let u="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(u=""),u});return(u,x)=>{const j=oe("el-input");return i(),$(X,null,[l("div",{class:q([[k.value,B.value,R.value],"px-2 py-2 input-eform-status"]),style:J(A.value)},[G(j,{class:q([N.value,U.value!=""?"service-sheet-input":""]),modelValue:y.value,"onUpdate:modelValue":x[0]||(x[0]=H=>y.value=H),modelModifiers:{lazy:!0},size:"small",readonly:!0,onKeypress:I,placeholder:p.value},Te({_:2},[U.value!=""?{name:"append",fn:ee(()=>[me(L(U.value),1)]),key:"0"}:void 0]),1032,["class","modelValue","placeholder"]),w.value!=""?(i(),$("label",is,L(w.value),1)):C("",!0)],6),G(ns,{show:d.value,onClose:V},null,8,["show"])],64)}}}),ds=["src"],us={key:0,class:"col-6 ps-0 pe-1 d-flex justify-content-center"},cs={class:"text-white"},We=z({__name:"SmallCamera",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(o){const s=o,e=ne(s,"item"),r=W(!1),a=ne(s,"task"),c=Ue(),d=he(),w=$e(),g=()=>"/media/svg/dma/camera/e-form/png/cam-read.png",S=ae(()=>s.generalStyle?!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col":""),p=ae(()=>{let n="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(n=`col-md-${e.value.style.potraitBreakPoint} col-lg-${e.value.style.breakPoint}`),n}),k=ae(()=>e.value.value?ve(e.value.value):[]),B=()=>{d.toggleIsVisible(!0,e.value.key)},U=ae(()=>t.cloneDeep(d.ImageObjects.find(n=>n.Id===e.value.key))),P=()=>{r.value=!0},D=()=>{r.value=!1},F=ae(()=>{var x,j,H;const n=!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; `:"",h=!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:"",N=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",A=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let V=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; `:"";if(!t.isUndefined((x=s.task)==null?void 0:x.isShowAdjustmentRow)&&((j=s.task)!=null&&j.isShowAdjustmentRow))V="";else{let Y=0;(H=s.task)==null||H.items.forEach(Q=>{var le;t.isUndefined(Q.style)||(t.isUndefined(Q.style.border)?t.isUndefined(Q.style.border)&&(Y=Y+Number(Q.style.breakPoint)):((Q.style.border.right=="none"||t.isUndefined(Q.style.border.right))&&(Y=Y+Number(Q.style.breakPoint)),t.isEqual(Q,t.last((le=s.task)==null?void 0:le.items))&&(Y=Y+Number(Q.style.breakPoint))))}),Y==12&&(V=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const _=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",I=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",f=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",R=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",b=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";let u="";return V&&(u="padding-bottom: 25px; "),`${u}${n}${h}${N}${A}${V}${_}${I}${f}${R}${b}`}),v=async()=>{if(e.value.value==""&&(e.value.value=[]),U.value){U.value.ImageInfos=ve(U.value.ImageInfos),e.value.value=ve(e.value.value);const h=t.last(U.value.ImageInfos);h&&e.value.value.push(h)}const n=[{keyValue:e.value.key,propertyParams:[{propertyName:"value",propertyValue:JSON.stringify(e.value.value)},{propertyName:"updatedBy",propertyValue:JSON.stringify(c.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]},{keyValue:a.value.key,propertyParams:[{propertyName:"updatedBy",propertyValue:JSON.stringify(c.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];c.updateServiceSheetTaskValue(n,w.user.EmployeeId,w.user.Name)};Re(U,async(n,h)=>{!t.isUndefined(n)&&n.ImageInfos.length>0&&n.ImageInfos.length!=(h==null?void 0:h.ImageInfos.length)&&await v()},{deep:!0});const y=ae(()=>{var h;let n="pb-2";return(h=s.task)!=null&&h.updatedBy&&s.task.updatedBy.name&&(n=""),n});return(n,h)=>(i(),$("div",{class:q([[O(S),O(p),O(y)],"pt-2"]),style:J(O(F))},[l("div",{class:q(["row",!O(t.isUndefined)(e.value.value)&&e.value.value.length>0?"justify-content-around":"justify-content-center"])},[l("div",{class:q(["d-flex justify-content-center",!O(t.isUndefined)(e.value.value)&&e.value.value.length>0?"col-6 pe-0 ps-1":"col-6 px-0"])},[l("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:B,disabled:!0},[l("img",{src:g(),style:{height:"12px",width:"14px"},alt:"photo"},null,8,ds)])],2),O(k)&&O(k).length>0?(i(),$("div",us,[l("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:P,style:{"background-color":"#18AF4A"}},[l("label",cs,"+"+L(O(k).length),1)])])):C("",!0)],2),G(ht,{type:"task","re-render":!1,images:O(k),"show-delete-button":!1,"is-mandatory":!1,visibility:r.value,"is-monitoring":!0,"show-mandatory-caption":!1,onOnClose:D},null,8,["images","visibility"])],6))}}),ms={class:"p-2"},fs={class:"form-check checkbox-success item-checkbox"},ze=z({__name:"CheckBox",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(o){const s=o,e=ne(s,"item"),r=ne(s,"task"),a=Ue(),c=$e(),d=m({get:()=>JSON.parse(s.item.value),set:async k=>{var P;const B={keyValue:(P=r.value)==null?void 0:P.key,propertyParams:[{propertyName:"taskValue",propertyValue:e.value.value.toString()},{propertyName:"updatedBy",propertyValue:JSON.stringify(a.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]},U=[{keyValue:e.value.key,propertyParams:[{propertyName:"value",propertyValue:k.toString()},{propertyName:"updatedBy",propertyValue:JSON.stringify(a.employee)},{propertyName:"updatedDate",propertyValue:"<<ServerDateTime>>"}]}];!t.isUndefined(e.value.isTaskValue)&&e.value.isTaskValue&&U.push(B),await a.updateServiceSheetTaskValue(U,c.user.EmployeeId,c.user.Name)}}),w=m(()=>!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col"),g=m(()=>{let k="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(!t.isUndefined(e.value.style.potraitBreakPoint)&&e.value.style.breakPoint!="none"?(k=`col-md-${e.value.style.potraitBreakPoint}`,k=`${k} col-lg-${e.value.style.breakPoint}`):(k=`col-md-${e.value.style.potraitBreakPoint}`,k=`${k} col-lg-${e.value.style.breakPoint}`)),k}),S=m(()=>{var A,V,_;const k=!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; `:"",B=!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:"",U=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",P=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let D=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((A=s.task)==null?void 0:A.isShowAdjustmentRow)&&((V=s.task)!=null&&V.isShowAdjustmentRow))D="";else{let I=0;(_=s.task)==null||_.items.forEach(f=>{var R;t.isUndefined(f.style)||(t.isUndefined(f.style.border)?t.isUndefined(f.style.border)&&(I=I+Number(f.style.breakPoint)):((f.style.border.right=="none"||t.isUndefined(f.style.border.right))&&(I=I+Number(f.style.breakPoint)),t.isEqual(f,t.last((R=s.task)==null?void 0:R.items))&&(I=I+Number(f.style.breakPoint))))}),I==12&&(D=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const F=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",v=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",n=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",h=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";let N="";return D&&(N="padding-bottom: 25px; "),`${N}${k}${B}${U}${P}${D}${F}${v}${y}${n}${h}`}),p=m(()=>{let k="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(k=""),k});return(k,B)=>(i(),$("div",{class:q([[w.value,g.value,p.value],"py-2 px-2 d-flex align-items-center d-flex justify-content-center"]),style:J(S.value)},[l("div",ms,[l("div",fs,[Ne(l("input",{disabled:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":B[0]||(B[0]=U=>d.value=U)},null,512),[[et,d.value]])])])],6))}}),Ke=z({__name:"InteractiveButton",props:{item:{type:Object,required:!0},generalStyle:{type:Boolean,default:!0},task:{type:Object}},setup(o){const s=o,e=ne(s,"item"),r=ne(s,"task"),a=m(()=>s.generalStyle?!t.isUndefined(e.value.style)&&e.value.style.breakPoint!="none"?`col-${e.value.style.breakPoint}`:"col":""),c=m(()=>!t.isUndefined(e.value.style)&&e.value.style.fontColor!="none"?`color: ${e.value.style.fontColor}; `:""),d=m(()=>!t.isUndefined(e.value.style)&&e.value.style.bgColor!="none"?`background-color: ${e.value.style.bgColor}; border-color: ${e.value.style.bgColor};`:""),w=m(()=>{let U="";return s.task.isShowAdjustmentRow&&(U="opacity: 50%;"),U});m(()=>{const U=s.task.taskValue=="",P=s.task.taskValue=="A"||s.task.taskValue=="B";return U||P||s.task.isShowAdjustmentRow});const g=m(()=>{let U="";return s.generalStyle&&!t.isUndefined(e.value.style)&&(!t.isUndefined(e.value.style.potraitBreakPoint)&&e.value.style.breakPoint!="none"?(U=`col-md-${e.value.style.potraitBreakPoint}`,U=`${U} col-lg-${e.value.style.breakPoint}`):(U=`col-md-${e.value.style.potraitBreakPoint}`,U=`${U} col-lg-${e.value.style.breakPoint}`)),U}),S=m(()=>t.isUndefined(e.value.style)?"":e.value.style.textAlign=="left"?"text-start":e.value.style.textAlign=="right"?"text-end":"text-center"),p=m(()=>{var N,A,V,_;const U=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.top!="none"?`border-top: ${e.value.style.border.top}; `:"",P=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.right!="none"?`border-right: ${e.value.style.border.right}; `:"";let D=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem;`:"";if(!t.isUndefined((N=s.task)==null?void 0:N.isShowAdjustmentRow)&&((A=s.task)!=null&&A.isShowAdjustmentRow))D="";else{let I=0;(V=s.task)==null||V.items.forEach(f=>{var R;t.isUndefined(f.style)||(t.isUndefined(f.style.border)?t.isUndefined(f.style.border)&&(I=I+Number(f.style.breakPoint)):((f.style.border.right=="none"||t.isUndefined(f.style.border.right))&&(I=I+Number(f.style.breakPoint)),t.isEqual(f,t.last((R=s.task)==null?void 0:R.items))&&(I=I+Number(f.style.breakPoint))))}),I==12&&(D=!((_=s.task.updatedBy)!=null&&_.name)&&!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.bottom!="none"?`border-bottom: ${e.value.style.border.bottom}; margin-bottom: 1rem; `:"")}const F=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.border)&&e.value.style.border.left!="none"?`border-left: ${e.value.style.border.left}; `:"",v=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topRight!="none"?`border-top-right-radius: ${e.value.style.borderRadius.topRight}; `:"",y=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomRight!="none"?`border-bottom-right-radius: ${e.value.style.borderRadius.bottomRight}; `:"",n=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.topLeft!="none"?`border-top-left-radius: ${e.value.style.borderRadius.topLeft}; `:"",h=!t.isUndefined(e.value.style)&&!t.isUndefined(e.value.style.borderRadius)&&e.value.style.borderRadius.bottomLeft!="none"?`border-bottom-left-radius: ${e.value.style.borderRadius.bottomLeft}; `:"";return`${U}${P}${D}${F}${v}${y}${n}${h}`}),k=()=>{e.value.value=="Adjustment"&&(r.value.isShowAdjustmentRow=!0)},B=m(()=>{let U="pb-2";return!t.isUndefined(s.task.updatedBy.name)&&s.task.updatedBy.name&&(U=""),U});return(U,P)=>{const D=oe("el-button");return i(),$("div",{class:q([[a.value,S.value,g.value,B.value],"px-2 py-2"]),style:J(p.value)},[!O(t.isUndefined)(o.item.style)&&o.item.style.visibility!="hidden"?(i(),E(D,{key:0,style:J([c.value,d.value,w.value]),size:"small",type:"success",onClick:k,class:"item-button w-100",disabled:""},{default:ee(()=>[me(L(o.item.value),1)]),_:1},8,["style"])):C("",!0)],6)}}}),ys={class:"row w-100"},ps=l("div",{class:"col-1 pb-1 px-2"},null,-1),vs={class:"col-4 col-md-3 pb-1 px-2",style:J([])},bs={class:"col-2 pb-1 px-2",style:J([])},hs={key:0,class:"d-flex align-items-center"},ks=l("div",{class:"spinner-border me-1",style:{width:"1rem !important",height:"1rem !important"},role:"status"},[l("span",{class:"sr-only"},"Loading...")],-1),gs=l("span",null,"Loading...",-1),_s=[ks,gs],$s={class:"col-1 pb-1 px-2",style:J([])},Us={class:"col-1 col-md-1 pb-1 px-2 input-eform-status",style:J([])},Ss={class:"col-1 col-md-1 pb-1 px-2",style:J([])},ws={class:"row justify-content-center"},Rs={class:"px-0 col-6 d-flex justify-content-center"},Cs=["src"],Is={key:0,class:"col-6 ps-0 pe-1 d-flex justify-content-center"},xs={class:"text-white"},Bs={key:0,class:"row w-100"},Ps={key:1,class:"row w-100"},Ns=l("div",{class:"col-1 pb-1 px-2"},null,-1),Ts=z({__name:"TaskAdjustment",props:{task:{type:Object,required:!0}},setup(o){const s=o,e=async f=>{const R=r.value.adjustment.pictures;r.value.adjustment.pictures=R.filter(b=>b!=f),P.setCurrent(`${r.value.key}-adjustment`),P.clearCurrent(),await B.addCBMAdjustmentPictures(r.value),r.value.adjustment.pictures.length==0},r=ne(s,"task"),a=W(!1),c=m(()=>r.value.adjustment.pictures),d=m(()=>{let f=!0;return!t.isUndefined(r.value.updatedBy)&&!t.isUndefined(r.value.updatedBy.id)&&(B.employee.id==r.value.updatedBy.id?f=!0:f=!1),!f}),w=()=>{a.value=!1},g=()=>{a.value=!0},S=m(()=>{let f="";return s.task.items.forEach(R=>{!t.isUndefined(R.style)&&!t.isUndefined(R.style.border)&&R.style.border.left!="none"&&(f=R.style.border.left)}),f}),p=m(()=>{let f="",R=!1;return r.value.items.forEach(b=>{!t.isUndefined(b.style)&&!t.isUndefined(b.style.border)&&b.style.border.bottom!="none"&&(R=!0)}),R&&(f=`border-bottom: ${S.value}`),f});m(()=>{let f=!1;r.value.items.forEach(b=>{!t.isUndefined(b.style)&&!t.isUndefined(b.style.border)&&b.style.border.bottom!="none"&&(f=!0)});let R="";return r.value.adjustment.updatedBy.name!=""&&f&&(R=`border-bottom: ${S.value}`),R});const k=f=>{let R=f.keyCode?f.keyCode:f.which;(R<48||R>57)&&R!=46&&f.preventDefault()},B=Ue(),U=W(!1),P=he(),D=W(!1),F=()=>{var R,b;let f="/media/svg/dma/camera/e-form/png/cam-active.png";return t.isUndefined((R=s.task.adjustment.updatedBy)==null?void 0:R.id)||((b=s.task.adjustment.updatedBy)==null?void 0:b.id)==B.employee.id&&r.value.adjustment.pictures.length>0&&(f="/media/svg/dma/camera/e-form/png/cam-user.png"),d.value&&(f="/media/svg/dma/camera/e-form/png/cam-read.png"),f},v=async f=>{const R=f.target.value;if(R&&R!=_.value){D.value=!0,r.value.adjustment.measurement=R;const b=await B.getAdjusmentRating(r.value);D.value=!1,(b=="C"||b=="X")&&(U.value=!0),I.value=R}},y=()=>{P.toggleIsVisible(!0,`${r.value.key}-adjustment`),U.value=!1},n=async()=>{if(r.value.adjustment.measurement!=_.value&&r.value.adjustment.measurement){const f=be.service({lock:!0,text:"Deleting Adjustment",background:"rgba(0, 0, 0, 0.7)"});await B.deleteAdjusmentTask(r.value),f.close(),P.setCurrent(`${r.value.key}-adjustment`),P.clearCurrent()}r.value.isShowAdjustmentRow=!1},h=m(()=>{const f=r.value.adjustment.rating;let R;return f=="A"?R="a":f=="B"?R="b":f=="C"?R="c":f=="X"&&(R="x"),R}),N=m(()=>t.cloneDeep(P.ImageObjects.find(f=>f.Id===`${r.value.key}-adjustment`))),A=W(!1),V=()=>{const f=N.value.ImageInfos,R=r.value.adjustment.pictures,b=f.filter(u=>!R.includes(u));r.value.adjustment.pictures=[...r.value.adjustment.pictures,...b],B.addCBMAdjustmentPictures(r.value),A.value=!0};Re(N,async(f,R)=>{!t.isUndefined(f)&&f.ImageInfos.length>0&&f.ImageInfos.length!=(R==null?void 0:R.ImageInfos.length)&&await V()},{deep:!0});const _=W(""),I=W("");return _e(()=>{r.value.items.forEach(f=>{f.categoryItemType=="paramRating"&&(_.value=f.value,I.value=f.value)})}),(f,R)=>{const b=oe("el-input"),u=oe("el-button");return i(),$(X,null,[l("div",ys,[ps,l("div",{class:"col-1 pb-1 px-2",style:J([`border-left: ${S.value}`])},null,4),l("div",vs,L(o.task.adjustment.description),1),l("div",bs,[G(b,{modelValue:r.value.adjustment.measurement,"onUpdate:modelValue":R[0]||(R[0]=x=>r.value.adjustment.measurement=x),modelModifiers:{lazy:!0},size:"small",placeholder:"Please Input",onKeypress:k,onFocusout:v,readonly:""},null,8,["modelValue"]),D.value?(i(),$("div",hs,_s)):C("",!0)]),l("div",$s,L(o.task.adjustment.uom),1),l("div",Us,[G(b,{modelValue:r.value.adjustment.rating,"onUpdate:modelValue":R[1]||(R[1]=x=>r.value.adjustment.rating=x),modelModifiers:{lazy:!0},size:"small",disabled:"",class:q(h.value)},null,8,["modelValue","class"])]),l("div",Ss,[l("div",ws,[l("div",Rs,[l("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:y,disabled:""},[l("img",{src:F(),style:{height:"12px",width:"14px"}},null,8,Cs)])]),r.value.adjustment.pictures.length>0?(i(),$("div",Is,[l("button",{class:"btn btn-sm btn-icon btn-bg-success",onClick:g,style:{"background-color":"#18AF4A"}},[l("label",xs,"+"+L(r.value.adjustment.pictures.length),1)])])):C("",!0)])]),l("div",{class:"col-2 pb-1 px-2",style:J([`border-right: ${S.value}`])},[G(u,{type:"danger",size:"small",class:"item-button w-100",onClick:n,disabled:""},{default:ee(()=>[me("Delete")]),_:1})],4)]),o.task.adjustment.updatedBy.name?(i(),$("div",Bs,[l("div",{class:"d-flex justify-content-end py-1 col-11 offset-1 timestamp-task",style:J([`border-left: ${S.value}; border-right: ${S.value}`])},L(o.task.adjustment.updatedBy.name)+", "+L(o.task.adjustment.updatedDate),5)])):C("",!0),O(t.isUndefined)(r.value.adjustment.commentValue)?C("",!0):(i(),$("div",Ps,[Ns,l("div",{class:"col-1 pb-1 px-2",style:J([`border-left: ${S.value}`,p.value])},null,4),l("div",{class:"col-4 col-md-3 pb-1 px-2",style:J([p.value])},L(o.task.adjustment.commentLabel),5),l("div",{class:"col-6 col-md-7 pb-1 px-2",style:J([p.value,`border-right: ${S.value}`])},[G(b,{modelValue:r.value.adjustment.commentValue,"onUpdate:modelValue":R[2]||(R[2]=x=>r.value.adjustment.commentValue=x),modelModifiers:{lazy:!0},size:"small",placeholder:r.value.adjustment.commentPlaceHolder,readonly:!0},null,8,["modelValue","placeholder"])],4)])),a.value?(i(),E(kt,{key:2,images:c.value,visibility:a.value,showDeleteButton:!1,onHandleClose:w,onHandleDelete:e},null,8,["images","visibility"])):C("",!0)],64)}}}),Vs=o=>(ke("data-v-9521e0a3"),o=o(),ge(),o),js={key:0,class:"row w-100 position-absolute pe-3",style:{top:"40px"}},As={key:0,class:"row w-100",style:{height:"25px"}},Ds=Vs(()=>l("div",{class:"col-1"},null,-1)),Os=z({__name:"InlineTask",props:{task:{type:Object,required:!0},taskIndex:{type:Number,required:!0},taskGroup:{type:Array,required:!0}},setup(o){const s=o,e=m(()=>{let v=12,y=0;return s.task.items.every(n=>!t.isUndefined(n.style)&&n.style.visibility=="hidden"&&(t.isUndefined(n.style)||t.isUndefined(n.style.border)||n.style.border.left=="none")?(v=Number(v)-Number(n.style.breakPoint),y=Number(y)+Number(n.style.breakPoint),!0):!1),`col-${v} offset-${y}`}),r=W(""),a=W(""),c=fe(),d=m(()=>{let v=!0;return s.task.showParameter=="suspensionCylinder"&&(v=!1,c.stateStoredSuspensionCylinderValue.forEach(y=>{console.log("item",y.value),(y.value=="Out of spec"||y.value=="Out Spec")&&(v=!0)})),s.task.showParameter=="cylinderHeightNeedAdjustment"&&(c.stateStoredAdjustmentOptionValue=="Yes"||c.stateStoredAdjustmentOptionValue=="2"?v=!0:v=!1),s.task.showParameter=="cylinderHeightAdjustmentsFilled"&&(v=!0,c.stateStoredAdjustedSuspensionCylinderValue.forEach(y=>{y.value||(v=!1)})),v}),w=m(()=>{let v="";if(s.task.category=="NORMAL"){const y=s.task.items.find(h=>h.itemType=="input"&&h.valueItemType!="comment"),n=s.task.items.find(h=>h.itemType=="dropDown");if(y&&n)return!y.value&&!n.value?"task-required":"";if(!y&&n&&!n.value)return"task-required"}if(Object.hasOwn(s.task,"groupTaskId")&&!Object.hasOwn(s.task,"parentGroupTaskId")&&!Object.hasOwn(s.task,"childGroupTaskId")){let y=s.task.items.find(h=>h.itemType=="input"&&!h.valueItemType&&!h.value);if(y||(y=s.task.items.find(h=>h.category=="cbmCalculateAvg"&&!h.value),y)||s.task.items.find(h=>h.categoryItemType=="dropdownTool")&&(y=s.task.items.find(h=>h.categoryItemType=="paramRatingDynamic"&&!h.value),y))return"task-required"}return Object.hasOwn(s.task,"rating")&&s.task.rating=="AUTOMATIC_PREVIOUS_GROUP"&&!Object.hasOwn(s.task,"parentGroupTaskId")&&!Object.hasOwn(s.task,"childGroupTaskId")&&s.task.items.find(n=>n.itemType=="input"&&!n.valueItemType&&!n.value)?"task-required":(Object.hasOwn(s.task,"taskValue")&&!s.task.taskValue&&!Object.hasOwn(s.task,"parentGroupTaskId")&&!Object.hasOwn(s.task,"childGroupTaskId")?v="task-required":v="",v)}),g=m(()=>{let v="",y;return s.task.items.length<=1?y=s.task.items[0]:y=s.task.items[1],!t.isUndefined(y.style)&&!t.isUndefined(y.style.border)&&y.style.border.top!="none"&&(v="mt-3"),v}),S=m(()=>{let v=0;return s.task.items.forEach((y,n)=>{if(n+1==s.task.items.length&&y.itemType=="dropDown"){const h=s.task.items[n-1];!t.isUndefined(h.style)&&!t.isUndefined(h.style.border)&&h.style.border.right!="none"&&s.task.items.forEach((N,A)=>{if(A>1&&A<=n-1){let V=0;if(!t.isUndefined(N.style.potraitBreakPoint))V=N.style.potraitBreakPoint;else{let _=0;N.style.breakPoint=="none"?(s.task.items.forEach((I,f)=>{I.style.breakPoint!="none"&&(_+=Number(I.style.breakPoint))}),V=12-_):V=N.style.breakPoint-_}v+=Number(V)}})}}),v}),p=m(()=>{let v=0;return s.task.items.forEach((y,n)=>{if(n+1==s.task.items.length&&y.itemType=="dropDown"){const h=s.task.items[n-1];!t.isUndefined(h.style)&&!t.isUndefined(h.style.border)&&h.style.border.right!="none"&&s.task.items.forEach((N,A)=>{if(A>1&&A<=n-1){let V=0,_=0;N.style.breakPoint=="none"?(s.task.items.forEach((I,f)=>{I.style.breakPoint!="none"&&(_+=Number(I.style.breakPoint))}),V=12-_):V=N.style.breakPoint-_,v+=Number(V)}})}}),v}),k=m(()=>{let v=!1,y=!1,n=!1;return s.task.items.forEach((h,N)=>{if(N==1&&!t.isUndefined(h.style)&&!t.isUndefined(h.style.border)&&h.style.border.left!="none"&&(v=!0,r.value=h.style.border.left,!t.isUndefined(h.style)&&!t.isUndefined(h.style.border)&&h.style.border.bottom!="none"&&(n=!0)),N+1==s.task.items.length&&h.itemType=="dropDown"){const A=s.task.items[N-1];!t.isUndefined(A.style)&&!t.isUndefined(A.style.border)&&A.style.border.right!="none"&&(y=!0,a.value=A.style.border.right)}}),v&&y&&!n}),B=m(()=>{var n,h;const v=s.task.items.find(N=>N.style.visibility!="hidden"),y=t.last(s.task.items);return!(!t.isUndefined((n=s.task)==null?void 0:n.isShowAdjustmentRow)&&((h=s.task)!=null&&h.isShowAdjustmentRow))&&!t.isUndefined(y.style)&&!t.isUndefined(y.style.border)&&y.style.border.bottom!="none"&&!t.isUndefined(v.style)&&!t.isUndefined(v.style.border)&&v.style.border.left!="none"}),U=m(()=>{var A,V;const v=s.task.items.find(_=>_.style.visibility!="hidden"),y=t.last(s.task.items);let n=!t.isUndefined(y.style)&&!t.isUndefined(y.style.border)&&y.style.border.right!="none"?`border-right: ${y.style.border.right}; `:"",h=!t.isUndefined(v.style)&&!t.isUndefined(v.style.border)&&v.style.border.left!="none"?`border-left: ${v.style.border.left}; `:"",N=s.task.updatedBy.name&&!t.isUndefined(y.style)&&!t.isUndefined(y.style.border)&&y.style.border.bottom!="none"?"margin-bottom: 1rem; ":"";return B.value&&(n="",h=""),!t.isUndefined((A=s.task)==null?void 0:A.isShowAdjustmentRow)&&((V=s.task)!=null&&V.isShowAdjustmentRow)&&(N=""),n?`${n}${h}${N}`:`${N}`}),P=m(()=>{var y,n;const v=t.last(s.task.items);return!t.isUndefined((y=s.task)==null?void 0:y.isShowAdjustmentRow)&&((n=s.task)!=null&&n.isShowAdjustmentRow)||s.task.updatedBy.name&&!t.isUndefined(v.style)&&!t.isUndefined(v.style.border)&&v.style.border.bottom!="none"&&`${v.style.border.bottom}`,""}),D=m(()=>{let v="";return t.isUndefined(s.task.generalStyle)||(v=s.task.generalStyle),v}),F=m(()=>{let v="";const y=s.task.customStyle;return t.isUndefined(y)||y.split(" | ").forEach(h=>{h.includes("noteStyle")&&!t.isUndefined(s.taskGroup[s.taskIndex-1].updatedBy.name)&&s.taskGroup[s.taskIndex-1].updatedBy.name&&(v=`${v} ${h.split(" = ")[1]}`)}),v});return(v,y)=>d.value?(i(),$(X,{key:0},[l("div",{class:q(["row w-100",[g.value,w.value]]),style:J([D.value,F.value])},[(i(!0),$(X,null,ce(s.task.items,n=>(i(),$(X,{key:n.key},[n.itemType==="image"?(i(),E(qe,{key:0,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="label"?(i(),E(Fe,{key:1,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="dropDown"?(i(),E(Je,{key:2,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="input"?(i(),E(Ye,{key:3,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="smallCamera"?(i(),E(We,{key:4,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="checkbox"?(i(),E(ze,{key:5,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="html"?(i(),E(Ge,{key:6,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="button"?(i(),E(Ke,{key:7,item:n,task:o.task},null,8,["item","task"])):C("",!0),n.itemType==="statusInfo"?(i(),E(Me,{key:8,item:n,task:o.task},null,8,["item","task"])):C("",!0)],64))),128))],6),o.task.updatedBy.name?(i(),$("div",js,[l("div",{class:q(["d-flex justify-content-end pb-1 timestamp-task",e.value]),style:J([U.value,P.value])},L(o.task.updatedBy.name)+", "+L(o.task.updatedDate),7)])):C("",!0),o.task.updatedBy.name?(i(),$(X,{key:1},[B.value?C("",!0):(i(),$("div",As,[k.value?(i(),$(X,{key:1},[Ds,l("div",{class:"col-1",style:J(`border-left: ${r.value}`)},null,4),l("div",{class:q(`col-md-${S.value} col-lg-${p.value}`),style:J(`border-right: ${a.value}`)},null,6)],64)):(i(),$("div",{key:0,style:J(U.value),class:q(e.value)},null,6))]))],64)):C("",!0),o.task.isShowAdjustmentRow?(i(),E(Ts,{key:2,task:o.task},null,8,["task"])):C("",!0)],64)):C("",!0)}}),Es=ye(Os,[["__scopeId","data-v-9521e0a3"]]),Ls=z({__name:"TableRow",props:{item:{type:Object,required:!0},task:{type:Object}},setup(o){const s=o,e=m(a=>{const c=[];for(const d in s.item)c.push(s.item[d]);return c}),r=a=>{let c="";return!t.isUndefined(a.style)&&!t.isUndefined(a.style.textvAlign)&&(c=`align-self-${a.style.textvAlign}`),c};return(a,c)=>(i(!0),$(X,null,ce(e.value,d=>(i(),$("div",{class:q([r(d),"col px-0"]),key:d.key},[d.itemType==="image"?(i(),E(qe,{key:0,item:d,task:o.task},null,8,["item","task"])):C("",!0),d.itemType==="label"?(i(),E(Fe,{key:1,item:d,task:o.task},null,8,["item","task"])):C("",!0),d.itemType==="input"?(i(),E(Ye,{key:2,item:d,task:o.task},null,8,["item","task"])):C("",!0),d.itemType==="dropDown"?(i(),E(Je,{key:3,item:d,task:o.task},null,8,["item","task"])):C("",!0),d.itemType==="smallCamera"?(i(),E(We,{key:4,item:o.item,task:o.task},null,8,["item","task"])):C("",!0),o.item.itemType==="checkbox"?(i(),E(ze,{key:5,item:o.item,task:o.task},null,8,["item","task"])):C("",!0),d.itemType==="html"?(i(),E(Ge,{key:6,item:d,task:o.task},null,8,["item","task"])):C("",!0),o.item.itemType==="button"?(i(),E(Ke,{key:7,item:o.item,task:o.task},null,8,["item","task"])):C("",!0),o.item.itemType==="statusInfo"?(i(),E(Me,{key:8,item:o.item,task:o.task},null,8,["item","task"])):C("",!0)],2))),128))}}),Gs={class:"row w-100 mx-0 mb-5"},Ms={key:0,class:"col-1 px-2"},qs={class:"row text-center task-table__header py-2 w-100"},Fs=z({__name:"TableTask",props:{task:{type:Object,required:!0}},setup(o){const s=o,e=m(()=>s.task.header.replaceAll("'","").replace("[","").replace("]","").split(", ")),r=a=>{let c="";return!t.isUndefined(s.task.style)&&!t.isUndefined(s.task.style.borderBottom)&&s.task.style.borderBottom=="none"?c="":c="border-bottom-table",a+1==s.task.items.length&&(c="border-bottom-table"),c};return(a,c)=>(i(),$("div",Gs,[!O(t.isUndefined)(o.task.style)&&o.task.style.category=="taskTable"?(i(),$("div",Ms)):C("",!0),l("div",{class:q(["task-table",!O(t.isUndefined)(o.task.style)&&o.task.style.category=="taskTable"?"col-11 px-0":"col-12 pe-0"]),style:{"font-size":"12px !important"}},[l("label",null,L(o.task.description),1),l("div",qs,[(i(!0),$(X,null,ce(e.value,d=>(i(),$("div",{class:"col font-weight-normal task-table__header__item",key:d},L(d),1))),128))]),(i(!0),$(X,null,ce(o.task.items,(d,w)=>(i(),$("div",{key:d.key,class:q(["row w-100 task-table__body d-flex align-items-start",r(w)])},[G(Ls,{item:d,task:o.task},null,8,["item","task"])],2))),128))],2)]))}}),Xe=ye(Fs,[["__scopeId","data-v-aafb2782"]]),Hs={class:"row w-100 mt-3 mb-3"},Js={key:0,class:"col-1 px-2"},Ys={class:"small-hyperlink-text-style"},Ws=z({__name:"CollapsibleTableTask",props:{task:{type:Object,required:!0}},setup(o){const s=o,e=W("open"),r=m(()=>{let a="";return!t.isUndefined(s.task.style)&&!t.isUndefined(s.task.style.defaultCollapse)&&(a=s.task.style.defaultCollapse),a});return(a,c)=>{const d=oe("el-collapse-item"),w=oe("el-collapse");return i(),$("div",Hs,[!O(t.isUndefined)(o.task.style)&&o.task.style.collapseCategory=="taskTable"?(i(),$("div",Js)):C("",!0),l("div",{class:q(["task-table collapsible-table-container",!O(t.isUndefined)(o.task.style)&&o.task.style.collapseCategory=="taskTable"?"col-11 px-0":"col-12 pe-0"])},[G(w,{class:"task-group general-accordion py-1 px-5",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=g=>e.value=g)},{default:ee(()=>[G(d,{name:r.value},{title:ee(()=>[l("span",Ys,L(o.task.triggerCaption),1)]),default:ee(()=>[G(Xe,{task:o.task},null,8,["task"])]),_:1},8,["name"])]),_:1},8,["modelValue"])],2)])}}}),zs=z({__name:"TaskGroup",props:{taskGroup:{type:Object,required:!0}},setup(o){const s=o,e=ae(()=>s.taskGroup.key),r=fe();return _e(()=>{if(s.taskGroup.key=="MECHANICAL_SERVICE_SUSPENSION"){let a=[],c=[];r.pushDataToSuspensionCylinderStoredValue([]),r.updateStoredAdjustmentOptionValue(""),r.pushDataToAdjustedSuspensionCylinderStoredValue([]),s.taskGroup.task.forEach(d=>{d.items.forEach(w=>{w.categoryItemType=="suspensionTargetRating"&&a.push({key:w.key,value:w.value}),w.categoryItemType=="adjustmentSuspensionRating"&&c.push({key:w.key,value:w.value})}),t.isUndefined(d.showParameter)||d.showParameter=="suspensionCylinder"&&r.updateStoredAdjustmentOptionValue(d.taskValue)}),r.pushDataToAdjustedSuspensionCylinderStoredValue(c),r.pushDataToSuspensionCylinderStoredValue(a)}}),(a,c)=>{const d=oe("el-collapse-item"),w=oe("el-collapse");return i(),E(w,{modelValue:O(e),"onUpdate:modelValue":c[0]||(c[0]=g=>Ve(e)?e.value=g:null),class:"task-group e-form-only py-1 px-5 mb-3"},{default:ee(()=>[G(d,{title:o.taskGroup.name,name:o.taskGroup.key},{default:ee(()=>[(i(!0),$(X,null,ce(s.taskGroup.task,(g,S)=>(i(),$("div",{key:g.key,class:"ps-3 position-relative"},[g.taskType=="inline"?(i(),E(Es,{key:0,task:g,"task-index":S,"task-group":o.taskGroup.task},null,8,["task","task-index","task-group"])):C("",!0),g.taskType==="table"?(i(),E(Xe,{key:1,task:g},null,8,["task"])):C("",!0),g.taskType=="collapsibleTable"?(i(),E(Ws,{key:2,task:g},null,8,["task"])):C("",!0)]))),128))]),_:1},8,["title","name"])]),_:1},8,["modelValue"])}}}),Ks={class:"ps-0 mt-5"},Xs={class:"card"},Qs=z({__name:"SubGroup",props:{subGroup:{type:Object,required:!0}},setup(o){const s=o;return(e,r)=>(i(),$("div",Ks,[l("div",Xs,[(i(!0),$(X,null,ce(s.subGroup.taskGroup,a=>(i(),E(zs,{key:a.key,"task-group":a},null,8,["task-group"]))),128))])]))}}),Zs={key:0,class:"col-1 button"},eo={class:"row justify-content-start"},to={key:1,class:"col-1 button"},so={class:"row justify-content-end"},oo=z({__name:"Footer",setup(o){const s=fe(),e=async()=>{const d=be.service({lock:!0,text:"Loading the page",background:"rgba(0, 0, 0, 0.7)"});await s.setShowNextPage(),window.scrollTo({top:0,behavior:"smooth"}),d.close()},r=async()=>{const d=be.service({lock:!0,text:"Loading the page",background:"rgba(0, 0, 0, 0.7)"});await s.setShowPrevPage(),window.scrollTo({top:0,behavior:"smooth"}),d.close()},a=m(()=>!(s.stateGroups.findIndex(w=>{var g;return w.groupName==((g=s.stateSelectedGroup)==null?void 0:g.groupName)})+1>=s.groups.length)),c=m(()=>s.stateGroups.findIndex(w=>{var g;return w.groupName==((g=s.stateSelectedGroup)==null?void 0:g.groupName)})!=0);return(d,w)=>{const g=oe("el-button");return i(),$("div",{class:q(["row monitoring-status-footer mt-3",c.value&&a.value?"justify-content-between":a.value?"justify-content-end":"justify-content-start"])},[c.value?(i(),$("div",Zs,[l("div",eo,[G(g,{type:"success",onClick:r,style:{"background-color":"#18AF4A"}},{default:ee(()=>[me("Previous")]),_:1})])])):C("",!0),a.value?(i(),$("div",to,[l("div",so,[G(g,{type:"success",onClick:e,style:{"background-color":"#18AF4A"}},{default:ee(()=>[me("Next")]),_:1})])])):C("",!0)],2)}}}),Qe=o=>(ke("data-v-ca8a8457"),o=o(),ge(),o),ao={class:"row align-items-center pe-0"},lo={class:"mb-0 d-flex align-items-center"},ro=Qe(()=>l("em",{class:"fa fa-chevron-left"},null,-1)),no=[ro],io={key:0,class:"d-flex"},uo=Qe(()=>l("button",{type:"button",style:{visibility:"hidden"},class:"btn btn-link"},[l("em",{class:"fa fa-chevron-left"})],-1)),co={style:{"font-weight":"400",color:"gray"}},mo={key:0,class:"col-8 text-end title-form-detail p-0"},fo=z({__name:"BackNavigator",props:{title:{required:!0,type:String},formName:{required:!0,type:String},componentRouterPush:{required:!0,type:String},formStatus:{required:!1,type:String,default:""},percentageProgress:{required:!1,type:Number,default:0},approveHistory:{required:!1,type:String},defectStatus:{required:!1,type:String,default:""}},setup(o){const s=o;gt();const e=m(()=>{let d=!0;return s.approveHistory||(d=!1),s.defectStatus!="Completed"&&(d=!1),d}),r=m(()=>_t(s.formStatus,s.percentageProgress)),a=xe(),c=()=>{a.push({name:s.componentRouterPush})};return(d,w)=>(i(),$("div",ao,[l("div",{class:q(["px-0 mx-0",[o.formName?"col-4":"col"]])},[l("h1",lo,[o.componentRouterPush?(i(),$("button",{key:0,type:"button",class:"btn btn-link",onClick:c},no)):C("",!0),me(" "+L(o.title),1)]),e.value?(i(),$("div",io,[uo,l("h6",co,"Approved by "+L(o.approveHistory),1)])):C("",!0)],2),o.formName?(i(),$("div",mo,[r.value?(i(),$("span",{key:0,class:q(["status-badge p-1",O($t)(r.value)])},L(r.value),3)):C("",!0),me(" "+L(o.formName),1)])):C("",!0)]))}}),yo=ye(fo,[["__scopeId","data-v-ca8a8457"]]),po={class:"col-3 py-1 text-center"},vo={class:"col-3 py-1 text-center border-left"},bo={class:"col-3 py-1 text-center border-left"},ho={class:"col-3 py-1 text-center border-left"},ko=z({__name:"ServicePersonnel",props:["mechanic","mechanics"],setup(o){const s=o,e=ae(()=>{const r=t.last(s.mechanics);return t.isEqual(s.mechanic,r)?"":"table-body"});return(r,a)=>(i(),$("div",{class:q(["row service-labour",O(e)])},[l("div",po,L(o.mechanic.mechanic.name),1),l("div",vo,L(o.mechanic.shift),1),l("div",bo,L(o.mechanic.serviceStart),1),l("div",ho,L(o.mechanic.serviceEnd),1)],2))}}),de=o=>(ke("data-v-f61b45aa"),o=o(),ge(),o),go={class:"mt-5 ps-0"},_o=de(()=>l("h4",{class:"subtitle ps-3"},"Equipment Information",-1)),$o={class:"d-flex flex-row justify-content-between"},Uo={class:"p-2 d-flex flex-row flex-grow-1"},So={class:"d-flex w-100"},wo={class:"flex-fill"},Ro={class:"form-floating mb-3"},Co=["value"],Io=de(()=>l("label",null,"Unit Number",-1)),xo={class:"flex-fill ps-3"},Bo={class:"form-floating mb-3"},Po=["value"],No=de(()=>l("label",{for:"floatingInput"},"Serial Number",-1)),To={class:"flex-fill ps-3"},Vo={class:"form-floating mb-3"},jo=["value"],Ao=de(()=>l("label",{for:"floatingInput"},"Work Order",-1)),Do={class:"flex-fill ps-3"},Oo={class:"form-floating mb-3 position-relative"},Eo=["value"],Lo=de(()=>l("label",{for:"floatingInput2",class:"text-nowrap"},"Machine SMU",-1)),Go={key:0,class:"ms-2 position-absolute",style:{top:"2px",right:"0"}},Mo=de(()=>l("img",{src:nt,style:{width:"1.25rem",height:"1.25rem"}},null,-1)),qo=[Mo],Fo={key:0,class:"text-danger ps-2 font-weight-bold"},Ho={key:0,class:"ms-2"},Jo={class:"p-3 justify-items-center rounded",style:{background:"#18AF4A"}},Yo={key:0,class:"d-flex flex-row justify-content-end timestamp-task"},Wo={class:"d-flex flex-row justify-content-between"},zo={class:"p-2 d-flex flex-row flex-grow-1"},Ko={class:"d-flex w-100"},Xo={class:"flex-fill"},Qo={class:"form-floating mb-3"},Zo=["value"],ea=de(()=>l("label",{for:"floatingInput"},"Actual Service Start",-1)),ta={class:"flex-fill ps-3"},sa={class:"form-floating mb-3"},oa=["value"],aa=de(()=>l("label",{for:"floatingInput"},"Hour Meter Offset",-1)),la={class:"d-flex flex-row justify-content-between"},ra={class:"p-2 d-flex flex-row flex-grow-1"},na={class:"d-flex w-100"},ia={class:"flex-fill"},da={class:"form-floating mb-3"},ua=["value"],ca=de(()=>l("label",{for:"floatingInput"},"Actual Service Finish",-1)),ma=de(()=>l("h4",{class:"subtitle ps-3 service-labour"},"Service Labour Personnel",-1)),fa={class:"me-0 previous-crack-container word-breaker px-3 pt-0 ms-2"},ya=de(()=>l("div",{class:"row table-header-background-color p-2 border-bottom"},[l("div",{class:"col-3 text-center"},"Name"),l("div",{class:"col-3 text-center"},"Shift"),l("div",{class:"col-3 text-center"},"Start Date"),l("div",{class:"col-3 text-center"},"Finish Date")],-1)),pa=z({__name:"EquipmentInformation",props:{data:{required:!0,type:Object}},setup(o){const s=o,e=Vt(),r=Ee(),a=ct(),c=jt(),d=fe(),w=$e(),g=Ie(),S=W("Equipment Information"),p=W({name:"",id:""}),k=W(""),B=W(!1),U=m(()=>{var M;const T=(M=s.data)==null?void 0:M.imageEquipment;return t.isUndefined(T)?[]:T==""?[]:ve(T)}),P=W(!1),D=()=>{P.value=!0},F=()=>{P.value=!1},v=W({smu:""}),y=()=>{B.value=!0},n=m(()=>{const T=e.smuActual,M=e.smuTolerance;return Number(Number(T)+Number(M.min))}),h=m(()=>{const T=e.smuActual,M=e.smuTolerance;return Number(Number(T)+Number(M.max))}),N=m(()=>{var Z,te;let T=Se(t.cloneDeep((Z=s.data)==null?void 0:Z.smu));const M=Number(T)+Number(I.value)>=n.value,K=Number(T)+Number(I.value)<=h.value;let re=we.STATUS_NOT_IN_RANGE;return M&&K&&(re=we.STATUS_IN_RANGE),{title:we.TITLE(re),machineSMU:(te=s.data)==null?void 0:te.smu,minRange:n.value,maxRange:h.value,smuDue:e.smuActual,assetNumber:_.value.equipment,serialNumber:_.value.serialNumber,images:JSON.stringify(U.value),hmOffset:_.value.hmOffset,key:"",type:"",reason:""}}),A=m(()=>({id:s.data.id,workOrder:s.data.workOrder,form:s.data.form,smuDue:e.smuActual,equipment:s.data.equipment,serialNumber:_.value.serialNumber,imageEquipment:JSON.stringify(_.value.imageEquipment),localStatus:s.data.status})),V=m(()=>{const T=r.Ownership;return Ut(T)}),_=m(()=>s.data),I=m(()=>_.value.status=="Open"?"":t.isUndefined(_.value.hmOffset)||t.isNull(_.value.hmOffset||_.value.hmOffset=="")?"Not Applicable":_.value.hmOffset),f=xt.SMU_REVISE,R=m(()=>{const T=c.ImageObjects.find(M=>M.Id===f);return t.cloneDeep(T)}),b=m(()=>({isError:a.stateErrorMessage!="",messages:a.stateErrorMessage})),u=m(()=>{var T;return p.value.name?p.value:(T=s.data)==null?void 0:T.smuBy}),x=m(()=>{var T;return k.value!=""?k.value:(T=s.data)==null?void 0:T.smuDate}),j=()=>{a.resetErrorStatus()},H=()=>{c.toggleIsVisible(!0,f)},Y=()=>{c.reset()},Q=async T=>{const M=Se(T);k.value=Tt(),p.value={id:w.user.EmployeeId,name:w.user.Name},d.updateSMUONGeneral({value:M,smuBy:p.value,smuDate:k.value})},le=async T=>{const M=!T.newDetail.title.toLowerCase().includes("not");Q(T.newDetail.machineSMU),t.isEqual(U.value,JSON.parse(T.newDetail.images))||d.updateSMUImages(JSON.parse(T.newDetail.images)),await g.updateSMUDefect({val:Se(T.newDetail.machineSMU),hmOffset:String(_.value.hmOffset),range:{MinRange:n.value,MaxRange:h.value},smuDate:k.value,isInRange:M,employee:{id:w.user.EmployeeId,name:w.user.Name},generalData:A.value}),d.getTaskProgress(),T.callback()},ue=m(()=>{const T=St(),M=!t.isUndefined(_.value.smuBy)&&!t.isUndefined(_.value.smuDate),K=_.value.status=="Close"&&_.value.defectStatus=="Completed",re=_.value.statusHistory.filter(te=>te.status=="Completed");let Z=!1;if(re.length==1){const te=Bt(re[0].updatedDate);Z=Pt(void 0,Nt(te,3,"months","DD/MM/YY HH:mm:ss"))}return T&&M&&K&&Z});return(T,M)=>{const K=oe("el-collapse-item"),re=oe("el-collapse");return i(),$(X,null,[l("div",go,[G(re,{modelValue:S.value,"onUpdate:modelValue":M[0]||(M[0]=Z=>S.value=Z),class:"general-accordion task-group py-1 px-5 mb-3"},{default:ee(()=>[G(K,{name:"Equipment Information"},{title:ee(()=>[_o]),default:ee(()=>[l("div",$o,[l("div",Uo,[l("div",So,[l("div",wo,[l("div",Ro,[l("input",{type:"text",class:"form-control",disabled:"",value:_.value.equipment},null,8,Co),Io])]),l("div",xo,[l("div",Bo,[l("input",{type:"text",class:"form-control",disabled:"",value:_.value.serialNumber},null,8,Po),No])]),l("div",To,[l("div",Vo,[l("input",{type:"text",class:"form-control",disabled:"",value:_.value.workOrder},null,8,jo),Ao])]),l("div",Do,[l("div",Oo,[l("input",{type:"text",class:"form-control",placeholder:"Machine SMU",disabled:"",value:O(Le)(_.value.smu)},null,8,Eo),Lo,ue.value?(i(),$("div",Go,[l("button",{class:"btn p-4 justify-items-center rounded cursor-pointer svg-icon svg-icon-btech-primary-500",onClick:y},qo)])):C("",!0)]),v.value.smu?(i(),$("label",Fo,L(v.value.smu),1)):C("",!0)]),U.value.length>0?(i(),$("div",Ho,[l("div",Jo,[l("span",{style:{"font-weight":"700",color:"white"},onClick:D},"+"+L(U.value.length),1)])])):C("",!0)])])]),u.value&&x.value?(i(),$("div",Yo,L(u.value.name)+", "+L(x.value),1)):C("",!0),l("div",Wo,[l("div",zo,[l("div",Ko,[l("div",Xo,[l("div",Qo,[l("input",{type:"text",class:"form-control",disabled:"",value:_.value.serviceStart},null,8,Zo),ea])]),l("div",ta,[l("div",sa,[l("input",{type:"text",class:"form-control",disabled:"",value:I.value},null,8,oa),aa])])])])]),l("div",la,[l("div",ra,[l("div",na,[l("div",ia,[l("div",da,[l("input",{type:"text",class:"form-control",disabled:"",value:_.value.serviceEnd},null,8,ua),ca])])])])]),ma,l("div",fa,[ya,(i(!0),$(X,null,ce(_.value.servicePersonnels,Z=>(i(),E(ko,{key:Z.key,mechanic:Z,mechanics:_.value.servicePersonnels},null,8,["mechanic","mechanics"]))),128))])]),_:1})]),_:1},8,["modelValue"])]),G(wt,{images:U.value,visibility:P.value,onHandleClose:F},null,8,["images","visibility"]),G(It,{show:B.value,"onUpdate:show":M[1]||(M[1]=Z=>B.value=Z),detailDefect:N.value,ownership:V.value,"view-only":!1,"error-status":b.value,isFitter:!0,"cameras-image":R.value,onUpdateDefectDetailSMU:le,onRetakePhoto:H,onResetPhoto:Y,onResetErrorStatus:j},null,8,["show","detailDefect","ownership","error-status","cameras-image"])],64)}}}),va=ye(pa,[["__scopeId","data-v-f61b45aa"]]),ba=z({__name:"Index",props:{general:{required:!0,type:Object}},setup(o){const s=o,e=m(()=>s.general);return(r,a)=>(i(),$(X,null,[G(va,{data:e.value},null,8,["data"]),G(Rt,{data:e.value.safetyPrecaution},null,8,["data"]),G(Ct,{ready:!0,data:e.value.riskAssesment},null,8,["data"])],64))}}),ha={class:"row m-0 p-5 bg-white e-form-container interim-container"},ka=z({__name:"Index",props:{title:{type:String,required:!0},pageFrom:{type:String,required:!1,default:null},defectCloseFirst:{type:Boolean,required:!1,default:!1}},setup(o){const s=tt(),e=m(()=>!(d.stateGroups.findIndex(v=>{var y;return v.groupName==((y=d.stateSelectedGroup)==null?void 0:y.groupName)})+1>=d.groups.length)),r=m(()=>s.buttonEndOfGroup?!!e.value:!0),a=m(()=>d.percentageTaskProgressAllTab),c=o,d=fe();Ie();const w=Ee();He();const g=Oe(),S=At(),p=Dt(),k=xe(),B=m(()=>d.groups),U=m(()=>{var F;if(d.generalForm.defectStatus=="Completed")return`${(F=p.ApproveBy)==null?void 0:F.name}, ${p.ApproveDate}`}),P=m(()=>g.ViewVisible),D=m(()=>d.selectedSubGroups);return _e(()=>{const F=d.stateModelId=="",v=d.statePsTypeId=="",y=d.stateWorkOrder=="";(F||v||y)&&k.push({name:c.pageFrom}),S.updateSelectedWO(d.generalForm.workOrder,d.generalForm.modelId,d.generalForm.equipment,d.generalForm.psTypeId)}),Pe(async()=>{await w.getOwnershipDefectForm(S.SelectedDefectSheet.unitNumber),d.setSerialNumberGeneral(w.SerialNumber),await p.getDefectsData(S.SelectedDefectSheet.workOrder)}),st(()=>{d.resetPreview()}),(F,v)=>{var y;return i(),$(X,null,[l("div",ha,[G(yo,{title:o.title,formName:`${O(d).generalForm.form} (Ver. ${O(d).generalForm.version})`,"component-router-push":o.pageFrom,"form-status":O(d).generalForm.status,"percentage-progress":a.value,"approve-history":U.value,"defect-status":O(d).generalForm.defectStatus},null,8,["title","formName","component-router-push","form-status","percentage-progress","approve-history","defect-status"]),G(Mt,{groups:B.value},null,8,["groups"]),((y=O(d).selectedGroup)==null?void 0:y.groupName)=="General-interim"?(i(),E(ba,{key:0,general:O(d).generalForm},null,8,["general"])):(i(!0),$(X,{key:1},ce(D.value,n=>(i(),E(Qs,{key:n.key,subGroup:n},null,8,["subGroup"]))),128)),e.value?C("",!0):ot(F.$slots,"buttonEndOfGroup",{key:2},void 0,!0),r.value?(i(),E(oo,{key:3})):C("",!0)]),G(mt,{visibility:P.value},null,8,["visibility"]),G(it)],64)}}}),ga=ye(ka,[["__scopeId","data-v-cc9e9163"]]),_a=z({__name:"Index",props:["title"],setup(o){const s=fe(),e=xe(),r=m(()=>s.stateIsFormSelectedByOtherSupervisor),a=()=>{e.push({name:"ironforms"})};return(c,d)=>(i(),$(X,null,[G(ga,{title:o.title||"Interim Engine Service","defect-close-first":!0,"page-from":"monitoringstatus"},null,8,["title"]),G(Ot,{show:r.value,onClose:a},null,8,["show"])],64))}}),Zl=ye(_a,[["__scopeId","data-v-eb2db492"]]);export{Zl as default};
