import{u as wt}from"./useMenuStore-CD5Gmvif.js";import{b as Ee}from"./vue-router-iNp9kJ0K.js";import{a as Pt}from"./breadcrumb-BYmEOf4C.js";import{c as K,a as Y,s as W,J as Se,I as Ke,z as fe,A as Kt}from"./index-BuVmIl8K.js";import{P as je}from"./Pagination-D-xfdYmn.js";import{F as Lt}from"./FilterIconButton-Bj0WTbms.js";import{h as Rt,A as Mt,U as Gt}from"./excel-generator-DMHRo93s.js";import{D as xt}from"./DownloadIconButton-CIQp-YG7.js";import{r as te,k as ue,c as H,u as a,y as Te,p as h,aa as q,s as o,x as D,T as Qe,q as f,F as Le,Y as Re,R as B,A as pe,aB as k,C as w,P as Be,bd as Je,bb as We,a0 as Ie,a7 as Xe,$ as Ht,B as ae,L as $t}from"./@vue-BypzYtbH.js";import{_ as y,b as Ze}from"./element-plus-BeWdvTRa.js";import{P as Fe}from"./Pagination-BiobnanQ.js";import{d as Me}from"./pinia-BjOS2_Ao.js";import{b as et,m as P,a as be}from"./mapOption-CeGMwmH0.js";import{q as Q,w as L,x as Ve}from"./date-format-8-IvfSl3.js";import{c as Nt}from"./urls-DBLs_wGY.js";import{b as Bt}from"./urls-D--VoWL5.js";import{b as Vt}from"./urls-CuZgFKSv.js";import{c as zt}from"./urls-cnAouliv.js";import{L as Yt}from"./urls-ieoV4vRn.js";import{b as x,d as jt}from"./table-sort-Bpdq_Uwn.js";import{c as Ce,a as _,b as re,d as Ae}from"./yup-C6P98bvY.js";import"./property-expr-DEi1ZLzV.js";import{E as tt}from"./ErrorAlert-CMKGfwAi.js";import{_ as N}from"./AutoComplete.vue_vue_type_script_setup_true_lang-uWBVHGLX.js";import{_ as _e}from"./SelectInput.vue_vue_type_script_setup_true_lang-CILKiK7F.js";import{_ as Ue}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CCwjwK39.js";import{_ as at}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{_ as Oe}from"./SwitchInput.vue_vue_type_script_setup_true_lang-BosisL7w.js";import{_ as ee}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as Ge}from"./nw-img-vue-CR837WER.js";import{a as Qt}from"./vee-validate-C_msoaAA.js";import{e as Pe}from"./lodash-DrHMlsdo.js";import{_ as Jt}from"./FileDropZone.vue_vue_type_style_index_0_lang-C5PyimC7.js";import{m as Wt}from"./map-anything-abi6NY2Z.js";import{_ as z}from"./AutoComplete.vue_vue_type_style_index_0_lang-BZwsseAx.js";import{_ as ze}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-CJ7rJST9.js";import{F as Xt}from"./file-saver-CwTBvle_.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./cron-De-pTz2b.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./PageEnum-DUtfSNQS.js";import"./xlsx-C4maHrMm.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-NSxIV7Fb.js";import"./vue3-dropzone-_NG5IwbJ.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";import"./attr-accept-DLIfoYC7.js";const ie="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_recommended_action",Zt=`${ie}`,ea=`${ie}/recommended_action_bulk`,ta=`${ie}/validate_upload`,aa=`${ie}/export`,oa=`${ie}/lookup`,sa=`${ie}/recommended_action`,na=`${ie}/recommended_action/update`,ra=`${ie}/lookup_intervention_code`,ia="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_type_task/lookup_transaction",la="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_cbm/lookup",ua="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/uom/lookup_transaction",da="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/maintenance_strategy/lookup",ca="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_reference_document/lookup_transaction",we={equipmentModel:"",equipmentModelTo:"",component:"",componentTo:"",parameterTo:"",parameterToTo:"",interventionCode:"",interventionCodeTo:"",recAction:"",recActionTo:"",sampleStatus:"",sampleStatusTo:"",sequence:"",sequenceTo:"",subTask:"",subTaskTo:"",isUom:"",isUomTo:"",referenceDocument:"",referenceDocumentTo:"",isAutoFill:"",isAutoFillTo:"",psType:"",psTypeTo:"",taskGroupKey:"",taskGroupKeyTo:"",taskKey:"",taskKeyTo:"",typeTask:"",typeTaskTo:"",uom:"",uomTo:"",startDate:"",startDateTo:"",endDate:"",endDateTo:"",ver:"v1",page:1,pageSize:10,order:""},xe=Me({id:"recommendedActionList",state:()=>({stateFilterData:{...we},stateLastUsedFilterData:{...we},statePageName:"recommendedAction",stateDisplayData:[],statePagination:new Fe,stateLoading:!1,statePaginationLoading:!1,stateInterventionCodeOption:[],stateEquipmentModelOption:[],stateComponentOption:[],stateInterventionReasonOption:[],stateReActionOption:[],stateSampleStatusOption:[],stateSequenceOption:[],stateSubtaskOption:[],stateIsUomOption:[],stateUomOption:[],stateReferenceDocumentOption:[],stateTypeTaskOption:[],stateAutoFillOption:[],statePsTypeOption:[],stateTaskGroupKeyOption:[],stateTaskKeyOption:[],stateParameterToOption:[],stateOptionTrueFalse:[{value:"",label:"All"},{value:"true",label:"True"},{value:"false",label:"False"}]}),getters:{pageName:e=>e.statePageName,pagination:e=>e.statePagination,displayData:e=>e.stateDisplayData,filterData:e=>e.stateFilterData,lastUsedFilterData:e=>e.stateLastUsedFilterData,loading:e=>e.stateLoading,paginationLoading:e=>e.statePaginationLoading,interventionCodeOption:e=>e.stateInterventionCodeOption,equipmentModelOption:e=>e.stateEquipmentModelOption,componentOption:e=>e.stateComponentOption,interventionReasonOption:e=>e.stateInterventionReasonOption,reActionOption:e=>e.stateReActionOption,sampleStatusOption:e=>e.stateSampleStatusOption,sequenceOption:e=>e.stateSequenceOption,subtaskOption:e=>e.stateSubtaskOption,isUomOption:e=>e.stateIsUomOption,uomOption:e=>e.stateUomOption,referenceDocumentOption:e=>e.stateReferenceDocumentOption,typeTaskOption:e=>e.stateTypeTaskOption,autoFillOption:e=>e.stateAutoFillOption,psTypeOption:e=>e.statePsTypeOption,taskGroupKeyOption:e=>e.stateTaskGroupKeyOption,taskKeyOption:e=>e.stateTaskKeyOption,parameterToOption:e=>e.stateParameterToOption},actions:{async getData(e=!0){const r={interventionCode:this.stateFilterData.interventionCode,interventionCodeTo:this.stateFilterData.interventionCodeTo,equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,recAction:this.stateFilterData.recAction,recActionTo:this.stateFilterData.recActionTo,sampleStatus:this.stateFilterData.sampleStatus,sampleStatusTo:this.stateFilterData.sampleStatusTo,sequence:this.stateFilterData.sequence,sequenceTo:this.stateFilterData.sequenceTo,subTask:this.stateFilterData.subTask,subTaskTo:this.stateFilterData.subTaskTo,isUom:this.stateFilterData.isUom,isAutoFill:this.stateFilterData.isAutoFill,uom:this.stateFilterData.uom,uomTo:this.stateFilterData.uomTo,referenceDocument:this.stateFilterData.referenceDocument,referenceDocumentTo:this.stateFilterData.referenceDocumentTo,typeTask:this.stateFilterData.typeTask,typeTaskTo:this.stateFilterData.typeTaskTo,psType:this.stateFilterData.psType,psTypeTo:this.stateFilterData.psTypeTo,taskGroupKey:this.stateFilterData.taskGroupKey,taskGroupKeyTo:this.stateFilterData.taskGroupKeyTo,taskKey:this.stateFilterData.taskKey,taskKeyTo:this.stateFilterData.taskKeyTo,parameterTo:this.stateFilterData.parameterTo,parameterToTo:this.stateFilterData.parameterToTo,startDate:this.stateFilterData.startDate?Q(L(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?Q(L(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?Q(L(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?Q(L(new Date(this.stateFilterData.endDateTo))):"",page:this.stateFilterData.page.toString(),pageSize:this.stateFilterData.pageSize.toString(),order:this.stateFilterData.order,ver:this.stateFilterData.ver};try{e&&(this.stateLoading=!0),e||(this.stateDisplayData=[]);const t=await K.get(Zt,"recommended_action",new URLSearchParams(r).toString());this.stateDisplayData=t.data.result.content,this.setTotalPage(t.data.result.total),this.stateLastUsedFilterData={...this.stateFilterData}}catch(t){t.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",t),console.log(t)}this.stateLoading=!1},async getLookup(){const e={ver:this.stateFilterData.ver};try{const r=await K.get(oa,"",new URLSearchParams(e).toString());this.stateEquipmentModelOption=et(r.data.result.content.equipmentModel,"equipmentModel","brand","equipmentModelDescription"),this.stateInterventionCodeOption=P(r.data.result.content.interventionCode),this.stateComponentOption=be(r.data.result.content.component,"component","componentDescription"),this.stateReActionOption=P(r.data.result.content.recAction),this.stateSampleStatusOption=be(r.data.result.content.sampleStatus,"ratingDescription",["rating","ratingDescription"],!1),this.stateSequenceOption=P(r.data.result.content.sequence),this.stateSubtaskOption=P(r.data.result.content.subTask),this.stateTypeTaskOption=P(r.data.result.content.typeTask),this.stateIsUomOption=this.stateOptionTrueFalse,this.stateAutoFillOption=this.stateOptionTrueFalse,this.statePsTypeOption=P(r.data.result.content.psType),this.stateTaskGroupKeyOption=P(r.data.result.content.taskGroupKey),this.stateTaskKeyOption=P(r.data.result.content.taskKey),this.stateParameterToOption=P(r.data.result.content.parameterTo),this.stateUomOption=P(r.data.result.content.uom),this.stateReferenceDocumentOption=P(r.data.result.content.referenceDocument)}catch(r){r.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",r),console.log(r)}},async export(){const e={interventionCode:this.stateFilterData.interventionCode,interventionCodeTo:this.stateFilterData.interventionCodeTo,equipmentModel:this.stateFilterData.equipmentModel,equipmentModelTo:this.stateFilterData.equipmentModelTo,component:this.stateFilterData.component,componentTo:this.stateFilterData.componentTo,recAction:this.stateFilterData.recAction,recActionTo:this.stateFilterData.recActionTo,sampleStatus:this.stateFilterData.sampleStatus,sampleStatusTo:this.stateFilterData.sampleStatusTo,sequence:this.stateFilterData.sequence,sequenceTo:this.stateFilterData.sequenceTo,subTask:this.stateFilterData.subTask,subTaskTo:this.stateFilterData.subTaskTo,isUom:this.stateFilterData.isUom,isAutoFill:this.stateFilterData.isAutoFill,uom:this.stateFilterData.uom,uomTo:this.stateFilterData.uomTo,referenceDocument:this.stateFilterData.referenceDocument,referenceDocumentTo:this.stateFilterData.referenceDocumentTo,typeTask:this.stateFilterData.typeTask,typeTaskTo:this.stateFilterData.typeTaskTo,psType:this.stateFilterData.psType,psTypeTo:this.stateFilterData.psTypeTo,taskGroupKey:this.stateFilterData.taskGroupKey,taskGroupKeyTo:this.stateFilterData.taskGroupKeyTo,taskKey:this.stateFilterData.taskKey,taskKeyTo:this.stateFilterData.taskKeyTo,parameterTo:this.stateFilterData.parameterTo,parameterToTo:this.stateFilterData.parameterToTo,startDate:this.stateFilterData.startDate?Q(L(new Date(this.stateFilterData.startDate))):"",startDateTo:this.stateFilterData.startDateTo?Q(L(new Date(this.stateFilterData.startDateTo))):"",endDate:this.stateFilterData.endDate?Q(L(new Date(this.stateFilterData.endDate))):"",endDateTo:this.stateFilterData.endDateTo?Q(L(new Date(this.stateFilterData.endDateTo))):"",order:this.stateFilterData.order,ver:this.stateFilterData.ver,Gmt:new Date().toTimeString().slice(12,17)};try{return(await K.getBlob(aa,"",new URLSearchParams(e).toString())).data}catch(r){W("IRONS",r),console.log(r)}},setTotalPage(e){this.pagination.totalPage=e,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(e){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(e),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:e,order:r}){if(!e&&!r)this.stateFilterData.order="";else{const t=r=="ascending"?"asc":"desc";this.stateFilterData.order=`${e}_${t}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.page=this.statePagination.currentPage,await this.getData(!1)},setInterventionCode(e){this.stateFilterData.interventionCode=e},setInterventionCodeTo(e){this.stateFilterData.interventionCodeTo=e},setEquipmentModel(e){this.stateFilterData.equipmentModel=e},setEquipmentModelTo(e){this.stateFilterData.equipmentModelTo=e},setComponent(e){this.stateFilterData.component=e},setComponentTo(e){this.stateFilterData.componentTo=e},setReAction(e){this.stateFilterData.recAction=e},setReActionTo(e){this.stateFilterData.recActionTo=e},setSampleStatus(e){this.stateFilterData.sampleStatus=e},setSampleStatusTo(e){this.stateFilterData.sampleStatusTo=e},setSequence(e){this.stateFilterData.sequence=e},setSequenceTo(e){this.stateFilterData.sequenceTo=e},setSubtask(e){this.stateFilterData.subTask=e},setSubtaskTo(e){this.stateFilterData.subTaskTo=e},setUom(e){this.stateFilterData.uom=e},setUomTo(e){this.stateFilterData.uomTo=e},setReferenceDocument(e){this.stateFilterData.referenceDocument=e},setReferenceDocumentTo(e){this.stateFilterData.referenceDocumentTo=e},setIsUom(e){this.stateFilterData.isUom=e},setAutoFill(e){this.stateFilterData.isAutoFill=e},setTypeTask(e){this.stateFilterData.typeTask=e},setTypeTaskTo(e){this.stateFilterData.typeTaskTo=e},setPsType(e){this.stateFilterData.psType=e},setPsTypeTo(e){this.stateFilterData.psTypeTo=e},setTaskGroupKey(e){this.stateFilterData.taskGroupKey=e},setTaskGroupKeyTo(e){this.stateFilterData.taskGroupKeyTo=e},setTaskKey(e){this.stateFilterData.taskKey=e},setTaskKeyTo(e){this.stateFilterData.taskKeyTo=e},setParameterTo(e){this.stateFilterData.parameterTo=e},setParameterToTo(e){this.stateFilterData.parameterToTo=e},setStartDate(e){this.stateFilterData.startDate=e},setStartDateTo(e){this.stateFilterData.startDateTo=e},setEndDate(e){this.stateFilterData.endDate=e},setEndDateTo(e){this.stateFilterData.endDateTo=e},async resetFilter(){this.stateFilterData.interventionCode="",this.stateFilterData.interventionCodeTo="",this.stateFilterData.equipmentModel="",this.stateFilterData.equipmentModelTo="",this.stateFilterData.component="",this.stateFilterData.componentTo="",this.stateFilterData.recAction="",this.stateFilterData.recActionTo="",this.stateFilterData.sampleStatus="",this.stateFilterData.sampleStatusTo="",this.stateFilterData.sequence="",this.stateFilterData.sequenceTo="",this.stateFilterData.subTask="",this.stateFilterData.subTaskTo="",this.stateFilterData.isUom="",this.stateFilterData.isAutoFill="",this.stateFilterData.typeTask="",this.stateFilterData.typeTaskTo="",this.stateFilterData.psType="",this.stateFilterData.psTypeTo="",this.stateFilterData.taskGroupKey="",this.stateFilterData.taskGroupKeyTo="",this.stateFilterData.taskKey="",this.stateFilterData.taskKeyTo="",this.stateFilterData.uom="",this.stateFilterData.uomTo="",this.stateFilterData.parameterTo="",this.stateFilterData.parameterToTo="",this.stateFilterData.startDate="",this.stateFilterData.startDateTo="",this.stateFilterData.endDate="",this.stateFilterData.endDateTo="";const e=this.stateLastUsedFilterData.interventionCode!=="",r=this.stateLastUsedFilterData.interventionCodeTo!=="",t=this.stateLastUsedFilterData.equipmentModel!=="",v=this.stateLastUsedFilterData.equipmentModelTo!=="",n=this.stateLastUsedFilterData.component!=="",p=this.stateLastUsedFilterData.componentTo!=="",d=this.stateLastUsedFilterData.recAction!=="",s=this.stateLastUsedFilterData.recActionTo!=="",F=this.stateLastUsedFilterData.sampleStatus!=="",C=this.stateLastUsedFilterData.sampleStatusTo!=="",b=this.stateLastUsedFilterData.sequence!=="",U=this.stateLastUsedFilterData.sequenceTo!=="",E=this.stateLastUsedFilterData.subTask!=="",R=this.stateLastUsedFilterData.subTaskTo!=="",u=this.stateLastUsedFilterData.isUom!=="",$=this.stateLastUsedFilterData.typeTask!=="",S=this.stateLastUsedFilterData.typeTaskTo!=="",A=this.stateLastUsedFilterData.psType!=="",l=this.stateLastUsedFilterData.psTypeTo!=="",j=this.stateLastUsedFilterData.taskGroupKey!=="",O=this.stateLastUsedFilterData.taskGroupKeyTo!=="",M=this.stateLastUsedFilterData.taskKey!=="",X=this.stateLastUsedFilterData.taskKeyTo!=="",oe=this.stateLastUsedFilterData.parameterTo!=="",se=this.stateLastUsedFilterData.parameterToTo!=="",I=this.stateLastUsedFilterData.uom!=="",T=this.stateLastUsedFilterData.uomTo!=="",V=this.stateLastUsedFilterData.startDate!=="",J=this.stateLastUsedFilterData.startDateTo!=="",Z=this.stateLastUsedFilterData.endDate!=="",c=this.stateLastUsedFilterData.endDateTo!=="",g=this.stateLastUsedFilterData.isAutoFill!=="";(e||r||t||v||n||p||d||A||l||j||I||T||O||M||X||oe||se||s||F||C||b||U||E||R||u||$||S||V||J||Z||c||g)&&await this.getData()},resetState(){this.stateFilterData={...we},this.stateDisplayData=[],this.statePagination=new Fe,this.stateLoading=!1,this.statePaginationLoading=!1}}}),Ye={recommendedActionId:0,cbmType:"",equipmentModel:"",component:"",parameterTo:"",interventionCode:"",recAction:"",sampleStatus:"",sampleStatusId:"",sequence:"",subTask:"",isAutoFill:!0,isUom:!0,uom:"",referenceDocument:"",psType:"",taskGroupKey:"",taskKey:"",typeTask:"",startDate:L(new Date),endDate:L(new Date("12/31/9999"))},He=Me({id:"recommendedActionForm",state:()=>({stateFormData:{...Ye},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1,stateInterventionCodeOption:[],stateEquipmentModelOption:[],stateComponentOption:[],stateInterventionReasonOption:[],stateSampleStatusOption:[],stateTypeTaskOption:[],stateCbmTypeOption:[],statePsTypeOption:[],stateTaskGroupKeyOption:[],stateTaskKeyOption:[],stateParameterToOption:[],stateUomOption:[],stateReferenceDocumentOption:[],stateIsEdit:!1}),getters:{formData:e=>e.stateFormData,error:e=>e.stateError,errors:e=>e.stateErrors,isError:e=>e.stateIsError,loading:e=>e.stateLoading,interventionCodeOption:e=>e.stateInterventionCodeOption,equipmentModelOption:e=>e.stateEquipmentModelOption,componentOption:e=>e.stateComponentOption,interventionReasonOption:e=>e.stateInterventionReasonOption,sampleStatusOption:e=>e.stateSampleStatusOption,typeTaskOption:e=>e.stateTypeTaskOption,cbmTypeOption:e=>e.stateCbmTypeOption,psTypeOption:e=>e.statePsTypeOption,taskGroupKeyOption:e=>e.stateTaskGroupKeyOption,taskKeyOption:e=>e.stateTaskKeyOption,parameterToOption:e=>e.stateParameterToOption,uomOption:e=>e.stateUomOption,referenceDocumentOption:e=>e.stateReferenceDocumentOption,isEdit:e=>e.stateIsEdit},actions:{setIsEdit(e){this.stateIsEdit=e},async getLookup(){const e={ver:"v1"};try{const r=await K.get(Nt,"",new URLSearchParams(e).toString()),t=await K.get(Bt,"",new URLSearchParams(e).toString()),v=await K.get(Vt,"",new URLSearchParams(e).toString()),n=await K.get(ia,"",new URLSearchParams(e).toString()),p=await K.get(zt,"",new URLSearchParams(e).toString()),d=await K.get(da,"",new URLSearchParams(e).toString()),s=await K.get(ua,"",new URLSearchParams(e).toString()),F=await K.get(ca,"",new URLSearchParams(e).toString());this.stateComponentOption=be(t.data.result.content,"component","componentDescription"),this.stateEquipmentModelOption=et(r.data.result.content,"equipmentModel","brand","equipmentModelDescription"),this.stateSampleStatusOption=be(v.data.result.content,"rating","ratingDescription"),this.stateTypeTaskOption=P(n.data.result.content.typeTask),this.stateCbmTypeOption=P(p.data.result.content.type),this.statePsTypeOption=P(d.data.result.content.budgetLife),this.stateUomOption=P(s.data.result.content.uom),this.stateReferenceDocumentOption=P(F.data.result.content.referenceDocument)}catch(r){r.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",r),console.log(r)}},async getLookupParameterTo(e){const r={cbmType:e,ver:"v1"};try{const t=await K.get(Yt,"",new URLSearchParams(r).toString());this.stateParameterToOption=P(t.data.result.content.parameterTo)}catch(t){t.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",t),console.log(t)}},async getLookupInterventionCode(e,r,t){const v={equipmentModel:e,component:r,parameterTo:t,ver:"v1"};try{const n=await K.get(ra,"",new URLSearchParams(v).toString());return this.stateFormData.interventionCode=n.data.result.content.interventionCode,{interventionCode:n.data.result.content.interventionCode}}catch(n){n.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",n),console.log(n)}},async getLookupTaskGroupAndKey(e,r,t){const v={equipmentModel:e,component:r,parameterTo:t,ver:"v1"};try{const n=await K.get(la,"",new URLSearchParams(v).toString());return this.stateTaskKeyOption=P(n.data.result.content.task_key),this.stateTaskGroupKeyOption=P(n.data.result.content.taskgroup_key),n.data.result.content.taskgroup_key.length===1&&(this.stateFormData.taskGroupKey=n.data.result.content.taskgroup_key[0]),n.data.result.content.task_key.length===1&&(this.stateFormData.taskKey=n.data.result.content.task_key[0]),{taskGroupKey:n.data.result.content.taskgroup_key,taskKey:n.data.result.content.task_key}}catch(n){n.response.data.statusCode==401&&Y().setLoggedIn(!1),W("IRONS",n),console.log(n)}},async insertData(e){try{this.stateLoading=!0;const r={userAccount:e,ver:"v1"},t={recommendedActionId:0,interventionCode:this.stateFormData.interventionCode,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,recAction:this.stateFormData.recAction,sampleStatus:this.stateFormData.sampleStatus,sequence:this.stateFormData.sequence,subTask:this.stateFormData.subTask,isUom:this.stateFormData.isUom,isAutoFill:this.stateFormData.isAutoFill,typeTask:this.stateFormData.typeTask,cbmType:this.stateFormData.cbmType,psType:this.stateFormData.psType,taskGroupKey:this.stateFormData.taskGroupKey,taskKey:this.stateFormData.taskKey,parameterTo:this.stateFormData.parameterTo,uom:this.stateFormData.uom,referenceDocument:this.stateFormData.referenceDocument,startDate:Q(L(new Date(this.stateFormData.startDate))),endDate:Q(L(new Date(this.stateFormData.endDate)))},v=await K.post(`${sa}?${new URLSearchParams(r).toString()}`,t);v.data.title==="Error"?(this.stateErrors.push(v.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(r){r.response.data.statusCode==401&&Y().setLoggedIn(!1),this.stateError=r,this.stateErrors.push(r.response.data.result.message),this.stateIsError=!0,W("IRONS",r)}this.stateLoading=!1},async updateData(e){try{this.stateLoading=!0;const r={userAccount:e,ver:"v1"},t={recommendedActionId:this.stateFormData.recommendedActionId,interventionCode:this.stateFormData.interventionCode,equipmentModel:this.stateFormData.equipmentModel,component:this.stateFormData.component,recAction:this.stateFormData.recAction,sampleStatus:this.stateFormData.sampleStatus,sequence:this.stateFormData.sequence,subTask:this.stateFormData.subTask,isUom:this.stateFormData.isUom,isAutoFill:this.stateFormData.isAutoFill,typeTask:this.stateFormData.typeTask,psType:this.stateFormData.psType,taskGroupKey:this.stateFormData.taskGroupKey,taskKey:this.stateFormData.taskKey,uom:this.stateFormData.uom,referenceDocument:this.stateFormData.referenceDocument,startDate:Q(L(new Date(this.stateFormData.startDate))),endDate:Q(L(new Date(this.stateFormData.endDate)))},v=await K.post(`${na}?${new URLSearchParams(r).toString()}`,t);v.data.title==="Error"?(this.stateErrors.push(v.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(r){r.response.data.statusCode==401&&Y().setLoggedIn(!1),this.stateError=r,this.stateErrors.push(r.response.data.result.message),this.stateIsError=!0,W("IRONS",r)}this.stateLoading=!1},setErrors(e){this.stateErrors=e,this.stateIsError=this.stateErrors.length>0},setFormData(e){this.stateFormData.recommendedActionId=e.recommendedActionId,this.stateFormData.interventionCode=e.interventionCode,this.stateFormData.equipmentModel=e.equipmentModel,this.stateFormData.component=e.component,this.stateFormData.recAction=e.recAction,this.stateFormData.sampleStatus=e.sampleStatus,this.stateFormData.sequence=e.sequence,this.stateFormData.subTask=e.subTask,this.stateFormData.isUom=e.isUom,this.stateFormData.isAutoFill=e.isAutoFill,this.stateFormData.typeTask=e.typeTask,this.stateFormData.cbmType=e.cbmType,this.stateFormData.psType=e.psType,this.stateFormData.taskGroupKey=e.taskGroupKey,this.stateFormData.taskKey=e.taskKey,this.stateFormData.parameterTo=e.parameterTo,this.stateFormData.uom=e.uom,this.stateFormData.referenceDocument=e.referenceDocument,this.stateFormData.startDate=e.startDate,this.stateFormData.endDate=e.endDate},setFormDataDuplicate(e){this.stateFormData.recommendedActionId=e.recommendedActionId,this.stateFormData.interventionCode=e.interventionCode,this.stateFormData.equipmentModel=e.equipmentModel,this.stateFormData.component=e.component,this.stateFormData.recAction=e.recAction,this.stateFormData.sampleStatus=e.sampleStatus,this.stateFormData.sequence=e.sequence,this.stateFormData.subTask=e.subTask,this.stateFormData.isUom=e.isUom,this.stateFormData.isAutoFill=e.isAutoFill,this.stateFormData.typeTask=e.typeTask,this.stateFormData.psType=e.psType,this.stateFormData.taskGroupKey=e.taskGroupKey,this.stateFormData.taskKey=e.taskKey,this.stateFormData.uom=e.uom,this.stateFormData.referenceDocument=e.referenceDocument,this.stateFormData.startDate=e.startDate,this.stateFormData.endDate=e.endDate},resetState(){this.stateFormData={...Ye},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1}}});function ot(){const e=te(1);return{stateCondition:e,calStateCondition:t=>{switch(t.toLowerCase()){case"vims":case"vhms":case"eqp":e.value=1;break;case"oil data":e.value=2;break;case"filter cut":case"mag plug":case"iron forms cbm":e.value=3;break;default:e.value=1;break}}}}const pa=e=>(Je("data-v-d431a388"),e=e(),We(),e),ma={key:0,style:{height:"100px"}},ha={key:1},Da={key:1},Ta={key:1},ya={key:1},va={key:1},ka={key:1},ga={key:1},fa={key:1},Sa={key:1},Fa={key:1},ba={key:1},Ca={key:1},Aa={key:0,class:"d-flex align-items-center"},_a=pa(()=>k("span",{class:"mx-1 w-20"},"to",-1)),Ua={key:1,class:"row justify-content-center"},Oa={key:0,class:"d-flex justify-content-end"},Ia=["disabled","onClick"],qa=["onClick"],Ea={key:1,class:"d-flex"},wa=ue({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog","fetch-data","duplicateData"],setup(e,{emit:r}){const{stateCondition:t,calStateCondition:v}=ot(),n=e,p=Y(),d=xe(),s=He(),F=r,C=H(()=>(n.page-1)*10+1),b=te(""),U=I=>{b.value=I.order;const T={prop:I.prop,order:I.order};d.setSort(T)},E=H({get:()=>E.value,set:I=>{E.value=I}}),R=te({recommendedActionId:0,cbmType:"",equipmentModel:"",component:"",parameterTo:"",interventionCode:"",recAction:"",sampleStatus:"",sampleStatusId:"",sequence:"",subTask:"",isUom:!1,isAutoFill:!1,psType:"",taskGroupKey:"",taskKey:"",uom:"",referenceDocument:"",typeTask:"",startDate:L(new Date),endDate:L(new Date("12/31/9999"))}),u=te({recommendedActionId:0,cbmType:"",equipmentModel:"",component:"",parameterTo:"",interventionCode:"",recAction:"",sampleStatus:"",sampleStatusId:"",sequence:"",subTask:"",isUom:!1,isAutoFill:!1,psType:"",taskGroupKey:"",taskKey:"",typeTask:"",uom:"",referenceDocument:"",startDate:L(new Date),endDate:L(new Date("12/31/9999"))}),$=async I=>{s.resetState(),u.value={...I},await s.getLookupTaskGroupAndKey(u.value.equipmentModel,u.value.component,"")},S=H(()=>s.isEdit),A=()=>{O(),s.resetState(),setTimeout(()=>{u.value=Object.assign({},R.value)},300),s.setIsEdit(!1)},l=Ce().shape({interventionCode:_().required("Intervention Code is mandatory"),recAction:_().required("Rec Action is mandatory"),sampleStatus:_().required("Sample Status is mandatory"),sequence:_().required("Sequence is mandatory"),referenceDocument:_().required("Reference Document is mandatory"),startDate:re().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:re().required("End Date is mandatory").min(Ae("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),j=Ce().shape({interventionCode:_().required("Intervention Code is mandatory"),recAction:_().required("Rec Action is mandatory"),sampleStatus:_().required("Sample Status is mandatory"),sequence:_().required("Sequence is mandatory"),referenceDocument:_().required("Reference Document is mandatory"),startDate:re().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:re().required("End Date is mandatory").min(Ae("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),O=()=>{s.setErrors([])},M=H(()=>s.isError),X=H(()=>s.errors),oe=async()=>{s.setIsEdit(!0),O();let I=l;switch(t.value){case 1:I=l;break;case 2:case 3:I=j;break;default:I=l;break}await I.validate(u.value,{abortEarly:!1}).catch(T=>{s.setErrors(T.errors),window&&window.scrollTo(0,0)}),!M.value&&Se("Are you sure you want to submit ?").then(async T=>{T.isConfirmed&&(s.setFormData(u.value),s.updateData(p.user.Name).then(()=>{s.isError||Ke("Form has been successfully submitted!","Ok").then(()=>{A(),F("fetch-data",null)})}))})},se=async I=>{s.setFormDataDuplicate(I),F("duplicateData",!0)};return(I,T)=>{const V=B("inline-svg"),J=B("el-tooltip"),Z=Re("loading");return a(d).loading?Te((h(),q("div",ma,null,512)),[[Z,a(d).loading]]):(h(),q(Le,{key:1},[o(Qe,{name:"fade"},{default:D(()=>[M.value&&S.value?(h(),f(tt,{key:0,errorMessages:X.value,onResetForm:O},null,8,["errorMessages"])):pe("",!0)]),_:1}),Te((h(),f(a(Ze),{data:n.listData,style:{width:"100%"},onSortChange:U,"empty-text":"No Data"},{default:D(()=>[o(a(y),{label:"No",width:"90",align:"center"},{default:D(c=>[k("span",null,w(C.value+c.$index),1)]),_:1}),o(a(y),{prop:"equipmentModel",label:"Equipment Model","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[k("span",null,w(c.equipmentModel),1)]),_:1},8,["sort-method"]),o(a(y),{prop:"component",label:"Component","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[k("span",null,w(c.component),1)]),_:1},8,["sort-method"]),o(a(y),{prop:"interventionCode",label:"Intervention Code","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[k("span",null,w(c.interventionCode),1)]),_:1},8,["sort-method"]),o(a(y),{prop:"sampleStatus",label:"Sample Status","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(N,{key:0,value:u.value.sampleStatus,placeholder:"Add Sample Status",name:"SampleStatus",onHandleChange:T[0]||(T[0]=g=>u.value.sampleStatus=g),options:a(s).sampleStatusOption},null,8,["value","options"])):(h(),q("span",ha,w(c.sampleStatus),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"sequence",label:"Sequence","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(at,{key:0,value:u.value.sequence,margin:!1,placeholder:"Add Sequence",name:"Sequence",max:20,onHandleChange:T[1]||(T[1]=g=>u.value.sequence=g)},null,8,["value"])):(h(),q("span",Da,w(c.sequence),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"subTask",label:"Sub Task","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(ee,{key:0,value:u.value.subTask,margin:!1,placeholder:"Add Sub Task",name:"Subtask",onHandleChange:T[2]||(T[2]=g=>u.value.subTask=g)},null,8,["value"])):(h(),q("span",Ta,w(c.subTask),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"recAction",label:"Rec Action","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(ee,{key:0,value:u.value.recAction,margin:!1,placeholder:"Add Rec Action",name:"RecAction",onHandleChange:T[3]||(T[3]=g=>u.value.recAction=g)},null,8,["value"])):(h(),q("span",ya,w(c.recAction),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"isAutoFill",label:"Auto Fill","min-width":"100",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(Oe,{key:0,value:u.value.isAutoFill,name:"AutoFill",onHandleChange:T[4]||(T[4]=g=>u.value.isAutoFill=g)},null,8,["value"])):(h(),q("span",va,w(c.isAutoFill),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"isUom",label:"Is Uom","min-width":"100",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(Oe,{key:0,value:u.value.isUom,name:"isUom",onHandleChange:T[5]||(T[5]=g=>u.value.isUom=g)},null,8,["value"])):(h(),q("span",ka,w(c.isUom),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"uom",label:"Uom","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(N,{key:0,value:u.value.uom,margin:!1,placeholder:"Add Uom",name:"uom",onHandleChange:T[6]||(T[6]=g=>u.value.uom=g),options:a(s).uomOption},null,8,["value","options"])):(h(),q("span",ga,w(c.uom),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"referenceDocument",label:"Reference Document","min-width":"190",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(_e,{key:0,value:u.value.referenceDocument,margin:!1,placeholder:"Add Reference Document",name:"referenceDocument",onHandleChange:T[7]||(T[7]=g=>u.value.referenceDocument=g),options:a(s).referenceDocumentOption},null,8,["value","options"])):(h(),q("span",fa,w(c.referenceDocument),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"psType",label:"Ps Type","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(N,{key:0,value:u.value.psType,margin:!1,placeholder:"Add Ps Type",name:"PsType",onHandleChange:T[8]||(T[8]=g=>u.value.psType=g),options:a(s).psTypeOption},null,8,["value","options"])):(h(),q("span",Sa,w(c.psType),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"taskGroupKey",label:"Task Group Key","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(ee,{key:0,value:u.value.taskGroupKey,margin:!1,placeholder:"Add Task Group Key",name:"taskGroupKey",onHandleChange:T[9]||(T[9]=g=>u.value.taskGroupKey=g)},null,8,["value"])):(h(),q("span",Fa,w(c.taskGroupKey),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"taskKey",label:"Task Key","min-width":"170",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(ee,{key:0,value:u.value.taskKey,margin:!1,placeholder:"Add Task Key",name:"taskKey",onHandleChange:T[10]||(T[10]=g=>u.value.taskKey=g)},null,8,["value"])):(h(),q("span",ba,w(c.taskKey),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"typeTask",label:"Type Task","min-width":"230",sortable:"","sort-method":()=>a(x)(b.value)},{default:D(({row:c})=>[c.recommendedActionId===u.value.recommendedActionId?(h(),f(N,{key:0,value:u.value.typeTask,margin:!1,placeholder:"Add Type Task",name:"TypeTask",onHandleChange:T[11]||(T[11]=g=>u.value.typeTask=g),options:a(s).typeTaskOption},null,8,["value","options"])):(h(),q("span",Ca,w(c.typeTask),1))]),_:1},8,["sort-method"]),o(a(y),{prop:"isActive",label:"Is Active",width:u.value.recommendedActionId!=0?350:100,sortable:"",align:"center"},{default:D(c=>[c.row.recommendedActionId===u.value.recommendedActionId?(h(),q("div",Aa,[o(Ue,{value:u.value.startDate,placeholder:"Add Start Date",name:"StartDate",onHandleChange:T[12]||(T[12]=g=>u.value.startDate=g)},null,8,["value"]),_a,o(Ue,{value:u.value.endDate,placeholder:"Add End Date",name:"EndDate",onHandleChange:T[13]||(T[13]=g=>u.value.endDate=g)},null,8,["value"])])):(h(),q("div",Ua,[c.row.isActive?(h(),f(V,{key:0,src:"/media/svg/tables/rows/check.svg"})):(h(),f(V,{key:1,src:"/media/svg/tables/rows/minus.svg"}))]))]),_:1},8,["width"]),o(a(y),{label:"",width:"80"},{default:D(c=>[c.row.recommendedActionId!==u.value.recommendedActionId?(h(),q("div",Oa,[o(J,{class:"box-item",effect:"dark",content:c.row.isActive?"Edit":"Inactive data cannot be edited",placement:"top"},{default:D(()=>[k("div",null,[k("button",{disabled:!c.row.isActive,class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:g=>$(c.row)},[o(V,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Ia)])]),_:2},1032,["content"]),o(J,{class:"box-item",effect:"dark",content:"Add new data based on table rows",placement:"top"},{default:D(()=>[k("div",null,[k("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:g=>se(c.row)},[o(V,{src:"/media/svg/tables/rows/paste-icon-button-blue.svg",width:"12",height:"12"})],8,qa)])]),_:2},1024)])):(h(),q("div",Ea,[o(J,{class:"box-item",effect:"dark",content:"Save",placement:"top"},{default:D(()=>[k("button",{class:"btn btn-sm btn-icon btn-bg-light me-3",onClick:Be(oe,["prevent"])},[o(V,{src:"/media/svg/tables/rows/save.svg",width:"12",height:"12"})])]),_:1}),o(J,{class:"box-item",effect:"dark",content:"Cancel",placement:"top"},{default:D(()=>[k("button",{class:"btn btn-sm btn-icon btn-bg-light",onClick:Be(A,["prevent"])},[o(V,{src:"/media/svg/tables/rows/valid-false.svg",width:"12",height:"12"})])]),_:1})]))]),_:1})]),_:1},8,["data"])),[[Z,a(d).loading]])],64))}}}),Pa=Ge(wa,[["__scopeId","data-v-d431a388"]]),Ka={class:"form-label fs-6 fw-bolder text-dark"},La=ue({__name:"ComponentTo",props:{value:{required:!0,type:String},valueCheckbox:{required:!0,type:Boolean,default:!1},gridClass:{required:!1,type:String,default:""},name:{required:!0,type:String},label:{required:!1,type:String},placeholder:{required:!1,type:String,default:"Type any.."},options:{required:!0,type:Array},isDisabled:{required:!1,type:Boolean,default:!1}},emits:["handleChange","handleChangeCheckbox"],setup(e,{emit:r}){const t=e,v=r,n=Ie(t,"options"),p=te([]),d=H(()=>t.value),s=H({get:()=>t.valueCheckbox,set:U=>{v("handleChangeCheckbox",U)}});Xe(()=>{p.value=t.options});const F=U=>{v("handleChange",U),setTimeout(()=>{p.value=Pe.uniqBy(t.options,"label")},20)},C=U=>{U?setTimeout(()=>{const E=n.value.filter(R=>R.label.toString().toLowerCase().includes(U.toLowerCase()));p.value=Pe.uniqBy(E,"label")},200):p.value=[]},b=()=>{p.value=[]};return(U,E)=>{const R=B("el-option"),u=B("el-select"),$=B("el-col"),S=B("el-checkbox"),A=B("el-row");return h(),q("div",null,[o(A,{gutter:20,class:"centered-input"},{default:D(()=>[o($,{span:17},{default:D(()=>[k("label",Ka,w(e.label),1),o(u,{modelValue:d.value,"onUpdate:modelValue":E[0]||(E[0]=l=>d.value=l),class:"w-100",placeholder:e.placeholder,clearable:"",filterable:"",disabled:e.isDisabled,remote:"","remote-method":C,onChange:F,onFocus:b,"hide-loading":"true"},{default:D(()=>[(h(!0),q(Le,null,Ht(p.value,l=>(h(),f(R,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1}),o($,{span:7},{default:D(()=>[o(S,{class:"is-bordered",modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=l=>s.value=l),label:"Checkbox",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})])}}}),Ra=Ge(La,[["__scopeId","data-v-35553c89"]]),Ma={class:"col-md-6 fv-row fv-plugins-icon-container"},Ga={class:"col-md-6 fv-row fv-plugins-icon-container"},xa={class:"dialog-footer"},Ha=ue({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(e,{emit:r}){const t=e,v=r,n=He(),p=Y(),d=Ie(t,"visibility"),s=H(()=>n.formData),F=te(!1),{stateCondition:C,calStateCondition:b}=ot(),U=H(()=>n.errors),E=H(()=>n.isError),R=H(()=>s.value.equipmentModel&&s.value.component&&(s.value.parameterTo||C.value!==1&&F.value)),u=Ce().shape({interventionCode:_().nullable().required("Intervention Code is mandatory"),equipmentModel:_().required("Equipment Model is mandatory"),component:_().required("Component is mandatory"),recAction:_().required("Rec Action is mandatory"),sampleStatus:_().required("Sample Status is mandatory"),sequence:_().required("Sequence is mandatory"),referenceDocument:_().required("Reference Document is mandatory"),cbmType:_().required("CBM Type is mandatory"),parameterTo:_().required("Parameter To is mandatory"),startDate:re().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:re().required("End Date is mandatory").min(Ae("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),$=Ce().shape({interventionCode:_().nullable().required("Intervention Code is mandatory"),equipmentModel:_().required("Equipment Model is mandatory"),component:_().required("Component is mandatory"),recAction:_().required("Rec Action is mandatory"),referenceDocument:_().required("Reference Document is mandatory"),sampleStatus:_().required("Sample Status is mandatory"),sequence:_().required("Sequence is mandatory"),cbmType:_().required("CBM Type is mandatory"),startDate:re().required("Start Date is mandatory").typeError("Start Date is mandatory"),endDate:re().required("End Date is mandatory").min(Ae("startDate"),"End date must be later than start date").typeError("End date must be later than start date")}),S=()=>{j(""),O(""),M(""),X(""),oe(""),se(""),I(""),T(""),J(!0),Z(""),V(!0),g(""),ve(""),ke(""),de(""),ye(""),me(""),he("")},A=(m=!1)=>{De(),S(),n.resetState(),v("handle-close",m)},l=async m=>{F.value=m,s.value.parameterTo="",s.value.interventionCode="",await n.getLookupTaskGroupAndKey(s.value.equipmentModel,s.value.component,s.value.parameterTo)},j=m=>{s.value.interventionCode=m},O=async m=>{if(s.value.equipmentModel=m,m){if(R.value){const G=C.value===1?s.value.equipmentModel:"";await n.getLookupInterventionCode(G,s.value.component,s.value.parameterTo)}await n.getLookupTaskGroupAndKey(s.value.equipmentModel,s.value.component,s.value.parameterTo)}},M=async m=>{if(s.value.component=m,m){if(R.value){const G=C.value===1?s.value.equipmentModel:"";await n.getLookupInterventionCode(G,s.value.component,s.value.parameterTo)}await n.getLookupTaskGroupAndKey(s.value.equipmentModel,s.value.component,s.value.parameterTo)}},X=async m=>{s.value.cbmType=m,s.value.parameterTo="",b(m),m&&await n.getLookupParameterTo(m)},oe=m=>{s.value.recAction=m},se=m=>{s.value.sampleStatus=m},I=m=>{s.value.sequence=m},T=m=>{s.value.subTask=m},V=m=>{s.value.isAutoFill=m},J=m=>{s.value.isUom=m},Z=m=>{s.value.uom=m},c=m=>{s.value.referenceDocument=m},g=m=>{s.value.typeTask=m},de=async m=>{if(s.value.parameterTo=m,m){if(R.value){const G=C.value===1?s.value.equipmentModel:"";await n.getLookupInterventionCode(G,s.value.component,s.value.parameterTo)}await n.getLookupTaskGroupAndKey(s.value.equipmentModel,s.value.component,s.value.parameterTo)}},ye=m=>{s.value.psType=m},me=m=>{s.value.taskGroupKey=m},he=m=>{s.value.taskKey=m},ve=m=>{s.value.startDate=m},ke=m=>{s.value.endDate=m},qe=async()=>{De();let m=u;switch(C.value){case 1:m=u;break;case 2:case 3:m=$,F.value||de("");break;default:m=u;break}await m.validate(s.value,{abortEarly:!1}).catch(G=>{n.setErrors(G.errors)}),!E.value&&Se("Are you sure you want to submit ?").then(async G=>{G.isConfirmed&&n.insertData(p.user.Name).then(()=>{n.isError||Ke("Form has been successfully submitted!","Ok").then(()=>{A(!0)})})})},De=()=>{n.setErrors([])};return(m,G)=>{const i=B("el-button"),ne=B("el-dialog"),le=Re("loading");return Te((h(),f(ne,{modelValue:d.value,"onUpdate:modelValue":G[0]||(G[0]=ce=>d.value=ce),title:"New Data",width:"40%",onClose:G[1]||(G[1]=ce=>A())},{footer:D(()=>[k("span",xa,[o(i,{type:"primary",onClick:qe,disabled:a(n).loading},{default:D(()=>[ae("Submit")]),_:1},8,["disabled"]),o(i,{type:"secondary",onClick:A,disabled:a(n).loading},{default:D(()=>[ae("Close")]),_:1},8,["disabled"])])]),default:D(()=>[o(Qe,{name:"fade"},{default:D(()=>[E.value?(h(),f(tt,{key:0,errorMessages:U.value,onResetForm:De},null,8,["errorMessages"])):pe("",!0)]),_:1}),Te((h(),f(a(Qt),{class:"row g-9 my-4"},{default:D(()=>[o(N,{value:s.value.cbmType,placeholder:"Add CBM Type",label:"CBM Type",name:"cbmType",onHandleChange:X,options:a(n).cbmTypeOption},null,8,["value","options"]),o(N,{value:s.value.equipmentModel,placeholder:"Add Equipment Model",label:"Equipment Model",name:"EquipmentModel",onHandleChange:O,options:a(n).equipmentModelOption},null,8,["value","options"]),o(N,{value:s.value.component,placeholder:"Add Component",label:"Component",name:"Component",onHandleChange:M,options:a(n).componentOption},null,8,["value","options"]),a(C)===1?(h(),f(N,{key:0,value:s.value.parameterTo,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",options:a(n).parameterToOption,onHandleChange:de},null,8,["value","options"])):pe("",!0),a(C)===2||a(C)===3?(h(),f(Ra,{key:1,isDisabled:!F.value,value:s.value.parameterTo,"value-checkbox":F.value,margin:!1,placeholder:"Add Parameter To",label:"Parameter To",name:"parameterTo",options:a(n).parameterToOption,onHandleChange:de,onHandleChangeCheckbox:l},null,8,["isDisabled","value","value-checkbox","options"])):pe("",!0),o(ee,{value:s.value.interventionCode,margin:!1,placeholder:"Add Intervention Code",label:"Intervention Code",name:"InterventionCode",onHandleChange:j},null,8,["value"]),o(N,{value:s.value.sampleStatus,placeholder:"Add Sample Status",label:"Sample Status",name:"SampleStatus",onHandleChange:se,options:a(n).sampleStatusOption},null,8,["value","options"]),o(at,{value:s.value.sequence,margin:!1,placeholder:"Add Sequence",label:"Sequence",name:"Sequence",onHandleChange:I},null,8,["value"]),o(ee,{value:s.value.subTask,margin:!1,placeholder:"Add Sub Task",label:"Subtask",name:"Subtask",onHandleChange:T},null,8,["value"]),o(ee,{value:s.value.recAction,margin:!1,placeholder:"Add Rec Action",label:"Rec Action",name:"RecAction",max:1e3,onHandleChange:oe},null,8,["value"]),o(Oe,{value:s.value.isAutoFill,label:"Auto Fill",name:"AutoFill",onHandleChange:V},null,8,["value"]),o(Oe,{value:s.value.isUom,label:"Is Uom",name:"isUom",onHandleChange:J},null,8,["value"]),o(N,{value:s.value.uom,margin:!1,placeholder:"Add Uom",label:"uom",name:"uom",onHandleChange:Z,options:a(n).uomOption},null,8,["value","options"]),o(_e,{value:s.value.referenceDocument,margin:!1,placeholder:"Add Reference Document",label:"Reference Document",name:"referenceDocument",onHandleChange:c,options:a(n).referenceDocumentOption},null,8,["value","options"]),o(N,{value:s.value.psType,margin:!1,placeholder:"Add Ps Type",label:"Ps Type",name:"PsType",onHandleChange:ye,options:a(n).statePsTypeOption},null,8,["value","options"]),a(n).taskGroupKeyOption.length>0?(h(),f(N,{key:2,value:s.value.taskGroupKey,margin:!1,placeholder:"Add Task Group Key",label:"Task Group Key",name:"taskGroupKey",options:a(n).taskGroupKeyOption,onHandleChange:me},null,8,["value","options"])):(h(),f(ee,{key:3,value:s.value.taskGroupKey,margin:!1,placeholder:"Add Task Group Key",label:"Task Group Key",name:"taskGroupKey",onHandleChange:me},null,8,["value"])),a(n).taskKeyOption.length>0?(h(),f(N,{key:4,value:s.value.taskKey,margin:!1,placeholder:"Add Task Key",label:"Task Key",name:"taskKey",options:a(n).taskKeyOption,onHandleChange:he},null,8,["value","options"])):(h(),f(ee,{key:5,value:s.value.taskKey,margin:!1,placeholder:"Add Task Key",label:"Task Key",name:"taskKey",onHandleChange:he},null,8,["value"])),o(N,{value:s.value.typeTask,margin:!1,placeholder:"Add Type Task",label:"Type Task",name:"TypeTask",onHandleChange:g,options:a(n).typeTaskOption},null,8,["value","options"]),k("div",Ma,[o(Ue,{value:s.value.startDate,placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:ve},null,8,["value"])]),k("div",Ga,[o(Ue,{value:s.value.endDate,placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:ke},null,8,["value"])])]),_:1})),[[le,a(n).loading]])]),_:1},8,["modelValue"])),[[le,a(n).loading]])}}}),$e=Me({id:"recommendedAction",state:()=>({statePagination:new Fe,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:e=>e.stateValidatedData,displayData:e=>e.stateDisplayData,pagination:e=>e.statePagination,bulkData:e=>e.stateBulkData,error:e=>e.stateError,isError:e=>e.stateIsError,loading:e=>e.stateLoading,uploadLoading:e=>e.stateUploadLoading,isUploaded:e=>e.stateIsUploaded},actions:{async bulkInsert(e){const r={userAccount:e,ver:"v1"};try{this.stateLoading=!0;const t=await K.post(`${ea}?${new URLSearchParams(r).toString()}`,this.stateBulkData);this.stateError=t.data.result.isError?t.data.result.message:"",this.stateIsError=t.data.result.isError}catch(t){t.response.data.statusCode==401&&Y().setLoggedIn(!1),console.log(t),this.stateIsError=!0,this.stateError=t.response.data.result.isError?t.response.data.result.message:"",W("IRONS",t)}this.stateLoading=!1},async upload({userAccount:e,excelFile:r}){const t={userAccount:e,ver:"v1"},v=`${ta}?${new URLSearchParams(t).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const n=await K.postImages(v,r);n.data.statusCode==200?n.data.result.isError?(this.stateIsError=!0,this.stateError=n.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=n.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Pe.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=n.data.result.isError,this.stateError=n.data.result.message)}catch(n){n.response.data.statusCode==401&&Y().setLoggedIn(!1),console.log(n),this.stateIsError=!0,this.stateError=n.response.data.result.message,W("IRONS",n)}this.stateUploadLoading=!1},setTotalPage(e){this.pagination.totalPage=e},setDisplayData(){let e=[...this.stateValidatedData];this.stateIsSort&&(e=e.sort(jt(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=e.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(e){this.statePagination.handleCurrentPageChange(e),this.setDisplayData()},setSort(e){this.stateIsSort=e.prop!==null,this.stateSortBy=e.prop,this.stateSortOrder=e.order,this.setPage(1)},setBulkData(e){this.stateBulkData=e},setIsUploadedState(e){this.stateIsUploaded=e},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new Fe,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),$a={class:"icon"},Na=ue({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(e){const r=e,t=$e(),v=H(()=>(r.page-1)*10+1),n=p=>{const d={prop:p.prop,order:p.order};t.setSort(d)};return(p,d)=>{const s=B("inline-svg");return h(),f(a(Ze),{data:r.listData,style:{width:"100%"},onSortChange:n,"empty-text":"No Data"},{default:D(()=>[o(a(y),{label:"No",width:"60",align:"center"},{default:D(F=>[k("span",null,w(v.value+F.$index),1)]),_:1}),o(a(y),{prop:"cbmType",label:"CBM Type",width:"170",sortable:""}),o(a(y),{prop:"equipmentModel",label:"Equipment Model",width:"170",sortable:""}),o(a(y),{prop:"component",label:"Component",width:"170",sortable:""}),o(a(y),{prop:"parameterTo",label:"Parameter To",width:"170",sortable:""}),o(a(y),{prop:"interventionCode",label:"Intervention Code",width:"170",sortable:""}),o(a(y),{prop:"sampleStatus",label:"Sample Status",width:"170",sortable:""}),o(a(y),{prop:"sequence",label:"Sequence",width:"170",sortable:""}),o(a(y),{prop:"subTask",label:"Sub Task",width:"170",sortable:""}),o(a(y),{prop:"recAction",label:"Rec Action",width:"170",sortable:""}),o(a(y),{prop:"isAutoFill",label:"Auto Fill",width:"100",sortable:""}),o(a(y),{prop:"isUom",label:"Is Uom",width:"100",sortable:""}),o(a(y),{prop:"uom",label:"Uom",width:"170",sortable:""}),o(a(y),{prop:"referenceDocument",label:"Reference Document",width:"170",sortable:""}),o(a(y),{prop:"psType",label:"Ps Type",width:"170",sortable:""}),o(a(y),{prop:"taskGroupKey",label:"Task Group Key",width:"170",sortable:""}),o(a(y),{prop:"taskKey",label:"Task Key",width:"170",sortable:""}),o(a(y),{prop:"typeTask",label:"Type Task",width:"170",sortable:""}),o(a(y),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:D(F=>[k("span",null,w(a(Ve)(F.row.startDate)),1)]),_:1}),o(a(y),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:D(F=>[k("span",null,w(a(Ve)(F.row.endDate)),1)]),_:1}),o(a(y),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),o(a(y),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:D(F=>[k("div",$a,[o(s,{src:F.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),Ne=e=>(Je("data-v-84130fc2"),e=e(),We(),e),Ba=Ne(()=>k("div",{class:"text-center"},null,-1)),Va=Ne(()=>k("div",{class:"mb-3"},[k("span",null,[ae(" Download template "),k("a",{href:"documents/MasterDataInterventionChecks.xlsx",target:"_blank",id:"link-download"},"here"),ae(" before uploading file ")])],-1)),za=Ne(()=>k("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[k("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),Ya={class:"card"},ja={class:"card-body grid-padding"},Qa={class:"dialog-footer"},Ja=ue({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(e,{emit:r}){const t=e,v=r,n=Y(),p=$e(),d=Ie(t,"visibility"),s=()=>{const S=Wt(p.validatedData,A=>{const l=A;return{recommendedActionId:0,cbmType:l.cbmType,interventionCode:l.interventionCode,equipmentModel:l.equipmentModel,component:l.component,recAction:l.recAction,sampleStatus:l.sampleStatus,sequence:l.sequence,subTask:l.subTask,isAutoFill:l.isAutoFill,isUom:l.isUom,uom:l.uom,referenceDocument:l.referenceDocument,typeTask:l.typeTask,psType:l.psType,taskGroupKey:l.taskGroupKey,taskKey:l.taskKey,parameterTo:l.parameterTo,startDate:l.startDate,endDate:l.endDate}});return Object.values(S)},F=()=>{const S=document.getElementById("link-download");S&&S.click()},C=()=>{p.validatedData.length>0?Se("Cancel Upload Data?","Confirm").then(A=>{A.isConfirmed&&U()}):U()},b=async S=>{await p.upload({userAccount:n.user.Name,excelFile:S}),p.stateError&&fe(p.error)},U=(S=!1)=>{p.resetState(),v("handle-close",S)},E=S=>{p.setIsUploadedState(S)},R=S=>{p.setPage(S)},u=()=>{if(p.validatedData.length<1){F();return}const S=["CBM TYPE","EQUIPMENT MODEL","COMPONENT","PARAMETER TO","INTERVENTION CODE","SAMPLE STATUS","SEQUENCE","SUB TASK","REC ACTION","AUTO FILL","IS UOM","UOM","REFERENCE DOCUMENT","PS TYPE","TASK GROUP KEY","TASK KEY","TYPE TASK","START DATE","END DATE","REMARK","STATUS"],A=p.validatedData.map(l=>({cbmType:l.cbmType,equipmentModel:l.equipmentModel,component:l.component,parameterTo:l.parameterTo,interventionCode:l.interventionCode,sampleStatus:l.sampleStatus,sequence:l.sequence,subTask:l.subTask,recAction:l.recAction,isAutoFill:l.isAutoFill,isUom:l.isUom,uom:l.uom,referenceDocument:l.referenceDocument,psType:l.psType,taskGroupKey:l.taskGroupKey,taskKey:l.taskKey,typeTask:l.typeTask,startDate:l.startDate,endDate:l.endDate,remark:l.validationReason,status:l.isValid?"OK":"Error"}));Rt("InterventionChecks",S,A)},$=async()=>{if(p.displayData.length<1){fe("There is no data to submit");return}if(p.isError){fe("There is still invalid row(s)");return}Se("Are you sure you want to submit ?").then(async S=>{if(S.isConfirmed){const A=s();if(p.setBulkData(A),await p.bulkInsert(n.user.Name),p.isError){fe(p.stateError);return}Ke("Form has been successfully submitted!","Ok").then(()=>{U(!0)})}})};return(S,A)=>{const l=B("el-button"),j=B("el-dialog"),O=Re("loading");return h(),f(j,{title:"Upload Bulk Data",modelValue:d.value,"onUpdate:modelValue":A[1]||(A[1]=M=>d.value=M),"before-close":C,width:"70%","custom-class":"upload-modal"},{footer:D(()=>[k("div",null,[k("span",Qa,[o(l,{type:"success",onClick:u},{default:D(()=>[ae("Download")]),_:1}),o(l,{type:"primary",onClick:$},{default:D(()=>[ae("Upload")]),_:1}),o(l,{type:"success",onClick:C},{default:D(()=>[ae("Cancel")]),_:1})])])]),default:D(()=>[Ba,Va,Te(o(Jt,{isSubmissionUploadSuccess:a(p).isUploaded,onHandleCloseUploadedFile:C,onHandleUpload:b,onHandleSetIsExcelFileUploaded:E},null,8,["isSubmissionUploadSuccess"]),[[O,a(p).uploadLoading]]),za,k("div",Ya,[k("div",ja,[o(Na,{"list-data":a(p).displayData,page:a(p).pagination.currentPage},null,8,["list-data","page"])])]),a(p).displayData.length>0?(h(),f(je,{key:0,onRaisePageChange:A[0]||(A[0]=M=>R(M)),currentPage:a(p).pagination.currentPage,totalPage:a(p).pagination.totalPage,totalPageSize:a(p).pagination.totalPageSize,startPaginationIndex:a(p).pagination.startPaginationIndex,endPaginationIndex:a(p).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):pe("",!0)]),_:1},8,["modelValue"])}}}),Wa=Ge(Ja,[["__scopeId","data-v-84130fc2"]]),Xa={class:"row g-9 my-4"},Za={class:"dialog-footer"},eo=ue({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(e,{emit:r}){const t=xe(),v=e,n=r,p=Ie(v,"visibility"),d=H(()=>t.filterData),s=()=>{F(),t.resetFilter()},F=()=>{n("handle-close",!1)},C=i=>{t.setInterventionCode(i)},b=i=>{t.setInterventionCodeTo(i)},U=i=>{t.setEquipmentModel(i)},E=i=>{t.setEquipmentModelTo(i)},R=i=>{t.setComponent(i)},u=i=>{t.setComponentTo(i)},$=i=>{t.setReAction(i)},S=i=>{t.setReActionTo(i)},A=i=>{t.setSampleStatus(i)},l=i=>{t.setSampleStatusTo(i)},j=i=>{t.setSequence(i)},O=i=>{t.setSequenceTo(i)},M=i=>{t.setSubtask(i)},X=i=>{t.setSubtaskTo(i)},oe=i=>{t.setIsUom(i)},se=i=>{t.setUom(i)},I=i=>{t.setUomTo(i)},T=i=>{t.setAutoFill(i)},V=i=>{t.setTypeTask(i)},J=i=>{t.setTypeTaskTo(i)},Z=i=>{t.setPsType(i)},c=i=>{t.setPsTypeTo(i)},g=i=>{t.setTaskGroupKey(i)},de=i=>{t.setTaskGroupKeyTo(i)},ye=i=>{t.setTaskKey(i)},me=i=>{t.setTaskKeyTo(i)},he=i=>{t.setReferenceDocument(i)},ve=i=>{t.setReferenceDocumentTo(i)},ke=i=>{t.setStartDate(i)},qe=i=>{t.setStartDateTo(i)},De=i=>{t.setEndDate(i)},m=i=>{t.setEndDateTo(i)},G=()=>{const i=t.lastUsedFilterData.interventionCode!==t.filterData.interventionCode,ne=t.lastUsedFilterData.interventionCodeTo!==t.filterData.interventionCodeTo,le=t.lastUsedFilterData.equipmentModel!==t.filterData.equipmentModel,ce=t.lastUsedFilterData.equipmentModelTo!==t.filterData.equipmentModelTo,ge=t.lastUsedFilterData.component!==t.filterData.component,st=t.lastUsedFilterData.componentTo!==t.filterData.componentTo,nt=t.lastUsedFilterData.recAction!==t.filterData.recAction,rt=t.lastUsedFilterData.recActionTo!==t.filterData.recActionTo,it=t.lastUsedFilterData.sampleStatus!==t.filterData.sampleStatus,lt=t.lastUsedFilterData.sampleStatusTo!==t.filterData.sampleStatusTo,ut=t.lastUsedFilterData.sequence!==t.filterData.sequence,dt=t.lastUsedFilterData.sequenceTo!==t.filterData.sequenceTo,ct=t.lastUsedFilterData.subTask!==t.filterData.subTask,pt=t.lastUsedFilterData.subTaskTo!==t.filterData.subTaskTo,mt=t.lastUsedFilterData.isUom!==t.filterData.isUom,ht=t.lastUsedFilterData.isAutoFill!==t.filterData.isAutoFill,Dt=t.lastUsedFilterData.typeTask!==t.filterData.typeTask,Tt=t.lastUsedFilterData.typeTaskTo!==t.filterData.typeTaskTo,yt=t.lastUsedFilterData.psType!==t.filterData.psType,vt=t.lastUsedFilterData.psTypeTo!==t.filterData.psTypeTo,kt=t.lastUsedFilterData.taskGroupKey!==t.filterData.taskGroupKey,gt=t.lastUsedFilterData.taskGroupKeyTo!==t.filterData.taskGroupKeyTo,ft=t.lastUsedFilterData.taskKey!==t.filterData.taskKey,St=t.lastUsedFilterData.taskKeyTo!==t.filterData.taskKeyTo,Ft=t.lastUsedFilterData.parameterTo!==t.filterData.parameterTo,bt=t.lastUsedFilterData.parameterToTo!==t.filterData.parameterToTo,Ct=t.lastUsedFilterData.uom!==t.filterData.uom,At=t.lastUsedFilterData.uomTo!==t.filterData.uomTo,_t=t.lastUsedFilterData.referenceDocument!==t.filterData.referenceDocument,Ut=t.lastUsedFilterData.referenceDocumentTo!==t.filterData.referenceDocumentTo,Ot=t.lastUsedFilterData.startDate!==t.filterData.startDate,It=t.lastUsedFilterData.startDateTo!==t.filterData.startDateTo,qt=t.lastUsedFilterData.endDate!==t.filterData.endDate,Et=t.lastUsedFilterData.endDateTo!==t.filterData.endDateTo;n("handle-close",i||ne||le||ce||ge||st||nt||At||mt||yt||vt||kt||gt||ft||St||Ft||bt||rt||it||lt||ut||dt||ct||pt||Dt||Tt||_t||Ut||Ct||Ot||It||qt||Et||ht)};return(i,ne)=>{const le=B("el-button"),ce=B("el-dialog");return h(),f(ce,{modelValue:p.value,"onUpdate:modelValue":ne[0]||(ne[0]=ge=>p.value=ge),title:"Filter",width:"60%",onClose:ne[1]||(ne[1]=ge=>F())},{footer:D(()=>[k("span",Za,[o(le,{type:"secondary",onClick:s},{default:D(()=>[ae("Reset")]),_:1}),o(le,{type:"primary",onClick:G},{default:D(()=>[ae("Filter")]),_:1})])]),default:D(()=>[k("div",Xa,[o(z,{"value-from":d.value.equipmentModel,"value-to":d.value.equipmentModelTo,label:"Equipment Model",name:"EquipmentModel",options:a(t).equipmentModelOption,onHandleChangeFrom:U,onHandleChangeTo:E},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.component,"value-to":d.value.componentTo,label:"Component",name:"Component",options:a(t).componentOption,onHandleChangeFrom:R,onHandleChangeTo:u},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.interventionCode,"value-to":d.value.interventionCodeTo,label:"Intervention Code",name:"InterventionCode",options:a(t).interventionCodeOption,onHandleChangeFrom:C,onHandleChangeTo:b},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.sampleStatus,"value-to":d.value.sampleStatusTo,label:"Sample Status",name:"SampleStatus",options:a(t).sampleStatusOption,onHandleChangeFrom:A,onHandleChangeTo:l},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.sequence,"value-to":d.value.sequenceTo,label:"Sequence",name:"Sequence",options:a(t).sequenceOption,onHandleChangeFrom:j,onHandleChangeTo:O},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.subTask,"value-to":d.value.subTaskTo,label:"Subtask",name:"Subtask",options:a(t).subtaskOption,onHandleChangeFrom:M,onHandleChangeTo:X},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.recAction,"value-to":d.value.recActionTo,label:"Rec Action",name:"RecAction",options:a(t).reActionOption,onHandleChangeFrom:$,onHandleChangeTo:S},null,8,["value-from","value-to","options"]),o(_e,{value:d.value.isAutoFill,label:"Auto Fill",name:"AutoFill",options:a(t).autoFillOption,onHandleChange:T},null,8,["value","options"]),o(_e,{value:d.value.isUom,label:"Is Uom",name:"IsUom",options:a(t).isUomOption,onHandleChange:oe},null,8,["value","options"]),o(z,{"value-from":d.value.uom,"value-to":d.value.uomTo,label:"Uom",name:"uom",options:a(t).uomOption,onHandleChangeFrom:se,onHandleChangeTo:I},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.referenceDocument,"value-to":d.value.referenceDocumentTo,label:"Reference Document",name:"ReferenceDocument",options:a(t).referenceDocumentOption,onHandleChangeFrom:he,onHandleChangeTo:ve},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.psType,"value-to":d.value.psTypeTo,label:"PS Type",name:"psType",options:a(t).psTypeOption,onHandleChangeFrom:Z,onHandleChangeTo:c},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.taskGroupKey,"value-to":d.value.taskGroupKeyTo,label:"Task Group Key",name:"taskGroupKey",options:a(t).taskGroupKeyOption,onHandleChangeFrom:g,onHandleChangeTo:de},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.taskKey,"value-to":d.value.taskKeyTo,label:"Task Key",name:"taskKey",options:a(t).taskKeyOption,onHandleChangeFrom:ye,onHandleChangeTo:me},null,8,["value-from","value-to","options"]),o(z,{"value-from":d.value.typeTask,"value-to":d.value.typeTaskTo,label:"Type Task",name:"TypeTask",options:a(t).typeTaskOption,onHandleChangeFrom:V,onHandleChangeTo:J},null,8,["value-from","value-to","options"]),o(ze,{"value-from":d.value.startDate?d.value.startDate.toString():"","value-to":d.value.startDateTo?d.value.startDateTo.toString():"",label:"Start Date",name:"StartDate",placeholder:"Pick a date",onHandleChangeFrom:ke,onHandleChangeTo:qe},null,8,["value-from","value-to"]),o(ze,{"value-from":d.value.endDate?d.value.endDate.toString():"","value-to":d.value.endDateTo?d.value.endDateTo.toString():"",label:"End Date",name:"EndDate",placeholder:"Pick a date",onHandleChangeFrom:De,onHandleChangeTo:m},null,8,["value-from","value-to"])])]),_:1},8,["modelValue"])}}}),to={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},ao=k("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),oo={class:"d-flex justify-content-between align-items-center"},so={class:"card"},no={class:"card-body grid-padding"},ro={class:"my-5"},Us=ue({__name:"Index",setup(e){const r=wt(),t=xe(),v=He(),n=$e(),p=te(!1),d=te(!1),s=te(!1),F=H(()=>t.displayData),C=H(()=>t.pagination),b=O=>{t.setPage(O),v.setIsEdit(!1)};Xe(async()=>{r[Kt.ACTIVE_PAGE](Ee().meta.parentMenu),Pt("Intervention Checks",[{pageName:Ee().meta.parentMenu,pageRoute:Ee().meta.parentMenu.toLowerCase()},{pageName:"IronPortal Configuration",pageRoute:"ironlake-config-recommendedaction"},{pageName:"Intervention Checks",pageRoute:"ironlake-config-recommendedaction"}]),t.setPage(1),await v.getLookup(),await t.getLookup()}),$t(async()=>{t.resetState(),v.resetState(),n.resetState()});const U=async()=>{await t.setPage(1),await t.getLookup()},E=()=>{p.value=!0,v.setIsEdit(!1),v.resetState(),v.setErrors([])},R=async O=>{p.value=!1,O&&await U()},u=()=>{d.value=!0},$=async O=>{d.value=!1,O&&await U()},S=async()=>{const O=await t.export();Xt.saveAs(new Blob([O],{type:"application/octet-stream"}),"InterventionChecks.xlsx")},A=()=>{s.value=!0},l=async O=>{s.value=!1,O&&await U()},j=()=>{p.value=!0,v.setErrors([])};return(O,M)=>(h(),q(Le,null,[k("div",to,[ao,k("div",oo,[o(Mt,{onShowDialog:E}),o(Lt,{onShowDialog:u}),o(xt,{onHandleDownload:S}),o(Gt,{onShowDialog:A})])]),k("div",so,[k("div",no,[o(Pa,{"list-data":F.value,page:C.value.currentPage,onFetchData:U,onDuplicateData:j},null,8,["list-data","page"])])]),k("div",ro,[a(t).paginationLoading?pe("",!0):(h(),f(je,{key:0,onRaisePageChange:M[0]||(M[0]=X=>b(X)),currentPage:C.value.currentPage,totalPage:C.value.totalPage,totalPageSize:C.value.totalPageSize,startPaginationIndex:C.value.startPaginationIndex,endPaginationIndex:C.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),o(Ha,{visibility:p.value,onHandleClose:R},null,8,["visibility"]),o(eo,{visibility:d.value,onHandleClose:$},null,8,["visibility"]),o(Wa,{visibility:s.value,onHandleClose:l},null,8,["visibility"])],64))}});export{Us as default};
