import{k as z,a0 as J,r as a,c as O,d as R,o as Q,L as X,p as _,q as B,x as f,A as x,R as C,aB as u,u as Z,s as r,B as I,P as ee,aa as y,$ as ae,F as le,bd as oe,bb as se}from"./@vue-BypzYtbH.js";import{_ as te}from"./ToastWithIcon.vue_vue_type_style_index_0_lang-wfM94fOM.js";import{_ as ne}from"./Confirmation.vue_vue_type_style_index_0_lang-HchphDdZ.js";import{_ as ie}from"./InformationPopUp.vue_vue_type_style_index_0_lang-O2xYF9Pq.js";import{u as re}from"./useGlobalConnectionStore-DV9B81de.js";import{_ as ue}from"./Textarea.vue_vue_type_style_index_0_lang-v94SEJmi.js";import{d as ce}from"./manipulate-html-string-DqTEGh-F.js";import{u as de}from"./useMasterStore-CzSO06fn.js";import{p as fe}from"./helpers-wUOLw-dU.js";import{_ as ve}from"./nw-img-vue-CR837WER.js";const q=o=>(oe("data-v-963d0768"),o=o(),se(),o),me=q(()=>u("span",{class:"el-dialog__title"},"Change Status from Not Applicable",-1)),pe=["innerHTML"],_e={class:"mt-1 p-2"},be={class:"d-flex flex-column"},he=q(()=>u("label",{class:"reason_skip--label"},"Changes Reason",-1)),Ce={key:0,class:"px-1 text-danger"},ge={key:0,class:"mt-1 p-2"},xe={class:"dialog-footer",style:{display:"block","text-align":"right"}},ye=z({__name:"NAReasonDialog",props:{visibility:{required:!0,type:Boolean},naDetail:{required:!0,type:Object},isIntervention:{required:!1,type:Boolean,default:!1}},emits:["onClose","onSave","onCancel"],setup(o,{emit:A}){const c=o,b=A,M=re(),$=de(),k=J(c,"visibility"),h=a(!1),v=a(!1),E=a(!1),e=a(""),l=a(""),t=a(!1),d=a(!0),m=a(!1),p=a(!1),D=a(null),F=O(()=>M.stateSubmitConnectionError);R(F,s=>{s==!0?v.value=!0:v.value=!1});const V=O(()=>$.NAConditions),H=()=>{e.value&&(m.value=!1),t.value=e.value.includes("Other"),t.value?(l.value="",d.value=!0):d.value=!1},L=s=>{l.value=s.value,d.value=l.value===""},T=()=>{e.value?p.value=!0:m.value=!0},U=async()=>{p.value=!1,b("onSave",{selectedReason:e.value,desc:l.value,afterSubmit:()=>{h.value=!0,setTimeout(()=>{h.value=!1,b("onClose")},2e3)}})},S=()=>{b("onCancel")},P=()=>{p.value=!1},j=()=>{v.value=!1,E.value=!1},G=async()=>{e.value="",l.value="",t.value=!1,m.value=!1,h.value=!1,v.value=!1,b("onClose")},K=()=>{fe(D.value)};R(()=>c.naDetail,()=>{w()},{deep:!0});const w=()=>{if(c.naDetail&&c.naDetail.reason){const s=c.naDetail.reason.split(":"),n=V.value.find(g=>g.naCondition==s[0]);n?(e.value=n.reviseNaCondition,c.naDetail.reason.includes("Other")&&(t.value=!0,l.value=s[1])):(t.value=!0,e.value="Other",l.value=s[0]),d.value=!1}};return Q(()=>{w()}),X(()=>{e.value="",l.value="",t.value=!1,d.value=!0,m.value=!1,p.value=!1}),(s,n)=>{const g=C("el-option"),W=C("el-select"),N=C("el-button"),Y=C("el-dialog");return o.naDetail?(_(),B(Y,{key:0,modelValue:k.value,"onUpdate:modelValue":n[1]||(n[1]=i=>k.value=i),width:"90%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"lock-scroll":!1,"before-close":S,onOpened:K,onClosed:G,"custom-class":"el-defect-crack-form-custom reason-dialog","destroy-on-close":!0},{title:f(()=>[me,u("span",{class:"el-dialog__title task-title",innerHTML:Z(ce)(o.naDetail.title,o.isIntervention),ref_key:"defectDetailRef",ref:D},null,8,pe)]),footer:f(()=>[u("span",xe,[r(N,{onClick:S,style:{"box-shadow":"0px 24px 48px rgba(145, 158, 171, 0.2)"}},{default:f(()=>[I("Cancel")]),_:1}),r(N,{disabled:d.value,class:"button-OK-confirmation",type:"success",onClick:ee(T,["prevent"]),style:{background:"rgb(24, 175, 74)","box-shadow":"rgba(0, 171, 85, 0.24) 0px 8px 16px",color:"white"}},{default:f(()=>[I("Submit")]),_:1},8,["disabled"])])]),default:f(()=>[u("div",null,[u("div",_e,[u("div",be,[he,r(W,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i),filterable:"",onChange:H,class:"w-100"},{default:f(()=>[(_(!0),y(le,null,ae(V.value,i=>(_(),B(g,{key:i.id,label:i.reviseNaCondition,value:i.reviseNaCondition},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),m.value?(_(),y("label",Ce,"Required")):x("",!0)])]),t.value?(_(),y("div",ge,[r(ue,{"label-class":"dma--textarea-label reason_skip--label","text-class":"dma--textarea-input h-100px reason_skip--text",value:l.value,label:"Description <span class='red'>*</span>",name:"Description",placeholder:"Write Reason",onHandleChange:L},null,8,["value"])])):x("",!0)]),r(te,{show:h.value,message:"Data Successfully Submitted"},null,8,["show"]),r(ne,{visibility:p.value,caption:"Please confirm this is the reason you could not do the service item.",onOnNoConfirm:P,onOnYesConfirm:U},null,8,["visibility"]),r(ie,{show:v.value,onClose:j,"title-pop-up":"No internet connection"},null,8,["show"])]),_:1},8,["modelValue"])):x("",!0)}}}),qe=ve(ye,[["__scopeId","data-v-963d0768"]]);export{qe as N};
