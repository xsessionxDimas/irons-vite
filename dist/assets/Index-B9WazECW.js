import{u as Ee}from"./vuex-BbOKrtVp.js";import{a as Ae}from"./breadcrumb-D-Q4Tk9w.js";import{b as U,u as kt,i as Tt,h as wt,j as bt,A as Ne}from"./index-BCnwA6yE.js";import{P as Ot}from"./Pagination-CVDIvnOM.js";import{F as Oe}from"./FilterIconButton-Bj0WTbms.js";import{h as Ve,A as Le,U as xe}from"./excel-generator-CRLIz6fw.js";import{D as $e}from"./DownloadIconButton-CIQp-YG7.js";import{_ as D,b as Vt}from"./element-plus-C5R56mia.js";import{P as Pt,d as He,a as Be}from"./table-sort-VnBD5Hfa.js";import{d as Et}from"./pinia-BjOS2_Ao.js";import{a as E,m as Ut}from"./mapOption-sP4IrA4W.js";import{f as x,n as rt,a as mt,b as Ge}from"./date-format-BASVuupi.js";import{L as Re}from"./urls-D--VoWL5.js";import{L as qe}from"./urls-DBLs_wGY.js";import{L as ze}from"./urls-BUxQAIma.js";import{k as nt,bL as Ke,r as pt,u as o,y as ct,p as A,aa as gt,q as B,x as g,Y as yt,R,s as a,aB as s,C as st,a0 as Ft,c as q,B as G,A as _t,T as Lt,bd as je,bb as Ye,a7 as Xe,L as Je,F as Qe}from"./@vue-BypzYtbH.js";import{a as xt}from"./vee-validate-C_msoaAA.js";import{c as $t,a as b,b as St,d as Ht}from"./yup-BRaPd8dh.js";import"./property-expr-DEi1ZLzV.js";import{E as Bt}from"./ErrorAlert-CMKGfwAi.js";import{_ as N}from"./TextInput.vue_vue_type_script_setup_true_lang-oAh_qqu1.js";import{_ as Gt}from"./NumberInput.vue_vue_type_script_setup_true_lang-DQgMY3Op.js";import{_ as ft}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DQfguttb.js";import{_ as F}from"./AutoComplete.vue_vue_type_script_setup_true_lang-D4CTLiQF.js";import{_ as We}from"./SwitchInput.vue_vue_type_script_setup_true_lang-BosisL7w.js";import{_}from"./AutoComplete.vue_vue_type_style_index_0_lang-CRR6Z--K.js";import{_ as Nt}from"./DatePickerInput.vue_vue_type_script_setup_true_lang-DO0pIl2P.js";import{e as Ze}from"./lodash-Cr9vlq0V.js";import{_ as ta}from"./FileDropZone.vue_vue_type_style_index_0_lang-Ct77XTnP.js";import{m as ea}from"./map-anything-abi6NY2Z.js";import{_ as aa}from"./nw-img-vue-CR837WER.js";import{F as oa}from"./file-saver-DhbZvGod.js";import"./vue-router-iNp9kJ0K.js";import"./object-path-BACu75q6.js";import"./attr-accept-BWI1aNlo.js";import"./crypto-js-BZehCumu.js";import"./cron-Ci8nYs3o.js";import"./luxon-C_T8jI2d.js";import"./dexie-CWyjz2Lo.js";import"./axios-N3crNZ6y.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-DK0FVkv3.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./dayjs-C7SXsQPH.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-xcxZ5rdH.js";import"./mitt-C1xD_ZTF.js";import"./@popperjs-WhmJkuoZ.js";import"./async-validator-DK9uouaC.js";import"./language-BriOOvyN.js";import"./vue-i18n-CE6bnohq.js";import"./@intlify-CjZh8qSI.js";import"./PageEnum-BoOqFyRq.js";import"./xlsx-CpbwoZfi.js";import"./moment-C5S46NFB.js";import"./nanoclone-BAWie4i9.js";import"./toposort-CalJriC0.js";import"./vue3-dropzone-DPWU9yJt.js";import"./file-selector-CuD-TRe-.js";import"./tslib-DTLQ5SHO.js";const it="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/parameter_ehms",ra=`${it}/paging`,sa=`${it}/update`,na=`${it}/export`,ia=`${it}/lookup`,la=`${it}/bulk`,da=`${it}/validate_upload`,ua="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/uom/lookup",ma="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/area_cbm/lookup",ca="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/status_converter/lookup",pa="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/cbm_parameter/lookup",ha="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/cbm_group/lookup",Da="https://digital-bumaau-dev-apm-001.azure-api.net/amadm/api/master_data/type_parameter/lookup",ht=Et({id:"ParameterEhmsList",state:()=>({stateFilterData:{ComponentId:"",CbmGroup:"",CbmArea:"",CbmParameterId:"",ModelId:"",PsTypeId:"",TaskNumber:"",DetailNumber:"",CbmParameter:"",Parameter:"",TypeParameterId:"",MinValue:"",MaxValue:"",Uom:"",StatusConverter:"",StatusDescriptionConverter:"",Status:"",StatusDescription:"",StartDate:"",EndDate:"",ComponentIdTo:"",CbmGroupTo:"",CbmAreaTo:"",CbmParameterIdTo:"",ModelIdTo:"",PsTypeIdTo:"",TaskNumberTo:"",DetailNumberTo:"",CbmParameterTo:"",ParameterTo:"",TypeParameterIdTo:"",MinValueTo:"",MaxValueTo:"",UomTo:"",StatusConverterTo:"",StatusDescriptionConverterTo:"",StatusTo:"",StatusDescriptionTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"",ver:"v1"},stateLastUsedFilterData:{ComponentId:"",CbmGroup:"",CbmArea:"",CbmParameterId:"",ModelId:"",PsTypeId:"",TaskNumber:"",DetailNumber:"",CbmParameter:"",Parameter:"",TypeParameterId:"",MinValue:"",MaxValue:"",Uom:"",StatusConverter:"",StatusDescriptionConverter:"",Status:"",StatusDescription:"",StartDate:"",EndDate:"",ComponentIdTo:"",CbmGroupTo:"",CbmAreaTo:"",CbmParameterIdTo:"",ModelIdTo:"",PsTypeIdTo:"",TaskNumberTo:"",DetailNumberTo:"",CbmParameterTo:"",ParameterTo:"",TypeParameterIdTo:"",MinValueTo:"",MaxValueTo:"",UomTo:"",StatusConverterTo:"",StatusDescriptionConverterTo:"",StatusTo:"",StatusDescriptionTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"",ver:"v1"},statePageName:"parameterEhms",stateDisplayData:[],statePagination:new Pt,stateLoading:!1,statePaginationLoading:!1,stateUomOption:[],stateAreaCbmOption:[],stateStatusConverterOption:[],stateStatusConverterDescriptionOption:[],stateCbmParameterOption:[],stateCbmParameterIDOption:[],stateComponentOption:[],stateModelOption:[],statePsTypeOption:[],stateCbmGroupOption:[],stateDetailNumberOption:[],stateMaxValueOption:[],stateMinValueOption:[],stateParameterOption:[],stateTypeParameterOption:[],stateStatusOption:[],stateStatusDescriptionOption:[],stateTaskNumberOption:[]}),getters:{pageName:t=>t.statePageName,pagination:t=>t.statePagination,displayData:t=>t.stateDisplayData,filterData:t=>t.stateFilterData,lastUsedFilterData:t=>t.stateLastUsedFilterData,loading:t=>t.stateLoading,paginationLoading:t=>t.statePaginationLoading,UomOption:t=>t.stateUomOption,AreaCbmOption:t=>t.stateAreaCbmOption,StatusConverterOption:t=>t.stateStatusConverterOption,StatusConverterDescriptionOption:t=>t.stateStatusConverterDescriptionOption,CbmParameterOption:t=>t.stateCbmParameterOption,CbmParameterIDOption:t=>t.stateCbmParameterIDOption,ComponentOption:t=>t.stateComponentOption,ModelOption:t=>t.stateModelOption,PsTypeOption:t=>t.statePsTypeOption,CbmGroupOption:t=>t.stateCbmGroupOption,DetailNumberOption:t=>t.stateDetailNumberOption,MaxValueOption:t=>t.stateMaxValueOption,MinValueOption:t=>t.stateMinValueOption,ParameterOption:t=>t.stateParameterOption,ParameterTypeOption:t=>t.stateTypeParameterOption,StatusOption:t=>t.stateStatusOption,StatusDescriptionOption:t=>t.stateStatusDescriptionOption,TaskNumberOption:t=>t.stateTaskNumberOption},actions:{async getData(t=!0){const n={ComponentId:this.stateFilterData.ComponentId,CbmGroup:this.stateFilterData.CbmGroup,CbmArea:this.stateFilterData.CbmArea,CbmParameterId:this.stateFilterData.CbmParameterId,ModelId:this.stateFilterData.ModelId,PsTypeId:this.stateFilterData.PsTypeId,TaskNumber:this.stateFilterData.TaskNumber,DetailNumber:this.stateFilterData.DetailNumber,CbmParameter:this.stateFilterData.CbmParameter,Parameter:this.stateFilterData.Parameter,MinValue:this.stateFilterData.MinValue,MaxValue:this.stateFilterData.MaxValue,Uom:this.stateFilterData.Uom,StatusConverter:this.stateFilterData.StatusConverter,StatusDescriptionConverter:this.stateFilterData.StatusDescriptionConverter,Status:this.stateFilterData.Status,StatusDescription:this.stateFilterData.StatusDescription,StartDate:this.stateFilterData.StartDate?x(this.stateFilterData.StartDate.toLocaleString()):"",EndDate:this.stateFilterData.EndDate?x(this.stateFilterData.EndDate.toLocaleString()):"",ComponentIdTo:this.stateFilterData.ComponentIdTo,CbmGroupTo:this.stateFilterData.CbmGroupTo,CbmAreaTo:this.stateFilterData.CbmAreaTo,CbmParameterIdTo:this.stateFilterData.CbmParameterIdTo,ModelIdTo:this.stateFilterData.ModelIdTo,PsTypeIdTo:this.stateFilterData.PsTypeIdTo,TaskNumberTo:this.stateFilterData.TaskNumberTo,DetailNumberTo:this.stateFilterData.DetailNumberTo,CbmParameterTo:this.stateFilterData.CbmParameterTo,ParameterTo:this.stateFilterData.ParameterTo,MinValueTo:this.stateFilterData.MinValueTo,MaxValueTo:this.stateFilterData.MaxValueTo,UomTo:this.stateFilterData.UomTo,StatusConverterTo:this.stateFilterData.StatusConverterTo,StatusDescriptionConverterTo:this.stateFilterData.StatusDescriptionConverterTo,StatusTo:this.stateFilterData.StatusTo,StatusDescriptionTo:this.stateFilterData.StatusDescriptionTo,StartDateTo:this.stateFilterData.StartDateTo?x(this.stateFilterData.StartDateTo.toLocaleString()):"",EndDateTo:this.stateFilterData.EndDateTo?x(this.stateFilterData.EndDateTo.toLocaleString()):"",TypeParameterId:this.getNameTypeParameter(this.stateFilterData.TypeParameterId),TypeParameterIdTo:this.getNameTypeParameter(this.stateFilterData.TypeParameterIdTo),Page:this.stateFilterData.Page.toString(),PageSize:this.stateFilterData.PageSize.toString(),Order:this.stateFilterData.Order,ver:this.stateFilterData.ver};try{t&&(this.stateLoading=!0),t||(this.stateDisplayData=[]);const e=await U.get(ra,"",new URLSearchParams(n).toString());this.stateDisplayData=e.data.result.content,this.setTotalPage(e.data.result.total||e.data.result.totalData),this.stateLastUsedFilterData={...this.stateFilterData}}catch(e){console.log(e)}this.stateLoading=!1},async getLookup(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ia}?${new URLSearchParams(t).toString()}`);this.stateDetailNumberOption=E(n.data.result.content.detailNumber),this.stateMaxValueOption=E(n.data.result.content.maxValue),this.stateMinValueOption=E(n.data.result.content.minValue),this.stateStatusOption=E(n.data.result.content.status),this.stateStatusDescriptionOption=E(n.data.result.content.statusDescription),this.stateTaskNumberOption=E(n.data.result.content.taskNumber),this.stateCbmParameterIDOption=E(n.data.result.content.cbmParameterId),this.stateParameterOption=E(n.data.result.content.parameter)}catch(n){console.log(n)}},async getParameterLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${Da}?${new URLSearchParams(t).toString()}`);this.stateTypeParameterOption=Ut(n.data.result.content,"listIdParameter","listParameter")}catch(n){console.log(n)}},async getComponentLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${Re}?${new URLSearchParams(t).toString()}`);this.stateComponentOption=Ut(n.data.result.content,"component","componentDescription")}catch(n){console.log(n)}},async getModelLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${qe}?${new URLSearchParams(t).toString()}`);this.stateModelOption=Ut(n.data.result.content,"equipmentModel","equipmentModelDescription")}catch(n){console.log(n)}},async getPsTypeLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ze}?${new URLSearchParams(t).toString()}`);this.statePsTypeOption=E(n.data.result.content.psType)}catch(n){console.log(n)}},async getUomLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ua}?${new URLSearchParams(t).toString()}`);this.stateUomOption=E(n.data.result.content.uom)}catch(n){console.log(n)}},async getAreaCbmLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ma}?${new URLSearchParams(t).toString()}`);this.stateAreaCbmOption=E(n.data.result.content.areaCbm)}catch(n){console.log(n)}},async getStatusConverterLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ca}?${new URLSearchParams(t).toString()}`);this.stateStatusConverterOption=E(n.data.result.content.statusConverter),this.stateStatusConverterDescriptionOption=E(n.data.result.content.statusConverterDescription)}catch(n){console.log(n)}},async getCbmParameterLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${pa}?${new URLSearchParams(t).toString()}`);this.stateCbmParameterOption=E(n.data.result.content.cbmParameter)}catch(n){console.log(n)}},async getCbmGroupLookUp(){const t={ver:this.stateFilterData.ver};try{const n=await U.get(`${ha}?${new URLSearchParams(t).toString()}`);this.stateCbmGroupOption=E(n.data.result.content.cbmGroup)}catch(n){console.log(n)}},getNameTypeParameter(t){const n=this.ParameterTypeOption.find(e=>e.value==t);return n?n.label.split("|")[1].trim():""},async export(){const t={ComponentId:this.stateFilterData.ComponentId,CbmGroup:this.stateFilterData.CbmGroup,CbmArea:this.stateFilterData.CbmArea,CbmParameterId:this.stateFilterData.CbmParameterId,ModelId:this.stateFilterData.ModelId,PsTypeId:this.stateFilterData.PsTypeId,TaskNumber:this.stateFilterData.TaskNumber,DetailNumber:this.stateFilterData.DetailNumber,CbmParameter:this.stateFilterData.CbmParameter,Parameter:this.stateFilterData.Parameter,MinValue:this.stateFilterData.MinValue,MaxValue:this.stateFilterData.MaxValue,Uom:this.stateFilterData.Uom,StatusConverter:this.stateFilterData.StatusConverter,StatusDescriptionConverter:this.stateFilterData.StatusDescriptionConverter,Status:this.stateFilterData.Status,StatusDescription:this.stateFilterData.StatusDescription,StartDate:this.stateFilterData.StartDate?x(this.stateFilterData.StartDate.toLocaleString()):"",EndDate:this.stateFilterData.EndDate?x(this.stateFilterData.EndDate.toLocaleString()):"",ComponentIdTo:this.stateFilterData.ComponentIdTo,CbmGroupTo:this.stateFilterData.CbmGroupTo,CbmAreaTo:this.stateFilterData.CbmAreaTo,CbmParameterIdTo:this.stateFilterData.CbmParameterIdTo,ModelIdTo:this.stateFilterData.ModelIdTo,PsTypeIdTo:this.stateFilterData.PsTypeIdTo,TaskNumberTo:this.stateFilterData.TaskNumberTo,DetailNumberTo:this.stateFilterData.DetailNumberTo,CbmParameterTo:this.stateFilterData.CbmParameterTo,ParameterTo:this.stateFilterData.ParameterTo,MinValueTo:this.stateFilterData.MinValueTo,MaxValueTo:this.stateFilterData.MaxValueTo,UomTo:this.stateFilterData.UomTo,StatusConverterTo:this.stateFilterData.StatusConverterTo,StatusDescriptionConverterTo:this.stateFilterData.StatusDescriptionConverterTo,StatusTo:this.stateFilterData.StatusTo,StatusDescriptionTo:this.stateFilterData.StatusDescriptionTo,StartDateTo:this.stateFilterData.StartDateTo?x(this.stateFilterData.StartDateTo.toLocaleString()):"",EndDateTo:this.stateFilterData.EndDateTo?x(this.stateFilterData.EndDateTo.toLocaleString()):"",TypeParameterId:this.getNameTypeParameter(this.stateFilterData.TypeParameterId),TypeParameterIdTo:this.getNameTypeParameter(this.stateFilterData.TypeParameterIdTo),Gmt:new Date().toTimeString().slice(12,17),ver:this.stateFilterData.ver};try{return(await U.getBlob(`${na}?${new URLSearchParams(t).toString()}`)).data}catch(n){console.log(n)}},setTotalPage(t){this.pagination.totalPage=t,this.pagination.getPaginationStartIndex(),this.pagination.getPaginationLastIndex()},async setPage(t){this.statePaginationLoading=!0,this.statePagination.handleCurrentPageChange(t),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1),setTimeout(()=>{this.statePaginationLoading=!1},200)},async setSort({prop:t,order:n}){if(!t&&!n)this.stateFilterData.Order="";else{const e=n=="ascending"?"asc":"desc";this.stateFilterData.Order=`${t}_${e}`}this.statePagination.handleCurrentPageChange(1),this.stateFilterData.Page=this.statePagination.currentPage,await this.getData(!1)},setComponentId(t){this.stateFilterData.ComponentId=t},setCbmGroup(t){this.stateFilterData.CbmGroup=t},setCbmArea(t){this.stateFilterData.CbmArea=t},setCbmParameterId(t){this.stateFilterData.CbmParameterId=t},setModelId(t){this.stateFilterData.ModelId=t},setPsTypeId(t){this.stateFilterData.PsTypeId=t},setTaskNumber(t){this.stateFilterData.TaskNumber=t},setDetailNumber(t){this.stateFilterData.DetailNumber=t},setCbmParameter(t){this.stateFilterData.CbmParameter=t},setParameter(t){this.stateFilterData.Parameter=t},setTypeParameter(t){this.stateFilterData.TypeParameterId=t},setMinValue(t){this.stateFilterData.MinValue=t},setMaxValue(t){this.stateFilterData.MaxValue=t},setUom(t){this.stateFilterData.Uom=t},setStatusConverter(t){this.stateFilterData.StatusConverter=t},setStatusDescriptionConverter(t){this.stateFilterData.StatusDescriptionConverter=t},setStatus(t){this.stateFilterData.Status=t},setStatusDescription(t){this.stateFilterData.StatusDescription=t},setStartDate(t){this.stateFilterData.StartDate=t},setEndDate(t){this.stateFilterData.EndDate=t},setComponentIdTo(t){this.stateFilterData.ComponentIdTo=t},setCbmGroupTo(t){this.stateFilterData.CbmGroupTo=t},setCbmAreaTo(t){this.stateFilterData.CbmAreaTo=t},setCbmParameterIdTo(t){this.stateFilterData.CbmParameterIdTo=t},setModelIdTo(t){this.stateFilterData.ModelIdTo=t},setPsTypeIdTo(t){this.stateFilterData.PsTypeIdTo=t},setTaskNumberTo(t){this.stateFilterData.TaskNumberTo=t},setDetailNumberTo(t){this.stateFilterData.DetailNumberTo=t},setCbmParameterTo(t){this.stateFilterData.CbmParameterTo=t},setParameterTo(t){this.stateFilterData.ParameterTo=t},setTypeParameterTo(t){this.stateFilterData.TypeParameterIdTo=t},setMinValueTo(t){this.stateFilterData.MinValueTo=t},setMaxValueTo(t){this.stateFilterData.MaxValueTo=t},setUomTo(t){this.stateFilterData.UomTo=t},setStatusConverterTo(t){this.stateFilterData.StatusConverterTo=t},setStatusDescriptionConverterTo(t){this.stateFilterData.StatusDescriptionConverterTo=t},setStatusTo(t){this.stateFilterData.StatusTo=t},setStatusDescriptionTo(t){this.stateFilterData.StatusDescriptionTo=t},setStartDateTo(t){this.stateFilterData.StartDateTo=t},setEndDateTo(t){this.stateFilterData.EndDateTo=t},async resetFilter(){this.stateFilterData.ComponentId="",this.stateFilterData.CbmGroup="",this.stateFilterData.CbmArea="",this.stateFilterData.CbmParameterId="",this.stateFilterData.ModelId="",this.stateFilterData.PsTypeId="",this.stateFilterData.TaskNumber="",this.stateFilterData.DetailNumber="",this.stateFilterData.CbmParameter="",this.stateFilterData.Parameter="",this.stateFilterData.MinValue="",this.stateFilterData.MaxValue="",this.stateFilterData.Uom="",this.stateFilterData.StatusConverter="",this.stateFilterData.StatusDescriptionConverter="",this.stateFilterData.Status="",this.stateFilterData.StatusDescription="",this.stateFilterData.StartDate="",this.stateFilterData.EndDate="",this.stateFilterData.TypeParameterId="",this.stateFilterData.ComponentIdTo="",this.stateFilterData.CbmGroupTo="",this.stateFilterData.CbmAreaTo="",this.stateFilterData.CbmParameterIdTo="",this.stateFilterData.ModelIdTo="",this.stateFilterData.PsTypeIdTo="",this.stateFilterData.TaskNumberTo="",this.stateFilterData.DetailNumberTo="",this.stateFilterData.CbmParameterTo="",this.stateFilterData.ParameterTo="",this.stateFilterData.MinValueTo="",this.stateFilterData.MaxValueTo="",this.stateFilterData.UomTo="",this.stateFilterData.StatusConverterTo="",this.stateFilterData.StatusDescriptionConverterTo="",this.stateFilterData.StatusTo="",this.stateFilterData.StatusDescriptionTo="",this.stateFilterData.StartDateTo="",this.stateFilterData.EndDateTo="",this.stateFilterData.TypeParameterIdTo="";const t=this.stateLastUsedFilterData.ComponentId!=="",n=this.stateLastUsedFilterData.CbmGroup!=="",e=this.stateLastUsedFilterData.CbmArea!=="",T=this.stateLastUsedFilterData.CbmParameterId!=="",h=this.stateLastUsedFilterData.ModelId!=="",C=this.stateLastUsedFilterData.PsTypeId!=="",d=this.stateLastUsedFilterData.TaskNumber!=="",y=this.stateLastUsedFilterData.DetailNumber!=="",r=this.stateLastUsedFilterData.CbmParameter!=="",v=this.stateLastUsedFilterData.Parameter!=="",k=this.stateLastUsedFilterData.TypeParameterId!=="",S=this.stateLastUsedFilterData.MinValue!=="",I=this.stateLastUsedFilterData.MaxValue!=="",f=this.stateLastUsedFilterData.Uom!=="",w=this.stateLastUsedFilterData.StatusConverter!=="",M=this.stateLastUsedFilterData.StatusDescriptionConverter!=="",l=this.stateLastUsedFilterData.Status!=="",u=this.stateLastUsedFilterData.StatusDescription!=="",m=this.stateLastUsedFilterData.StartDate!=="",O=this.stateLastUsedFilterData.EndDate!=="",V=this.stateLastUsedFilterData.ComponentIdTo!=="",P=this.stateLastUsedFilterData.CbmGroupTo!=="",L=this.stateLastUsedFilterData.CbmAreaTo!=="",$=this.stateLastUsedFilterData.CbmParameterIdTo!=="",z=this.stateLastUsedFilterData.ModelIdTo!=="",K=this.stateLastUsedFilterData.PsTypeIdTo!=="",j=this.stateLastUsedFilterData.TaskNumberTo!=="",Y=this.stateLastUsedFilterData.DetailNumberTo!=="",X=this.stateLastUsedFilterData.CbmParameterTo!=="",J=this.stateLastUsedFilterData.ParameterTo!=="",Q=this.stateLastUsedFilterData.TypeParameterIdTo!=="",W=this.stateLastUsedFilterData.MinValueTo!=="",Z=this.stateLastUsedFilterData.MaxValueTo!=="",tt=this.stateLastUsedFilterData.UomTo!=="",at=this.stateLastUsedFilterData.StatusConverterTo!=="",et=this.stateLastUsedFilterData.StatusDescriptionConverterTo!=="",p=this.stateLastUsedFilterData.StatusTo!=="",c=this.stateLastUsedFilterData.StatusDescriptionTo!=="",H=this.stateLastUsedFilterData.StartDateTo!=="",ot=this.stateLastUsedFilterData.EndDateTo!=="";(t||n||e||T||h||C||d||y||r||v||S||I||f||w||M||l||u||m||O||k||V||P||L||$||z||K||j||Y||X||J||Q||W||Z||tt||at||et||p||c||H||ot)&&await this.getData()},resetState(){this.stateFilterData={ComponentId:"",CbmGroup:"",CbmArea:"",CbmParameterId:"",ModelId:"",PsTypeId:"",TaskNumber:"",DetailNumber:"",CbmParameter:"",Parameter:"",TypeParameterId:"",MinValue:"",MaxValue:"",Uom:"",StatusConverter:"",StatusDescriptionConverter:"",Status:"",StatusDescription:"",StartDate:"",EndDate:"",ComponentIdTo:"",CbmGroupTo:"",CbmAreaTo:"",CbmParameterIdTo:"",ModelIdTo:"",PsTypeIdTo:"",TaskNumberTo:"",DetailNumberTo:"",CbmParameterTo:"",ParameterTo:"",TypeParameterIdTo:"",MinValueTo:"",MaxValueTo:"",UomTo:"",StatusConverterTo:"",StatusDescriptionConverterTo:"",StatusTo:"",StatusDescriptionTo:"",StartDateTo:"",EndDateTo:"",Page:1,PageSize:10,Order:"",ver:"v1"},this.stateDisplayData=[],this.statePagination=new Pt,this.stateLoading=!1,this.statePaginationLoading=!1}}}),It=Et({id:"ParameterEhmsForm",state:()=>({stateFormData:{ParameterEhmsId:0,StartDate:rt(new Date),EndDate:rt(new Date("12/31/9999"))},stateIsError:!1,stateError:"",stateErrors:[],stateLoading:!1}),getters:{formData:t=>t.stateFormData,error:t=>t.stateError,errors:t=>t.stateErrors,isError:t=>t.stateIsError,loading:t=>t.stateLoading},actions:{async insertData(t){this.stateFormData.StartDate=x(rt(new Date(this.stateFormData.StartDate))),this.stateFormData.EndDate=x(rt(new Date(this.stateFormData.EndDate)));try{this.stateLoading=!0;const n={userAccount:t,ver:"v1"},e={...this.stateFormData,Parameter:String(this.stateFormData.Parameter)},T=await U.post(`${it}?${new URLSearchParams(n).toString()}`,e);T.data.title==="Error"?(this.stateErrors.push(T.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(n){this.stateErrors.push(n.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},async updateData(t){this.stateFormData.StartDate=x(rt(new Date(this.stateFormData.StartDate))),this.stateFormData.EndDate=x(rt(new Date(this.stateFormData.EndDate)));try{this.stateLoading=!0;const n={userAccount:t,ver:"v1"},e={...this.stateFormData,Parameter:String(this.stateFormData.Parameter)},T=await U.post(`${sa}?${new URLSearchParams(n).toString()}`,e);T.data.title==="Error"?(this.stateErrors.push(T.data.result.message),this.stateIsError=!0):(this.stateError="",this.stateIsError=!1)}catch(n){this.stateErrors.push(n.response.data.result.message),this.stateIsError=!0}this.stateLoading=!1},setErrors(t){this.stateErrors=t,this.stateIsError=this.stateErrors.length>0},resetState(){this.stateFormData={ParameterEhmsId:0,StartDate:rt(new Date),EndDate:rt(new Date("12/31/9999"))},this.stateIsError=!1,this.stateError="",this.stateErrors=[],this.stateLoading=!1},changeNulltoEmptyString(t){return t||""},setFormData(t,n=[]){if(this.stateFormData.ParameterEhmsId=t.mdParameterEhmsId,this.stateFormData.CbmParameterId=this.changeNulltoEmptyString(t.cbmParameterId),this.stateFormData.ComponentId=t.componentId||"",n.length>0&&t.typeParameterId){const e=n.find(T=>{const h=T.label||"";return h.split("|")[1]&&h.split("|")[1].trim()==t.typeParameterId||""});this.stateFormData.TypeParameterId=this.changeNulltoEmptyString(e&&e.value)}else this.stateFormData.TypeParameterId="";this.stateFormData.CbmGroup=this.changeNulltoEmptyString(t.cbmGroup),this.stateFormData.CbmArea=this.changeNulltoEmptyString(t.cbmArea),this.stateFormData.Model=this.changeNulltoEmptyString(t.modelId),this.stateFormData.PsType=this.changeNulltoEmptyString(t.psTypeId),this.stateFormData.TaskNumber=this.changeNulltoEmptyString(t.taskNumber),this.stateFormData.DetailNumber=this.changeNulltoEmptyString(t.detailNumber),this.stateFormData.CbmParameter=this.changeNulltoEmptyString(t.cbmParameter),this.stateFormData.Parameter=this.changeNulltoEmptyString(t.parameter),this.stateFormData.ValueMin=this.changeNulltoEmptyString(t.minValue),this.stateFormData.ValueMax=this.changeNulltoEmptyString(t.maxValue),this.stateFormData.Uom=this.changeNulltoEmptyString(t.uom),this.stateFormData.StatusConverter=this.changeNulltoEmptyString(t.statusConverter),this.stateFormData.StatusConverterDescription=this.changeNulltoEmptyString(t.statusDescriptionConverter),this.stateFormData.Status=this.changeNulltoEmptyString(t.status),this.stateFormData.StatusDescription=this.changeNulltoEmptyString(t.statusDescription),this.stateFormData.StartDate=this.changeNulltoEmptyString(t.validFrom),this.stateFormData.EndDate=this.changeNulltoEmptyString(t.validTo),this.stateFormData.IsActive=t.isActive||!1}}}),Ca={key:0,style:{height:"100px"}},va={key:0,class:"row justify-content-center"},ba={key:1,class:"row justify-content-center"},ga={class:"row justify-content-center"},Ta=["onClick"],Pa=nt({__name:"Grid",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},emits:["show-dialog"],setup(t,{emit:n}){const e=t,T=ht(),h=It(),C=n,d=Ke(()=>(e.page-1)*10+1),y=pt(""),r=S=>{y.value=S.order;const I={prop:S.prop,order:S.order};T.setSort(I)},v=(S,I,f)=>He(S[f],I[f],y.value),k=S=>{h.setFormData(S,T.stateTypeParameterOption),C("show-dialog",null)};return(S,I)=>{const f=R("inline-svg"),w=R("el-tooltip"),M=yt("loading");return o(T).loading?ct((A(),gt("div",Ca,null,512)),[[M,o(T).loading]]):ct((A(),B(o(Vt),{key:1,data:e.listData,style:{width:"100%"},onSortChange:r,"empty-text":"No Data"},{default:g(()=>[a(o(D),{label:"No",width:"90",align:"center"},{default:g(l=>[s("span",null,st(o(d)+l.$index),1)]),_:1}),a(o(D),{prop:"cbmParameterId",label:"ID CBM Parameter",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"cbmParameterId")},null,8,["sort-method"]),a(o(D),{prop:"componentId",label:"ID Component",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"componentId")},null,8,["sort-method"]),a(o(D),{prop:"typeParameterId",label:"ID Type Parameter",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"typeParameterId")},null,8,["sort-method"]),a(o(D),{prop:"cbmGroup",label:"CBM Group",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"cbmGroup")},null,8,["sort-method"]),a(o(D),{prop:"cbmArea",label:"AREA CBM",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"cbmArea")},null,8,["sort-method"]),a(o(D),{prop:"modelId",label:"Model",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"modelId")},null,8,["sort-method"]),a(o(D),{prop:"psTypeId",label:"PS Type",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"psTypeId")},null,8,["sort-method"]),a(o(D),{prop:"taskNumber",label:"Task Number",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"taskNumber")},null,8,["sort-method"]),a(o(D),{prop:"detailNumber",label:"No detail",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"detailNumber")},null,8,["sort-method"]),a(o(D),{prop:"cbmParameter",label:"CBM Parameter",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"cbmParameter")},null,8,["sort-method"]),a(o(D),{prop:"parameter",label:"Parameter",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"parameter")},null,8,["sort-method"]),a(o(D),{prop:"minValue",label:"Value Min",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"minValue")},null,8,["sort-method"]),a(o(D),{prop:"maxValue",label:"Value Max",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"maxValue")},null,8,["sort-method"]),a(o(D),{prop:"uom",label:"UOM",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"uom")},null,8,["sort-method"]),a(o(D),{prop:"statusConverter",label:"Status Converter",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"statusConverter")},null,8,["sort-method"]),a(o(D),{prop:"statusDescriptionConverter",label:"Status Converter Description",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"statusDescriptionConverter")},null,8,["sort-method"]),a(o(D),{prop:"status",label:"Status",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"status")},null,8,["sort-method"]),a(o(D),{prop:"statusDescription",label:"Status Description",width:"170",sortable:"","sort-method":(l,u)=>v(l,u,"statusDescription")},null,8,["sort-method"]),a(o(D),{prop:"validFrom",label:"Start Date",align:"center",width:"170",sortable:""},{default:g(l=>[s("span",null,st(o(mt)(l.row.validFrom)),1)]),_:1}),a(o(D),{prop:"validTo",label:"End Date",align:"center",width:"170",sortable:""},{default:g(l=>[s("span",null,st(o(mt)(l.row.validTo)),1)]),_:1}),a(o(D),{prop:"isActive",label:"Is Active",width:"100",sortable:""},{default:g(l=>[l.row.isActive?(A(),gt("div",va,[a(f,{src:"/media/svg/tables/rows/check.svg"})])):(A(),gt("div",ba,[a(f,{src:"/media/svg/tables/rows/minus.svg"})]))]),_:1}),a(o(D),{prop:"changedOn",label:"Changed on",align:"center",width:"170",sortable:""},{default:g(l=>[s("span",null,st(o(Ge)(l.row.changedOn)),1)]),_:1}),a(o(D),{prop:"changedBy",label:"Changed by",sortable:"",width:"300","sort-method":(l,u)=>v(l,u,"changedBy")},null,8,["sort-method"]),a(o(D),{label:"",width:"80"},{default:g(l=>[s("div",ga,[a(w,{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:g(()=>[s("button",{class:"btn btn-sm btn-icon btn-bg-light me-1",onClick:u=>k(l.row)},[a(f,{src:"/media/svg/tables/rows/pencil-edit-blue.svg",width:"12",height:"12"})],8,Ta)]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[M,o(T).loading]])}}}),Sa={class:"row g-4 my-4"},fa={class:"col-md-6 fv-row fv-plugins-icon-container"},ya={class:"col-md-6 fv-row fv-plugins-icon-container"},Fa={class:"col-md-6 fv-row fv-plugins-icon-container"},_a={class:"col-md-6 fv-row fv-plugins-icon-container"},Ia={class:"col-md-6 fv-row fv-plugins-icon-container"},Ma={class:"col-md-6 fv-row fv-plugins-icon-container"},Ua={class:"col-md-6 fv-row fv-plugins-icon-container"},ka={class:"col-md-6 fv-row fv-plugins-icon-container"},wa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ea={class:"col-md-6 fv-row fv-plugins-icon-container"},Aa={class:"col-md-6 fv-row fv-plugins-icon-container"},Na={class:"col-md-6 fv-row fv-plugins-icon-container"},Oa={class:"col-md-6 fv-row fv-plugins-icon-container"},Va={class:"col-md-6 fv-row fv-plugins-icon-container"},La={class:"col-md-6 fv-row fv-plugins-icon-container"},xa={class:"col-md-6 fv-row fv-plugins-icon-container"},$a={class:"col-md-6 fv-row fv-plugins-icon-container"},Ha={class:"col-md-6 fv-row fv-plugins-icon-container"},Ba={class:"col-md-6 fv-row fv-plugins-icon-container"},Ga={class:"col-md-6 fv-row fv-plugins-icon-container"},Ra={class:"dialog-footer"},qa=nt({__name:"FormAddDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:n}){const e=t,T=n,h=It(),C=kt(),d=ht(),y=Ft(e,"visibility"),r=q(()=>h.formData),v=q(()=>h.errors),k=q(()=>h.isError),S=$t().shape({CbmParameterId:b().required("Cbm Parameter ID is mandatory"),ComponentId:b().required("Component ID is mandatory"),CbmGroup:b().required("CBM Group is mandatory"),CbmArea:b().required("CBM Area is mandatory"),Model:b().required("Model is mandatory"),PsType:b().required("PS Type is mandatory"),TaskNumber:b().required("Task Number is mandatory"),DetailNumber:b().required("Detail Number is mandatory"),CbmParameter:b().required("CBM Parameter is mandatory"),Parameter:b().required("Parameter is mandatory"),TypeParameterId:b().required("Type Parameter is mandatory"),ValueMin:b().required("Value Min is mandatory"),ValueMax:b().required("Value Max is mandatory"),Uom:b().required("UOM is mandatory"),StatusConverter:b().required("Status Converter is mandatory"),StatusConverterDescription:b().required("Status Converter Description is mandatory"),Status:b().required("Status is mandatory"),StatusDescription:b().required("Status Description is mandatory"),StartDate:St().required("Start Date is mandatory").typeError("Start Date is mandatory"),EndDate:St().required("End Date is mandatory").min(Ht("StartDate"),"End date must be later than start date").typeError("End date must be later than start date").typeError("End Date is mandatory")}),I=()=>{w(""),M(""),l(""),u(""),m(""),O(""),V(""),P(""),L(""),$(""),tt(""),z(""),K(""),j(""),Y(""),X(""),J(""),Q(""),W(""),Z("")},f=(p=!1)=>{et(),I(),h.resetState(),T("handle-close",p)},w=p=>{r.value.CbmParameterId=p},M=p=>{r.value.ComponentId=p},l=p=>{r.value.CbmGroup=p},u=p=>{r.value.CbmArea=p},m=p=>{r.value.Model=p},O=p=>{r.value.PsType=p},V=p=>{r.value.TaskNumber=p},P=p=>{r.value.DetailNumber=p},L=p=>{r.value.CbmParameter=p},$=p=>{r.value.Parameter=p},z=p=>{r.value.ValueMin=p},K=p=>{r.value.ValueMax=p},j=p=>{r.value.Uom=p},Y=p=>{r.value.StatusConverter=p},X=p=>{r.value.StatusConverterDescription=p},J=p=>{r.value.Status=p},Q=p=>{r.value.StatusDescription=p},W=p=>{r.value.StartDate=p},Z=p=>{r.value.EndDate=p},tt=p=>{r.value.TypeParameterId=p},at=async()=>{et(),await S.validate(r.value,{abortEarly:!1}).catch(p=>{h.setErrors(p.errors)}),!k.value&&Tt("Are you sure to submit ?").then(async p=>{p.isConfirmed&&h.insertData(C.user.Name).then(()=>{h.isError||wt("Form has been successfully submitted!","Ok").then(()=>{f(!0)})})})},et=()=>{h.setErrors([])};return(p,c)=>{const H=R("el-button"),ot=R("el-dialog"),lt=yt("loading");return ct((A(),B(ot,{modelValue:y.value,"onUpdate:modelValue":c[0]||(c[0]=dt=>y.value=dt),title:"New Data",width:"60%",onClose:c[1]||(c[1]=dt=>f())},{footer:g(()=>[s("span",Ra,[a(H,{type:"primary",onClick:at,disabled:o(h).loading},{default:g(()=>[G("Submit")]),_:1},8,["disabled"]),a(H,{type:"secondary",onClick:f,disabled:o(h).loading},{default:g(()=>[G("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Lt,{name:"fade"},{default:g(()=>[k.value?(A(),B(Bt,{key:0,errorMessages:v.value,onResetForm:et},null,8,["errorMessages"])):_t("",!0)]),_:1}),ct((A(),B(o(xt),{id:"kt_filter_form",class:"row g-4 my-4"},{default:g(()=>[s("div",Sa,[s("div",fa,[a(N,{value:r.value.CbmParameterId,max:10,placeholder:"Add ID CBM Parameter",label:"ID CBM Parameter",name:"CbmParameterId",onHandleChange:w},null,8,["value"])]),s("div",ya,[a(F,{placeholder:"Add ID Component",value:r.value.ComponentId,options:o(d).ComponentOption,label:"ID Component",name:"ComponentId",onHandleChange:M},null,8,["value","options"])]),s("div",Fa,[a(F,{value:r.value.TypeParameterId,options:o(d).ParameterTypeOption,label:"Type Parameter",placeholder:"Add Type Parameter",name:"TypeParameterId",onHandleChange:tt},null,8,["value","options"])]),s("div",_a,[a(F,{value:r.value.CbmGroup,options:o(d).CbmGroupOption,label:"CBM Group",placeholder:"Add CBM Group",name:"CbmGroup",onHandleChange:l},null,8,["value","options"])]),s("div",Ia,[a(F,{value:r.value.CbmArea,options:o(d).AreaCbmOption,label:"Area CBM",placeholder:"Add Area CBM",name:"CbmArea",onHandleChange:u},null,8,["value","options"])]),s("div",Ma,[a(F,{value:r.value.Model,options:o(d).ModelOption,label:"Model",placeholder:"Add Model",name:"Model",onHandleChange:m},null,8,["value","options"])]),s("div",Ua,[a(F,{value:r.value.PsType,options:o(d).PsTypeOption,label:"PS Type",placeholder:"Add PS Type",name:"PsType",onHandleChange:O},null,8,["value","options"])]),s("div",ka,[a(N,{value:r.value.TaskNumber,max:10,label:"Task Number",placeholder:"Add Task Number",name:"TaskNumber",onHandleChange:V},null,8,["value"])]),s("div",wa,[a(N,{value:r.value.DetailNumber,max:20,label:"No Detail",placeholder:"Add No Detail",name:"DetailNumber",onHandleChange:P},null,8,["value"])]),s("div",Ea,[a(F,{value:r.value.CbmParameter,options:o(d).CbmParameterOption,label:"CBM Parameter",placeholder:"Add CBM Parameter",name:"CbmParameter",onHandleChange:L},null,8,["value","options"])]),s("div",Aa,[a(Gt,{value:r.value.Parameter,label:"Parameter",placeholder:"Add Parameter",name:"Parameter",onHandleChange:$},null,8,["value"])]),s("div",Na,[a(N,{value:r.value.ValueMin,max:10,label:"Value Min",placeholder:"Add Value Min",name:"ValueMin",onHandleChange:z},null,8,["value"])]),s("div",Oa,[a(N,{value:r.value.ValueMax,max:10,label:"Value Max",placeholder:"Add Value Max",name:"ValueMax",onHandleChange:K},null,8,["value"])]),s("div",Va,[a(F,{value:r.value.Uom,options:o(d).UomOption,label:"UOM",placeholder:"Add UOM",name:"Uom",onHandleChange:j},null,8,["value","options"])]),s("div",La,[a(F,{value:r.value.StatusConverter,options:o(d).StatusConverterOption,label:"Status Converter",placeholder:"Add Status Converter",name:"StatusConverter",onHandleChange:Y},null,8,["value","options"])]),s("div",xa,[a(F,{value:r.value.StatusConverterDescription,options:o(d).StatusConverterDescriptionOption,label:"Status Converter Description",placeholder:"Add Status Converter Description",name:"StatusConverterDescription",onHandleChange:X},null,8,["value","options"])]),s("div",$a,[a(N,{value:r.value.Status,max:10,label:"Status",placeholder:"Add Status",name:"Status",onHandleChange:J},null,8,["value"])]),s("div",Ha,[a(N,{value:r.value.StatusDescription,max:60,label:"Status Description",placeholder:"Add Status Description",name:"StatusDescription",onHandleChange:Q},null,8,["value"])]),s("div",Ba,[a(ft,{value:r.value.StartDate?r.value.StartDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:W},null,8,["value"])]),s("div",Ga,[a(ft,{value:r.value.EndDate?r.value.EndDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:Z},null,8,["value"])])])]),_:1})),[[lt,o(h).loading]])]),_:1},8,["modelValue"])),[[lt,o(h).loading]])}}}),za={class:"row g-4 my-4"},Ka={class:"col-md-6 fv-row fv-plugins-icon-container"},ja={class:"col-md-6 fv-row fv-plugins-icon-container"},Ya={class:"col-md-6 fv-row fv-plugins-icon-container"},Xa={class:"col-md-6 fv-row fv-plugins-icon-container"},Ja={class:"col-md-6 fv-row fv-plugins-icon-container"},Qa={class:"col-md-6 fv-row fv-plugins-icon-container"},Wa={class:"col-md-6 fv-row fv-plugins-icon-container"},Za={class:"col-md-6 fv-row fv-plugins-icon-container"},to={class:"col-md-6 fv-row fv-plugins-icon-container"},eo={class:"col-md-6 fv-row fv-plugins-icon-container"},ao={class:"col-md-6 fv-row fv-plugins-icon-container"},oo={class:"col-md-6 fv-row fv-plugins-icon-container"},ro={class:"col-md-6 fv-row fv-plugins-icon-container"},so={class:"col-md-6 fv-row fv-plugins-icon-container"},no={class:"col-md-6 fv-row fv-plugins-icon-container"},io={class:"col-md-6 fv-row fv-plugins-icon-container"},lo={class:"col-md-6 fv-row fv-plugins-icon-container"},uo={class:"col-md-6 fv-row fv-plugins-icon-container"},mo={class:"col-md-6 fv-row fv-plugins-icon-container"},co={class:"col-md-6 fv-row fv-plugins-icon-container"},po={class:"col-md-6 fv-row fv-plugins-icon-container"},ho={class:"dialog-footer"},Do=nt({__name:"FormEditDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:n}){const e=t,T=n,h=It(),C=kt(),d=ht(),y=Ft(e,"visibility"),r=q(()=>h.formData),v=q(()=>h.errors),k=q(()=>h.isError),S=$t().shape({CbmParameterId:b().required("Cbm Parameter ID is mandatory"),ComponentId:b().required("Component ID is mandatory"),CbmGroup:b().required("CBM Group is mandatory"),CbmArea:b().required("CBM Area is mandatory"),Model:b().required("Model is mandatory"),PsType:b().required("PS Type is mandatory"),TaskNumber:b().required("Task Number is mandatory"),DetailNumber:b().required("Detail Number is mandatory"),CbmParameter:b().required("CBM Parameter is mandatory"),TypeParameterId:b().required("Type Parameter is mandatory"),Parameter:b().required("Parameter is mandatory"),ValueMin:b().required("Value Min is mandatory"),ValueMax:b().required("Value Max is mandatory"),Uom:b().required("UOM is mandatory"),StatusConverter:b().required("Status Converter is mandatory"),StatusConverterDescription:b().required("Status Converter Description is mandatory"),Status:b().required("Status is mandatory"),StatusDescription:b().required("Status Description is mandatory"),StartDate:St().required("Start Date is mandatory").typeError("Start Date is mandatory"),EndDate:St().required("End Date is mandatory").min(Ht("StartDate"),"End date must be later than start date").typeError("End date must be later than start date").typeError("End Date is mandatory")}),I=()=>{w(""),M(""),l(""),u(""),m(""),O(""),V(""),P(""),L(""),$(""),z(""),K(""),j(""),Y(""),X(""),J(""),Q(""),W(""),Z(""),tt(""),at(!0)},f=(c=!1)=>{I(),h.resetState(),p(),T("handle-close",c)},w=c=>{r.value.CbmParameterId=c},M=c=>{r.value.ComponentId=c},l=c=>{r.value.CbmGroup=c},u=c=>{r.value.CbmArea=c},m=c=>{r.value.Model=c},O=c=>{r.value.PsType=c},V=c=>{r.value.TaskNumber=c},P=c=>{r.value.DetailNumber=c},L=c=>{r.value.CbmParameter=c},$=c=>{r.value.Parameter=c},z=c=>{r.value.TypeParameterId=c},K=c=>{r.value.ValueMin=c},j=c=>{r.value.ValueMax=c},Y=c=>{r.value.Uom=c},X=c=>{r.value.StatusConverter=c},J=c=>{r.value.StatusConverterDescription=c},Q=c=>{r.value.Status=c},W=c=>{r.value.StatusDescription=c},Z=c=>{r.value.StartDate=c},tt=c=>{r.value.EndDate=c},at=c=>{r.value.IsActive=c},et=async()=>{p(),await S.validate(r.value,{abortEarly:!1}).catch(c=>{h.setErrors(c.errors)}),!k.value&&Tt("Are you sure to submit ?").then(async c=>{c.isConfirmed&&h.updateData(C.user.Name).then(()=>{h.isError||wt("Form has been successfully submitted!","Ok").then(()=>{f(!0)})})})},p=()=>{h.setErrors([])};return(c,H)=>{const ot=R("el-button"),lt=R("el-dialog"),dt=yt("loading");return ct((A(),B(lt,{modelValue:y.value,"onUpdate:modelValue":H[0]||(H[0]=Dt=>y.value=Dt),title:"Update Data",width:"40%",onClose:H[1]||(H[1]=Dt=>f())},{footer:g(()=>[s("span",ho,[a(ot,{type:"primary",onClick:et,disabled:o(h).loading},{default:g(()=>[G("Submit")]),_:1},8,["disabled"]),a(ot,{type:"secondary",onClick:f,disabled:o(h).loading},{default:g(()=>[G("Close")]),_:1},8,["disabled"])])]),default:g(()=>[a(Lt,{name:"fade"},{default:g(()=>[k.value?(A(),B(Bt,{key:0,errorMessages:v.value,onResetForm:p},null,8,["errorMessages"])):_t("",!0)]),_:1}),a(o(xt),{id:"kt_filter_form",class:"row g-9 my-4"},{default:g(()=>[s("div",za,[s("div",Ka,[a(N,{value:r.value.CbmParameterId,max:10,placeholder:"Add ID CBM Parameter",label:"ID CBM Parameter",name:"CbmParameterId",onHandleChange:w},null,8,["value"])]),s("div",ja,[a(F,{placeholder:"Add ID Component",value:r.value.ComponentId,options:o(d).ComponentOption,label:"ID Component",name:"ComponentId",onHandleChange:M},null,8,["value","options"])]),s("div",Ya,[a(F,{value:r.value.TypeParameterId,options:o(d).ParameterTypeOption,label:"Type Parameter",placeholder:"Add Type Parameter",name:"TypeParameterId",onHandleChange:z},null,8,["value","options"])]),s("div",Xa,[a(F,{value:r.value.CbmGroup,options:o(d).CbmGroupOption,label:"CBM Group",placeholder:"Add CBM Group",name:"CbmGroup",onHandleChange:l},null,8,["value","options"])]),s("div",Ja,[a(F,{value:r.value.CbmArea,options:o(d).AreaCbmOption,label:"Area CBM",placeholder:"Add Area CBM",name:"CbmArea",onHandleChange:u},null,8,["value","options"])]),s("div",Qa,[a(F,{value:r.value.Model,options:o(d).ModelOption,label:"Model",placeholder:"Add Model",name:"Model",onHandleChange:m},null,8,["value","options"])]),s("div",Wa,[a(F,{value:r.value.PsType,options:o(d).PsTypeOption,label:"PS Type",placeholder:"Add PS Type",name:"PsType",onHandleChange:O},null,8,["value","options"])]),s("div",Za,[a(N,{value:r.value.TaskNumber,max:10,label:"Task Number",placeholder:"Add Task Number",name:"TaskNumber",onHandleChange:V},null,8,["value"])]),s("div",to,[a(N,{value:r.value.DetailNumber,max:20,label:"No Detail",placeholder:"Add No Detail",name:"DetailNumber",onHandleChange:P},null,8,["value"])]),s("div",eo,[a(F,{value:r.value.CbmParameter,options:o(d).CbmParameterOption,label:"CBM Parameter",placeholder:"Add CBM Parameter",name:"CbmParameter",onHandleChange:L},null,8,["value","options"])]),s("div",ao,[a(Gt,{value:r.value.Parameter,label:"Parameter",placeholder:"Add Parameter",name:"Parameter",onHandleChange:$},null,8,["value"])]),s("div",oo,[a(N,{value:r.value.ValueMin,max:10,label:"Value Min",placeholder:"Add Value Min",name:"ValueMin",onHandleChange:K},null,8,["value"])]),s("div",ro,[a(N,{value:r.value.ValueMax,max:10,label:"Value Max",placeholder:"Add Value Max",name:"ValueMax",onHandleChange:j},null,8,["value"])]),s("div",so,[a(F,{value:r.value.Uom,options:o(d).UomOption,label:"UOM",placeholder:"Add UOM",name:"Uom",onHandleChange:Y},null,8,["value","options"])]),s("div",no,[a(F,{value:r.value.StatusConverter,options:o(d).StatusConverterOption,label:"Status Converter",placeholder:"Add Status Converter",name:"StatusConverter",onHandleChange:X},null,8,["value","options"])]),s("div",io,[a(F,{value:r.value.StatusConverterDescription,options:o(d).StatusConverterDescriptionOption,label:"Status Converter Description",placeholder:"Add Status Converter Description",name:"StatusConverterDescription",onHandleChange:J},null,8,["value","options"])]),s("div",lo,[a(N,{value:r.value.Status,max:10,label:"Status",placeholder:"Add Status",name:"Status",onHandleChange:Q},null,8,["value"])]),s("div",uo,[a(N,{value:r.value.StatusDescription,max:60,label:"Status Description",placeholder:"Add Status Description",name:"StatusDescription",onHandleChange:W},null,8,["value"])]),s("div",mo,[a(ft,{value:r.value.StartDate?r.value.StartDate.toString():"",placeholder:"Add Start Date",label:"Start Date",name:"StartDate",onHandleChange:Z},null,8,["value"])]),s("div",co,[a(ft,{value:r.value.EndDate?r.value.EndDate.toString():"",placeholder:"Add End Date",label:"End Date",name:"EndDate",onHandleChange:tt},null,8,["value"])]),s("div",po,[a(We,{value:r.value.IsActive,label:"Is Active",name:"isActive",onHandleChange:at},null,8,["value"])])])]),_:1})]),_:1},8,["modelValue"])),[[dt,o(h).loading]])}}}),Co={class:"row g-4 my-4"},vo={class:"w-100 fv-row fv-plugins-icon-container"},bo={class:"w-100 fv-row fv-plugins-icon-container"},go={class:"w-100 fv-row fv-plugins-icon-container"},To={class:"w-100 fv-row fv-plugins-icon-container"},Po={class:"w-100 fv-row fv-plugins-icon-container"},So={class:"w-100 fv-row fv-plugins-icon-container"},fo={class:"w-100 fv-row fv-plugins-icon-container"},yo={class:"w-100 fv-row fv-plugins-icon-container"},Fo={class:"w-100 fv-row fv-plugins-icon-container"},_o={class:"w-100 fv-row fv-plugins-icon-container"},Io={class:"w-100 fv-row fv-plugins-icon-container"},Mo={class:"w-100 fv-row fv-plugins-icon-container"},Uo={class:"w-100 fv-row fv-plugins-icon-container"},ko={class:"w-100 fv-row fv-plugins-icon-container"},wo={class:"w-100 fv-row fv-plugins-icon-container"},Eo={class:"w-100 fv-row fv-plugins-icon-container"},Ao={class:"w-100 fv-row fv-plugins-icon-container"},No={class:"w-100 fv-row fv-plugins-icon-container"},Oo={class:"w-100 fv-row fv-plugins-icon-container"},Vo={class:"w-100 fv-row fv-plugins-icon-container"},Lo={class:"dialog-footer"},xo=nt({__name:"FilterDialog",props:{visibility:{type:Boolean,default:!1}},emits:["handle-close"],setup(t,{emit:n}){const e=ht(),T=t,h=n,C=Ft(T,"visibility"),d=q(()=>e.filterData),y=()=>{r(),e.resetFilter()},r=()=>{h("handle-close",!1)},v=i=>{e.setCbmParameterId(i)},k=i=>{e.setComponentId(i)},S=i=>{e.setCbmGroup(i)},I=i=>{e.setCbmArea(i)},f=i=>{e.setModelId(i)},w=i=>{e.setPsTypeId(i)},M=i=>{e.setTaskNumber(i)},l=i=>{e.setDetailNumber(i)},u=i=>{e.setCbmParameter(i)},m=i=>{e.setParameter(i)},O=i=>{e.setTypeParameter(i)},V=i=>{e.setMinValue(i)},P=i=>{e.setMaxValue(i)},L=i=>{e.setUom(i)},$=i=>{e.setStatusConverter(i)},z=i=>{e.setStatusDescriptionConverter(i)},K=i=>{e.setStatus(i)},j=i=>{e.setStatusDescription(i)},Y=i=>{e.setStartDate(i)},X=i=>{e.setEndDate(i)},J=i=>{e.setCbmParameterIdTo(i)},Q=i=>{e.setComponentIdTo(i)},W=i=>{e.setCbmGroupTo(i)},Z=i=>{e.setCbmAreaTo(i)},tt=i=>{e.setModelIdTo(i)},at=i=>{e.setPsTypeIdTo(i)},et=i=>{e.setTaskNumberTo(i)},p=i=>{e.setDetailNumberTo(i)},c=i=>{e.setCbmParameterTo(i)},H=i=>{e.setParameterTo(i)},ot=i=>{e.setTypeParameterTo(i)},lt=i=>{e.setMinValueTo(i)},dt=i=>{e.setMaxValueTo(i)},Dt=i=>{e.setUomTo(i)},qt=i=>{e.setStatusConverterTo(i)},zt=i=>{e.setStatusDescriptionConverterTo(i)},Kt=i=>{e.setStatusTo(i)},jt=i=>{e.setStatusDescriptionTo(i)},Yt=i=>{e.setStartDateTo(i)},Xt=i=>{e.setEndDateTo(i)},Jt=()=>{const i=e.lastUsedFilterData.ComponentId!==e.filterData.ComponentId,ut=e.lastUsedFilterData.CbmGroup!==e.filterData.CbmGroup,Ct=e.lastUsedFilterData.CbmArea!==e.filterData.CbmArea,Mt=e.lastUsedFilterData.CbmParameterId!==e.filterData.CbmParameterId,vt=e.lastUsedFilterData.ModelId!==e.filterData.ModelId,Qt=e.lastUsedFilterData.PsTypeId!==e.filterData.PsTypeId,Wt=e.lastUsedFilterData.TaskNumber!==e.filterData.TaskNumber,Zt=e.lastUsedFilterData.DetailNumber!==e.filterData.DetailNumber,te=e.lastUsedFilterData.CbmParameter!==e.filterData.CbmParameter,ee=e.lastUsedFilterData.Parameter!==e.filterData.Parameter,ae=e.lastUsedFilterData.MinValue!==e.filterData.MinValue,oe=e.lastUsedFilterData.MaxValue!==e.filterData.MaxValue,re=e.lastUsedFilterData.Uom!==e.filterData.Uom,se=e.lastUsedFilterData.TypeParameterId!==e.filterData.TypeParameterId,ne=e.lastUsedFilterData.StatusConverter!==e.filterData.StatusConverter,ie=e.lastUsedFilterData.StatusDescriptionConverter!==e.filterData.StatusDescriptionConverter,le=e.lastUsedFilterData.Status!==e.filterData.Status,de=e.lastUsedFilterData.StatusDescription!==e.filterData.StatusDescription,ue=e.lastUsedFilterData.StartDate!==e.filterData.StartDate,me=e.lastUsedFilterData.EndDate!==e.filterData.EndDate,ce=e.lastUsedFilterData.ComponentIdTo!==e.filterData.ComponentIdTo,pe=e.lastUsedFilterData.CbmGroupTo!==e.filterData.CbmGroupTo,he=e.lastUsedFilterData.CbmAreaTo!==e.filterData.CbmAreaTo,De=e.lastUsedFilterData.CbmParameterIdTo!==e.filterData.CbmParameterIdTo,Ce=e.lastUsedFilterData.ModelIdTo!==e.filterData.ModelIdTo,ve=e.lastUsedFilterData.PsTypeIdTo!==e.filterData.PsTypeIdTo,be=e.lastUsedFilterData.TaskNumberTo!==e.filterData.TaskNumberTo,ge=e.lastUsedFilterData.DetailNumberTo!==e.filterData.DetailNumberTo,Te=e.lastUsedFilterData.CbmParameterTo!==e.filterData.CbmParameterTo,Pe=e.lastUsedFilterData.ParameterTo!==e.filterData.ParameterTo,Se=e.lastUsedFilterData.MinValueTo!==e.filterData.MinValueTo,fe=e.lastUsedFilterData.MaxValueTo!==e.filterData.MaxValueTo,ye=e.lastUsedFilterData.UomTo!==e.filterData.UomTo,Fe=e.lastUsedFilterData.TypeParameterIdTo!==e.filterData.TypeParameterIdTo,_e=e.lastUsedFilterData.StatusConverterTo!==e.filterData.StatusConverterTo,Ie=e.lastUsedFilterData.StatusDescriptionConverterTo!==e.filterData.StatusDescriptionConverterTo,Me=e.lastUsedFilterData.StatusTo!==e.filterData.StatusTo,Ue=e.lastUsedFilterData.StatusDescriptionTo!==e.filterData.StatusDescriptionTo,ke=e.lastUsedFilterData.StartDateTo!==e.filterData.StartDateTo,we=e.lastUsedFilterData.EndDateTo!==e.filterData.EndDateTo;h("handle-close",i||ut||Ct||Mt||vt||Qt||Wt||Zt||te||ee||ae||oe||re||ne||ie||le||de||ue||me||se||ce||pe||he||De||Ce||ve||be||ge||Te||Pe||Se||fe||ye||Fe||_e||Ie||Me||Ue||ke||we)};return(i,ut)=>{const Ct=R("el-button"),Mt=R("el-dialog");return A(),B(Mt,{modelValue:C.value,"onUpdate:modelValue":ut[0]||(ut[0]=vt=>C.value=vt),title:"Filter",width:"60%",onClose:ut[1]||(ut[1]=vt=>r())},{footer:g(()=>[s("span",Lo,[a(Ct,{type:"secondary",onClick:y},{default:g(()=>[G("Reset")]),_:1}),a(Ct,{type:"primary",onClick:Jt},{default:g(()=>[G("Filter")]),_:1})])]),default:g(()=>[s("div",Co,[s("div",vo,[a(_,{"value-from":d.value.CbmParameterId,"value-to":d.value.CbmParameterIdTo,placeholder:"Add ID CBM Parameter",label:"ID CBM Parameter",onHandleChangeFrom:v,onHandleChangeTo:J,options:o(e).CbmParameterIDOption},null,8,["value-from","value-to","options"])]),s("div",bo,[a(_,{placeholder:"Add ID Component","value-from":d.value.ComponentId,"value-to":d.value.ComponentIdTo,options:o(e).ComponentOption,label:"ID Component",onHandleChangeFrom:k,onHandleChangeTo:Q},null,8,["value-from","value-to","options"])]),s("div",go,[a(_,{"value-from":d.value.TypeParameterId,"value-to":d.value.TypeParameterIdTo,label:"Type Parameter",placeholder:"Add Type Parameter",onHandleChangeFrom:O,onHandleChangeTo:ot,options:o(e).ParameterTypeOption},null,8,["value-from","value-to","options"])]),s("div",To,[a(_,{"value-from":d.value.CbmGroup,"value-to":d.value.CbmGroupTo,options:o(e).CbmGroupOption,label:"CBM Group",placeholder:"Add CBM Group",onHandleChangeFrom:S,onHandleChangeTo:W},null,8,["value-from","value-to","options"])]),s("div",Po,[a(_,{"value-from":d.value.CbmArea,"value-to":d.value.CbmAreaTo,options:o(e).AreaCbmOption,label:"Area CBM",placeholder:"Add Area CBM",onHandleChangeFrom:I,onHandleChangeTo:Z},null,8,["value-from","value-to","options"])]),s("div",So,[a(_,{"value-from":d.value.ModelId,"value-to":d.value.ModelIdTo,options:o(e).ModelOption,label:"Model",placeholder:"Add Model",onHandleChangeFrom:f,onHandleChangeTo:tt},null,8,["value-from","value-to","options"])]),s("div",fo,[a(_,{"value-from":d.value.PsTypeId,"value-to":d.value.PsTypeIdTo,options:o(e).PsTypeOption,label:"PS Type",placeholder:"Add PS Type",onHandleChangeFrom:w,onHandleChangeTo:at},null,8,["value-from","value-to","options"])]),s("div",yo,[a(_,{"value-from":d.value.TaskNumber,"value-to":d.value.TaskNumberTo,label:"Task Number",placeholder:"Add Task Number",onHandleChangeFrom:M,onHandleChangeTo:et,options:o(e).TaskNumberOption},null,8,["value-from","value-to","options"])]),s("div",Fo,[a(_,{"value-from":d.value.DetailNumber,"value-to":d.value.DetailNumberTo,label:"No Detail",placeholder:"Add No Detail",onHandleChangeFrom:l,onHandleChangeTo:p,options:o(e).DetailNumberOption},null,8,["value-from","value-to","options"])]),s("div",_o,[a(_,{"value-from":d.value.CbmParameter,"value-to":d.value.CbmParameterTo,options:o(e).CbmParameterOption,label:"CBM Parameter",placeholder:"Add CBM Parameter",onHandleChangeFrom:u,onHandleChangeTo:c},null,8,["value-from","value-to","options"])]),s("div",Io,[a(_,{"value-from":d.value.Parameter,"value-to":d.value.ParameterTo,label:"Parameter",placeholder:"Add Parameter",onHandleChangeFrom:m,onHandleChangeTo:H,options:o(e).ParameterOption},null,8,["value-from","value-to","options"])]),s("div",Mo,[a(_,{"value-from":d.value.MinValue,"value-to":d.value.MinValueTo,label:"Value Min",placeholder:"Add Value Min",onHandleChangeFrom:V,onHandleChangeTo:lt,options:o(e).MinValueOption},null,8,["value-from","value-to","options"])]),s("div",Uo,[a(_,{"value-from":d.value.MaxValue,"value-to":d.value.MaxValueTo,label:"Value Max",placeholder:"Add Value Max",onHandleChangeFrom:P,onHandleChangeTo:dt,options:o(e).MaxValueOption},null,8,["value-from","value-to","options"])]),s("div",ko,[a(_,{"value-from":d.value.Uom,"value-to":d.value.UomTo,options:o(e).UomOption,label:"UOM",placeholder:"Add UOM",name:"Uom",onHandleChangeFrom:L,onHandleChangeTo:Dt},null,8,["value-from","value-to","options"])]),s("div",wo,[a(_,{"value-from":d.value.StatusConverter,"value-to":d.value.StatusConverterTo,options:o(e).StatusConverterOption,label:"Status Converter",placeholder:"Add Status Converter",onHandleChangeFrom:$,onHandleChangeTo:qt},null,8,["value-from","value-to","options"])]),s("div",Eo,[a(_,{"value-from":d.value.StatusDescriptionConverter,"value-to":d.value.StatusDescriptionConverterTo,options:o(e).StatusConverterDescriptionOption,label:"Status Converter Description",placeholder:"Add Status Converter Description",onHandleChangeFrom:z,onHandleChangeTo:zt},null,8,["value-from","value-to","options"])]),s("div",Ao,[a(_,{"value-to":d.value.StatusTo,"value-from":d.value.Status,label:"Status",placeholder:"Add Status",onHandleChangeFrom:K,onHandleChangeTo:Kt,options:o(e).StatusOption},null,8,["value-to","value-from","options"])]),s("div",No,[a(_,{"value-to":d.value.StatusDescriptionTo,"value-from":d.value.StatusDescription,label:"Status Description",placeholder:"Add Status Description",onHandleChangeFrom:j,onHandleChangeTo:jt,options:o(e).StatusDescriptionOption},null,8,["value-to","value-from","options"])]),s("div",Oo,[a(Nt,{"value-to":d.value.StartDateTo,"value-from":d.value.StartDate,placeholder:"Add Start Date",label:"Start Date",onHandleChangeFrom:Y,onHandleChangeTo:Yt},null,8,["value-to","value-from"])]),s("div",Vo,[a(Nt,{"value-from":d.value.EndDate,"value-to":d.value.EndDateTo,placeholder:"Add End  Date",label:"End  Date",onHandleChangeFrom:X,onHandleChangeTo:Xt},null,8,["value-from","value-to"])])])]),_:1},8,["modelValue"])}}}),Rt=Et({id:"ParameterEhmsBulk",state:()=>({statePagination:new Pt,stateValidatedData:[],stateDisplayData:[],stateBulkData:[],stateIsError:!1,stateError:"",stateLoading:!1,stateUploadLoading:!1,stateIsUploaded:!1,stateIsSort:!1,stateSortBy:null,stateSortOrder:null}),getters:{validatedData:t=>t.stateValidatedData,displayData:t=>t.stateDisplayData,pagination:t=>t.statePagination,bulkData:t=>t.stateBulkData,error:t=>t.stateError,isError:t=>t.stateIsError,loading:t=>t.stateLoading,uploadLoading:t=>t.stateUploadLoading,isUploaded:t=>t.stateIsUploaded},actions:{async bulkInsert(t){const n={userAccount:t,ver:"v1"};try{this.stateLoading=!0;const e=await U.post(`${la}?${new URLSearchParams(n).toString()}`,this.stateBulkData);this.stateError=e.data.result.isError?e.data.result.message:"",this.stateIsError=e.data.result.isError}catch(e){console.log(e)}this.stateLoading=!1},async upload({userAccount:t,excelFile:n}){const e={userAccount:t,ver:"v1"},T=`${da}?${new URLSearchParams(e).toString()}`;try{this.stateIsError=!1,this.stateError="",this.stateValidatedData=[],this.stateDisplayData=[],this.stateUploadLoading=!0;const h=await U.postImages(T,n);h.data.statusCode==200?h.data.result.isError?(this.stateIsError=!0,this.stateError=h.data.result.message):(this.setIsUploadedState(!0),this.stateValidatedData=h.data.result.content,this.setTotalPage(this.stateValidatedData.length),this.stateIsError=Ze.some(this.stateValidatedData,{isValid:!1}),this.setPage(1)):(this.stateIsError=h.data.result.isError,this.stateError=h.data.result.message)}catch(h){console.log(h),this.stateIsError=!0,this.stateError=h.response.data.result.message}this.stateUploadLoading=!1},setTotalPage(t){this.pagination.totalPage=t},setDisplayData(){let t=[...this.stateValidatedData];this.stateIsSort&&(t=t.sort(Be(this.stateSortBy,this.stateSortOrder))),this.stateDisplayData=t.slice(this.statePagination.startPaginationIndex,this.statePagination.endPaginationIndex)},setPage(t){this.statePagination.handleCurrentPageChange(t),this.setDisplayData()},setSort(t){this.stateIsSort=t.prop!==null,this.stateSortBy=t.prop,this.stateSortOrder=t.order,this.setPage(1)},setBulkData(t){this.stateBulkData=t},setIsUploadedState(t){this.stateIsUploaded=t},resetState(){this.stateValidatedData=[],this.stateDisplayData=[],this.stateBulkData=[],this.statePagination=new Pt,this.stateIsError=!1,this.stateError="",this.stateLoading=!1,this.stateUploadLoading=!1,this.stateIsSort=!1,this.stateSortBy=null,this.stateSortOrder=null}}}),$o={class:"icon"},Ho=nt({__name:"GridBulk",props:{listData:{required:!0,type:Array},page:{required:!0,type:Number,default:1}},setup(t){const n=t,e=Rt(),T=q(()=>(n.page-1)*10+1),h=C=>{const d={prop:C.prop,order:C.order};e.setSort(d)};return(C,d)=>{const y=R("inline-svg");return A(),B(o(Vt),{data:n.listData,style:{width:"100%"},onSortChange:h,"empty-text":"No Data"},{default:g(()=>[a(o(D),{label:"No",width:"60",align:"center"},{default:g(r=>[s("span",null,st(T.value+r.$index),1)]),_:1}),a(o(D),{prop:"cbmParameterId",label:"ID CBM Parameter",width:"170",sortable:""}),a(o(D),{prop:"componentId",label:"ID Component",width:"170",sortable:""}),a(o(D),{prop:"typeParameterId",label:"ID Type Parameter",width:"170",sortable:""}),a(o(D),{prop:"cbmGroup",label:"CBM Group",width:"170",sortable:""}),a(o(D),{prop:"cbmArea",label:"AREA CBM",width:"170",sortable:""}),a(o(D),{prop:"model",label:"Model",width:"170",sortable:""}),a(o(D),{prop:"psType",label:"PS Type",width:"170",sortable:""}),a(o(D),{prop:"taskNumber",label:"Task Number",width:"170",sortable:""}),a(o(D),{prop:"detailNumber",label:"No detail",width:"170",sortable:""}),a(o(D),{prop:"cbmParameter",label:"CBM Parameter",width:"170",sortable:""}),a(o(D),{prop:"parameter",label:"Parameter",width:"170",sortable:""}),a(o(D),{prop:"valueMin",label:"Value Min",width:"170",sortable:""}),a(o(D),{prop:"valueMax",label:"Value Max",width:"170",sortable:""}),a(o(D),{prop:"uom",label:"UOM",width:"170",sortable:""}),a(o(D),{prop:"statusConverter",label:"Status Converter",width:"170",sortable:""}),a(o(D),{prop:"statusConverterDescription",label:"Status Converter Description",width:"170",sortable:""}),a(o(D),{prop:"status",label:"Status",width:"170",sortable:""}),a(o(D),{prop:"statusDescription",label:"Status Description",width:"170",sortable:""}),a(o(D),{prop:"startDate",label:"Start Date",align:"center",width:"170",sortable:""},{default:g(r=>[s("span",null,st(o(mt)(r.row.startDate)),1)]),_:1}),a(o(D),{prop:"endDate",label:"End Date",align:"center",width:"170",sortable:""},{default:g(r=>[s("span",null,st(o(mt)(r.row.endDate)),1)]),_:1}),a(o(D),{prop:"validationReason",label:"Remark","min-width":"300",sortable:""}),a(o(D),{prop:"isValid",label:"Status",width:"100",sortable:""},{default:g(r=>[s("div",$o,[a(y,{src:r.row.isValid?"/media/svg/tables/rows/valid-true.svg":"/media/svg/tables/rows/valid-false.svg"},null,8,["src"])])]),_:1})]),_:1},8,["data"])}}}),At=t=>(je("data-v-33425211"),t=t(),Ye(),t),Bo=At(()=>s("div",{class:"text-center"},null,-1)),Go=At(()=>s("div",{class:"mb-3"},[s("span",null,[G(" Download template "),s("a",{href:"documents/Parameter.xlsx",target:"_blank",id:"link-download"},"here"),G(" before uploading file ")])],-1)),Ro=At(()=>s("div",{class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},[s("div",{class:"d-flex align-items-center position-relative my-0 mb-2"})],-1)),qo={class:"card"},zo={class:"card-body grid-padding"},Ko={class:"dialog-footer"},jo=nt({__name:"UploadBulkDialog",props:{visibility:{required:!0,type:Boolean}},emits:["handle-close"],setup(t,{emit:n}){const e=t,T=n,h=kt(),C=Rt(),d=Ft(e,"visibility"),y=()=>{const l=ea(C.validatedData,u=>{const m=u;return{ParameterEhmsId:"0",ComponentId:m.componentId,CbmGroup:m.cbmGroup,CbmArea:m.cbmArea,CbmParameterId:m.cbmParameterId,Model:m.model,PsType:m.psType,TaskNumber:m.taskNumber,DetailNumber:m.detailNumber,CbmParameter:m.cbmParameter,Parameter:m.parameter,ValueMin:m.valueMin,ValueMax:m.valueMax,Uom:m.uom,StatusConverter:m.statusConverter,StatusConverterDescription:m.statusConverterDescription,Status:m.status,StatusDescription:m.statusDescription,StartDate:m.startDate,EndDate:m.endDate,TypeParameterId:m.typeParameterId,IsActive:!0}});return Object.values(l)},r=()=>{const l=document.getElementById("link-download");l&&l.click()},v=()=>{C.validatedData.length>0?Tt("Cancel Upload Data ?","Confirm").then(u=>{u.isConfirmed&&S()}):S()},k=async l=>{await C.upload({userAccount:h.user.Name,excelFile:l}),C.stateError&&bt(C.error)},S=(l=!1)=>{C.resetState(),T("handle-close",l)},I=l=>{C.setIsUploadedState(l)},f=l=>{C.setPage(l)},w=()=>{if(C.validatedData.length<1){r();return}const l=["ID CBM PARAMETER","ID COMPONENT","ID TYPE PARAMETER","CBM GROUP","AREA CBM","MODEL","PS TYPE","TASK NUMBER","NO DETAIL","CBM PARAMETER","PARAMETER","VALUE MIN","VALUE MAX","UOM","STATUS CONVERTER","STATUS CONVERTER DESCRIPTION","STATUS","STATUS DESCRIPTION","START DATE","END DATE","REMARK","STATUS"],u=C.validatedData.map(m=>({CbmParameterId:m.cbmParameterId,ComponentId:m.componentId,TypeParameterId:m.typeParameterId,CbmGroup:m.cbmGroup,CbmArea:m.cbmArea,Model:m.model,PsType:m.psType,TaskNumber:m.taskNumber,DetailNumber:m.detailNumber,CbmParameter:m.cbmParameter,Parameter:m.parameter,ValueMin:m.valueMin,ValueMax:m.valueMax,Uom:m.uom,StatusConverter:m.statusConverter,StatusConverterDescription:m.statusConverterDescription,Status:m.status,StatusDescription:m.statusDescription,startDate:mt(m.startDate?m.startDate.toString():""),endDate:mt(m.endDate?m.endDate.toString():""),remark:m.validationReason,status:m.isValid?"OK":"Error"}));Ve("Parameter",l,u)},M=async()=>{if(C.displayData.length<1){bt("There is no data to submit");return}if(C.isError){bt("There is still invalid row(s)");return}Tt("Are you sure to submit ?").then(async l=>{if(l.isConfirmed){const u=y();if(C.setBulkData(u),await C.bulkInsert(h.user.Name),C.isError){bt(C.stateError);return}wt("Form has been successfully submitted!","Ok").then(()=>{S(!0)})}})};return(l,u)=>{const m=R("el-button"),O=R("el-dialog"),V=yt("loading");return A(),B(O,{title:"Upload Bulk Data",modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=P=>d.value=P),"before-close":v,width:"70%","custom-class":"upload-modal"},{footer:g(()=>[s("div",null,[s("span",Ko,[a(m,{type:"success",onClick:w},{default:g(()=>[G("Download")]),_:1}),a(m,{type:"primary",onClick:M},{default:g(()=>[G("Upload")]),_:1}),a(m,{type:"success",onClick:v},{default:g(()=>[G("Cancel")]),_:1})])])]),default:g(()=>[Bo,Go,ct(a(ta,{isSubmissionUploadSuccess:o(C).isUploaded,onHandleCloseUploadedFile:v,onHandleUpload:k,onHandleSetIsExcelFileUploaded:I},null,8,["isSubmissionUploadSuccess"]),[[V,o(C).uploadLoading]]),Ro,s("div",qo,[s("div",zo,[a(Ho,{"list-data":o(C).displayData,page:o(C).pagination.currentPage},null,8,["list-data","page"])])]),o(C).displayData.length>0?(A(),B(Ot,{key:0,onRaisePageChange:u[0]||(u[0]=P=>f(P)),currentPage:o(C).pagination.currentPage,totalPage:o(C).pagination.totalPage,totalPageSize:o(C).pagination.totalPageSize,startPaginationIndex:o(C).pagination.startPaginationIndex,endPaginationIndex:o(C).pagination.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"])):_t("",!0)]),_:1},8,["modelValue"])}}}),Yo=aa(jo,[["__scopeId","data-v-33425211"]]),Xo={class:"grid-icon-buttons d-flex justify-content-between flex-wrap align-items-center"},Jo=s("div",{class:"d-flex align-items-center position-relative my-0"},null,-1),Qo={class:"d-flex justify-content-between align-items-center"},Wo={class:"card"},Zo={class:"card-body grid-padding"},tr={class:"my-5"},cs=nt({__name:"Index",setup(t){const n=Ee(),e=ht(),T=It(),h=pt(!1),C=pt(!1),d=pt(!1),y=pt(!1),r=q(()=>e.displayData),v=q(()=>e.pagination),k=P=>{e.setPage(P)};Xe(async()=>{n.dispatch(Ne.ACTIVE_PAGE,"IronLake"),Ae("Parameter",[{pageName:"Iron Lake",pageRoute:"ironlake"},{pageName:"Parameter",pageRoute:"parameterehms"},{pageName:"Parameter",pageRoute:"parameterehms"}]),e.setPage(1),e.getLookup(),e.getComponentLookUp(),e.getModelLookUp(),e.getPsTypeLookUp(),e.getUomLookUp(),e.getAreaCbmLookUp(),e.getStatusConverterLookUp(),e.getCbmParameterLookUp(),e.getCbmGroupLookUp(),e.getParameterLookUp()}),Je(async()=>{e.resetState(),T.resetState()});const S=async()=>{await e.setPage(1),e.getLookup(),e.getComponentLookUp(),e.getModelLookUp(),e.getPsTypeLookUp(),e.getUomLookUp(),e.getAreaCbmLookUp(),e.getStatusConverterLookUp(),e.getCbmParameterLookUp(),e.getCbmGroupLookUp(),e.getParameterLookUp()},I=()=>{h.value=!0},f=async P=>{h.value=!1,P&&await S()},w=()=>{C.value=!0},M=()=>{d.value=!0},l=async P=>{d.value=!1,P&&await S()},u=async P=>{C.value=!1,P&&await S()},m=async()=>{const P=await e.export();oa.saveAs(new Blob([P],{type:"application/octet-stream"}),"Parameter.xlsx")},O=()=>{y.value=!0},V=async P=>{y.value=!1,P&&await S()};return(P,L)=>(A(),gt(Qe,null,[s("div",Xo,[Jo,s("div",Qo,[a(Le,{onShowDialog:I}),a(Oe,{onShowDialog:M}),a($e,{onHandleDownload:m}),a(xe,{onShowDialog:O})])]),s("div",Wo,[s("div",Zo,[a(Pa,{"list-data":r.value,page:v.value.currentPage,onShowDialog:w},null,8,["list-data","page"])])]),s("div",tr,[o(e).paginationLoading?_t("",!0):(A(),B(Ot,{key:0,onRaisePageChange:L[0]||(L[0]=$=>k($)),currentPage:v.value.currentPage,totalPage:v.value.totalPage,totalPageSize:v.value.totalPageSize,startPaginationIndex:v.value.startPaginationIndex,endPaginationIndex:v.value.endPaginationIndex},null,8,["currentPage","totalPage","totalPageSize","startPaginationIndex","endPaginationIndex"]))]),a(qa,{visibility:h.value,onHandleClose:f},null,8,["visibility"]),a(Do,{visibility:C.value,onHandleClose:u},null,8,["visibility"]),a(xo,{visibility:d.value,onHandleClose:l},null,8,["visibility"]),a(Yo,{visibility:y.value,onHandleClose:V},null,8,["visibility"])],64))}});export{cs as default};
