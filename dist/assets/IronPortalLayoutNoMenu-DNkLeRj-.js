import{a as z,b as F,c as S}from"./index-BuVmIl8K.js";import{u as O}from"./useCronStore-CDY_CiV6.js";import{e as E}from"./lodash-DrHMlsdo.js";import{v as V,w as W}from"./date-format-8-IvfSl3.js";import{b as q,u as G}from"./vue-router-iNp9kJ0K.js";import{c as H,a as K}from"./get-user-info-DjfNX8-X.js";import{u as Q}from"./@vueuse-DFoNmIyu.js";import{u as X}from"./useSyncStore-DsLBNjEA.js";import{u as Y}from"./useMsal-BbsBYoof.js";import{i as g,r as P}from"./internet-connection-CnLQPjRt.js";import{d as Z}from"./cron-De-pTz2b.js";import{k as ee,r as u,c as a,d as v,a7 as te,o as oe,p,aa as w,s as d,x as ne,aB as e,q as se,F as ae,R as f,C as r,u as x}from"./@vue-BypzYtbH.js";import{_ as re}from"./nw-img-vue-CR837WER.js";import"./pinia-BjOS2_Ao.js";import"./object-path-DPahbflh.js";import"./@popperjs-BaMZbQYT.js";import"./deepmerge-oeePEK50.js";import"./crypto-js-BeOoaXQg.js";import"./dexie-CWyjz2Lo.js";import"./vuex-BbOKrtVp.js";import"./element-plus-BeWdvTRa.js";import"./dayjs-D0x2Df_K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./normalize-wheel-D6ofg2JO.js";import"./mitt-C1xD_ZTF.js";import"./async-validator-DK9uouaC.js";import"./axios-CU9oF0EU.js";import"./vue-axios-BaogFJPH.js";import"./sweetalert2-CppYEwAE.js";import"./@azure-DwL0pga8.js";import"./uuid-SoommWqA.js";import"./vue-inline-svg-Bgl3eqMC.js";import"./vee-validate-C_msoaAA.js";import"./@microsoft-C248spM2.js";import"./@nevware21-CKApUIxW.js";import"./btech-analytics-wrapper-DOvMtwpJ.js";import"./posthog-js-CbYOvutT.js";import"./vue-i18n-CbVMwo04.js";import"./@intlify-YGwFW6EB.js";import"./prismjs-BrsEfPfk.js";import"./luxon-C_T8jI2d.js";import"./moment-C5S46NFB.js";import"./useBodyStore-L-idhAYV.js";import"./useMasterStore-CzSO06fn.js";const ie={class:"ironportal-logo top-menu-item"},ce={class:"ironportal-logo top-menu-item"},le={class:"top-menu-item d-flex justify-content-end align-items-center"},me={id:"user-menu"},ue={class:"px-md-10 px-sm-5 d-flex align-items-center",style:{width:"max-content","justify-content":"normal",height:"60px"}},pe={key:0,class:"symbol symbol-circle"},de=["src"],fe={key:1,class:"symbol avatar-card symbol-circle firstname-placeholder text-center d-flex flex-row justify-content-center align-items-center py-5"},_e={class:"d-flex flex-column",style:{"margin-left":"10px",width:"70%"}},he={class:"d-flex align-items-center text-white wrap name-container justify-content-between text-medium fw-600"},ge={class:"text-elipsis text-green text-normal fw-500",style:{"text-align":"left",width:"max-content"}},ve={class:"w-100 top-menu-time"},we={class:"text-green fw-500 text-normal"},xe={class:"text-white fw-400 text-normal"},ye={class:"ironportal-content"},be=ee({__name:"IronPortalLayoutNoMenu",setup(ke){const R=Q(),N=q(),y=G(),n=z();O();const{instance:i}=Y(),B=u(0),j=F(),C=u(""),c=u(""),l=u(""),b=a(()=>n.userPic),I=a(()=>N.path),D=a(()=>E.isUndefined(n.user.Name)?"":n.user.Name[0]),M=a(()=>{var s;return typeof((s=n.user)==null?void 0:s.Name)!=="undefined"?n.user.Name:""}),U=a(()=>n.loggedIn),A=async()=>{const t="https://digital-bumaau-dev-apm-001.azure-api.net/utility/api/master_attachment/download_by_url_ehms",s={ver:"v1"};try{const o=await S.getBlob(t,"",new URLSearchParams(s).toString()),h=new Blob([o.data]);C.value=URL.createObjectURL(h)}catch(o){console.log(o)}},L=async()=>{const t="https://digital-bumaau-dev-apm-001.azure-api.net/ehms/api/master_week",s={ver:"v1"};try{const o=await S.get(t,"week_number",new URLSearchParams(s).toString());c.value=o.data.result.content.weekNumber,l.value=o.data.result.content.date}catch(o){console.log(o)}},T=()=>{y.push({name:"mydashboard"})},_=X(),m=a(()=>_.jobRenewToken),k=()=>{if(!(m.value&&m.value.running))if(m.value)m.value.start();else{const t=new Z.CronJob("*/10 * * * *",async function(){P(i)},null,!0);_.setJobRenewTokenRunning(t)}};return v(U,t=>{t||P(i)}),v(I,t=>{j.authPage(t)||y.push({name:"401"})}),te(async()=>{await H(i),await K(!g(),i),await A(),await L(),n.userPic==""&&await n.setUserProfilePic(!g())}),oe(()=>{g()||k()}),v(R,t=>{t?k():_.stopAllJob()}),(t,s)=>{const o=f("el-image"),h=f("el-divider"),J=f("el-menu"),$=f("router-view");return p(),w(ae,null,[d(J,{mode:"horizontal","background-color":"#2d2b39",ellipsis:!1,class:"ironportal-top-menu d-flex align-items-center justify-content-between"},{default:ne(()=>[e("div",ie,[e("a",{href:"javascript:void(0)",onClick:s[0]||(s[0]=Se=>T())},[d(o,{style:{height:"40px"},class:"px-md-10 px-sm-2",src:"/media/logos/logo-whitebg.png",alt:"BUMA AU logo"})])]),e("div",ce,[d(o,{style:{height:"50px",margin:"0 auto"},src:"/media/logos/iron-portal/ironportal-white.png",alt:"IronPortal logo"})]),e("div",le,[e("div",me,[e("div",ue,[b.value!=""?(p(),w("div",pe,[e("img",{class:"menu-avatar-img",src:b.value,alt:"metronic",style:{height:"50px",width:"50px"}},null,8,de)])):(p(),w("div",fe,[e("span",null,r(D.value),1)])),e("div",_e,[e("div",he,r(M.value),1),e("span",ge,r(x(n).user.Position),1),e("div",ve,[e("span",we,r(c.value&&c.value!=""?c.value:"Week -"),1),d(h,{direction:"vertical"}),e("span",xe,r(l.value&&l.value!=""?x(V)(x(W)(new Date(l.value))):"-"),1)])])])])])]),_:1}),e("div",ye,[(p(),se($,{key:B.value}))])],64)}}}),_t=re(be,[["__scopeId","data-v-d7a3a7e6"]]);export{_t as default};
